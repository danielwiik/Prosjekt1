<project xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.kw-software.com/xml/PLCopen/TC6_XML_V10_KW.xsd">
	<fileHeader companyName="Phoenix Contact" companyURL="https://www.phoenixcontact-software.com" productName="PC WORX" productVersion="6.30" productRelease="Build 245" creationDateTime="2017-11-14T14:32:32" contentDescription="###XMLINFO=1;1;"/>
	<contentHeader name="ATSapplic_DW_01_GIT" version="1510666352" modificationDateTime="2017-11-14T14:32:32" connectionCheck="true">
		<coordinateInfo>
			<pageSize x="999" y="9999"/>
			<fbd>
				<scaling x="2" y="2"/>
			</fbd>
			<ld>
				<scaling x="2" y="2"/>
			</ld>
			<sfc>
				<scaling x="2" y="2"/>
			</sfc>
		</coordinateInfo>
	</contentHeader>
	<libraries>
		<library name="AnalogTechnology_V1_26" firmware="false" path="\AnalogTechnology_V1_26.mwt"/>
		<library name="Modbus_V2_02" firmware="false" path="\Modbus_V2_02.mwt"/>
		<library name="IT_Library_V1_34" firmware="false" path="\IT_Library_V1_34.mwt"/>
		<library name="TransBasic_00_02" firmware="false" path="\TransBasic_00_02.mwt"/>
	</libraries>
	<types>
		<dataTypes>
			<datatypeWorksheet>
				<html xmlns="http://www.w3.org/1999/xhtml">
					<div xml:space="preserve" id="MWTDESCRIPTION" wsName="ALI" xmlns="http://www.w3.org/1999/xhtml">(*	DATATYPES	*)<br/>Type<br/>(*	Strings	*)<br/>	String_3					:	String(3);<br/>	String_5					:	String(5);<br/>	STRING_12					:	STRING(12);<br/>	STRING_15					:	STRING(15);<br/>	STRING_20					:	STRING(20);<br/>	STRING_30					:	STRING(30);<br/>	String_50					:	String(50);<br/>	String_75					:	String(75);<br/>	String_200					:	String(200);<br/>	String_500					:	String(500);<br/>	String_700					:	String(700);<br/>
						<br/>(*	Bool	Arrays	*)<br/>	ARR_X_0_4					:	Array	[0..4]	of	Bool;<br/>	ARR_X_0_9					:	Array	[0..9]	of	Bool;<br/>	ARR_X_1_4					:	Array	[1..4]	of	Bool;<br/>	ARR_X_1_5					:	Array	[1..5]	of	Bool;<br/>	ARR_X_1_8					:	Array	[1..8]	of	Bool;<br/>	ARR_X_1_12					:	Array	[1..12]	of	Bool;<br/>	ARR_X_1_15					:	Array	[1..15]	of	Bool;<br/>	ARR_X_1_22					:	Array	[1..22]	of	Bool;<br/>	ARR_X_1_24					:	Array	[1..24]	of	Bool;<br/>	ARR_X_1_25					:	Array	[1..25]	of	Bool;<br/>	ARR_X_1_50					:	Array	[1..50]	of	Bool;<br/>	ARR_X_1_240					:	Array	[1..240]	of	Bool;<br/>
						<br/>(*	Byte-ArrayS	*)<br/>(*	ARR_B_1_4					:	Array	[1..4]		of	Byte;*)<br/>	ARR_B_1_6					:	Array	[1..6]		of	Byte;<br/>	ARR_B_1_12					:	Array	[1..12]		of	Byte;<br/>	ARR_B_1_15					:	Array	[1..15]		of	Byte;<br/>	ARR_B_0_255					:	Array	[0..511]	of	Byte;<br/>	ARR_B_0_511					:	Array	[0..511]	of	Byte;<br/>	ARR_B_0_5000				:	Array	[0..5000]	of	Byte;<br/>	Array_1_250_Byte			:	Array	[1..250]	of	Byte;<br/>
						<br/>(*	Word-ArrayS	*)<br/>	ARR_W_0_1					:	Array	[0..1]		of	Word;<br/>	ARR_W_1_2					:	Array	[1..2]		of	Word;<br/>	ARR_W_1_3					:	Array	[1..3]		of	Word;<br/>	ARR_W_1_4					:	Array	[1..4]		of	Word;<br/>	ARR_W_1_6					:	Array	[1..6]		of	Word;<br/>	ARR_W_0_10					:	Array	[0..10]		of	Word;<br/>	ARR_W_0_90					:	Array	[0..90]		of	Word;<br/>	ARR_W_1_120					:	Array	[1..120]	of	Word;<br/>	ARR_W_1_512					:	Array	[1..512]	of	Word;<br/>
						<br/>(*	Int	Arrays	*)<br/>	Arr_I_0_4					:	Array	[0..4]	of Int;<br/>	Arr_I_0_9					:	Array	[0..9]	of Int;<br/>	Arr_I_1_3					:	Array	[1..3]	of Int;<br/>	ARR_I_1_4					:	Array	[1..4]	of Int;<br/>	ARR_I_1_5					:	Array	[1..5]	of Int;<br/>	ARR_I_1_15					:	Array	[1..15]	of Int;<br/>	ARR_I_1_22					:	Array	[1..22]	of Int;<br/>	ARR_I_1_23					:	Array	[1..23]	of Int;<br/>	ARR_I_1_50					:	Array	[1..50]	of Int;<br/>	ARR_I_1_24					:	Array	[1..24]	of Int;<br/>	Arr_1_16_Int				:	Array	[1..16]	of Int;<br/>	ARR_I_1_240					:	Array	[1..240] of Int;<br/>
						<br/>	ARR_SI_1_12					:	Array	[1..12]	of SInt;<br/>	ARR_USI_1_12				:	Array	[1..12] of USInt;<br/>
						<br/>(*	REAL-ArrayS	*)<br/>	ARR_R_0_9					:	Array	[0..9]	of real;<br/>	ARR_R_1_24					:	Array	[1..24]	of real;<br/>
						<br/>	Arr_Str_1_75				:	Array	[1..75] of String_200;<br/>	Arr_Str_1_209				:	Array	[1..209] of String_200;<br/>	ARR_1_25_1_5_Int			:	Array	[1..25] of ARR_I_1_5;<br/>	Arr_1_240_1_3_Int			:	Array	[1..240] of ARR_I_1_3;<br/>	Arr_1_240_1_23_Int			:	Array	[1..240] of Arr_I_1_23;<br/>
						<br/>	ARR_1_24_String_5			:	Array	[1..24]	of	String_5;<br/>	ARR_STR20_1_12				:	Array	[1..12]	of	String_20;<br/>	ARR_1_50_Str_30				:	Array	[1..50]	of String_30;<br/>	ARR_I_1_4_1_25_1_5			:	Array	[1..4] of ARR_1_25_1_5_Int;<br/>
						<br/>End_Type<br/>
						<br/>Type<br/>	ARR_IBS_PD_DATA_B_1_16		:	Array	[1..16]	of	Byte;		(* Process data of one IBS module *)<br/>
						<br/>	UDT_IBS_CONF_ENTRY	:	(* Information about IBS module: Read in by service read configuration, read processdata descriptions *)<br/>	struct<br/>		bPosNum				:	Byte;					(*Position of module in bus segment*)<br/>		bBusSegm			:	Byte;					(*Bus segment of module*)<br/>		bModuleID			:	Byte;					(*Module ID*)<br/>		iPdLenCompl			:	int;					(*Process data length in Bytes.	<br/>														Each module have an equal length of input and output data.<br/>														A module with pd length of one uses two Bytes in the global pd field.*)<br/>		xInputPD			:	Bool;					(*Interbus module has input process data*)<br/>		xOutputPD			:	Bool;					(*Interbus module has output process data*)<br/>
						<br/>		xDeviceCopyed		:	Bool;	(*  mark device after copy the modulenumber *)<br/>
						<br/>		iPntrPdBeginOut		:	int;					(*Begin of PD in output Pd Array*)<br/>		iPdLenOut			:	int;					(*Length of input process data*)<br/>		iPntrPdBeginIn		:	int;					(*Begin	of PD in input Pd Array*)<br/>		iPdLenIn			:	int;					(*Length of output process data*)<br/>		iCntPdd				:	int;					(*Number of process	data descriptions*)			<br/>		iReservedBytesIn	:	int;					(*Number of Bytes reserved for input process data*)<br/>		iReservedBytesOut	:	int;					(*Number of Bytes reserved for output process data*)<br/>
						<br/>		strModuleType		:	string;					(*Module type*)<br/>		wModuleLevel		:	Word;<br/>
						<br/>		arrPdIn				:	ARR_IBS_PD_DATA_B_1_16;	(*Input process data of this module*)<br/>		arrPdOut			:	ARR_IBS_PD_DATA_B_1_16;	(*Output process data of this moduel*)<br/>	End_struct;<br/>
						<br/>	ARR_IBS_CONF_ENTRIES_1_256	:	Array	[1..256]	of	UDT_IBS_CONF_ENTRY;	(*Array of IBS modules in the local bus*)<br/>End_type<br/>
						<br/>
						<br/>TYPE<br/>	ARR_IBC_SND_1_8			:	Array	[1..8]		of	Word;	(*Array	for	interbus command*)<br/>	ARR_IBC_REC_1_256		:	Array	[1..256]	of	Word;	(*Array	for	response from interbus master*)<br/>	ARR_IBC_DATA_1_253		:	Array	[1..256]	of Word;	(*Array for data given by interbus master*)<br/>	ARR_IBC_REC_1_512		:	Array	[1..512]	of Word; 	(*Array for response from interbus master*)<br/>	ARR_IBC_DATA_1_512		:	Array	[1..512]	of Word;	(*Array for data given by interbus master*)<br/>
						<br/>	ARR_IBS_PD_DATA_B_1_256	:	Array	[1..256]	of Byte; 	(*Process data of one IBS module*)<br/>	ARR_IBS_PD_DATA_B_1_512	:	Array	[1..512]	of Byte; 	(*Process data of one IBS module*)<br/>
						<br/>	UDT_IB_DIAG_STATUS :			(*Diagnostic status read by IBC service*)<br/>		STRUCT<br/>			xBit0 	: Bool;<br/>			xPF 	: Bool;<br/>			xBus 	: Bool;<br/>			xCtrl 	: Bool;<br/>			xBit4 	: Bool;<br/>			xRun 	: Bool;<br/>			xActive	: Bool;<br/>			xReady 	: Bool;<br/>			xBD 	: Bool;<br/>			xBit9 	: Bool;<br/>			xForce 	: Bool;<br/>		END_STRUCT;<br/>
						<br/>	udtL20Config:<br/>		Struct<br/>			xActive				:	Bool;<br/>			iDelay				:	Int;<br/>			iHysteric			:	Int;<br/>			diAverageTime		:	DInt;<br/>			iInputValue			:	Int;<br/>			xActiveConfig1		:	Bool;<br/>			xActiveConfig2		:	Bool;<br/>			xActiveConfig3		:	Bool;<br/>			xActiveConfig4		:	Bool;<br/>			strName1			:	String;<br/>			strName2			:	String;<br/>			strName3			:	String;<br/>			strName4			:	String;<br/>			arrScenarioActive	:	ARR_X_1_25;<br/>			arrScenarioConfig1	:	ARR_I_1_24;<br/>			arrScenarioConfig2	:	ARR_I_1_24;<br/>			arrScenarioConfig3	:	ARR_I_1_24;<br/>			arrScenarioConfig4	:	ARR_I_1_24;<br/>		End_Struct;<br/>
						<br/>	ARR_UDT_L20Config	:	array [1..4] of udtL20Config;<br/>
						<br/>	udtScene:<br/>		Struct<br/>			arrMode					:	ARR_I_1_4;<br/>			arrActualScene			:	ARR_I_1_4;<br/>			arrOwnInputScene		:	ARR_I_1_4;<br/>			arrExternalInputScene	:	ARR_I_1_4;<br/>			arrManualScene			:	ARR_I_1_4;<br/>			arrScenario				:	ARR_I_1_4;<br/>			arrScenarioOption		:	ARR_I_1_4;<br/>		End_Struct;<br/>
						<br/>END_TYPE<br/>
						<br/>Type<br/>(* IBS-DATA-STRUCTURES *)<br/>	UDT_IBS_DATA_STRUCT :<br/>		STRUCT<br/>			wBusSegmentNumber		: Word;				(* Number of the Bus Segment *)<br/>			wIdentNumber			: Word;				(* HIBYenght TE : PDL/ LOByte : IDCode *)<br/>			arrInput				: ARR_W_1_6;		(* max. 2 Word Input for each Bus Segment *)<br/>			arrOutput				: ARR_W_1_6;		(* max. 2 Word Output for each Bus Segment *)<br/>			strModuleName			: STRING_30;		(* Name of the Interbusmodule *)<br/>			wModuleLevel			: Word;				(* Module Level *)<br/>		END_STRUCT;<br/>
						<br/>(* IBS-DATA-ArrayS *)<br/>	ARR_UDT_IBS_STRUCT_1_63		: Array [1..256] of UDT_IBS_DATA_STRUCT;<br/>
						<br/>	udtNetwork:<br/>		Struct<br/>			strIP					:	String;<br/>			strSubnet				:	String;<br/>			strGateway				:	String;<br/>			strIPModbus				:	String;<br/>			iMode					:	Int;<br/>			strDNS					:	String;<br/>			xSave					:	Bool;<br/>			xDone					:	Bool;<br/>			xLumgateType			:	Bool;<br/>			strMessage				:	String;<br/>		End_Struct;<br/>			<br/>	udtFileHandling:<br/>		Struct<br/>			xRequest				:	Bool;<br/>			xMultipleRun			:	Bool;<br/>			xFileMemorySource		:	Bool;	<br/>			iTasktype				:	Int;<br/>			strFileNameSource		:	String; <br/>			strFileNameTarget		:	String;<br/>			iAmountOverwriteChar	:	Int;<br/>			iFileNumber				:	Int;<br/>			udiReadPosition			:	Udint;<br/>			udiAmountData			:	Udint;<br/>		End_Struct;<br/>
						<br/>	udtFileMemory:<br/>		Struct<br/>			siReadFileInverter		:	Sint;				(* Which file is currently used for reading? *)<br/>			siWriteFileInverter		:	Sint;				(* Which file is currently used for writing? *)<br/>			siReadFileDC			:	Sint;				(* Which file is currently used for reading? *)<br/>			siWriteFileDC			:	Sint;				(* Which file is currently used for writing? *)<br/>			siReadFileAC			:	Sint;				(* Which file is currently used for reading? *)<br/>			siWriteFileAC			:	Sint;				(* Which file is currently used for writing? *)<br/>			siReadFileSensor		:	Sint;				(* Which file is currently used for reading? *)<br/>			siWriteFileSensor		:	Sint;				(* Which file is currently used for writing? *)<br/>		End_Struct;<br/>
						<br/>	udtProjectSpecification:<br/>		Struct<br/>			strName			:	String;<br/>			strDescription	:	String;<br/>			strLocation		:	String;<br/>			strDesigner		:	String;<br/>			strRevision		:	String;<br/>		End_Struct;<br/>
						<br/>	udtMessage:<br/>		Struct<br/>			strText			:	String;<br/>			strTimestamp	:	String_20;<br/>			iType			:	Int;<br/>		End_Struct;<br/>	<br/>	Arr_1_10_udtMessage		:	Array	[1..10]	of	udtMessage;<br/>
						<br/>	udtWeb:	(* Web Visu Sven *)<br/>		Struct<br/>			strTime			:	String;<br/>			strDate			:	String;<br/>			siEditHWCell	:	Sint;<br/>
						<br/>			iMVCellNumber:	Int;<br/>			iEdit:			Int;<br/>			udiAddUnstruct:	Udint;<br/>			uiAddStruct_1:	Usint;<br/>			uiAddStruct_2:	Usint;<br/>			uiAddStruct_3:	Usint;<br/>		(*	xAverage:		Bool; *)<br/>			iModeStatus:		Int;<br/>			iModeSelect:		Int;<br/>			iModeDeadbandStatus:		Int;<br/>			iModeDeadbandSelect:		Int;<br/>		(*	iDeadband:			Int;*)<br/>			rDeadband_1:			Real;<br/>			rDeadband_2:			Real;<br/>			rDeadband_3:			Real;<br/>		(*	rAZI:			Real;*)<br/>			xSave:			Bool;<br/>			xScadaConnected: Bool;<br/>			xScadaData: 	Bool;<br/>			iBuffer: 		Int;<br/>			xSaveIP: 		Bool;<br/>			xSaveConfig: 	Bool;<br/>			xReadConfig: 	Bool;<br/>			xDoneIP: 		Bool;<br/>			xWithoutTestFrame: Bool;<br/>			iSelectTestFrame:	Int;<br/>			iStatusTestFrame:	Int;<br/>			strIP:			String_15;<br/>			strSubnet:		String_15;<br/>			strGateway:		String_15;<br/>			strPort:			String_15;<br/>		(*	sSNTP:			String_15;*)<br/>			strMessage:		String_50;<br/>			strMessage_2:		String_50;<br/>		End_Struct;<br/>
						<br/>	udtWebThresholdConfig:<br/>		Struct<br/>			iLevel:				Int;<br/>			iColumn:			Int;<br/>			xConfigHigher:		Bool;<br/>			xConfigLower:		Bool;<br/>
						<br/>			arrScenarioOptions:	ARR_I_1_5;<br/>			arrLevelActive:		ARR_X_1_25;<br/>			arrLevelUsed:		ARR_X_1_24;<br/>			arrScenarioUsed:	ARR_X_1_5;<br/>			arrThresholdValue:	ARR_1_24_String_5;<br/>		End_Struct;<br/>
						<br/>	udtWebL20SensorOverview:<br/>		Struct<br/>			strActive:			String_15;<br/>			strValue:			String_15;<br/>			strValuePercentage:	String_15;<br/>			strState:			String_15;<br/>			iDiag:				Int;<br/>			xError:				Bool;<br/>		End_Struct;<br/>
						<br/>End_Type<br/>
					</div>
				</html>
			</datatypeWorksheet>
			<datatypeWorksheet>
				<html xmlns="http://www.w3.org/1999/xhtml">
					<div xml:space="preserve" id="MWTDESCRIPTION" wsName="ats" xmlns="http://www.w3.org/1999/xhtml">Type<br/>	udtAnalogInput:<br/>		Struct<br/>			xActive				:	Bool;<br/>			xUsable				:	Bool;<br/>			xError				:	Bool;<br/>			rValue				:	Real;<br/>			wDiagCode			:	Word;<br/>		End_Struct;<br/>
						<br/>	arr_1_4_udtAnalogInput		:	Array [1..4] of udtAnalogInput;<br/>
						<br/>	udtL20Input:<br/>		Struct<br/>			rAverage_1_2			:	Real;<br/>			rAverage_3_4			:	Real;<br/>			rAverage_1_2_3_4		:	Real;<br/>			rBackup_1_2_3_4			:	Real;<br/>			iBackup_1_2_3_4_Limit	:	Int;<br/>			rBackup_2_3_4_1			:	Real;<br/>			iBackup_2_3_4_1_Limit	:	Int;<br/>			rBackup_3_4_1_2			:	Real;<br/>			iBackup_3_4_1_2_Limit	:	Int;<br/>			rBackup_4_1_2_3			:	Real;<br/>			iBackup_4_1_2_3_Limit	:	Int;<br/>			rMaxCd1					:	Real;<br/>			rMaxCd2					:	Real;<br/>			rMaxCd3					:	Real;<br/>			rMaxCd4					:	Real;<br/>		End_Struct;<br/>
						<br/>	udtLumgatePart1:<br/>		Struct<br/>			xReset		:	Bool;<br/>			udiHours	:	Udint;<br/>			iMinutes	:	Int;<br/>			iSeconds	:	Int;<br/>		End_Struct;<br/>
						<br/>	udtLumgatePart2:<br/>		Struct<br/>			xUsed		:	Bool;<br/>			xRelay1		:	Bool;<br/>			xRelay2		:	Bool;<br/>			iValue		:	Int;<br/>		End_Struct;<br/>
						<br/>	arr_1_50_udtLumgatePart1	:	Array	[1..50] of udtLumgatePart1;<br/>	arr_1_240_udtLumgatePart1	:	Array	[1..240] of udtLumgatePart1;<br/>	arr_1_50_udtLumgatePart2	:	Array	[1..50] of udtLumgatePart2;<br/>	arr_1_15_udtLumgatePart2	:	Array	[1..15] of udtLumgatePart2;<br/>
						<br/>	arr_1_240_DimmingValue		:	Array	[1..240] of arr_1_50_udtLumgatePart2;<br/>	arr_1_240_SpecialValue		:	Array	[1..240] of arr_1_15_udtLumgatePart2;<br/>
						<br/>	udtLumgatePart3:<br/>		Struct<br/>			iCounterTeach			:	Int;<br/>			iCounterFailsave		:	Int;<br/>			iStepTeach				:	Int;<br/>			iTeachRun				:	Int;<br/>			iCounterCurrentCheck	:	Int;<br/>			iTable					:	Int;<br/>			iStepCurrentCheck		:	Int;<br/>			xPowerConsumptionCorrect:	Bool;<br/>			xMemoryFailsaveHold		:	Bool;<br/>		End_Struct;<br/>
						<br/>	udtLumgatePart4:<br/>		Struct<br/>			xActive					:	Bool;<br/>			udiHours				:	Udint;<br/>			rPercentage				:	Real;<br/>			iAmountDecrease			:	Int;<br/>		End_Struct;<br/>
						<br/>	udtLumgateWebPart4:<br/>		Struct<br/>			xActive					:	Bool;<br/>			udiHours				:	Udint;<br/>			rPercentage				:	Real;<br/>			rAmountDecrease			:	Real;<br/>		End_Struct;<br/>
						<br/>	udtLumgatePart5:<br/>		Struct<br/>			xActiveCurrentCheckWarning	:	Bool;<br/>			xActiveCurrentCheckError	:	Bool;<br/>			rPercentageWarning			:	Real;<br/>			rPercentageError			:	Real;<br/>			iLimitMaxError				:	Int;<br/>			iLimitMinError				:	Int;<br/>			iLimitMaxWarning			:	Int;<br/>			iLimitMinWarning			:	Int;<br/>			xDirectWarning				:	Bool;<br/>			xDirectError				:	Bool;<br/>			xWarning					:	Bool;<br/>			xError						:	Bool;<br/>			iExpectedCurrent			:	Int;<br/>		End_Struct;<br/>
						<br/>	udtLumgateConfig:<br/>		Struct<br/>			udtCloLed					:	udtLumgatePart4;	<br/>			udtCloMaintenance			:	udtLumgatePart4;<br/>			arrDimmingScene				:	arr_1_50_udtLumgatePart2;<br/>			arrSpecialScene				:	arr_1_15_udtLumgatePart2;<br/>			udtCurrentCheck				:	udtLumgatePart5;<br/>			strDescription				:	String_50;<br/>			iOutputLevelFailsave		:	Int;<br/>			xFailMode					:	Bool;<br/>			xFailsaveRelay1				:	Bool;<br/>			xFailsaveRelay2				:	Bool;<br/>			xRelay1_NC					:	Bool;<br/>			xRelay2_NC					:	Bool;<br/>		End_struct;<br/>
						<br/>	arr_1_240_udtLG_Config	:	Array [1..240] of udtLumgateConfig;<br/>
						<br/>	udtLumgate:<br/>		Struct<br/>			xAvailable					:	Bool;<br/>			xError						:	Bool;<br/>			xAutomaticManual			:	Bool; (* False = automatic, True = manual *)<br/>			xManualRelay1				:	Bool;<br/>			xManualRelay2				:	Bool;<br/>			xTeachConsumption			:	Bool;<br/>			xTeachFailsave				:	Bool;<br/>			iModuleLevel				:	Int;<br/>			iModuleNumber				:	Int;<br/>			iModuleNumberGeneral		:	Int;<br/>			iMode						:	Int;<br/>			xInConfigFile				:	Bool;<br/>			udtHourCounterGeneral		:	udtLumgatePart1;<br/>			udtHourCounterMaintenance	:	udtLumgatePart1;<br/>			udtHourCounter20_50			:	udtLumgatePart1;<br/>			udtHourCounter50_75			:	udtLumgatePart1;<br/>			udtHourCounter75_100		:	udtLumgatePart1;<br/>			udtCloLed					:	udtLumgatePart4;<br/>			udtCloMaintenance			:	udtLumgatePart4;<br/>			udtInternal					:	udtLumgatePart3;<br/>			udtCurrentCheck				:	udtLumgatePart5;<br/>			iSourceOutputLevel			:	Int;<br/>			iActualOutputLevel			:	Int;<br/>			iTargetOutputLevel			:	Int;<br/>			iActualScene				:	Int;<br/>			iOutputLevelTeach			:	Int;<br/>			iOutputLevelFailsave		:	Int;<br/>			xFailsaveRelay1				:	Bool;<br/>			xFailsaveRelay2				:	Bool;<br/> 			iOutputLevelScenarioWithClo	:	Int;<br/>			iOutputLevelManual			:	Int;<br/>			iOutputLevelScenario		:	Int;<br/>			xGraduallyOutputChanges		:	Bool;<br/>			iMeasurement				:	Int;<br/>			xRelay1						:	Bool;<br/>			xRelay2						:	Bool;<br/>			xRelay1_NC					:	Bool;<br/>			xRelay2_NC					:	Bool;<br/>			xInput1						:	Bool;<br/>			xInput2						:	Bool;<br/>			xFailMode					:	Bool;<br/>			xSafe						:	Bool;<br/>			xSafeSet					:	Bool;<br/>			xSafeFinish					:	Bool;<br/>			xErrorOutputLevel			:	Bool;<br/>			arrPowerConsumption			:	ARR_I_1_23;<br/>			arrPowerConsumption_01		:	ARR_I_1_23;<br/>			arrPowerConsumption_10		:	ARR_I_1_23;<br/>			arrPowerConsumption_11		:	ARR_I_1_23;<br/>			arrDimmingScene				:	arr_1_50_udtLumgatePart2;<br/>			arrSpecialScene				:	arr_1_15_udtLumgatePart2;<br/>			strDescription				:	String_50;<br/>		End_Struct;<br/>
						<br/>	udtWebLumgate:<br/>		Struct<br/>			xAvailable					:	Bool;<br/>			xError						:	Bool;<br/>			xAutomaticManual			:	Bool; (* False = automatic, True = manual *)<br/>			xManualRelay1				:	Bool;<br/>			xManualRelay2				:	Bool;<br/>			xTeachConsumption			:	Bool;<br/>			xTeachFailsave				:	Bool;<br/>			iModuleLevel				:	Int;<br/>			iModuleNumber				:	Int;<br/>			iModuleNumberGeneral		:	Int;<br/>			iMode						:	Int;<br/>			xInConfigFile				:	Bool;			<br/>			udtHourCounterGeneral		:	udtLumgatePart1;<br/>			udtHourCounterMaintenance	:	udtLumgatePart1;<br/>			udtHourCounter20_50			:	udtLumgatePart1;<br/>			udtHourCounter50_75			:	udtLumgatePart1;<br/>			udtHourCounter75_100		:	udtLumgatePart1;<br/>			udtCloLed					:	udtLumgateWebPart4;	<br/>			udtCloMaintenance			:	udtLumgateWebPart4;	<br/>			udtInternal					:	udtLumgatePart3;<br/>			udtCurrentCheck				:	udtLumgatePart5;<br/>			rSourceOutputLevel			:	Real;<br/>			rActualOutputLevel			:	Real;<br/>			rTargetOutputLevel			:	Real;<br/>			rOutputLevelTeach			:	Real;<br/>			rOutputLevelFailsave		:	Real;<br/>			xFailsaveRelay1				:	Bool;<br/>			xFailsaveRelay2				:	Bool;<br/> 			rOutputLevelScenarioWithClo	:	Real;<br/>			rOutputLevelManual			:	Real;<br/>			rOutputLevelScenario		:	Real;<br/>			xGraduallyOutputChanges		:	Bool;<br/>			rMeasurement				:	Real;<br/>			xRelay1						:	Bool;<br/>			xRelay2						:	Bool;<br/>			xRelay1_NC					:	Bool;<br/>			xRelay2_NC					:	Bool;<br/>			xInput1						:	Bool;<br/>			xInput2						:	Bool;<br/>			xFailMode					:	Bool;<br/>			xSafe						:	Bool;<br/>			xSafeSet					:	Bool;<br/>			xSafeFinish					:	Bool;<br/>			xErrorOutputLevel			:	Bool;<br/>			arrPowerConsumption			:	ARR_I_1_23;<br/>			arrPowerConsumption_01		:	ARR_I_1_23;<br/>			arrPowerConsumption_10		:	ARR_I_1_23;<br/>			arrPowerConsumption_11		:	ARR_I_1_23;<br/>			arrDimmingScene				:	arr_1_50_udtLumgatePart2;<br/>			arrSpecialScene				:	arr_1_15_udtLumgatePart2;<br/>			strDescription				:	String_50;<br/>		End_Struct;<br/>
						<br/>	arr_1_240_udtLumgate	:	Array [1..240] of udtLumgate;<br/>
						<br/>	udtWebvisit:<br/>		Struct<br/>			xAvailable_1:				Bool;<br/>			xAvailable_2:				Bool;<br/>			xAvailable_3:				Bool;<br/>			xFailsave_1:				Bool;<br/>			xFailsave_2:				Bool;<br/>			xFailsave_3:				Bool;<br/>			iActualValue_1:				Int;<br/>			iActualValue_2:				Int;<br/>			iActualValue_3:				Int;<br/>			iExpectedValue_1:			Int;<br/>			iExpectedValue_2:			Int;<br/>			iExpectedValue_3:			Int;<br/>			xError_1:					Bool;<br/>			xError_2:					Bool;<br/>			xError_3:					Bool;<br/>			iStatusMode:				Int;<br/>			iSelectMode:				Int;<br/>		End_Struct;<br/>
						<br/>	udtInput:<br/>		Struct<br/>			xValid			:	Bool;<br/>			rValue			:	Real;<br/>		End_Struct;<br/>
						<br/>	arr_1_11_udtInput:		Array[1..11] of udtInput;<br/>
						<br/>	udtWebLGScenario:<br/>		Struct<br/>			iEdit:				Int;<br/>			xUsed:				Bool;<br/>			iValue:				Int;<br/>			xSet:				Bool;<br/>			iValueSet:			Int;<br/>			xUsedSet:			Bool;<br/>			xUsedSetView:		Bool;<br/>			xColorValue:		Bool;<br/>			iEditSet:			Int;<br/>			arrScenarioActive:	ARR_X_1_50;<br/>			arrScenarioUsed:	ARR_X_1_50;<br/>			arrScenarioValue:	ARR_I_1_50;<br/>		End_Struct;<br/>
						<br/>	udtWebLGSpecialScenario:<br/>		Struct<br/>			iEdit:				Int;<br/>			xUsed:				Bool;<br/>			iValue:				Int;<br/>			xSet:				Bool;<br/>			iValueSet:			Int;<br/>			xUsedSet:			Bool;<br/>			xUsedSetView:		Bool;<br/>			xColorValue:		Bool;<br/>			iEditSet:			Int;<br/>			arrScenarioActive:	ARR_X_1_15;<br/>			arrScenarioUsed:	ARR_X_1_15;<br/>			arrScenarioValue:	ARR_I_1_15;<br/>		End_Struct;<br/>
						<br/>	udtWebLGCurrentConsumption:<br/>		Struct<br/>			strPercentageWarning:String_5;<br/>			strPercentageError:	String_5;<br/>			iLimitMaxWarning:	Int;<br/>			iLimitMinWarning:	Int;<br/>			iLimitMaxError:		Int;<br/>			iLimitMinError:		Int;<br/>			strStateWarning:	String_5;<br/>			strStateError:		String_5;<br/>			xType:				Bool;<br/>			xSet:				Bool;<br/>			xColorWarning:		Bool;<br/>			xColorError:		Bool;<br/>			xOnOffError:		Bool;<br/>			xOnOffWarning:		Bool;<br/>			rPercentageError:	Real;<br/>			rPercentageWarning:	Real;<br/>			strVoltage:			String_5;<br/>			iCurrent:			Int;<br/>			arrActualOutput:	ARR_X_1_22;<br/>			arrCurrentValue:	ARR_I_1_22;<br/>		End_Struct;<br/>
						<br/>	udtWebLG_Main:<br/>		Struct<br/>			arrColorSelectNumber:	ARR_X_1_4;<br/>			arrButtonSelectNumber:	ARR_X_1_4;<br/>			arrAmountLumgates:		ARR_I_1_4;<br/>			arrSelectNumber:		ARR_I_1_4;<br/>		End_Struct;<br/>
						<br/>	udtLumgateVisu:<br/>		Struct<br/>			xAvailable:					Bool;<br/>			xAutomaticManual:			Bool; (* False = automatic, True = manual *)<br/>			xManualRelay1:				Bool;<br/>			xManualRelay2:				Bool;<br/>			xTeachConsumption:			Bool;<br/>			xTeachFailsave:				Bool;<br/>			iModuleLevel:				Int;<br/>			iModuleNumber:				Int;<br/>			iModuleNumberGeneral:		Int;<br/>			strHourCounterGeneral:		String;<br/>			strHourCounterMaintenance:	String;<br/>			strHourCounter0_50:			String;<br/>			strHourCounter50_75:		String;<br/>			strHourCounter75_100:		String;<br/>			xResetCounter1:				Bool;<br/>			xResetCounter2:				Bool;<br/>			xResetCounter3:				Bool;<br/>			xResetCounter4:				Bool;<br/>			xResetCounter5:				Bool;<br/>					<br/>			udtHourCounterGeneral:		udtLumgatePart1;<br/>			udtHourCounterMaintenance:	udtLumgatePart1;<br/>			udtHourCounter20_50:		udtLumgatePart1;<br/>			udtHourCounter50_75:		udtLumgatePart1;<br/>			udtHourCounter75_100:		udtLumgatePart1;<br/>			udtCloLed:					udtLumgatePart4;	<br/>			udtCloMaintenance:			udtLumgatePart4;	<br/>			udtInternal:				udtLumgatePart3;<br/>			udtCurrentCheck:			udtLumgatePart5;<br/>			iActualOutputLevel:			Int;<br/>			iTargetOutputLevel:			Int;<br/>			iOutputLevelTeach:			Int;<br/>			iOutputLevelFailsave:		Int;<br/>			xFailsaveRelay1				:	Bool;<br/>			xFailsaveRelay2				:	Bool;<br/> 			iOutputLevelScenarioWithClo:Int;<br/>			iOutputLevelManual:			Int;<br/>			iOutputLevelScenario:		Int;<br/>			xGraduallyOutputChanges:	Bool;<br/>			iMeasurement:				Int;<br/>			xRelay1:					Bool;<br/>			xRelay2:					Bool;<br/>			xRelay1_NC:					Bool;<br/>			xRelay2_NC:					Bool;<br/>			xInput1:					Bool;<br/>			xInput2:					Bool;<br/>			xFailMode:					Bool;<br/>			xSafe:						Bool;<br/>			xSafeSet:					Bool;<br/>			xSafeFinish:				Bool;<br/>			xErrorOutputLevel:			Bool;<br/>			arrPowerConsumption:		ARR_I_1_23;<br/>			arrDimmingScenario:			arr_1_50_udtLumgatePart2;<br/>			arrSpecialScenario:			arr_1_15_udtLumgatePart2;<br/>			strDescription:				String_50;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataLumgates:<br/>		Struct<br/>			(* Site "Lumgates" *)<br/>			arrExistingLumgates		:	ARR_X_0_4;<br/>			arrLumgateValues		:	ARR_I_0_4;<br/>			arrLumgateNumbers		:	ARR_I_0_4;<br/>			iTotalLumgatesRBT		:	Int;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataLumgateState:<br/>		Struct<br/>			(* Site "Lumgate State" *)<br/>			xEnableLumgateEdit		:	Bool;<br/>			xSetManualLumgate		:	Bool;<br/>			xEditableLumgate		:	Bool;<br/>			xSafeLumgate			:	Bool;<br/>			strLumgateState			:	String;<br/>			xCancelLumgate			:	Bool;<br/>			strLumgateDescription	:	String;<br/>			iLevelFailsafe			:	Int;<br/>			iManualOutput			:	Int;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataLumgateCLO:<br/>		Struct<br/>			(* Site "Lumgate CLO" *)<br/>			xEnableCLO_Edit			:	Bool;	(* Enable edit fields *)<br/>			xEditableCLO			:	Bool;	(* Edit fields enabled *)<br/>			xSafeCLO				:	Bool;	(* Safe edited values *)<br/>			xCancelCLO				:	Bool;	(* Reset to old values *)<br/>
						<br/>			xActivateCLO			:	Bool;<br/>			rDecreaseCLO			:	Real;<br/>			udiHoursCLO				:	UDInt;<br/>
						<br/>			xActivateMaintenance	:	Bool;<br/>			rDecreaseMaintenance	:	Real;<br/>			udiHoursMaintenance		:	UDInt;<br/>
						<br/>			xResetMaintenanceHours	:	Bool;<br/>			xResetOperatingHours	:	Bool;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataLumgateCurrent:<br/>		Struct<br/>			(* Site "Lumgate Current Consumption" *)<br/>			xEnableCurrentEdit		:	Bool;	(* Enable edit fields *)<br/>			xEditableCurrent		:	Bool;	(* Edit fields enabled *)<br/>			xSafeCurrent			:	Bool;	(* Safe edited values *)<br/>			xCancelCurrent			:	Bool;	(* Reset to old values *)<br/>
						<br/>			xRelay1					:	Bool;<br/>			xRelay2					:	Bool;<br/>			xRelaysEqual			:	Bool;<br/>		<br/>			xActivateError			:	Bool;<br/>			rDeviationError			:	Real;<br/>
						<br/>			xActivateWarning		:	Bool;<br/>			rDeviationWarning		:	Real;<br/>
						<br/>			xTeachCurrent			:	Bool;<br/>			xTeachConfirmation		:	Bool;<br/>			xTeachNotConfirmation	:	Bool;<br/>
						<br/>			xTeachAll				:	Bool;	(* Overview *)<br/>
						<br/>			udtCurrentConsumption	:	udtWebLGCurrentConsumption;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataLumgateScenes:<br/>		Struct<br/>			(* Site "Lumgate Scenes" *)<br/>			xEnableSceneEdit		:	Bool;	(* Enable edit fields *)<br/>			xEditableScenes			:	Bool;	(* Edit fields enabled *)<br/>			xSafeScenes				:	Bool;	(* Safe edited values *)<br/>			xCancelScenes			:	Bool;	(* Reset to old values *)<br/>		<br/>			iScene					:	Int;<br/>			xSet					:	Bool;<br/>
						<br/>			iSpecialScene			:	Int;<br/>			xSetSpecial				:	Bool;<br/>
						<br/>			arrSceneValues			:	ARR_I_1_50;<br/>			arrSpecialSceneValues	:	ARR_I_1_15;<br/>			arrSceneRelays1			:	ARR_X_1_50;<br/>			arrSceneRelays2			:	ARR_X_1_50;<br/>			arrSpecialSceneRelays1	:	ARR_X_1_15;<br/>			arrSpecialSceneRelays2	:	ARR_X_1_15;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataScenesHour:<br/>		Struct<br/>			(* Site "Scenes Hour Counter" *)<br/>			xEnableSceneEdit		:	Bool;	(* Enable edit fields *)<br/>			xEditableScenes			:	Bool;	(* Edit fields enabled *)<br/>			xSafeScenes				:	Bool;	(* Safe edited values *)<br/>			xCancelScenes			:	Bool;	(* Reset to old values *)<br/>		<br/>			iScene					:	Int;<br/>			xSet					:	Bool;<br/>
						<br/>			arrSceneHours			:	arr_1_50_udtLumgatePart1;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataThreshold:<br/>		Struct<br/>			(* Site "Threshold Table" *)<br/>			xEnableThresholdEdit	:	Bool;	(* Enable edit fields *)<br/>			xEditableThreshold		:	Bool;	(* Edit fields enabled *)<br/>			xSafeThreshold			:	Bool;	(* Safe edited values *)<br/>			xCancelThreshold		:	Bool;	(* Reset to old values *)<br/>
						<br/>			iChooseConfig			:	Int;<br/>			iViewConfig				:	Int;<br/>			iManualScene			:	Int;<br/>			iThreshold				:	Int;<br/>			xSet					:	Bool;<br/>			xTableNotActive			:	Bool;<br/>
						<br/>			xIncrease				:	Bool;<br/>			xDecrease				:	Bool;<br/>
						<br/>			xActivateConfig1		:	Bool;<br/>			xActivateConfig2		:	Bool;<br/>			xActivateConfig3		:	Bool;<br/>			xActivateConfig4		:	Bool;<br/>
						<br/>			strName1				:	String;<br/>			strName2				:	String;<br/>			strName3				:	String;<br/>			strName4				:	String;<br/>
						<br/>			arrSelectedScenarios	:	ARR_I_1_5;<br/>			arrThresholdTable		:	ARR_I_1_24;<br/>			arrActiveScenario		:	ARR_X_1_25;<br/>			iSelectedScenario		:	Int;<br/>			iSelectedScene			:	Int;<br/>			iChoosedScene			:	Int;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataOverview:<br/>		Struct<br/>			(* Site "Overview" *)<br/>			arrErrorRBT				:	ARR_X_0_4;<br/>			arrErrorLumgateNo		:	ARR_I_0_4;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataController:<br/>		Struct<br/>			(* Site "Controller Settings" *)<br/>			strProjectName			:	String;<br/>			xPowerSupplyIn			:	Bool;<br/>			xPowerSupplyOut			:	Bool;<br/>			xPowerSupplyMain		:	Bool;<br/>			xCF_CardInside			:	Bool;<br/>			xRamProjectAvailable	:	Bool;<br/>			xBootProjectAvailable	:	Bool;<br/>			strConfigName			:	String;<br/>			dwBootProjectCRC		:	DWord;<br/>			dwRamProjectCRC			:	DWord;<br/>			strPC_WorxProjectName	:	String;<br/>			iYear					:	Int;<br/>			iMonth					:	Int;<br/>			iDay					:	Int;<br/>			iHour					:	Int;<br/>			iMinutes				:	Int;<br/>			iSeconds				:	Int;<br/>			xSetClock				:	Bool;<br/>			xSetIP					:	Bool;<br/>			arrIP_Address			:	ARR_B_1_4;<br/>			arrSubnetMask			:	ARR_B_1_4;<br/>			arrStdGateway			:	ARR_B_1_4;<br/>		End_Struct;<br/>
						<br/>		<br/>	udt_WebDataProjectSettings:<br/>		Struct<br/>			(* Site "Project Settings" *)<br/>			xEnableProjectEdit	:	Bool;	(* Enable edit fields *)<br/>			xEditableProject	:	Bool;	(* Edit fields enabled *)<br/>			xSaveProject		:	Bool;	(* Save edited values *)<br/>			xCancelProject		:	Bool;	(* Reset to old values *)<br/>			<br/>			xSafeAllFailStates	:	Bool;<br/>
						<br/>			iSwitchDelay		:	Int;<br/>			diAverageDelay		:	DInt;<br/>			iHysteric			:	Int;<br/>			iDimmingSpeed		:	Int;<br/>		End_Struct;<br/>
						<br/>		(* Site "Alarming" *)<br/>
						<br/>		(* Site "Discret Elements" *)<br/>
						<br/>	udt_WebDataBackground:<br/>		Struct<br/>			(* Site "Background" *)<br/>			strHeader1				:	String;<br/>			strHeader2				:	String;<br/>			strHeader3				:	String;<br/>			xAlarm					:	Bool;<br/>			xPreAlarm				:	Bool;<br/>
						<br/>			(* Site "Foreground" *)<br/>
						<br/>			(* Site "Help" *)<br/>
						<br/>			(* Site "Impressum" *)<br/>
						<br/>		End_Struct;<br/>
						<br/>	udt_WebDataConfigFiles:<br/>		Struct<br/>			(* Site "ConfigFiles" *)<br/>			xNetwork				:	Bool;<br/>			xThreshold1				:	Bool;<br/>			xThreshold2				:	Bool;<br/>			xThreshold3				:	Bool;<br/>			xThreshold4				:	Bool;<br/>			xLumgate				:	Bool;<br/>			xSensor					:	Bool;<br/>			(* Read config files is in Program "Configuration" *)<br/>		End_Struct;<br/>
						<br/>	udt_WebDataDevice:<br/>		Struct<br/>			(* Site "Sources" *)<br/>			arrSelect				:	ARR_USI_1_12;<br/>			arrSpecialScene			:	ARR_SI_1_12;<br/>			arrSceneActivation		:	ARR_X_1_12;<br/>			arrName					:	ARR_STR20_1_12;<br/>			arrState				:	ARR_X_1_12;<br/>		End_Struct;<br/>
						<br/>	udt_WebDataSource:<br/>		Struct<br/>			(* Site "Source" *)<br/>			xEnableSourceEdit	:	Bool;	(* Enable edit fields *)<br/>			xEditableSource		:	Bool;	(* Edit fields enabled *)<br/>			xSaveSource			:	Bool;	(* Save edited values *)<br/>			xCancelSource		:	Bool;	(* Reset to old values *)<br/>		<br/>			strUnit				:	String;<br/>
						<br/>			iSelect1			:	Int;<br/>			iSelect2			:	Int;<br/>			iSelect3			:	Int;<br/>			iSelect4			:	Int;<br/>			<br/>			udiMaxValue1		:	UDInt;<br/>			udiMaxValue2		:	UDInt;<br/>			udiMaxValue3		:	UDInt;<br/>			udiMaxValue4		:	UDInt;<br/>			<br/>			iLimit1				:	Int;<br/>			iLimit2				:	Int;<br/>			iLimit3				:	Int;<br/>			iLimit4				:	Int;<br/>		End_Struct;<br/>End_Type<br/>TYPE<br/>	arrDWord_0_50 : ARRAY [0..50] OF dword;<br/>END_TYPE<br/>
						<br/>
					</div>
				</html>
			</datatypeWorksheet>
			<datatypeWorksheet>
				<html xmlns="http://www.w3.org/1999/xhtml">
					<div xml:space="preserve" id="MWTDESCRIPTION" wsName="sys_flag_types" xmlns="http://www.w3.org/1999/xhtml">TYPE<br/>    Task_Name_Typ      : ARRAY[0..9] OF BYTE;<br/>
						<br/>    Extended_Task_Info : STRUCT<br/>    TaskName           : Task_Name_Typ;  (* Name of the Task as ARRAY OF BYTE, NULL terminated *) <br/>    TaskPrio           : INT;            (* Priority of the task *)<br/>    undocumented_0     : INT;<br/>    TaskPeriod         : INT;            (* Period of the task in milliseconds *)<br/>    TaskStack          : INT;            (* Stack size of the task *)<br/>    unused_1           : INT;<br/>    TaskWatchdog       : INT;            (* Watchdog time in milliseconds *)<br/>    undocumented_2     : INT;<br/>    undocumented_3     : INT;<br/>    undocumented_4     : INT;<br/>    CurDuration        : INT;            (* Current task duration in ticks including preemption *)<br/>    MinDuration        : INT;            (* Minimum task duration in ticks including preemption *)<br/>    MaxDuration        : INT;            (* Maximum task duration in ticks including preemption *)<br/>    undocumented_5     : INT;<br/>    CurDelay           : INT;            (* Current task delay in ticks including preemption *)<br/>    MinDelay           : INT;            (* Minimum task delay in ticks including preemption *)<br/>    MaxDelay           : INT;            (* Maximum task delay in ticks including preemption *)<br/>    END_STRUCT;<br/>END_TYPE<br/>
						<br/>TYPE<br/>	Task_Name_eCLR  : ARRAY[0..35] OF BYTE;<br/>	<br/>	Task_Info_eCLR  : STRUCT<br/>	TaskStack       : INT;            (* Stack size of the task *)<br/>	TaskPrio        : INT;            (* Priority of the task *)<br/>	TaskPeriod_us   : DINT;           (* Period of the task in microseconds *)<br/>	TaskWatchdog_us : DINT;           (* Watchdog time in microseconds *)<br/>	TaskPeriod      : INT;            (* Period of the task in milliseconds *)<br/>	TaskWatchdog    : INT;            (* Watchdog time in milliseconds *)<br/>	MinDuration_us  : DINT;           (* Minimum task duration in microseconds including preemption *)<br/>	MaxDuration_us  : DINT;           (* Maximum task duration in microseconds including preemption *)<br/>	CurDuration_us  : DINT;           (* Current task duration in microseconds including preemption *)<br/>	MinDelay_us     : DINT;           (* Minimum task delay in microseconds including preemption *)<br/>	MaxDelay_us     : DINT;           (* Maximum task delay in microseconds including preemption *)<br/>	CurDelay_us     : DINT;           (* Current task delay in microseconds including preemption *)<br/>	MinDuration     : INT;            (* Minimum task duration in milliseconds including preemption *)<br/>	MaxDuration     : INT;            (* Maximum task duration in milliseconds including preemption *)<br/>	CurDuration     : INT;            (* Current task duration in milliseconds including preemption *)<br/>	MinDelay        : INT;            (* Minimum task delay in milliseconds including preemption *)<br/>	MaxDelay        : INT;            (* Maximum task delay in milliseconds including preemption *)<br/>	CurDelay        : INT;            (* Current task delay in milliseconds including preemption *)<br/>	unused_1        : DINT;<br/>	unused_2        : DINT;<br/>	unused_3        : DINT;<br/>	unused_4        : DINT;<br/>	unused_5        : DINT;<br/>	unused_6        : DINT;<br/>	unused_7        : DINT;<br/>	unused_8        : DINT;<br/>	unused_9        : DINT;<br/>	TNameMaxSize    : INT;<br/>	TNameSize       : INT;<br/>	TaskName        : Task_Name_eCLR;<br/>	END_STRUCT;<br/>END_TYPE<br/> <br/>TYPE<br/>	PND_IO_32  : ARRAY[0..31]  OF BYTE;<br/>	PND_IO_64  : ARRAY[0..63]  OF BYTE;<br/>	PND_IO_128 : ARRAY[0..127] OF BYTE;<br/>	PND_IO_256 : ARRAY[0..255] OF BYTE;<br/>	PND_IO_512 : ARRAY[0..511] OF BYTE;<br/>END_TYPE<br/>
						<br/>TYPE<br/>	Redundancy_OPC_Struct : ARRAY[0..2] OF INT;<br/>END_TYPE<br/> <br/>TYPE<br/>    MBT_STATION_DIAG : STRUCT<br/>    Status           : DWORD; (* Bit 0 = Station is online*)<br/>                              (* Bit 1 = Exception exits  *)<br/>
						<br/>    IP               : DWORD;<br/>    OfflineCounter   : DWORD; (* Incremented by every shutdown of this station. *)<br/>
						<br/>    NetCycleAvg      : DWORD; (* ms. NetInCycleAvg + NetOutCycleAvg *)<br/>    NetCycleMin      : DWORD; (* ms. *)<br/>    NetCycleMax      : DWORD; (* ms. *)<br/>
						<br/>    NetInCycleAvg    : DWORD; (* ms. *)<br/>    NetInCycleMin    : DWORD; (* ms. *)<br/>    NetInCycleMax    : DWORD; (* ms. *)<br/>
						<br/>    NetOutCycleAvg   : DWORD; (* ms. *)<br/>    NetOutCycleMin   : DWORD; (* ms. *)<br/>    NetOutCycleMax   : DWORD; (* ms. *)<br/>
						<br/>    InternalError1   : DWORD; (* For internal use of Phoenix Contact! *)<br/>    InternalError2   : DWORD; (* For internal use of Phoenix Contact! *)<br/>
						<br/>    ExceptionCounter : DWORD; (* Incremented by every Modbus exception received on this station. *)<br/>    DiagReserved1    : BYTE;  (* Reserved for a later use! *)<br/>    DiagReserved2    : BYTE;  (* Reserved for a later use! *)<br/>    UnitID           : BYTE;  (* Modbus Unit Identifier *)<br/>    DiagReserved3    : BYTE;  (* Reserved for a later use! *)<br/>    END_STRUCT;<br/>
						<br/>    MBT_STATION_CONTROL : STRUCT<br/>    ctrlStatistics      : BYTE;  (* Bit 0 = Clear  statistics *)<br/>    ControlReserved1    : BYTE;  (* Reserved for a later use! *)<br/>    ControlReserved2    : WORD;  (* Reserved for a later use! *)<br/>    ControlReserved3    : DWORD; (* Reserved for a later use! *)<br/>    END_STRUCT;<br/>END_TYPE<br/>
					</div>
				</html>
			</datatypeWorksheet>
		</dataTypes>
		<pous>
			<pou name="FB_L20_AnalogInput_01" pouType="functionBlock" pouGroup="Analog" lastChange="2016-11-07T11:01:47">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">activate FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xActivateOutputData" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">trigger, process data are written</p>
								</html>
							</documentation>
						</variable>
						<variable name="xConfirmAlarm" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">in case of active alarms, a confirmation is possible</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectValue1" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">select one source out of eleven; average, backup...</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectValue2" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">select one source out of eleven; average, backup...</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectValue3" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">select one source out of eleven; average, backup...</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectValue4" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">select one source out of eleven; average, backup...</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xDone" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">IB IL AI 4/I was found and configured</p>
								</html>
							</documentation>
						</variable>
						<variable name="xAlarm" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Analog Alarm (Wirebrake or missing module)</p>
								</html>
							</documentation>
						</variable>
						<variable name="xPreAlarm" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Analog Warning (underrange / overrange)</p>
								</html>
							</documentation>
						</variable>
						<variable name="wDiagCode" group="Output Parameter">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic code from FB IL_AI_4_UI_Com_V1_01</p>
								</html>
							</documentation>
						</variable>
						<variable name="strDiag" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic text</p>
								</html>
							</documentation>
						</variable>
						<variable name="xAnalogExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Flag "Analog module was found"</p>
								</html>
							</documentation>
						</variable>
						<variable name="rSelectedValue1" group="Output Parameter">
							<type>
								<REAL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">1st selected analog value (Source 1)</p>
								</html>
							</documentation>
						</variable>
						<variable name="rSelectedValue2" group="Output Parameter">
							<type>
								<REAL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">2nd selected analog value (Source 2)</p>
								</html>
							</documentation>
						</variable>
						<variable name="rSelectedValue3" group="Output Parameter">
							<type>
								<REAL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">3rd selected analog value (Source 3)</p>
								</html>
							</documentation>
						</variable>
						<variable name="rSelectedValue4" group="Output Parameter">
							<type>
								<REAL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">4th selected analog value (Source 4)</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrAnalogAverageValues" group="Output Parameter">
							<type>
								<derived name="arr_1_11_udtInput"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Selectable analog values 1 - 11</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="arrAnalogInput" group="In- Output Parameter">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Communication structure "Analog Values" to ATS calculation</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrIB_Configuration" group="In- Output Parameter">
							<type>
								<derived name="ARR_IBS_CONF_ENTRIES_1_256"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Communication structure "IB_Configuration" from IBS Startup</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtL20Config" group="In- Output Parameter">
							<type>
								<derived name="udtL20Input"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Communication structure "L20Config" from config file</p>
								</html>
							</documentation>
						</variable>
						<variable name="diAverageTime" group="In- Output Parameter">
							<type>
								<DINT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Analog average time value from web visualization</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="arrProcInAna" group="Default">
							<type>
								<derived name="ANL_ARR_W_1_4"/>
							</type>
						</variable>
						<variable name="udtParaAna" group="Default">
							<type>
								<derived name="ANL_udt_Para_1_5"/>
							</type>
						</variable>
						<variable name="arrProcOutAna" group="Default">
							<type>
								<derived name="ANL_ARR_W_1_4"/>
							</type>
						</variable>
						<variable name="udtStatusAna" group="Default">
							<type>
								<derived name="ANL_udt_Status_1_5"/>
							</type>
						</variable>
						<variable name="xInit" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iPositionAI_Module" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="wTemp" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="xActiveAI2SF" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xErrorAI2SF" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="wDiagCodeAI2SF" redundant="true" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="iPositionAI_Module2" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xReportAlarm" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="R_TRIG_ActivateS1" group="FB Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_ActivateS1" group="FB Instanzes">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_ActivateS2" group="FB Instanzes">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ActivateS2" group="FB Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ActivateS3" group="FB Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_ActivateS3" group="FB Instanzes">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ActivateS4" group="FB Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_ActivateS4" group="FB Instanzes">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="FB_AnalogAverage_01_1" group="FB Instanzes">
							<type>
								<derived name="FB_AnalogAverage_01"/>
							</type>
						</variable>
						<variable name="FB_AnalogAverage_01_2" group="FB Instanzes">
							<type>
								<derived name="FB_AnalogAverage_01"/>
							</type>
						</variable>
						<variable name="FB_AnalogAverage_01_3" group="FB Instanzes">
							<type>
								<derived name="FB_AnalogAverage_01"/>
							</type>
						</variable>
						<variable name="FB_AnalogAverage_01_4" group="FB Instanzes">
							<type>
								<derived name="FB_AnalogAverage_01"/>
							</type>
						</variable>
						<variable name="F_TRIG_1" group="FB Instanzes">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_2" group="FB Instanzes">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_3" group="FB Instanzes">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_4" group="FB Instanzes">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_1" group="FB Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_2" group="FB Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_3" group="FB Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_4" group="FB Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_5" group="FB Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="IL_AI_4_UI_Com_V1_01_1" group="FB Instanzes">
							<type>
								<derived name="IL_AI_4_UI_Com_V1_01"/>
							</type>
						</variable>
						<variable name="IL_AI_2_SF_V1_02_1" group="FB Instanzes">
							<type>
								<derived name="IL_AI_2_SF_V1_02"/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_L20_AnalogInput_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* L20 Analog Input *)<br/>If xActivate then<br/>	If xActivateOutputData then<br/>		If not xInit then					(* Search for any Analog Input Modules *)<br/>			xInit				:=	True;<br/>			iPositionAI_Module	:= 	0;	<br/>			For iLoop := 1 to 256 do<br/>				If arrIB_Configuration[iLoop].bModuleID = byte#127 then (* Analog input module found *)<br/>					iPositionAI_Module	:= 	iLoop;<br/>					Exit;<br/>				End_If;<br/>			End_For;<br/>
									<br/>			If iPositionAI_Module &lt;&gt; 0 then	(* Module available *)<br/>				xAnalogExist	:=	True;<br/>
									<br/>				(* Search for other analog modules *)<br/>				For iLoop := 1 to 256 do<br/>					If arrIB_Configuration[iLoop].bModuleID = byte#127 then (* Analog input module found *)<br/>						iPositionAI_Module2	:= 	iLoop;<br/>					End_If;<br/>				End_For;<br/>				If iPositionAI_Module &lt;&gt; iPositionAI_Module2 then<br/>					strDiag			:=	'Warning: More then one analog module was found';<br/>					xPreAlarm		:=	True;<br/>				End_if;<br/>
									<br/>			Elsif xInit and iPositionAI_Module = 0 then<br/>				strDiag			:=	'Warning: No analog module was found';<br/>				xPreAlarm		:=	True;<br/>				xAnalogExist	:=	False;	(* No action anymore, no module found *)<br/>			End_If;  <br/>		End_if;<br/>		xActive	:=	True;<br/>
									<br/>		If xAnalogExist then<br/>			If arrIB_Configuration[iPositionAI_Module].iPdLenCompl &gt; 32 then	(* Read Process data *)<br/>				arrProcInAna[1].B0	:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[1];<br/>				arrProcInAna[1].B1	:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[2];<br/>				arrProcInAna[2].B0	:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[3];<br/>				arrProcInAna[2].B1	:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[4];<br/>				arrProcInAna[3].B0	:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[5];<br/>				arrProcInAna[3].B1	:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[6];<br/>				arrProcInAna[4].B0	:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[7];<br/>				arrProcInAna[4].B1	:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[8]; <br/>
									<br/>				If udtParaAna.CH1rHighLimit &lt;&gt; udtL20Config.rMaxCd1 or udtParaAna.CH2rHighLimit &lt;&gt; udtL20Config.rMaxCd2<br/>				or udtParaAna.CH3rHighLimit &lt;&gt; udtL20Config.rMaxCd3 or udtParaAna.CH4rHighLimit &lt;&gt; udtL20Config.rMaxCd4 then<br/>					IL_AI_4_UI_Com_V1_01_1.xActivate	:=	False;<br/>				Else<br/>					IL_AI_4_UI_Com_V1_01_1.xActivate	:=	True;<br/>				End_if;<br/>				udtParaAna.CH1iChannel		:=	1;						(* Write Analog Input parameter *)<br/>				udtParaAna.CH1iFilter		:=	0;<br/>				udtParaAna.CH1iMode			:=	1;<br/>				udtParaAna.CH1rHighLimit	:=	udtL20Config.rMaxCd1;	(* Norm analog values with *)<br/>				udtParaAna.CH1rLowLimit		:=	0.0;					(* max. values from config files *)<br/>				udtParaAna.CH1wDiagCode		:=	word#16#8000;<br/>				udtParaAna.CH2iChannel		:=	2;<br/>				udtParaAna.CH2iFilter		:=	0;<br/>				udtParaAna.CH2iMode			:=	1;<br/>				udtParaAna.CH2rHighLimit	:=	udtL20Config.rMaxCd2;<br/>				udtParaAna.CH2rLowLimit		:=	0.0;<br/>				udtParaAna.CH2wDiagCode		:=	word#16#8000;<br/>				udtParaAna.CH3iChannel		:=	3;<br/>				udtParaAna.CH3iFilter		:=	0;<br/>				udtParaAna.CH3iMode			:=	1;<br/>				udtParaAna.CH3rHighLimit	:=	udtL20Config.rMaxCd3;<br/>				udtParaAna.CH3rLowLimit		:=	0.0;<br/>				udtParaAna.CH3wDiagCode		:=	word#16#8000;<br/>				udtParaAna.CH4iChannel		:=	4;<br/>				udtParaAna.CH4iFilter		:=	0;<br/>				udtParaAna.CH4iMode			:=	1;<br/>				udtParaAna.CH4rHighLimit	:=	udtL20Config.rMaxCd4;<br/>				udtParaAna.CH4rLowLimit		:=	0.0;<br/>				udtParaAna.CH4wDiagCode		:=	word#16#8000;<br/>
									<br/>				IL_AI_4_UI_Com_V1_01_1.bSelect		:=	byte#16#f;<br/>				IL_AI_4_UI_Com_V1_01_1.xVoltage		:=	False;<br/>				IL_AI_4_UI_Com_V1_01_1.arrProcIn	:=	arrProcInAna;<br/>
									<br/>				arrProcOutAna						:=	IL_AI_4_UI_Com_V1_01_1.arrProcOut;<br/>
									<br/>				If IL_AI_4_UI_Com_V1_01_1.xReady then<br/>					xDone							:=	True;<br/>					udtStatusAna					:=	IL_AI_4_UI_Com_V1_01_1.udtStatus;<br/>					arrAnalogInput[1].wDiagCode		:=	udtStatusAna.CH1wDiagCode;<br/>					arrAnalogInput[2].wDiagCode		:=	udtStatusAna.CH2wDiagCode;<br/>					arrAnalogInput[3].wDiagCode		:=	udtStatusAna.CH3wDiagCode;<br/>					arrAnalogInput[4].wDiagCode		:=	udtStatusAna.CH4wDiagCode;<br/>
									<br/>						(* Calculate an average value of each input value *)<br/>					If udtStatusAna.CH1xDataValid then<br/>						FB_AnalogAverage_01_1.rInputValue	:=	udtStatusAna.CH1rCurrentValue; (* send analog values to calculate avarege values *)<br/>						arrAnalogInput[1].xUsable			:=	True;<br/>						arrAnalogInput[1].rValue			:=	FB_AnalogAverage_01_1.rAverageValue; (* get calculated average value *)<br/>					Else<br/>						arrAnalogInput[1].xUsable			:=	False;<br/>						arrAnalogInput[1].rValue			:=	0.0;<br/>					End_if;<br/>					If udtStatusAna.CH2xDataValid then<br/>						FB_AnalogAverage_01_2.rInputValue	:=	udtStatusAna.CH2rCurrentValue;<br/>						arrAnalogInput[2].xUsable			:=	True;<br/>						arrAnalogInput[2].rValue			:=	FB_AnalogAverage_01_2.rAverageValue;<br/>					Else<br/>						arrAnalogInput[2].xUsable			:=	False;<br/>						arrAnalogInput[2].rValue			:=	0.0;<br/>					End_if;<br/>					If udtStatusAna.CH3xDataValid then<br/>						FB_AnalogAverage_01_3.rInputValue	:=	udtStatusAna.CH3rCurrentValue;<br/>						arrAnalogInput[3].xUsable			:=	True;<br/>						arrAnalogInput[3].rValue			:=	FB_AnalogAverage_01_3.rAverageValue;<br/>					Else<br/>						arrAnalogInput[3].xUsable			:=	False;<br/>						arrAnalogInput[3].rValue			:=	0.0;<br/>					End_if;<br/>					If udtStatusAna.CH4xDataValid then<br/>						FB_AnalogAverage_01_4.rInputValue	:=	udtStatusAna.CH4rCurrentValue;<br/>						arrAnalogInput[4].xUsable			:=	True;<br/>						arrAnalogInput[4].rValue			:=	FB_AnalogAverage_01_4.rAverageValue;<br/>					Else<br/>						arrAnalogInput[4].xUsable			:=	False;<br/>						arrAnalogInput[4].rValue			:=	0.0;<br/>					End_if;<br/>				Elsif IL_AI_4_UI_Com_V1_01_1.xError then<br/>					wDiagCode		:=	IL_AI_4_UI_Com_V1_01_1.wDiagCode;<br/>				End_if;<br/>									(* Write Process data *)<br/>				arrIB_Configuration[iPositionAI_Module].arrPdOut[1]	:=	arrProcOutAna[1].B0;<br/>				arrIB_Configuration[iPositionAI_Module].arrPdOut[2]	:=	arrProcOutAna[1].B1;<br/>				arrIB_Configuration[iPositionAI_Module].arrPdOut[3]	:=	arrProcOutAna[2].B0;<br/>				arrIB_Configuration[iPositionAI_Module].arrPdOut[4]	:=	arrProcOutAna[2].B1;<br/>				arrIB_Configuration[iPositionAI_Module].arrPdOut[5]	:=	arrProcOutAna[3].B0;<br/>				arrIB_Configuration[iPositionAI_Module].arrPdOut[6]	:=	arrProcOutAna[3].B1;<br/>				arrIB_Configuration[iPositionAI_Module].arrPdOut[7]	:=	arrProcOutAna[4].B0;<br/>				arrIB_Configuration[iPositionAI_Module].arrPdOut[8]	:=	arrProcOutAna[4].B1;<br/>			End_if;<br/>
									<br/>									(* Fil Analog Value structure *)<br/>			If arrAnalogInput[1].xUsable then<br/>				arrAnalogAverageValues[1].rValue	:=	arrAnalogInput[1].rValue;<br/>			End_if;<br/>			arrAnalogAverageValues[1].xValid	:=	arrAnalogInput[1].xUsable;<br/>			If arrAnalogInput[2].xUsable then<br/>				arrAnalogAverageValues[2].rValue	:=	arrAnalogInput[2].rValue;<br/>			End_if;<br/>			arrAnalogAverageValues[2].xValid	:=	arrAnalogInput[2].xUsable;<br/>			If arrAnalogInput[3].xUsable then<br/>				arrAnalogAverageValues[3].rValue	:=	arrAnalogInput[3].rValue;<br/>			End_if;<br/>			arrAnalogAverageValues[3].xValid	:=	arrAnalogInput[3].xUsable;<br/>			If arrAnalogInput[4].xUsable then<br/>				arrAnalogAverageValues[4].rValue	:=	arrAnalogInput[4].rValue;<br/>			End_if;<br/>			arrAnalogAverageValues[4].xValid	:=	arrAnalogInput[4].xUsable;<br/>
									<br/>						(* Calculate an average value of input values 1 + 2 *)<br/>			arrAnalogAverageValues[5].xValid	:=	True;<br/>			If arrAnalogInput[1].xUsable and arrAnalogInput[2].xUsable then<br/>				arrAnalogAverageValues[5].rValue	:=	(arrAnalogInput[1].rValue + arrAnalogInput[2].rValue) / 2.0;<br/>			Elsif arrAnalogInput[1].xUsable then<br/>				arrAnalogAverageValues[5].rValue	:=	arrAnalogInput[1].rValue;<br/>			Elsif arrAnalogInput[2].xUsable then<br/>				arrAnalogAverageValues[5].rValue	:=	arrAnalogInput[2].rValue;<br/>			Else<br/>				arrAnalogAverageValues[5].xValid	:=	False;<br/>			End_if;<br/>
									<br/>						(* Calculate an average value of input values 3 + 4 *)<br/>			arrAnalogAverageValues[6].xValid	:=	True;<br/>			If arrAnalogInput[3].xUsable and arrAnalogInput[4].xUsable then<br/>				arrAnalogAverageValues[6].rValue	:=	(arrAnalogInput[3].rValue + arrAnalogInput[4].rValue) / 2.0;<br/>			Elsif arrAnalogInput[3].xUsable then<br/>				arrAnalogAverageValues[6].rValue	:=	arrAnalogInput[3].rValue;<br/>			Elsif arrAnalogInput[4].xUsable then<br/>				arrAnalogAverageValues[6].rValue	:=	arrAnalogInput[4].rValue;<br/>			Else<br/>				arrAnalogAverageValues[6].xValid	:=	False;<br/>			End_if;<br/>
									<br/>						(* Calculate an average value of input values 1 + 2 + 3 + 4 *)<br/>			arrAnalogAverageValues[7].xValid	:=	True;<br/>			If arrAnalogInput[1].xUsable and arrAnalogInput[2].xUsable													(* Availability *)<br/>			and arrAnalogInput[3].xUsable and arrAnalogInput[4].xUsable then											(* 1 + 2 + 3 + 4 *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[1].rValue + arrAnalogInput[2].rValue + <br/>														arrAnalogInput[3].rValue + arrAnalogInput[4].rValue) / 4.0;<br/>			Elsif arrAnalogInput[1].xUsable and arrAnalogInput[2].xUsable and arrAnalogInput[3].xUsable then			(* 1 + 2 + 3 + X *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[1].rValue + arrAnalogInput[2].rValue + <br/>														arrAnalogInput[3].rValue) / 3.0;<br/>			Elsif arrAnalogInput[1].xUsable and arrAnalogInput[2].xUsable and arrAnalogInput[4].xUsable then			(* 1 + 2 + X + 4 *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[1].rValue + arrAnalogInput[2].rValue + <br/>														arrAnalogInput[4].rValue) / 3.0;<br/>			Elsif arrAnalogInput[1].xUsable and arrAnalogInput[3].xUsable and arrAnalogInput[4].xUsable then			(* 1 + X + 3 + 4 *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[1].rValue + arrAnalogInput[3].rValue + <br/>														arrAnalogInput[4].rValue) / 3.0;<br/>			Elsif arrAnalogInput[3].xUsable and arrAnalogInput[2].xUsable and arrAnalogInput[4].xUsable then			(* X + 2 + 3 + 4 *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[3].rValue + arrAnalogInput[2].rValue + <br/>														arrAnalogInput[4].rValue) / 3.0;<br/>			Elsif arrAnalogInput[1].xUsable and arrAnalogInput[2].xUsable then											(* 1 + 2 + X + X *)<br/>				arrAnalogAverageValues[7].rValue	:=	arrAnalogAverageValues[5].rValue;<br/>			Elsif arrAnalogInput[1].xUsable and arrAnalogInput[3].xUsable then											(* 1 + X + 3 + X *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[1].rValue + arrAnalogInput[3].rValue) / 2.0;<br/>			Elsif arrAnalogInput[1].xUsable and arrAnalogInput[4].xUsable then											(* 1 + X + X + 4 *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[1].rValue + arrAnalogInput[4].rValue) / 2.0;<br/>			Elsif arrAnalogInput[2].xUsable and arrAnalogInput[4].xUsable then											(* X + 2 + X + 4 *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[2].rValue + arrAnalogInput[4].rValue) / 2.0;<br/>			Elsif arrAnalogInput[2].xUsable and arrAnalogInput[3].xUsable then											(* X + 2 + 3 + X *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[2].rValue + arrAnalogInput[3].rValue) / 2.0;<br/>			Elsif arrAnalogInput[3].xUsable and arrAnalogInput[4].xUsable then											(* X + X + 3 + 4 *)<br/>				arrAnalogAverageValues[7].rValue	:=	(arrAnalogInput[3].rValue + arrAnalogInput[4].rValue) / 2.0;<br/>
									<br/>			Elsif arrAnalogInput[1].xUsable or arrAnalogInput[2].xUsable then											(* 1 || 2 + X + X *)<br/>				arrAnalogAverageValues[7].rValue	:=	arrAnalogAverageValues[5].rValue;<br/>			Elsif arrAnalogInput[3].xUsable or arrAnalogInput[4].xUsable then											(* X + X + 3 || 4 *)<br/>				arrAnalogAverageValues[7].rValue	:=	arrAnalogAverageValues[6].rValue;<br/>			Else<br/>				arrAnalogAverageValues[7].xValid	:=	False;<br/>			End_if;<br/>
									<br/>						(* Calculate backup values of input values 1, 2, 3, 4 *)<br/>			arrAnalogAverageValues[8].xValid	:=	True;<br/>			If arrAnalogInput[1].xUsable then<br/>				arrAnalogAverageValues[8].rValue	:=	arrAnalogInput[1].rValue;<br/>			Elsif arrAnalogInput[2].xUsable and udtL20Config.iBackup_1_2_3_4_Limit &gt;= 2 then<br/>				arrAnalogAverageValues[8].rValue	:=	arrAnalogInput[2].rValue;<br/>			Elsif arrAnalogInput[3].xUsable and udtL20Config.iBackup_1_2_3_4_Limit &gt;= 3 then<br/>				arrAnalogAverageValues[8].rValue	:=	arrAnalogInput[3].rValue;<br/>			Elsif arrAnalogInput[4].xUsable and udtL20Config.iBackup_1_2_3_4_Limit &gt;= 4 then<br/>				arrAnalogAverageValues[8].rValue	:=	arrAnalogInput[4].rValue;<br/>			Else<br/>				arrAnalogAverageValues[8].xValid	:=	False;<br/>			End_if;<br/>
									<br/>						(* Calculate backup values of input values 2, 3, 4, 1 *)<br/>			arrAnalogAverageValues[9].xValid	:=	True;<br/>			If arrAnalogInput[2].xUsable then<br/>				arrAnalogAverageValues[9].rValue	:=	arrAnalogInput[2].rValue;<br/>			Elsif arrAnalogInput[3].xUsable and udtL20Config.iBackup_2_3_4_1_Limit &gt;= 2 then<br/>				arrAnalogAverageValues[9].rValue	:=	arrAnalogInput[3].rValue;<br/>			Elsif arrAnalogInput[4].xUsable and udtL20Config.iBackup_2_3_4_1_Limit &gt;= 3 then<br/>				arrAnalogAverageValues[9].rValue	:=	arrAnalogInput[4].rValue;<br/>			Elsif arrAnalogInput[1].xUsable and udtL20Config.iBackup_2_3_4_1_Limit &gt;= 4 then<br/>				arrAnalogAverageValues[9].rValue	:=	arrAnalogInput[1].rValue;<br/>			Else<br/>				arrAnalogAverageValues[9].xValid	:=	False;<br/>			End_if;<br/>
									<br/>						(* Calculate backup values of input values 3, 4, 1, 2 *)<br/>			arrAnalogAverageValues[10].xValid	:=	True;<br/>			If arrAnalogInput[3].xUsable then<br/>				arrAnalogAverageValues[10].rValue	:=	arrAnalogInput[3].rValue;<br/>			Elsif arrAnalogInput[4].xUsable and udtL20Config.iBackup_3_4_1_2_Limit &gt;= 2 then<br/>				arrAnalogAverageValues[10].rValue	:=	arrAnalogInput[4].rValue;<br/>			Elsif arrAnalogInput[1].xUsable and udtL20Config.iBackup_3_4_1_2_Limit &gt;= 3 then<br/>				arrAnalogAverageValues[10].rValue	:=	arrAnalogInput[1].rValue;<br/>			Elsif arrAnalogInput[2].xUsable and udtL20Config.iBackup_3_4_1_2_Limit &gt;= 4 then<br/>				arrAnalogAverageValues[10].rValue	:=	arrAnalogInput[2].rValue;<br/>			Else<br/>				arrAnalogAverageValues[10].xValid	:=	False;<br/>			End_if;<br/>
									<br/>						(* Calculate backup values of input values 4, 1, 2, 3 *)<br/>			arrAnalogAverageValues[11].xValid	:=	True;<br/>			If arrAnalogInput[4].xUsable then<br/>				arrAnalogAverageValues[11].rValue	:=	arrAnalogInput[4].rValue;<br/>			Elsif arrAnalogInput[1].xUsable and udtL20Config.iBackup_4_1_2_3_Limit &gt;= 2 then<br/>				arrAnalogAverageValues[11].rValue	:=	arrAnalogInput[1].rValue;<br/>			Elsif arrAnalogInput[2].xUsable and udtL20Config.iBackup_4_1_2_3_Limit &gt;= 3 then<br/>				arrAnalogAverageValues[11].rValue	:=	arrAnalogInput[2].rValue;<br/>			Elsif arrAnalogInput[3].xUsable and udtL20Config.iBackup_4_1_2_3_Limit &gt;= 4 then<br/>				arrAnalogAverageValues[11].rValue	:=	arrAnalogInput[3].rValue;<br/>			Else<br/>				arrAnalogAverageValues[11].xValid	:=	False;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>Else<br/>	xDone	:=	False;<br/>	xActive	:=	False;<br/>End_if;<br/>
									<br/>(* ATS Demo (other IB IL AI Module) *)<br/>	If xAnalogExist then<br/>		If arrIB_Configuration[iPositionAI_Module].iPdLenCompl = 32  then<br/>			strDiag			:=	'Analog module for demonstration was found';<br/>
									<br/>	(* *)	wTemp.B0							:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[2];<br/>			wTemp.B1							:=	arrIB_Configuration[iPositionAI_Module].arrPdIn[1];<br/>	(* *)		IL_AI_2_SF_V1_02_1();<br/>			IL_AI_2_SF_V1_02_1.xActivate		:=	xAnalogExist;<br/>			IL_AI_2_SF_V1_02_1.wInputAddress	:=	wTemp;<br/>			IL_AI_2_SF_V1_02_1.rHI_Limit		:=	udtL20Config.rMaxCd1;<br/>			IL_AI_2_SF_V1_02_1.rLO_Limit		:=	0.0;<br/>			IL_AI_2_SF_V1_02_1.xNoFilter		:=	False;<br/>			IL_AI_2_SF_V1_02_1.iSelectFormat	:=	0;<br/>			IL_AI_2_SF_V1_02_1.iSelectRange		:=	0;(* *)<br/>			xActiveAI2SF						:=	IL_AI_2_SF_V1_02_1.xActive;<br/>			xErrorAI2SF							:=	IL_AI_2_SF_V1_02_1.xError;<br/>			wDiagCodeAI2SF						:=	IL_AI_2_SF_V1_02_1.wDiagCode;<br/>			wTemp								:=	IL_AI_2_SF_V1_02_1.wOutputAddress;<br/>
									<br/>			FB_AnalogAverage_01_1.rInputValue	:=	IL_AI_2_SF_V1_02_1.rNormValue;<br/>			arrAnalogAverageValues[1].xValid	:=	True;<br/>			arrAnalogAverageValues[1].rValue	:=	FB_AnalogAverage_01_1.rAverageValue;<br/>
									<br/>			If xActiveAI2SF and not xErrorAI2SF then<br/>				arrAnalogInput[1].xUsable		:=	True;<br/>				arrAnalogInput[1].rValue		:=	IL_AI_2_SF_V1_02_1.rNormValue;<br/>			Else<br/>				arrAnalogInput[1].xUsable		:=	False;<br/>			End_if;<br/>			arrAnalogAverageValues[2].rValue	:=	0.0;<br/>			arrAnalogAverageValues[2].xValid	:=	False;<br/>
									<br/>			arrAnalogAverageValues[3].rValue	:=	0.0;<br/>			arrAnalogAverageValues[3].xValid	:=	False;<br/>
									<br/>			arrAnalogAverageValues[4].rValue	:=	0.0;<br/>			arrAnalogAverageValues[4].xValid	:=	False;<br/>
									<br/>			arrIB_Configuration[iPositionAI_Module].arrPdOut[1] :=	wTemp.B0;<br/>			arrIB_Configuration[iPositionAI_Module].arrPdOut[2] :=	wTemp.B1; (* *)<br/>		End_if;<br/>	End_if;<br/>(* END_ATS Demo *)<br/>
									<br/>IL_AI_4_UI_Com_V1_01_1(udtPara	:=	udtParaAna); (* activate average FBs *)<br/>udtParaAna						:=	IL_AI_4_UI_Com_V1_01_1.udtPara;<br/>FB_AnalogAverage_01_1(xActivate	:=	arrAnalogInput[1].xUsable,<br/>diAverageTime					:=	diAverageTime);<br/>FB_AnalogAverage_01_2(xActivate	:=	arrAnalogInput[2].xUsable,<br/>diAverageTime					:=	diAverageTime);<br/>FB_AnalogAverage_01_3(xActivate	:=	arrAnalogInput[3].xUsable,<br/>diAverageTime					:=	diAverageTime);<br/>FB_AnalogAverage_01_4(xActivate	:=	arrAnalogInput[4].xUsable,<br/>diAverageTime					:=	diAverageTime);<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="SelectValue">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">If xActivate then<br/>	(* Searching for selected analog values *)<br/>	If iSelectValue1 &gt; 0 and iSelectValue1 &lt; 12 then<br/>		rSelectedValue1	:= arrAnalogAverageValues[iSelectValue1].rValue;<br/>	Else<br/>		rSelectedValue1	:=	0.0;<br/>	End_if;<br/>	If iSelectValue2 &gt; 0 and iSelectValue2 &lt; 12 then<br/>		rSelectedValue2	:=	arrAnalogAverageValues[iSelectValue2].rValue;<br/>	Else<br/>		rSelectedValue2	:=	0.0;<br/>	End_if;<br/>	If iSelectValue3 &gt; 0 and iSelectValue3 &lt; 12 then<br/>		rSelectedValue3	:=	arrAnalogAverageValues[iSelectValue3].rValue;<br/>	Else<br/>		rSelectedValue3	:=	0.0;<br/>	End_if;<br/>	If iSelectValue4 &gt; 0 and iSelectValue4 &lt; 12 then<br/>		rSelectedValue4	:=	arrAnalogAverageValues[iSelectValue4].rValue;<br/>	Else<br/>		rSelectedValue4	:=	0.0;<br/>	End_if;<br/>	R_TRIG_ActivateS1(CLK:=	(iSelectValue1 = 1 or iSelectValue1 = 5 or iSelectValue1 = 7 or<br/>	iSelectValue1 = 8 or (iSelectValue1 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 3) or (iSelectValue1 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 2) or (iSelectValue1 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 1) or<br/>	iSelectValue2 = 8 or (iSelectValue2 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 3) or (iSelectValue2 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 2) or (iSelectValue2 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 1) or<br/>	iSelectValue3 = 8 or (iSelectValue3 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 3) or (iSelectValue3 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 2) or (iSelectValue3 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 1) or<br/>	iSelectValue4 = 8 or (iSelectValue4 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 3) or (iSelectValue4 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 2) or (iSelectValue4 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 1) or<br/>	iSelectValue2 = 1 or iSelectValue2 = 5 or iSelectValue2 = 7 or<br/>	iSelectValue3 = 1 or iSelectValue3 = 5 or iSelectValue3 = 7 or<br/>	iSelectValue4 = 1 or iSelectValue4 = 5 or iSelectValue4 = 7));<br/>	F_TRIG_ActivateS1(CLK:=(iSelectValue1 = 1 or iSelectValue1 = 5 or iSelectValue1 = 7 or<br/>	iSelectValue1 = 8 or (iSelectValue1 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 3) or (iSelectValue1 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 2) or (iSelectValue1 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 1) or<br/>	iSelectValue2 = 8 or (iSelectValue2 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 3) or (iSelectValue2 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 2) or (iSelectValue2 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 1) or<br/>	iSelectValue3 = 8 or (iSelectValue3 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 3) or (iSelectValue3 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 2) or (iSelectValue3 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 1) or<br/>	iSelectValue4 = 8 or (iSelectValue4 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 3) or (iSelectValue4 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 2) or (iSelectValue4 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 1) or<br/>	iSelectValue2 = 1 or iSelectValue2 = 5 or iSelectValue2 = 7 or<br/>	iSelectValue3 = 1 or iSelectValue3 = 5 or iSelectValue3 = 7 or<br/>	iSelectValue4 = 1 or iSelectValue4 = 5 or iSelectValue4 = 7));<br/>	If R_TRIG_ActivateS1.Q then<br/>		arrAnalogInput[1].xActive	:=	True;	(* Activate, if the sensor is in use *)<br/>	Elsif F_TRIG_ActivateS1.Q then<br/>		arrAnalogInput[1].xActive	:=	False;<br/>	End_if;<br/>
									<br/>	F_TRIG_ActivateS2(CLK:=(iSelectValue1 = 2 or iSelectValue1 = 5 or iSelectValue1 = 7 or<br/>	iSelectValue1 = 9 or (iSelectValue1 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 1) or (iSelectValue1 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 3) or (iSelectValue1 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 2) or<br/>	iSelectValue2 = 9 or (iSelectValue2 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 1) or (iSelectValue2 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 3) or (iSelectValue2 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 2) or<br/>	iSelectValue3 = 9 or (iSelectValue3 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 1) or (iSelectValue3 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 3) or (iSelectValue3 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 2) or<br/>	iSelectValue4 = 9 or (iSelectValue4 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 1) or (iSelectValue4 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 3) or (iSelectValue4 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 2) or<br/>	iSelectValue2 = 2 or iSelectValue2 = 5 or iSelectValue2 = 7 or<br/>	iSelectValue3 = 2 or iSelectValue3 = 5 or iSelectValue3 = 7 or<br/>	iSelectValue4 = 2 or iSelectValue4 = 5 or iSelectValue4 = 7 ));<br/>	R_TRIG_ActivateS2(CLK:=(iSelectValue1 = 2 or iSelectValue1 = 5 or iSelectValue1 = 7 or<br/>	iSelectValue1 = 9 or (iSelectValue1 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 1) or (iSelectValue1 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 3) or (iSelectValue1 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 2) or<br/>	iSelectValue2 = 9 or (iSelectValue2 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 1) or (iSelectValue2 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 3) or (iSelectValue2 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 2) or<br/>	iSelectValue3 = 9 or (iSelectValue3 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 1) or (iSelectValue3 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 3) or (iSelectValue3 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 2) or<br/>	iSelectValue4 = 9 or (iSelectValue4 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 1) or (iSelectValue4 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 3) or (iSelectValue4 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 2) or<br/>	iSelectValue2 = 2 or iSelectValue2 = 5 or iSelectValue2 = 7 or<br/>	iSelectValue3 = 2 or iSelectValue3 = 5 or iSelectValue3 = 7 or<br/>	iSelectValue4 = 2 or iSelectValue4 = 5 or iSelectValue4 = 7 ));<br/>	If R_TRIG_ActivateS2.Q then<br/>		arrAnalogInput[2].xActive	:=	True;	(* Activate, if the sensor is in use *)<br/>	Elsif F_TRIG_ActivateS2.Q then<br/>		arrAnalogInput[2].xActive	:=	False;<br/>	End_if;<br/>
									<br/>	R_TRIG_ActivateS3(CLK:=(iSelectValue1 = 3 or iSelectValue1 = 6 or iSelectValue1 = 7 or<br/>	iSelectValue1 = 10 or (iSelectValue1 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 2) or (iSelectValue1 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 1) or (iSelectValue1 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 3) or<br/>	iSelectValue2 = 10 or (iSelectValue2 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 2) or (iSelectValue2 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 1) or (iSelectValue2 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 3) or<br/>	iSelectValue3 = 10 or (iSelectValue3 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 2) or (iSelectValue3 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 1) or (iSelectValue3 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 3) or<br/>	iSelectValue4 = 10 or (iSelectValue4 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 2) or (iSelectValue4 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 1) or (iSelectValue4 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 3) or<br/>	iSelectValue2 = 3 or iSelectValue2 = 6 or iSelectValue2 = 7 or<br/>	iSelectValue3 = 3 or iSelectValue3 = 6 or iSelectValue3 = 7 or<br/>	iSelectValue4 = 3 or iSelectValue4 = 6 or iSelectValue4 = 7));<br/>	F_TRIG_ActivateS3(CLK:=(iSelectValue1 = 3 or iSelectValue1 = 6 or iSelectValue1 = 7 or<br/>	iSelectValue1 = 10 or (iSelectValue1 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 2) or (iSelectValue1 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 1) or (iSelectValue1 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 3) or<br/>	iSelectValue2 = 10 or (iSelectValue2 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 2) or (iSelectValue2 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 1) or (iSelectValue2 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 3) or<br/>	iSelectValue3 = 10 or (iSelectValue3 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 2) or (iSelectValue3 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 1) or (iSelectValue3 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 3) or<br/>	iSelectValue4 = 10 or (iSelectValue4 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 2) or (iSelectValue4 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 1) or (iSelectValue4 = 11 and udtL20Config.iBackup_4_1_2_3_Limit &gt; 3) or<br/>	iSelectValue2 = 3 or iSelectValue2 = 6 or iSelectValue2 = 7 or<br/>	iSelectValue3 = 3 or iSelectValue3 = 6 or iSelectValue3 = 7 or<br/>	iSelectValue4 = 3 or iSelectValue4 = 6 or iSelectValue4 = 7));<br/>	If R_TRIG_ActivateS3.Q then<br/>		arrAnalogInput[3].xActive	:=	True;	(* Activate, if the sensor is in use *)<br/>	Elsif F_TRIG_ActivateS3.Q then<br/>		arrAnalogInput[3].xActive	:=	False;<br/>	End_if;<br/>
									<br/>	R_TRIG_ActivateS4(CLK:=(iSelectValue1 = 4 or iSelectValue1 = 6 or iSelectValue1 = 7 or<br/>	iSelectValue1 = 11 or (iSelectValue1 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 3) or (iSelectValue1 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 2) or (iSelectValue1 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 1) or<br/>	iSelectValue2 = 11 or (iSelectValue2 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 3) or (iSelectValue2 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 2) or (iSelectValue2 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 1) or<br/>	iSelectValue3 = 11 or (iSelectValue3 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 3) or (iSelectValue3 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 2) or (iSelectValue3 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 1) or<br/>	iSelectValue4 = 11 or (iSelectValue4 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 3) or (iSelectValue4 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 2) or (iSelectValue4 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 1) or<br/>	iSelectValue2 = 4 or iSelectValue2 = 6 or iSelectValue2 = 7 or<br/>	iSelectValue3 = 4 or iSelectValue3 = 6 or iSelectValue3 = 7 or<br/>	iSelectValue4 = 4 or iSelectValue4 = 6 or iSelectValue4 = 7));<br/>	F_TRIG_ActivateS4(CLK:=(iSelectValue1 = 4 or iSelectValue1 = 6 or iSelectValue1 = 7 or<br/>	iSelectValue1 = 11 or (iSelectValue1 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 3) or (iSelectValue1 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 2) or (iSelectValue1 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 1) or<br/>	iSelectValue2 = 11 or (iSelectValue2 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 3) or (iSelectValue2 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 2) or (iSelectValue2 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 1) or<br/>	iSelectValue3 = 11 or (iSelectValue3 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 3) or (iSelectValue3 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 2) or (iSelectValue3 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 1) or<br/>	iSelectValue4 = 11 or (iSelectValue4 = 8 and udtL20Config.iBackup_1_2_3_4_Limit &gt; 3) or (iSelectValue4 = 9 and udtL20Config.iBackup_2_3_4_1_Limit &gt; 2) or (iSelectValue4 = 10 and udtL20Config.iBackup_3_4_1_2_Limit &gt; 1) or<br/>	iSelectValue2 = 4 or iSelectValue2 = 6 or iSelectValue2 = 7 or<br/>	iSelectValue3 = 4 or iSelectValue3 = 6 or iSelectValue3 = 7 or<br/>	iSelectValue4 = 4 or iSelectValue4 = 6 or iSelectValue4 = 7));<br/>	If R_TRIG_ActivateS4.Q then<br/>		arrAnalogInput[4].xActive	:=	True;	(* Activate, if the sensor is in use *)<br/>	Elsif F_TRIG_ActivateS4.Q then<br/>		arrAnalogInput[4].xActive	:=	False;<br/>	End_if;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="AlarmHandling">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">F_TRIG_1(CLK	:=	arrAnalogInput[1].xUsable);<br/>F_TRIG_2(CLK	:=	arrAnalogInput[2].xUsable);<br/>F_TRIG_3(CLK	:=	arrAnalogInput[3].xUsable);<br/>F_TRIG_4(CLK	:=	arrAnalogInput[4].xUsable);<br/>R_TRIG_1(CLK	:=	xConfirmAlarm);<br/>R_TRIG_2(CLK	:=	arrAnalogInput[1].xUsable);<br/>R_TRIG_3(CLK	:=	arrAnalogInput[2].xUsable);<br/>R_TRIG_4(CLK	:=	arrAnalogInput[3].xUsable);<br/>R_TRIG_5(CLK	:=	arrAnalogInput[4].xUsable);<br/>
									<br/>If xActivate then	(* Creating Alarm text *)<br/>	If xReportAlarm then<br/>		strDiag					:=	'Analog Error still active!'; (* Output, if a confirmation occurse, but the Error is still active *)<br/>		xReportAlarm			:=	False;<br/>	End_if;<br/>
									<br/>	If F_TRIG_1.Q and arrAnalogInput[1].xActive or (arrAnalogInput[1].xActive and not arrAnalogInput[1].xUsable and not xAlarm) then<br/>		If arrAnalogInput[1].wDiagCode = word#16#8001 or arrAnalogInput[1].wDiagCode = word#16#8080 then<br/>			strDiag				:=	'Warning: Analog module channel 1 ';<br/>			If arrAnalogInput[1].wDiagCode = word#16#8001 then<br/>				strDiag			:=	concat(strDiag,'overrange');<br/>				xPreAlarm		:=	True;<br/>			Elsif arrAnalogInput[1].wDiagCode = word#16#8080 then<br/>				strDiag			:=	concat(strDiag,'underrange');<br/>				xPreAlarm		:=	True;<br/>			End_if;<br/>		Elsif arrAnalogInput[1].wDiagCode = word#16#8002 or arrAnalogInput[1].wDiagCode = word#16#8020<br/>		or arrAnalogInput[1].wDiagCode = word#16#8040 then<br/>			strDiag				:=	'Error: Analog module channel 1 ';<br/>			If arrAnalogInput[1].wDiagCode = word#16#8002 then<br/>				strDiag			:=	concat(strDiag,'wire break');<br/>				xAlarm			:=	True;<br/>			Elsif arrAnalogInput[1].wDiagCode = word#16#8020 then<br/>				strDiag			:=	concat(strDiag,'power supply missing');<br/>				xAlarm			:=	True;<br/>			Elsif arrAnalogInput[1].wDiagCode = word#16#8040 then<br/>				strDiag			:=	concat(strDiag,'defect');<br/>				xAlarm			:=	True;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	If F_TRIG_2.Q and arrAnalogInput[2].xActive or (arrAnalogInput[2].xActive and not arrAnalogInput[2].xUsable and not xAlarm) then<br/>		If arrAnalogInput[2].wDiagCode = word#16#8001 or arrAnalogInput[2].wDiagCode = word#16#8080 then<br/>			strDiag				:=	'Warning: Analog module channel 2 ';<br/>			If arrAnalogInput[2].wDiagCode = word#16#8001 then<br/>				strDiag			:=	concat(strDiag,'overrange');<br/>				xPreAlarm		:=	True;<br/>			Elsif arrAnalogInput[2].wDiagCode = word#16#8080 then<br/>				strDiag			:=	concat(strDiag,'underrange');<br/>				xPreAlarm		:=	True;<br/>			End_if;<br/>		Elsif arrAnalogInput[2].wDiagCode = word#16#8002 or arrAnalogInput[2].wDiagCode = word#16#8020<br/>		or arrAnalogInput[2].wDiagCode = word#16#8040 then<br/>			strDiag				:=	'Error: Analog module channel 2 ';<br/>			If arrAnalogInput[2].wDiagCode = word#16#8002 then<br/>				strDiag			:=	concat(strDiag,'wire break');<br/>				xAlarm			:=	True;<br/>			Elsif arrAnalogInput[2].wDiagCode = word#16#8020 then<br/>				strDiag			:=	concat(strDiag,'power supply missing');<br/>				xAlarm			:=	True;<br/>			Elsif arrAnalogInput[2].wDiagCode = word#16#8040 then<br/>				strDiag			:=	concat(strDiag,'defect');<br/>				xAlarm			:=	True;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	If F_TRIG_3.Q and arrAnalogInput[3].xActive or (arrAnalogInput[3].xActive and not arrAnalogInput[3].xUsable and not xAlarm) then<br/>		If arrAnalogInput[3].wDiagCode = word#16#8001 or arrAnalogInput[3].wDiagCode = word#16#8080 then<br/>			strDiag				:=	'Warning: Analog module channel 3 ';<br/>			If arrAnalogInput[3].wDiagCode = word#16#8001 then<br/>				strDiag			:=	concat(strDiag,'overrange');<br/>				xPreAlarm		:=	True;<br/>			Elsif arrAnalogInput[3].wDiagCode = word#16#8080 then<br/>				strDiag			:=	concat(strDiag,'underrange');<br/>				xPreAlarm		:=	True;<br/>			End_if;<br/>		Elsif arrAnalogInput[3].wDiagCode = word#16#8002 or arrAnalogInput[3].wDiagCode = word#16#8020<br/>		or arrAnalogInput[3].wDiagCode = word#16#8040 then<br/>			strDiag				:=	'Error: Analog module channel 3 ';<br/>			If arrAnalogInput[3].wDiagCode = word#16#8002 then<br/>				strDiag			:=	concat(strDiag,'wire break');<br/>				xAlarm			:=	True;<br/>			Elsif arrAnalogInput[3].wDiagCode = word#16#8020 then<br/>				strDiag			:=	concat(strDiag,'power supply missing');<br/>				xAlarm			:=	True;<br/>			Elsif arrAnalogInput[3].wDiagCode = word#16#8040 then<br/>				strDiag			:=	concat(strDiag,'defect');<br/>				xAlarm			:=	True;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	If F_TRIG_4.Q and arrAnalogInput[4].xActive or (arrAnalogInput[4].xActive and not arrAnalogInput[4].xUsable and not xAlarm) then<br/>		If arrAnalogInput[4].wDiagCode = word#16#8001 or arrAnalogInput[4].wDiagCode = word#16#8080 then<br/>			strDiag				:=	'Warning: Analog module channel 4 ';<br/>			If arrAnalogInput[4].wDiagCode = word#16#8001 then<br/>				strDiag			:=	concat(strDiag,'overrange');<br/>				xPreAlarm		:=	True;<br/>			Elsif arrAnalogInput[4].wDiagCode = word#16#8080 then<br/>				strDiag			:=	concat(strDiag,'underrange');<br/>				xPreAlarm		:=	True;<br/>			End_if;<br/>		Elsif arrAnalogInput[4].wDiagCode = word#16#8002 or arrAnalogInput[4].wDiagCode = word#16#8020<br/>		or arrAnalogInput[4].wDiagCode = word#16#8040 then<br/>			strDiag				:=	'Error: Analog module channel 4 ';<br/>			If arrAnalogInput[4].wDiagCode = word#16#8002 then<br/>				strDiag			:=	concat(strDiag,'wire break');<br/>				xAlarm			:=	True;<br/>			Elsif arrAnalogInput[4].wDiagCode = word#16#8020 then<br/>				strDiag			:=	concat(strDiag,'power supply missing');<br/>				xAlarm			:=	True;<br/>			Elsif arrAnalogInput[4].wDiagCode = word#16#8040 then<br/>				strDiag			:=	concat(strDiag,'defect');<br/>				xAlarm			:=	True;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>
									<br/>	If xAlarm then<br/>		If R_TRIG_1.Q then (* Confirmation*)<br/>			If (((arrAnalogInput[1].xActive and arrAnalogInput[1].wDiagCode &lt; word#16#8002) or not arrAnalogInput[1].xActive) and<br/>				((arrAnalogInput[2].xActive and arrAnalogInput[2].wDiagCode &lt; word#16#8002) or not arrAnalogInput[2].xActive) and<br/>				((arrAnalogInput[3].xActive and arrAnalogInput[3].wDiagCode &lt; word#16#8002) or not arrAnalogInput[3].xActive) and<br/>				((arrAnalogInput[4].xActive and arrAnalogInput[4].wDiagCode &lt; word#16#8002) or not arrAnalogInput[4].xActive)) then<br/>				xAlarm			:=	False;<br/>				strDiag			:=	'Analog Error confirmed';<br/>			Else<br/>				xReportAlarm	:=	True;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	If xPreAlarm then<br/>		If (R_TRIG_2.Q and arrAnalogInput[1].xActive) or (R_TRIG_3.Q and arrAnalogInput[2].xActive) or (R_TRIG_4.Q and arrAnalogInput[3].xActive) or (R_TRIG_5.Q and arrAnalogInput[4].xActive) then<br/>			If (((arrAnalogInput[1].xActive and arrAnalogInput[1].wDiagCode &lt;&gt; word#16#8001) or not arrAnalogInput[1].xActive) and<br/>				((arrAnalogInput[2].xActive and arrAnalogInput[2].wDiagCode &lt;&gt; word#16#8001) or not arrAnalogInput[2].xActive) and<br/>				((arrAnalogInput[3].xActive and arrAnalogInput[3].wDiagCode &lt;&gt; word#16#8001) or not arrAnalogInput[3].xActive) and<br/>				((arrAnalogInput[4].xActive and arrAnalogInput[4].wDiagCode &lt;&gt; word#16#8001) or not arrAnalogInput[4].xActive)) then<br/>				xPreAlarm		:=	False;<br/>			Else<br/>				xReportAlarm	:=	True;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	If xAlarm or xPreAlarm then (* Warning or Error is gone *)<br/>		If R_TRIG_2.Q and arrAnalogInput[1].xActive then<br/>			strDiag			:=	'Analog value channel 1 valid';<br/>		End_if;<br/>		If R_TRIG_3.Q and arrAnalogInput[2].xActive then<br/>			strDiag			:=	'Analog value channel 2 valid';<br/>		End_if;<br/>		If R_TRIG_4.Q and arrAnalogInput[3].xActive then<br/>			strDiag			:=	'Analog value channel 3 valid';<br/>		End_if;<br/>		If R_TRIG_5.Q and arrAnalogInput[4].xActive then<br/>			strDiag			:=	'Analog value channel 4 valid';<br/>		End_if;<br/>	End_if;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_L20_AnalogInput_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_AnalogAverage_01" pouType="functionBlock" pouGroup="Analog" lastChange="2016-06-21T15:05:28">
				<interface>
					<outputVars retain="false">
						<variable name="xActive" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
						<variable name="rAverageValue" group="Output Parameter">
							<type>
								<REAL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">calculated average value</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="rInputValue" group="Input Parameter">
							<type>
								<REAL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">actual value to calculate an average value</p>
								</html>
							</documentation>
						</variable>
						<variable name="diAverageTime" group="Input Parameter">
							<type>
								<DINT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Time between calculate the last 10 values. E. g. every 5s</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<localVars retain="false">
						<variable name="TON_1" group="Default">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
						<variable name="xWait" group="Default">
							<type>
								<BOOL/>
							</type>
							<initialValue>
								<simpleValue value="true"/>
							</initialValue>
						</variable>
						<variable name="arrValues" group="Default">
							<type>
								<derived name="ARR_R_0_9"/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xInit" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iLoop2" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="rTotalValue" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="iCount" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="tAveragetime" group="Default">
							<type>
								<TIME/>
							</type>
							<initialValue>
								<simpleValue value="t#5s"/>
							</initialValue>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_AnalogAverage_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Analog Average *)<br/>tAveragetime	:=	dint_to_time(diAverageTime * dint#1000);<br/>TON_1(IN	:=	xWait,<br/>	PT		:=	tAveragetime);				(* Interval *)<br/>If xActivate then<br/>	xActive	:=	True;<br/>
									<br/>	If not xInit then						(* Copy the first value into the output, 		*)<br/>		xInit				:=	True;		(* to have a value at the first five secconds	*)<br/>		For iLoop := 0 to 9 do<br/>			arrValues[iLoop]	:=	rInputValue;<br/>		End_for;<br/>		iLoop				:=	1;<br/>	End_if;<br/>
									<br/>	If TON_1.Q then							(* Fill the Average Array *)<br/>		arrValues[iLoop]	:=	rInputValue;<br/>		If iLoop &lt; 9 then<br/>			iLoop	:=	iLoop + 1;<br/>		Else<br/>			iLoop	:=	0;<br/>		End_if;<br/>		xWait	:=	False;<br/>	Else<br/>		xWait	:=	True;<br/>	End_if;<br/>
									<br/>	rTotalValue	:=	0.0;<br/>	iCount		:=	0;<br/>	For iLoop2 := 0 to 9 do					(* Calculate the avarage with values &gt; 0 *)<br/>		If arrValues[iLoop2] &lt;&gt; 0.0 then<br/>			rTotalValue	:=	rTotalValue + arrValues[iLoop2];<br/>			iCount		:=	iCount + 1; <br/>		End_if;<br/>	End_for;<br/>	If iCount &gt; 0 then						(* Write 0, if the array is empty *)<br/>	(*	rAverageValue	:=	rTotalValue / int_to_real(iCount); *)<br/>		rAverageValue	:=	rTotalValue / 10.0; <br/>	Else<br/>		rAverageValue	:=	0.0;<br/>	End_if;<br/>Else<br/>	xActive	:=	False;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_AnalogAverage_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_HelpSetIP_01" pouType="functionBlock" pouGroup="Function_Blocks" lastChange="2016-06-08T12:41:59">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">activate FB</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xSetIP" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">trigger to set the IP parameter</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="xTakeIP" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">trigger to transfer the parameter strings to byte arrays</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrIP_Address" group="In- Output Parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">output IP array</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrSubnetMask" group="In- Output Parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">output subnet mask array</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrStdGateway" group="In- Output Parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">output std gateway array</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtNetworkParameter" group="In- Output Parameter">
							<type>
								<derived name="udtNetwork"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">input strings</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="iTemp" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iIP" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="strTemp" group="Default">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="iDiff" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLen" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTemp3" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrTemp" group="Default">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="iTest" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTest2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_HelpSetIP_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* HelpSetIP *)<br/>(* transfer string network parameter to bytes *)<br/>If xActivate then<br/>	xActive	:=	True;<br/>
									<br/>	If xSetIP then<br/>		xSetIP	:=	False;<br/>	End_if;	<br/>
									<br/>	If xTakeIP then<br/>		xTakeIP	:=	False;<br/>
									<br/>		iTemp	:=	0;	(* IP Value *)<br/>		iIP		:=	4;	(* State from field 4 to 1 *)<br/>		strTemp	:=	udtNetworkParameter.strIP;<br/>		iLoop2	:=	3;	(* 3 = IP, 2 = Subnet, 1 = Gateway *)<br/>	End_if;<br/>
									<br/>	iTest	:=	GET_CHAR(strTemp,iTest2);<br/>
									<br/>
									<br/>	Case iIP of<br/>		0:<br/>			iIP	:=	iIP;<br/>
									<br/>		4:	(* first octet *)<br/>			iLen	:=	len(strTemp);<br/>			For iLoop := 0 to 3 do<br/>				iDiff	:=	iLen - iLoop;<br/>				iTemp	:=	GET_CHAR(strTemp,iDiff) - 48;	(* ASCII numbers 48 - 85 = 0 - 9 *)<br/>				If iTemp &gt; 9 or iTemp &lt; 0 then<br/>					iIP		:=	3;<br/>					iDiff	:=	iDiff - 1;<br/>					Exit;<br/>				Else<br/>					If iLen = iDiff then<br/>						iTemp3	:=	iTemp;<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3);<br/>					Elsif iLoop = 1 then<br/>						iTemp3	:=	iTemp3 + (10 * iTemp);<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3);<br/>					Else							<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3 + (100 * iTemp));<br/>					End_if;<br/>				End_if;<br/>			End_for;<br/>
									<br/>		3:	(* second octet *)<br/>			For iLoop := 0 to 3 do<br/>				iTemp	:=	GET_CHAR(strTemp,iDiff) - 48;<br/>				If iTemp &gt; 9 or iTemp &lt; 0 then<br/>					iIP		:=	2;<br/>					iDiff	:=	iDiff - 1;<br/>					Exit;<br/>				Else<br/>					iDiff	:=	iDiff - 1;<br/>					If iLoop = 0 then<br/>						iTemp3	:=	iTemp;<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3);<br/>					Elsif iLoop = 1 then<br/>						iTemp3	:=	iTemp3 + (10 * iTemp);<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3);<br/>					Else							<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3 + (100 * iTemp));<br/>					End_if;<br/>				End_if;<br/>			End_for;<br/>
									<br/>		2:	(* third octet *)<br/>			For iLoop := 0 to 3 do<br/>				iTemp	:=	GET_CHAR(strTemp,iDiff) - 48;<br/>				If iTemp &gt; 9 or iTemp &lt; 0 then<br/>					iIP		:=	1;<br/>					iDiff	:=	iDiff - 1;<br/>					Exit;<br/>				Else<br/>					iDiff	:=	iDiff - 1;<br/>					If iLoop = 0 then<br/>						iTemp3	:=	iTemp;<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3);<br/>					Elsif iLoop = 1 then<br/>						iTemp3	:=	iTemp3 + (10 * iTemp);<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3);<br/>					Else							<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3 + (100 * iTemp));<br/>					End_if;<br/>				End_if;<br/>			End_for;<br/>
									<br/>		1:	(* fourth octet *)<br/>			For iLoop := 0 to 3 do<br/>				iTemp	:=	GET_CHAR(strTemp,iDiff) - 48;<br/>				If iTemp &gt; 9 or iTemp &lt; 0 then<br/>					(* Next network parameter *)<br/>					If iLoop2 = 3 then<br/>						iIP		:=	4;<br/>						iLoop2	:=	iLoop2 - 1;<br/>						strTemp	:=	udtNetworkParameter.strSubnet;<br/>						arrIP_Address	:=	arrTemp;<br/>					Elsif iLoop2 = 2 then<br/>						iLoop2	:=	iLoop2 - 1;<br/>						iIP		:=	4;<br/>						strTemp	:=	udtNetworkParameter.strGateway;<br/>						arrSubnetMask	:=	arrTemp;<br/>					Else<br/>						arrStdGateway	:=	arrTemp;<br/>						xSetIP			:=	True;<br/>						iIP				:=	0;<br/>					End_if;<br/>					Exit;<br/>				Else<br/>					iDiff	:=	iDiff - 1;<br/>					If iLoop = 0 then<br/>						iTemp3	:=	iTemp;<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3);<br/>					Elsif iLoop = 1 then<br/>						iTemp3	:=	iTemp3 + (10 * iTemp);<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3);<br/>					Else							<br/>						arrTemp[iIP]	:=	int_to_byte(iTemp3 + (100 * iTemp));<br/>					End_if;<br/>				End_if;<br/>			End_for;<br/>	End_case;<br/>
									<br/>Else<br/>	xActive	:=	False;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_HelpSetIP_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_DeviceMonitoring_01" pouType="functionBlock" pouGroup="Function_Blocks" lastChange="2016-11-22T14:59:52">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xConfirm" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Confirms Alarms</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput01" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput02" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput03" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput04" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput05" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput06" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput07" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput08" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput09" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput10" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput11" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInput12" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">monitorable input</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xAlarm" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Alarm</p>
								</html>
							</documentation>
						</variable>
						<variable name="strDiag" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic text</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="udtDeviceMonitoring" group="In- Output Parameter">
							<type>
								<derived name="udt_WebDataDevice"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configuration structure to define the kind of monitoring</p>
								</html>
							</documentation>
						</variable>
						<variable name="wSpecialScene" group="In- Output Parameter">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Special Scene communication structure</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="R_TRIG_1" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_2" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_3" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_4" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_5" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_6" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_7" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_8" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_9" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_10" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_11" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_12" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_1" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_2" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_3" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_4" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_5" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_6" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_7" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_8" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_9" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_10" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_11" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_12" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="xInit" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="arrInputs" group="Default">
							<type>
								<derived name="ARR_X_1_12"/>
							</type>
						</variable>
						<variable name="arrInputsNC" redundant="true" group="Default">
							<type>
								<derived name="ARR_X_1_12"/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xTemp" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="siTemp" redundant="true" group="Default">
							<type>
								<SINT/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_DeviceMonitoring_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">R_TRIG_1(CLK	:=	xInput01);<br/>R_TRIG_2(CLK	:=	xInput02);<br/>R_TRIG_3(CLK	:=	xInput03);<br/>R_TRIG_4(CLK	:=	xInput04);<br/>R_TRIG_5(CLK	:=	xInput05);<br/>R_TRIG_6(CLK	:=	xInput06);<br/>R_TRIG_7(CLK	:=	xInput07);<br/>R_TRIG_8(CLK	:=	xInput08);<br/>R_TRIG_9(CLK	:=	xInput09);<br/>R_TRIG_10(CLK	:=	xInput10);<br/>R_TRIG_11(CLK	:=	xInput11);<br/>R_TRIG_12(CLK	:=	xInput12);<br/>F_TRIG_1(CLK	:=	xInput01);<br/>F_TRIG_2(CLK	:=	xInput02);<br/>F_TRIG_3(CLK	:=	xInput03);<br/>F_TRIG_4(CLK	:=	xInput04);<br/>F_TRIG_5(CLK	:=	xInput05);<br/>F_TRIG_6(CLK	:=	xInput06);<br/>F_TRIG_7(CLK	:=	xInput07);<br/>F_TRIG_8(CLK	:=	xInput08);<br/>F_TRIG_9(CLK	:=	xInput09);<br/>F_TRIG_10(CLK	:=	xInput10);<br/>F_TRIG_11(CLK	:=	xInput11);<br/>F_TRIG_12(CLK	:=	xInput12);<br/>
									<br/>If not xInit then<br/>	xInit :=	True;<br/>	For iLoop := 1 to 12 do<br/>		udtDeviceMonitoring.arrName[iLoop]	:=	'Device '; (* initiate default names *)<br/>		udtDeviceMonitoring.arrName[iLoop]	:=	concat(udtDeviceMonitoring.arrName[iLoop],int_to_string(iLoop,'%02d'));<br/>	End_for;<br/>End_if;<br/>
									<br/>If xActivate then<br/>	xActive			:=	True;<br/>
									<br/>	arrInputs[1]	:=	R_TRIG_1.Q;<br/>	arrInputs[2]	:=	R_TRIG_2.Q;<br/>	arrInputs[3]	:=	R_TRIG_3.Q;<br/>	arrInputs[4]	:=	R_TRIG_4.Q;<br/>	arrInputs[5]	:=	R_TRIG_5.Q;<br/>	arrInputs[6]	:=	R_TRIG_6.Q;<br/>	arrInputs[7]	:=	R_TRIG_7.Q;<br/>	arrInputs[8]	:=	R_TRIG_8.Q;<br/>	arrInputs[9]	:=	R_TRIG_9.Q;<br/>	arrInputs[10]	:=	R_TRIG_10.Q;<br/>	arrInputs[11]	:=	R_TRIG_11.Q;<br/>	arrInputs[12]	:=	R_TRIG_12.Q;<br/>
									<br/>	arrInputsNC[1]	:=	F_TRIG_1.Q;<br/>	arrInputsNC[2]	:=	F_TRIG_2.Q;<br/>	arrInputsNC[3]	:=	F_TRIG_3.Q;<br/>	arrInputsNC[4]	:=	F_TRIG_4.Q;<br/>	arrInputsNC[5]	:=	F_TRIG_5.Q;<br/>	arrInputsNC[6]	:=	F_TRIG_6.Q;<br/>	arrInputsNC[7]	:=	F_TRIG_7.Q;<br/>	arrInputsNC[8]	:=	F_TRIG_8.Q;<br/>	arrInputsNC[9]	:=	F_TRIG_9.Q;<br/>	arrInputsNC[10]	:=	F_TRIG_10.Q;<br/>	arrInputsNC[11]	:=	F_TRIG_11.Q;<br/>	arrInputsNC[12]	:=	F_TRIG_12.Q;<br/>
									<br/>	For iLoop := 1 to 12 do<br/>		udtDeviceMonitoring.arrSceneActivation[iLoop]	:=	False;<br/>		If udtDeviceMonitoring.arrSelect[iLoop] = usint#1 then		(* Detect rising edge *)<br/>			If arrInputs[iLoop] then<br/>				strDiag	:= 'Error: Unexpectet state at ';			(* NO *)<br/>				strDiag	:=	Concat(strDiag,udtDeviceMonitoring.arrName[iLoop]);<br/>				udtDeviceMonitoring.arrState[iLoop]	:=	True;<br/>				xAlarm	:=	True;<br/>			Elsif arrInputsNC[iLoop] then<br/>				strDiag	:= 'State returned from ';					(* NC *)<br/>				strDiag	:=	Concat(strDiag,udtDeviceMonitoring.arrName[iLoop]);<br/>				udtDeviceMonitoring.arrState[iLoop]	:=	False;<br/>			End_If;<br/>		Elsif udtDeviceMonitoring.arrSelect[iLoop] = usint#2 then	(* Detect falling edge *)<br/>			If arrInputsNC[iLoop] then<br/>				strDiag	:= 'Error: Unexpectet state at ';			(* NC *)<br/>				strDiag	:=	Concat(strDiag,udtDeviceMonitoring.arrName[iLoop]);<br/>				udtDeviceMonitoring.arrState[iLoop]	:=	True;<br/>				xAlarm	:=	True;<br/>			Elsif arrInputs[iLoop] then<br/>				strDiag	:= 'State returned from ';					(* NO *)<br/>				strDiag	:=	Concat(strDiag,udtDeviceMonitoring.arrName[iLoop]);<br/>				udtDeviceMonitoring.arrState[iLoop]	:=	False;<br/>			End_If;<br/>		Elsif udtDeviceMonitoring.arrSelect[iLoop] = usint#3 then	(* Set SpecialScenes NO *)<br/>			udtDeviceMonitoring.arrState[iLoop]				:=	False;<br/>			udtDeviceMonitoring.arrSceneActivation[iLoop]	:=	True;<br/>			siTemp	:=	limit_sint(sint#1,udtDeviceMonitoring.arrSpecialScene[iLoop],sint#15);<br/>			siTemp	:=	siTemp - sint#1;<br/>			If arrInputs[iLoop] then<br/>				wSpecialScene	:=	S_BIT_IN_WORD(true,wSpecialScene,siTemp);<br/>			Elsif arrInputsNC[iLoop] then<br/>				wSpecialScene	:=	R_BIT_IN_WORD(true,wSpecialScene,siTemp);<br/>			End_if;<br/>		Elsif udtDeviceMonitoring.arrSelect[iLoop] = usint#4 then	(* Set SpecialScenes NC *)<br/>			udtDeviceMonitoring.arrState[iLoop]				:=	False;<br/>			udtDeviceMonitoring.arrSceneActivation[iLoop]	:=	True;<br/>			siTemp	:=	limit_sint(sint#1,udtDeviceMonitoring.arrSpecialScene[iLoop],sint#15);<br/>			siTemp	:=	siTemp - sint#1;<br/>			If arrInputsNC[iLoop] then<br/>				wSpecialScene	:=	S_BIT_IN_WORD(true,wSpecialScene,siTemp);<br/>			Elsif arrInputs[iLoop] then<br/>				wSpecialScene	:=	R_BIT_IN_WORD(true,wSpecialScene,siTemp);<br/>			End_if;<br/>
									<br/>	(*	Elsif udtDeviceMonitoring.arrSelect[iLoop] = usint#5 then	 Set Configuration *)<br/>
									<br/>	(*	Elsif udtDeviceMonitoring.arrSelect[iLoop] = usint#6 then	 Set Configuration *)<br/>		Else<br/>			udtDeviceMonitoring.arrState[iLoop]				:=	False;<br/>		End_if;<br/>	End_for;<br/>
									<br/>	If xAlarm then<br/>		If xConfirm then<br/>			For iLoop := 1 to 12 do<br/>				If udtDeviceMonitoring.arrState[iLoop] then<br/>					xTemp	:=	udtDeviceMonitoring.arrState[iLoop];<br/>					Exit;<br/>				Else<br/>					xTemp	:=	udtDeviceMonitoring.arrState[iLoop];<br/>				End_if;<br/>			End_for;<br/>			If not xTemp then<br/>				strDiag	:= 'Device monitoring alarm confirmed';<br/>				xAlarm	:=	False;<br/>			Else<br/>				strDiag	:= 'Device Alarm confirmed, but is still active';<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>Else<br/>	xActive	:=	False;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_DeviceMonitoring_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_SelectMode_01" pouType="functionBlock" pouGroup="Function_Blocks" lastChange="2016-11-15T16:04:26">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate the FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xConfirm" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Alarm confirmation</p>
								</html>
							</documentation>
						</variable>
						<variable name="xVisu" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Manual scene mode from visualization</p>
								</html>
							</documentation>
						</variable>
						<variable name="xPartly" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">TCS Partly toggle</p>
								</html>
							</documentation>
						</variable>
						<variable name="xComissioning" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger to report "Commissioning Mode is active"</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSource" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configures the scene source. 1 ^ Stand alone, 2 - 5 ^ TCS</p>
								</html>
							</documentation>
						</variable>
						<variable name="xLG_Available" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger, ATS = OK, All data for stand alone mode available</p>
								</html>
							</documentation>
						</variable>
						<variable name="xTCS_Available" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger, ATS = OK, All data for TCS mode available</p>
								</html>
							</documentation>
						</variable>
						<variable name="xConfigFileExist" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Network Config File (for Mode) exist</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xPreAlarm" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Pre Alarm</p>
								</html>
							</documentation>
						</variable>
						<variable name="strDiag" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic text</p>
								</html>
							</documentation>
						</variable>
						<variable name="xAlarm" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Alarm</p>
								</html>
							</documentation>
						</variable>
						<variable name="xActivateTCS_Interface" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate tcs interface</p>
								</html>
							</documentation>
						</variable>
						<variable name="strMode" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Mode as text</p>
								</html>
							</documentation>
						</variable>
						<variable name="xModeOK" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Mode state</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="udtSceneMode" group="In- Output Parameter">
							<type>
								<derived name="udtScene"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scene source communication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="iInit" group="In- Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Mode No. from Config File</p>
								</html>
							</documentation>
						</variable>
						<variable name="xActivateTCS" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger, activate PN TCS</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrLumgates" group="In- Output Parameter">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate communication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="xActivateMB" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger, activate MB TCS</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="F_TRIG_ManualMode" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ManualMode" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_TCS" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_PN" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_MB" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iBackupmode" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iManualScene" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xManaualModeLG" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_SelectMode_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">F_TRIG_ManualMode(CLK	:=	xVisu);			(* Trigger Manual mode from Visu *)<br/>R_TRIG_ManualMode(CLK	:=	xVisu);<br/>R_TRIG_PN(CLK			:=	xActivateTCS);	(* Trigger PN TCS mode from Visu *)<br/>R_TRIG_MB(CLK			:=	xActivateMB);	(* Trigger MB TCS mode from Visu *)<br/>
									<br/>F_TRIG_TCS(CLK			:=	xActivateTCS or xActivateMB);<br/>
									<br/>If xActivate then<br/>	xActive	:=	True;<br/>
									<br/>	(* SceneMode: 1 = Manual, 2 = Own input, 3 = external input, 4 = external input with own input as backup *)<br/>	(* ConfigFile: 5 = TCS Profinet full / 3 = TCS Profinet part / 4 = TCS Modbus full / 2 = TCS Modbus part / 1 = Stand alone / 9 = Manual *)<br/>
									<br/>	If R_TRIG_PN.Q then						(* Block two activateable TSC modes *)<br/>		xActivateMB		:=	False;<br/>		xActivateTCS	:=	True;<br/>	Elsif R_TRIG_MB.Q then<br/>		xActivateMB		:=	True;<br/>		xActivateTCS	:=	False;<br/>	End_if;<br/>
									<br/>	If xActivateTCS and not xPartly then	(* Detect mode changes from visualization *)<br/>		iInit		:=	5;<br/>	Elsif xActivateTCS and xPartly then<br/>		iInit		:=	3;<br/>	Elsif xActivateMB and not xPartly then<br/>		iInit		:=	4;<br/>	Elsif xActivateMB and xPartly then<br/>		iInit		:=	2;<br/>	Elsif F_TRIG_TCS.Q then<br/>		iInit		:=	1;<br/>		For iLoop := 1 to 4 do<br/>			udtSceneMode.arrMode[iLoop]	:=	2;<br/>		End_for;<br/>	End_if;<br/>
									<br/>	If R_TRIG_ManualMode.Q then				(* Activate Manual Mode from visualization *)<br/>		iBackupmode						:=	udtSceneMode.arrMode[iSource];	(* Store last active mode to restore after leaving manual mode*)<br/>		udtSceneMode.arrMode[iSource]	:=	1;								(* Set manual scene mode *)<br/>		strDiag							:=	'Warning: Manual mode is active. Scene: ';<br/>		strDiag							:=	concat(strDiag,int_to_string(udtSceneMode.arrManualScene[iSource],'%02d'));<br/>		iManualScene					:=	udtSceneMode.arrManualScene[iSource];	(* Set scene *)<br/>		xActivateTCS_Interface			:=	False;							(* Deactivate tcs interface *)<br/>		xPreAlarm						:=	True;							(* Activate warning *)<br/>		strMode							:=	'Manual';<br/>	Elsif xVisu and iManualScene &lt;&gt; udtSceneMode.arrManualScene[iSource] then	(* repeate warining after changeing manual scene *)<br/>		strDiag							:=	'Warning: Manual mode is active. Scene: ';<br/>		strDiag							:=	concat(strDiag,int_to_string(udtSceneMode.arrManualScene[iSource],'%02d'));<br/>		iManualScene					:=	udtSceneMode.arrManualScene[iSource];<br/>	Elsif xVisu then						(* hold warnings active *)<br/>		xPreAlarm						:=	True;<br/>		xActivateTCS_Interface			:=	False;<br/>	Elsif F_TRIG_ManualMode.Q then			(* restore old mode after manual mode ends *)<br/>		udtSceneMode.arrMode[iSource]	:=	iBackupmode;<br/>		strDiag							:=	'Configuration returned';<br/>		xPreAlarm						:=	False;<br/>	Elsif xConfigFileExist then				(* standard situation is active, execute mode from configuration file *)<br/>		For iLoop := 1 to 4 do<br/>			udtSceneMode.arrMode[iLoop]	:=	iInit;<br/>		End_for;<br/>		If iInit = 1 then<br/>			strDiag						:=	'Configuration found, Stand alone mode is active';<br/>			strMode						:=	'Stand alone';<br/>			xActivateTCS_Interface		:=	False;<br/>			For iLoop := 1 to 4 do<br/>				udtSceneMode.arrMode[iLoop]	:=	2;<br/>			End_for;<br/>			xPreAlarm					:=	False;<br/>		Elsif iInit = 2 then<br/>			strDiag						:=	'Configuration found, TCS part mode is active';<br/>			strMode						:=	'TCS';<br/>			xActivateTCS_Interface		:=	True;<br/>			xActivateMB					:=	True;<br/>			For iLoop := 1 to 4 do<br/>				udtSceneMode.arrMode[iLoop]	:=	2;<br/>			End_for;<br/>			xPreAlarm					:=	False;<br/>		Elsif iInit = 3 then<br/>			strDiag						:=	'Configuration found, TCS part mode is active';<br/>			strMode						:=	'TCS';<br/>			xActivateTCS_Interface		:=	True;<br/>			xActivateTCS				:=	True;<br/>			For iLoop := 1 to 4 do<br/>				udtSceneMode.arrMode[iLoop]	:=	2;<br/>			End_for;<br/>			xPreAlarm					:=	False;<br/>		Elsif iInit = 4 then<br/>			strDiag						:=	'Configuration found, TCS alone mode is active';<br/>			strMode						:=	'TCS';<br/>			xActivateTCS_Interface		:=	True;<br/>			xActivateMB					:=	True;<br/>			For iLoop := 1 to 4 do<br/>				udtSceneMode.arrMode[iLoop]	:=	3;<br/>			End_for;<br/>			xPreAlarm					:=	False;<br/>		Elsif iInit = 5 then<br/>			strDiag						:=	'Configuration found, TCS alone mode is active';<br/>			strMode						:=	'TCS';<br/>			xActivateTCS_Interface		:=	True;<br/>			xActivateTCS				:=	True;<br/>			For iLoop := 1 to 4 do<br/>				udtSceneMode.arrMode[iLoop]	:=	3;<br/>			End_for;<br/>			xPreAlarm					:=	False;<br/>		Else<br/>			strDiag						:=	'Error: invalid Configuration was found';<br/>			strMode						:=	'Invalid';<br/>			xActivateTCS_Interface		:=	False;<br/>			xAlarm						:=	True;<br/>			xPreAlarm					:=	False;<br/>		End_if;<br/>	End_if;<br/>
									<br/>	If xAlarm then<br/>		If xConfirm and (iInit &gt; 0) and (iInit &lt; 6) then<br/>			xAlarm	:=	False;<br/>			strDiag						:=	'Configuration Alarm confirmed';<br/>		Elsif xConfirm and ((iInit &lt; 1) or (iInit &gt; 5)) then<br/>			strDiag						:=	'Configuration Alarm confirmed, but still active';<br/>		End_if;<br/>	End_if;<br/>
									<br/>
									<br/>	For iLoop := 1 to 240 do		(* Lumgate manual mode detection *)<br/>		If arrLumgates[iLoop].xAutomaticManual and arrLumgates[iLoop].xAvailable then<br/>			Exit;<br/>		End_if;<br/>	End_for;<br/>	If not (iLoop = 241) then<br/>		xManaualModeLG	:=	True;	(* any Lumgate manual mode is active *)<br/>	Else<br/>		xManaualModeLG	:=	False;<br/>	End_if;<br/>
									<br/>(* Creating Mode state and text *)<br/>	If xManaualModeLG then<br/>		xModeOK			:=	False;<br/>		strMode			:=	'Manual Lumgate';<br/>	Elsif xComissioning then<br/>		strMode			:=	'Commissioning';<br/>		xModeOK			:=	False;<br/>	Elsif arrLumgates[1].xTeachConsumption and arrLumgates[1].xAvailable then<br/>		strMode			:=	'Teaching current';<br/>		xModeOK			:=	False;<br/>	Elsif xLG_Available and xActivateTCS and xTCS_Available and ((udtsceneMode.arrActualScene[1] &gt; 0) or (udtsceneMode.arrActualScene[2] &gt; 0)<br/>	or (udtsceneMode.arrActualScene[3] &gt; 0) or (udtsceneMode.arrActualScene[4] &gt; 0))then<br/>		xModeOK			:=	True;<br/>	Elsif xLG_Available and not xActivateTCS and ((udtsceneMode.arrActualScene[1] &gt; 0) or (udtsceneMode.arrActualScene[2] &gt; 0)<br/>	or (udtsceneMode.arrActualScene[3] &gt; 0) or (udtsceneMode.arrActualScene[4] &gt; 0)) then<br/>		xModeOK			:=	True;<br/>	Else<br/>		xModeOK			:=	False;<br/>	End_if;<br/>	<br/>Else<br/>	xActive		:=	False;<br/>	xAlarm		:=	False;<br/>	xPreAlarm	:=	False;<br/>	strDiag		:=	'';<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_SelectMode_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_HelpClock_01" pouType="functionBlock" pouGroup="Function_Blocks" lastChange="2016-06-23T15:19:43">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="iYear" group="Default">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Year will be normed into a range between 2016 and 2090</p>
								</html>
							</documentation>
						</variable>
						<variable name="iMonth" group="Default">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Month will be normed into a range between 1 and 12</p>
								</html>
							</documentation>
						</variable>
						<variable name="iDay" group="Default">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Day will be normed into a range between 1 and 31</p>
								</html>
							</documentation>
						</variable>
						<variable name="iHour" group="Default">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Hour will be normed into a range between 0 and 23</p>
								</html>
							</documentation>
						</variable>
						<variable name="iMinutes" group="Default">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Minutes will be normed into a range between 0 and 59</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSeconds" group="Default">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Seconds will be normed into a range between 0 and 59</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_HelpClock_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">If xActivate then<br/>	xActive	:=	True;<br/>
									<br/>	(* here comments aren't necessary... *)<br/>
									<br/>	iYear		:=	limit_int(2016,iYear,2090);<br/>	iMonth		:=	limit_int(1,iMonth,12);<br/>	Case iMonth of<br/>		1,3,5,7,8,10,12:<br/>			iDay		:=	limit_int(1,iDay,31);<br/>		4,6,9,11:<br/>			iDay		:=	limit_int(1,iDay,30);<br/>		2:<br/>			iDay		:=	limit_int(1,iDay,29);<br/>	End_Case;<br/>	iHour		:=	limit_int(0,iHour,23);<br/>	iMinutes	:=	limit_int(0,iMinutes,59);<br/>	iSeconds	:=	limit_int(0,iSeconds,59);<br/>Else<br/>	xActive	:=	False;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_HelpClock_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_PLC_Diag_01" pouType="functionBlock" pouGroup="Function_Blocks" lastChange="2016-06-23T15:21:05">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xPowerSupplyIn" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xPowerSupplyMain" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xPowerSupplyOut" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xCF_CardInside" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strConfigName" group="Default">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="dwBootProjectCRC" group="Default">
							<type>
								<DWORD/>
							</type>
						</variable>
						<variable name="dwRamProjectCRC" group="Default">
							<type>
								<DWORD/>
							</type>
						</variable>
						<variable name="strProjectName" group="Default">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xRamProjectAvailable" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xBootProjectAvailable" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</outputVars>
					<externalVars retain="false">
						<variable name="POWER_SUPPLY_INPUTS_OK" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">24 V Versorgung der lokalen Eingänge i.O.</p>
								</html>
							</documentation>
						</variable>
						<variable name="POWER_SUPPLY_MAIN_OK" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">24 V der Hauptversorgungsspannung i.O.</p>
								</html>
							</documentation>
						</variable>
						<variable name="POWER_SUPPLY_OUTPUTS_0_3_OK" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">24 V Versorgung der lokalen Ausgänge i.O. (Bit0..3)</p>
								</html>
							</documentation>
						</variable>
						<variable name="FLASHCARD_PRESENT" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Phoenix Contact CF Karte gesteckt</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_CFG_NAME" group="Default">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Name der Konfiguration</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_CRC_PRJ_BOOT" group="Default">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">CRC des Bootprojektes</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_CRC_PRJ_RAM" group="Default">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">CRC des Projektes im RAM</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_HAS_PRJ_BOOT" group="Default">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bootprojekt vorhanden</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_HAS_PRJ_RAM" group="Default">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Projekt im RAM vorhanden</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_PRJ_NAME" group="Default">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Name des Projektes</p>
								</html>
							</documentation>
						</variable>
					</externalVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_PLC_Diag_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">If xActivate then<br/>	xActive	:=	True;<br/>
									<br/>	xPowerSupplyIn		:=	POWER_SUPPLY_INPUTS_OK;<br/>	xPowerSupplyMain	:=	POWER_SUPPLY_MAIN_OK;<br/>	xPowerSupplyOut		:=	POWER_SUPPLY_OUTPUTS_0_3_OK;<br/>
									<br/>	xCF_CardInside		:=	FLASHCARD_PRESENT;<br/>
									<br/>	strConfigName		:=	PLC_CFG_NAME;<br/>	dwBootProjectCRC	:=	PLC_CRC_PRJ_BOOT;<br/>	dwRamProjectCRC		:=	PLC_CRC_PRJ_RAM;<br/>
									<br/>	If PLC_HAS_PRJ_BOOT = byte#1 then<br/>		xBootProjectAvailable	:=	True;<br/>	Else<br/>		xBootProjectAvailable	:=	False;<br/>	End_if;<br/>	If PLC_HAS_PRJ_RAM = byte#1 then<br/>		xRamProjectAvailable	:=	True;<br/>	Else<br/>		xRamProjectAvailable	:=	False;<br/>	End_if;<br/>
									<br/>	strProjectName		:=	PLC_PRJ_NAME;<br/>
									<br/>Else<br/>	xActive	:=	False;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_PLC_Diag_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="DEMO_BTS_Switch_01" pouType="functionBlock" pouGroup="Function_Blocks" lastChange="2016-06-23T15:23:11">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="arrLumgates" group="Default">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate communication structure</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="DEMO_BTS_Switch_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">If xActivate then<br/>	xActive	:=	True;<br/>	For iLoop := 1 to 240 do<br/>		arrLumgates[iLoop].xRelay2	:=	True;<br/>	End_for;<br/>Else<br/>	xActive	:=	False;<br/>	For iLoop := 1 to 240 do<br/>		arrLumgates[iLoop].xRelay2	:=	False;<br/>	End_for;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="DEMO_BTS_Switch_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_InitScenes_01" pouType="functionBlock" pouGroup="Function_Blocks" lastChange="2016-11-16T10:03:58">
				<interface>
					<outputVars retain="false">
						<variable name="xActive" group="Output parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xDone" group="Output parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Init process is done</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inputVars retain="false">
						<variable name="xAxtivate" group="Input parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<inOutVars retain="false">
						<variable name="arrLumgates" group="In- Output paerameter">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate communication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtLevelConfigurationL20_1" group="In- Output paerameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Threshold level comunication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrScenarioConfigurationL20_1" group="In- Output paerameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scene / Scenario communication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtScenarioMode" group="In- Output paerameter">
							<type>
								<derived name="udtScene"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scene Mode communication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtLevelConfigurationL20_2" group="In- Output paerameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtLevelConfigurationL20_3" group="In- Output paerameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtLevelConfigurationL20_4" group="In- Output paerameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="xInit" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrInputsL20" redundant="true" group="Default">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="xRetainInit" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_InitScenes_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">If xAxtivate then<br/>	If not xRetainInit then<br/>		udtLevelConfigurationL20_1.xActive					:=	True;<br/>		udtLevelConfigurationL20_1.xActiveConfig1			:=	True;<br/>		udtLevelConfigurationL20_2.xActive					:=	True;<br/>		udtLevelConfigurationL20_2.xActiveConfig1			:=	True;<br/>		udtLevelConfigurationL20_3.xActive					:=	True;<br/>		udtLevelConfigurationL20_3.xActiveConfig1			:=	True;<br/>		udtLevelConfigurationL20_4.xActive					:=	True;<br/>		udtLevelConfigurationL20_4.xActiveConfig1			:=	True;<br/>		xRetainInit	:=	True;<br/>	End_if;<br/>	If not xInit then<br/>		For iLoop := 1 to 240 do<br/>			(* If arrLumgates[iLoop].iModuleLevel &lt;&gt; 2 then for Light an Building, to switch signs directly *)<br/>				arrLumgates[iLoop].xGraduallyOutputChanges	:=	True;<br/>			(* End_if; <br/>			arrLumgates[iLoop].xRelay1_NC					:=	True;*)<br/>		End_for;<br/>		xInit	:=	True;<br/>	End_if;<br/>End_if;<br/>
									<br/>(* Deactivated code, cause of setted xInit flag. Only to use for tests and demonstration objects *)<br/>If xAxtivate and not xInit then<br/>	xActive	:=	True;<br/>	xDone	:=	xInit;<br/>	If not xInit then<br/>		xInit	:=	True;<br/>		For iLoop := 1 to 240 do<br/>			arrLumgates[iLoop].udtCurrentCheck.xActiveCurrentCheckError		:=	False;<br/>			arrLumgates[iLoop].udtCurrentCheck.xActiveCurrentCheckWarning	:=	False;<br/>			arrLumgates[iLoop].udtCurrentCheck.rPercentageError				:=	25.0;<br/>			arrLumgates[iLoop].udtCurrentCheck.rPercentageWarning			:=	5.50;<br/>
									<br/>			arrLumgates[iLoop].xRelay1_NC				:=	True;<br/>			arrLumgates[iLoop].xFailMode				:=	True;<br/>
									<br/>			If iLoop = 1 then<br/>				arrLumgates[iLoop].arrDimmingScene[1].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[1].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[2].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[2].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[3].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[3].iValue	:=	50;<br/>				arrLumgates[iLoop].arrDimmingScene[4].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[4].iValue	:=	50;<br/>				arrLumgates[iLoop].arrDimmingScene[5].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[5].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[6].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[6].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[7].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[7].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[8].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[8].iValue	:=	400;<br/>				arrLumgates[iLoop].arrDimmingScene[9].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[9].iValue	:=	600;<br/>				arrLumgates[iLoop].arrDimmingScene[10].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[10].iValue	:=	800;<br/>				arrLumgates[iLoop].arrDimmingScene[11].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[11].iValue	:=	1000;<br/>				arrLumgates[iLoop].arrDimmingScene[12].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[12].iValue	:=	1000;<br/>				arrLumgates[iLoop].arrDimmingScene[13].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[13].iValue	:=	1000;<br/>				arrLumgates[iLoop].arrDimmingScene[14].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[14].iValue	:=	1000;<br/>				arrLumgates[iLoop].arrDimmingScene[15].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[15].iValue	:=	1000;<br/>				arrLumgates[iLoop].strDescription				:=	'Reinforcement High';<br/>			Elsif iLoop = 2 then<br/>				arrLumgates[iLoop].arrDimmingScene[1].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[1].iValue	:=	50;<br/>				arrLumgates[iLoop].arrDimmingScene[2].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[2].iValue	:=	50;<br/>				arrLumgates[iLoop].arrDimmingScene[3].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[3].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[4].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[4].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[5].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[5].iValue	:=	120;<br/>				arrLumgates[iLoop].arrDimmingScene[6].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[6].iValue	:=	120;<br/>				arrLumgates[iLoop].arrDimmingScene[7].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[7].iValue	:=	170;<br/>				arrLumgates[iLoop].arrDimmingScene[8].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[8].iValue	:=	320;<br/>				arrLumgates[iLoop].arrDimmingScene[9].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[9].iValue	:=	380;<br/>				arrLumgates[iLoop].arrDimmingScene[10].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[10].iValue	:=	480;<br/>				arrLumgates[iLoop].arrDimmingScene[11].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[11].iValue	:=	500;<br/>				arrLumgates[iLoop].arrDimmingScene[12].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[12].iValue	:=	700;<br/>				arrLumgates[iLoop].strDescription				:=	'Reinforcement Low';<br/>			Elsif iLoop = 3 then<br/>				arrLumgates[iLoop].arrDimmingScene[1].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[1].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[2].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[2].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[3].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[3].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[4].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[4].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[5].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[5].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[6].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[6].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[7].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[7].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[8].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[8].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[9].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[9].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[10].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[10].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[11].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[11].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[12].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[12].iValue	:=	200;<br/>				arrLumgates[iLoop].strDescription				:=	'Continius Light Group1';<br/>			Elsif iLoop = 4 then<br/>				arrLumgates[iLoop].arrDimmingScene[1].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[1].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[2].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[2].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[3].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[3].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[4].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[4].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[5].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[5].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[6].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[6].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[7].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[7].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[8].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[8].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[9].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[9].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[10].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[10].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[11].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[11].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[12].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[12].iValue	:=	200;<br/>				arrLumgates[iLoop].strDescription				:=	'Continius Light Group2';<br/>			Elsif iLoop = 5 then<br/>				arrLumgates[iLoop].arrDimmingScene[1].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[1].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[2].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[2].iValue	:=	150;<br/>				arrLumgates[iLoop].arrDimmingScene[3].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[3].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[4].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[4].iValue	:=	250;<br/>				arrLumgates[iLoop].arrDimmingScene[5].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[5].iValue	:=	280;<br/>				arrLumgates[iLoop].arrDimmingScene[6].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[6].iValue	:=	300;<br/>				arrLumgates[iLoop].arrDimmingScene[7].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[7].iValue	:=	320;<br/>				arrLumgates[iLoop].arrDimmingScene[8].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[8].iValue	:=	350;<br/>				arrLumgates[iLoop].arrDimmingScene[9].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[9].iValue	:=	350;<br/>				arrLumgates[iLoop].arrDimmingScene[10].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[10].iValue	:=	350;<br/>				arrLumgates[iLoop].strDescription				:=	'Reinforcement Out';<br/>			Elsif iLoop &gt; 5 and iLoop &lt; 7 then<br/>				arrLumgates[iLoop].arrDimmingScene[1].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[1].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[2].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[2].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[3].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[3].iValue	:=	50;<br/>				arrLumgates[iLoop].arrDimmingScene[4].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[4].iValue	:=	50;<br/>				arrLumgates[iLoop].arrDimmingScene[5].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[5].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[6].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[6].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[7].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[7].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[8].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[8].iValue	:=	400;<br/>				arrLumgates[iLoop].arrDimmingScene[9].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[9].iValue	:=	600;<br/>				arrLumgates[iLoop].arrDimmingScene[10].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[10].iValue	:=	800;<br/>				arrLumgates[iLoop].arrDimmingScene[11].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[11].iValue	:=	1000;<br/>				arrLumgates[iLoop].arrDimmingScene[12].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[12].iValue	:=	1000;<br/>				arrLumgates[iLoop].arrDimmingScene[13].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[13].iValue	:=	1000;<br/>				arrLumgates[iLoop].arrDimmingScene[14].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[14].iValue	:=	1000;<br/>				arrLumgates[iLoop].arrDimmingScene[15].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[15].iValue	:=	1000;<br/>				arrLumgates[iLoop].strDescription				:=	'Reinforcement External';<br/>			Elsif iLoop = 7 then<br/>				arrLumgates[iLoop].arrDimmingScene[1].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[1].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[2].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[2].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[3].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[3].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[4].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[4].iValue	:=	100;<br/>				arrLumgates[iLoop].arrDimmingScene[5].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[5].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[6].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[6].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[7].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[7].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[8].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[8].iValue	:=	0;<br/>				arrLumgates[iLoop].arrDimmingScene[9].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[9].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[10].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[10].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[11].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[11].iValue	:=	200;<br/>				arrLumgates[iLoop].arrDimmingScene[12].xUsed	:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[12].iValue	:=	200;<br/>				arrLumgates[iLoop].strDescription				:=	'Continius Light External';<br/>			Elsif iLoop &gt; 7 and iLoop &lt; 32 then<br/>				arrLumgates[iLoop].arrDimmingScene[1].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[1].iValue	:=	150;<br/>				arrLumgates[iLoop].arrDimmingScene[2].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[2].iValue	:=	300;<br/>				arrLumgates[iLoop].arrDimmingScene[3].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[3].iValue	:=	450;<br/>				arrLumgates[iLoop].arrDimmingScene[4].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[4].iValue	:=	600;<br/>				arrLumgates[iLoop].arrDimmingScene[5].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[5].iValue	:=	750;<br/>				arrLumgates[iLoop].arrDimmingScene[6].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[6].iValue	:=	900;<br/>				arrLumgates[iLoop].arrDimmingScene[7].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[7].iValue	:=	950;<br/>				arrLumgates[iLoop].arrDimmingScene[8].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[8].iValue	:=	1070;<br/>				arrLumgates[iLoop].arrDimmingScene[9].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[9].iValue	:=	0;<br/>			Elsif iLoop &gt; 31 then<br/>				arrLumgates[iLoop].arrDimmingScene[4].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[4].iValue	:=	525;<br/>				arrLumgates[iLoop].arrDimmingScene[5].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[5].iValue	:=	150;<br/>				arrLumgates[iLoop].arrDimmingScene[6].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[6].iValue	:=	810;<br/>				arrLumgates[iLoop].arrDimmingScene[8].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[8].iValue	:=	1070;<br/>				arrLumgates[iLoop].arrDimmingScene[9].xUsed		:=	True;<br/>				arrLumgates[iLoop].arrDimmingScene[9].iValue	:=	0;<br/>			End_If;<br/>
									<br/>			arrLumgates[iLoop].xGraduallyOutputChanges		:=	True;<br/>			arrLumgates[iLoop].iOutputLevelFailsave			:=	525;<br/>			arrLumgates[iLoop].xTeachFailsave				:=	False;<br/>
									<br/>			udtScenarioMode.arrMode[1]	:=	2;<br/>			udtScenarioMode.arrMode[2]	:=	2;<br/>		End_For;<br/>
									<br/>		udtLevelConfigurationL20_1.xActive					:=	True;<br/>		udtLevelConfigurationL20_1.xActiveConfig1			:=	True;<br/>		udtLevelConfigurationL20_1.iDelay					:=	0;		(* Delay between scenarios in [s] (0 for Demo) *)<br/>		udtLevelConfigurationL20_1.arrScenarioActive[1]		:=	True;<br/>		udtLevelConfigurationL20_1.arrScenarioActive[2]		:=	True;<br/>		udtLevelConfigurationL20_1.arrScenarioActive[3]		:=	True;<br/>		udtLevelConfigurationL20_1.arrScenarioActive[4]		:=	True;<br/>		udtLevelConfigurationL20_1.arrScenarioActive[5]		:=	True;<br/>		udtLevelConfigurationL20_1.arrScenarioActive[6]		:=	True;<br/>		udtLevelConfigurationL20_1.arrScenarioActive[7]		:=	True;<br/>		udtLevelConfigurationL20_1.arrScenarioActive[8]		:=	True;<br/>		udtLevelConfigurationL20_1.arrScenarioActive[9]		:=	True;<br/>		udtLevelConfigurationL20_1.arrScenarioActive[10]	:=	True;<br/>
									<br/>		udtLevelConfigurationL20_1.arrScenarioConfig1[1]	:=	100; (* 10% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig1[2]	:=	200; (* 20% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig1[3]	:=	300; (* 30% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig1[4]	:=	400; (* 40% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig1[5]	:=	500; (* 50% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig1[6]	:=	600; (* 60% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig1[7]	:=	700; (* 70% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig1[8]	:=	800; (* 80% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig1[9]	:=	900; (* 90% *)<br/>
									<br/>		udtLevelConfigurationL20_1.arrScenarioConfig2[1]	:=	150; (* 15% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig2[2]	:=	250; (* 25% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig2[3]	:=	350; (* 35% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig2[4]	:=	450; (* 45% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig2[5]	:=	550; (* 55% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig2[6]	:=	650; (* 65% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig2[7]	:=	750; (* 75% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig2[8]	:=	850; (* 85% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig2[9]	:=	950; (* 95% *)<br/>
									<br/>		udtLevelConfigurationL20_1.arrScenarioConfig3[1]	:=	50; (* 5% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig3[2]	:=	150; (* 15% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig3[3]	:=	200; (* 20% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig3[4]	:=	220; (* 22% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig3[5]	:=	260; (* 26% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig3[6]	:=	400; (* 40% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig3[7]	:=	550; (* 55% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig3[8]	:=	600; (* 60% *)<br/>		udtLevelConfigurationL20_1.arrScenarioConfig3[9]	:=	950; (* 95% *)<br/>
									<br/>		arrScenarioConfigurationL20_1[1][1]		:=	1;<br/>		arrScenarioConfigurationL20_1[1][2]		:=	2;<br/>		arrScenarioConfigurationL20_1[2][1]		:=	3;<br/>		arrScenarioConfigurationL20_1[2][2]		:=	4;<br/>		arrScenarioConfigurationL20_1[3][1]		:=	5;<br/>		arrScenarioConfigurationL20_1[3][2]		:=	6;<br/>		arrScenarioConfigurationL20_1[4][1]		:=	7;<br/>		arrScenarioConfigurationL20_1[5][1]		:=	8;<br/>		arrScenarioConfigurationL20_1[6][1]		:=	9;<br/>		arrScenarioConfigurationL20_1[7][1]		:=	10;<br/>		arrScenarioConfigurationL20_1[8][1]		:=	11;<br/>		arrScenarioConfigurationL20_1[9][1]		:=	12;<br/>		arrScenarioConfigurationL20_1[10][1]	:=	13;<br/>
									<br/>		arrInputsL20[1].xActive	:=	False;<br/>
									<br/>	End_If;<br/>Else<br/>	xActive	:=	False;<br/>	xDone	:=	False;<br/>End_if;<br/>
									<br/>(*strScenarioMode.arrMode[4]	:=	0;<br/>strScenarioMode.arrManualScenario[4]	:=	8;*)<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_InitScenes_01T" xmlns="http://www.w3.org/1999/xhtml">V2.01 Changes:<br/>- delete relay settings<br/>- remanent xInit<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_FileHandling_01" pouType="functionBlock" pouGroup="Function_Blocks" lastChange="2016-11-17T12:48:29">
				<interface>
					<inputVars retain="false">
						<variable name="xActivateOutputData" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">trigger to write process data</p>
								</html>
							</documentation>
						</variable>
						<variable name="xWriteCurrent" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">trigger to save measured current</p>
								</html>
							</documentation>
						</variable>
						<variable name="xCommissioning" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">En- / disable commissioning mode</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectBranch" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Branch selection for commissiong mode</p>
								</html>
							</documentation>
						</variable>
						<variable name="xReadConfigFiles" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">trigger read configuration files</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrActIP_Address" group="Input Parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrActSubnetMask" group="Input Parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrActStdGateway" group="Input Parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xAlarm" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Alarm occurs</p>
								</html>
							</documentation>
						</variable>
						<variable name="xPreAlarm" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Warning occurs</p>
								</html>
							</documentation>
						</variable>
						<variable name="strDiag" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic text</p>
								</html>
							</documentation>
						</variable>
						<variable name="xStartupProcessDone" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger startup process finished</p>
								</html>
							</documentation>
						</variable>
						<variable name="xIBConfigSaved" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iDelay" group="Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scene delay value from threshold config file "1"</p>
								</html>
							</documentation>
						</variable>
						<variable name="xRequestStartupIB" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger ready to startup interbus</p>
								</html>
							</documentation>
						</variable>
						<variable name="xNetworkConfigFileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configuration file "Network" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xLumgateConfigFileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configuration file "Lumgate" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xL20ConfigFileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configuration file "L20" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xThreshold1ConfigFileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configuration file "Threshold 1" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xThreshold2ConfigFileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configuration file "Threshold 2" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xThreshold3ConfigFileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configuration file "Threshold 3" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xThreshold4ConfigFileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configuration file "Threshold 4" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrSegment" group="Output Parameter">
							<type>
								<derived name="ARR_I_1_4"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Configured count of Lumgates per segment</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtProjectDescription" group="Output Parameter">
							<type>
								<derived name="udtProjectSpecification"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Project description (Name, Location, Designer...)</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedNetFileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Modified configuration file "Network" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedLumgateFileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Modified configuration file "Lumgate" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedL20FileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Modified configuration file "L20" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedThreshold1FileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Modified configuration file "Threshold 1" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedThreshold2FileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Modified configuration file "Threshold 2" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedThreshold3FileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Modified configuration file "Threshold 3" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedThreshold4FileExist" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Modified configuration file "Threshold 4" exist</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedLumgate" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate modification detected</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedNetConfig" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Network modification detected</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedL20Config" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">L20 modification detected</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedThreshold1" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Threshold 1 modification detected</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedThreshold2" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Threshold 2 modification detected</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedThreshold3" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Threshold 3 modification detected</p>
								</html>
							</documentation>
						</variable>
						<variable name="xChangedThreshold4" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Threshold 4 modification detected</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="arrLumgates" group="In- Output Parameter">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
						</variable>
						<variable name="arrLumgateConfig" group="In- Output Parameter">
							<type>
								<derived name="arr_1_240_udtLG_Config"/>
							</type>
						</variable>
						<variable name="arrLumgateCurrentConsumption" group="In- Output Parameter">
							<type>
								<derived name="Arr_1_240_1_23_Int"/>
							</type>
						</variable>
						<variable name="udtNetworkConfiguration" group="In- Output Parameter">
							<type>
								<derived name="udtNetwork"/>
							</type>
						</variable>
						<variable name="udtActNetworkConfiguration" group="In- Output Parameter">
							<type>
								<derived name="udtNetwork"/>
							</type>
						</variable>
						<variable name="arrScenarioConfiguration_L20_1" group="In- Output Parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="arrScenarioConfiguration_L20_2" group="In- Output Parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="arrScenarioConfiguration_L20_3" group="In- Output Parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="arrScenarioConfiguration_L20_4" group="In- Output Parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="udtLevelConfiguration_L20_1" group="In- Output Parameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtLevelConfiguration_L20_2" group="In- Output Parameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtLevelConfiguration_L20_3" group="In- Output Parameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtLevelConfiguration_L20_4" group="In- Output Parameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtActThresholdConfig1" group="In- Output Parameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtActThresholdConfig2" group="In- Output Parameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtActThresholdConfig3" group="In- Output Parameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtActThresholdConfig4" group="In- Output Parameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="xWriteFile" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xTakeActualConfig" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="udtConfigFiles" group="In- Output Parameter">
							<type>
								<derived name="udt_WebDataConfigFiles"/>
							</type>
						</variable>
						<variable name="udtFileHandler" group="In- Output Parameter">
							<type>
								<derived name="udtFileHandling"/>
							</type>
						</variable>
						<variable name="arr_Inputs_L20" group="In- Output Parameter">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
						</variable>
						<variable name="arrActL20Inputs" group="In- Output Parameter">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
						</variable>
						<variable name="udtL20Config" group="In- Output Parameter">
							<type>
								<derived name="udtL20Input"/>
							</type>
						</variable>
						<variable name="udtActL20Config" group="In- Output Parameter">
							<type>
								<derived name="udtL20Input"/>
							</type>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="arrActScenarioConfig_L20_1" redundant="true" group="In- Output Parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="arrActScenarioConfig_L20_2" redundant="true" group="In- Output Parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="arrActScenarioConfig_L20_3" redundant="true" group="In- Output Parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="arrActScenarioConfig_L20_4" redundant="true" group="In- Output Parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="xChangedLumgate1" redundant="true" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xChangedLumgate2" redundant="true" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xChangedLumgate3" redundant="true" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xChangedLumgate4" redundant="true" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="arrHourCountersType1" group="Local Variables">
							<type>
								<derived name="arr_1_240_udtLumgatePart1"/>
							</type>
						</variable>
						<variable name="arrHourCountersType2" redundant="true" group="Local Variables">
							<type>
								<derived name="arr_1_240_udtLumgatePart1"/>
							</type>
						</variable>
						<variable name="arrHourCountersType3" redundant="true" group="Local Variables">
							<type>
								<derived name="arr_1_240_udtLumgatePart1"/>
							</type>
						</variable>
						<variable name="arrHourCountersType4" redundant="true" group="Local Variables">
							<type>
								<derived name="arr_1_240_udtLumgatePart1"/>
							</type>
						</variable>
						<variable name="arrHourCountersType5" redundant="true" group="Local Variables">
							<type>
								<derived name="arr_1_240_udtLumgatePart1"/>
							</type>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="iConfigType" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTable" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iCounter" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iGeneralControl" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xReadNetworkConfig" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFoError" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="uiFoErrorId" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="xReadLumgateConfig" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iLineAnalyzer" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xReadLines" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iEndPosition" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iFindLines" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iBeginPosition" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xEmptyPositionFound" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iPositionSeparator1" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iPositionSeparator2" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrTempText" group="Local Variables">
							<type>
								<derived name="Arr_Str_1_209"/>
							</type>
						</variable>
						<variable name="iLength" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iElement" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iNumber" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xShiftToSpecial" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iPositionScene" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xWriteLumgateConfig" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xRequestWritingLumgateConfig" pdd="true" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iWriteLumgateConfig" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="strTempText" group="Local Variables">
							<type>
								<derived name="String_700"/>
							</type>
						</variable>
						<variable name="iTempPointer" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="sModuleLevel" group="Local Variables">
							<type>
								<derived name="String_5"/>
							</type>
						</variable>
						<variable name="sModuleNumber" redundant="true" group="Local Variables">
							<type>
								<derived name="String_5"/>
							</type>
						</variable>
						<variable name="strTempInfo" redundant="true" group="Local Variables">
							<type>
								<derived name="STRING_15"/>
							</type>
						</variable>
						<variable name="iLenght" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iBufferPosition" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iPositionActuelText" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xPartLeft" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iPosition" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xReadThresholdConfig1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadThresholdConfig2" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadThresholdConfig3" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadThresholdConfig4" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iCompare" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="udiTempValue" redundant="true" group="Local Variables">
							<type>
								<UDINT/>
							</type>
						</variable>
						<variable name="iTemp" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="strTempValue2" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="iPosition2" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop2" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iOldCompare" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xFoExecute" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFoDone" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWaitFileHandling" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strFoName" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="uiFoHandle" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="strLineData" redundant="true" group="Local Variables">
							<type>
								<derived name="String_700"/>
							</type>
						</variable>
						<variable name="xTranslateRequest" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="diTranslateOffset" group="Local Variables">
							<type>
								<DINT/>
							</type>
						</variable>
						<variable name="diTranslateCount" redundant="true" group="Local Variables">
							<type>
								<DINT/>
							</type>
						</variable>
						<variable name="xTranslateDone" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xTranslateError" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iTranslateStatus" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xLineReady" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xCRFound" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xEnd" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iPositionCounter" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iType" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLine" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iReadConfiguration" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="strTemp" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xEmptyLine" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strFirstCharacter" group="Local Variables">
							<type>
								<derived name="String_5"/>
							</type>
						</variable>
						<variable name="xIgnoreLine" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iCommission" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrFBuffer" group="Local Variables">
							<type>
								<derived name="ARR_B_0_5000"/>
							</type>
						</variable>
						<variable name="xFsError" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFwError" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFcError" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFrError" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFreError" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="udFwLengthWritten" redundant="true" group="Local Variables">
							<type>
								<UDINT/>
							</type>
						</variable>
						<variable name="uiFsErrorId" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFwErrorId" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFcErrorId" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFrErrorId" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFreErrorId" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="xFsExecute" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFsDone" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFwExecute" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFwDone" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFcExecute" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFcDone" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFrExecute" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFrDone" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFreExecute" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xFreDone" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="diFsPosition" group="Local Variables">
							<type>
								<DINT/>
							</type>
						</variable>
						<variable name="iFileHandling" redundant="true" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="strFrName" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="udFwLength" redundant="true" group="Local Variables">
							<type>
								<UDINT/>
							</type>
						</variable>
						<variable name="udFreMaxLength" redundant="true" group="Local Variables">
							<type>
								<UDINT/>
							</type>
						</variable>
						<variable name="udFreLengthRead" redundant="true" group="Local Variables">
							<type>
								<UDINT/>
							</type>
						</variable>
						<variable name="udiTempAmount" redundant="true" group="Local Variables">
							<type>
								<UDINT/>
							</type>
						</variable>
						<variable name="uiFsHandle" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFsMode" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFwHandle" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFcHandle" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFreHandle" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFileHandleTarget" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiFileHandleSource" redundant="true" group="Local Variables">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="xReadNetworkConfig_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadLumgateConfig_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadSensorConfig_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadThresholdConfig1_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadThresholdConfig2_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadThresholdConfig3_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadThresholdConfig4_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xChangedFile" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadSensorConfig" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strTempValue" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="iTempValue" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iFileFormat" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xDetectLumgateFormat" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWriteFormatNumber" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="arrLGCurrentConsumption_01" group="Local Variables">
							<type>
								<derived name="Arr_1_240_1_23_Int"/>
							</type>
						</variable>
						<variable name="arrLGCurrentConsumption_10" redundant="true" group="Local Variables">
							<type>
								<derived name="Arr_1_240_1_23_Int"/>
							</type>
						</variable>
						<variable name="arrLGCurrentConsumption_11" redundant="true" group="Local Variables">
							<type>
								<derived name="Arr_1_240_1_23_Int"/>
							</type>
						</variable>
						<variable name="diAverageTime" group="Local Variables">
							<type>
								<DINT/>
							</type>
						</variable>
						<variable name="iHysteresis" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="strConfigurationName1_1" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName1_2" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName1_3" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName1_4" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName2_1" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName2_2" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName2_3" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName2_4" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName3_1" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName3_2" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName3_3" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName3_4" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName4_1" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName4_2" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName4_3" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strConfigurationName4_4" redundant="true" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xActiveConfig1_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig1_2" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig1_3" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig1_4" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig2_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig2_2" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig2_3" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig2_4" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig3_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig3_2" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig3_3" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig3_4" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig4_1" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig4_2" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig4_3" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveConfig4_4" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<outputVars retain="false">
						<variable name="strLoadText" group="Local Variables">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="rLoadMaker" group="Local Variables">
							<type>
								<REAL/>
							</type>
						</variable>
					</outputVars>
					<localVars retain="false">
						<variable name="FB_HelpSetIP_01_1" group="Local Variables">
							<type>
								<derived name="FB_HelpSetIP_01"/>
							</type>
						</variable>
						<variable name="xExecuteIP_Translate" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="arrIP_Address" group="Local Variables">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrSubnetMask" group="Local Variables">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrStdGateway" group="Local Variables">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="TON_CompareDelay" group="Instances">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
						<variable name="R_TRIG_ChangedLumgate" group="Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ChangedThreshold1" group="Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ChangedThreshold2" group="Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ChangedThreshold3" group="Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ChangedThreshold4" group="Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ChangedNet" group="Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_ChangedL20" group="Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="F_TRIG_Commissioning" group="Instances">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="File_Close_Flash" group="Instances">
							<type>
								<derived name="FILE_CLOSE"/>
							</type>
						</variable>
						<variable name="File_Open_Flash" group="Instances">
							<type>
								<derived name="FILE_OPEN"/>
							</type>
						</variable>
						<variable name="File_Read_Flash" group="Instances">
							<type>
								<derived name="FILE_READ"/>
							</type>
						</variable>
						<variable name="File_Remove_Flash" group="Instances">
							<type>
								<derived name="FILE_REMOVE"/>
							</type>
						</variable>
						<variable name="File_Seek_Flash" group="Instances">
							<type>
								<derived name="FILE_SEEK"/>
							</type>
						</variable>
						<variable name="File_Write_Flash" group="Instances">
							<type>
								<derived name="FILE_WRITE"/>
							</type>
						</variable>
						<variable name="TranslateData" group="Instances">
							<type>
								<derived name="BUF_TO_STRING"/>
							</type>
						</variable>
						<variable name="TON_Delay_Write" group="Instances">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_FileHandling_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* FB_FileHandling *)<br/>(* move Commissioning block to Lumgate Controll *)<br/>	F_TRIG_Commissioning(CLK:=xCommissioning);<br/>
									<br/>	(* Decision: Normal mode or commissioning mode *) <br/>
									<br/>	(* Deactivate commissioning mode *)<br/>	If F_TRIG_Commissioning.Q then<br/>		strDiag			:=	'Commissioning Mode turned off';<br/>	End_if;<br/>	(* Reset manual mode *)<br/>	If not xCommissioning and iCommission &gt; 0 then<br/>		For iLoop := 1 to 240 do<br/>			arrLumgates[iLoop].xAutomaticManual		:=	False;<br/>			arrLumgates[iLoop].iOutputLevelManual	:=	0; <br/>		End_for;<br/>		iCommission		:=	0;<br/>	End_If;<br/>
									<br/>	Case iCommission Of<br/>		0:<br/>			If xCommissioning then<br/>				xPreAlarm		:=	True;<br/>				strDiag			:=	'Warning: Commissioning Mode is active';<br/>				For iLoop := 1 to 240 do	(* Set target brightness level to maximum and turn on the manual mode *)<br/>					If arrLumgates[iLoop].iModuleLevel = 0 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 1) then<br/>					arrLumgates[iLoop].iOutputLevelManual	:=	1070;<br/>						arrLumgates[iLoop].xAutomaticManual	:=	True;<br/>						iTemp								:=	iLoop;<br/>					Elsif arrLumgates[iLoop].iModuleLevel = 1 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 2) then<br/>					arrLumgates[iLoop].iOutputLevelManual	:=	1070;<br/>						arrLumgates[iLoop].xAutomaticManual	:=	True;<br/>						iTemp								:=	iLoop;<br/>					Elsif arrLumgates[iLoop].iModuleLevel = 2 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 3) then<br/>					arrLumgates[iLoop].iOutputLevelManual	:=	1070;<br/>						arrLumgates[iLoop].xAutomaticManual	:=	True;<br/>						iTemp								:=	iLoop;<br/>					Elsif arrLumgates[iLoop].iModuleLevel = 3 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 4) then<br/>					arrLumgates[iLoop].iOutputLevelManual	:=	1070;<br/>						arrLumgates[iLoop].xAutomaticManual	:=	True;<br/>						iTemp								:=	iLoop;<br/>					End_if;<br/>				End_For;<br/>				iCommission		:=	2;<br/>			End_If;<br/>
									<br/>		2:<br/>			For iLoop := 1 to 240 do	(* Set target brightness level to maximum , search for the last available Lumgate *)<br/>				If arrLumgates[iLoop].iModuleLevel = 0 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 1) then<br/>					arrLumgates[iLoop].iOutputLevelManual		:=	1070;<br/>					iTemp										:=	iLoop;<br/>				Elsif arrLumgates[iLoop].iModuleLevel = 1 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 2) then<br/>					arrLumgates[iLoop].iOutputLevelManual		:=	1070;<br/>					iTemp										:=	iLoop;<br/>				Elsif arrLumgates[iLoop].iModuleLevel = 2 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 3) then<br/>					arrLumgates[iLoop].iOutputLevelManual		:=	1070;<br/>					iTemp										:=	iLoop;<br/>				Elsif arrLumgates[iLoop].iModuleLevel = 3 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 4) then<br/>					arrLumgates[iLoop].iOutputLevelManual		:=	1070;<br/>					iTemp										:=	iLoop;<br/>				End_if;<br/>			End_For;<br/>			iCommission		:=	3;<br/>
									<br/>		3:<br/>			If arrLumgates[iTemp].iActualOutputLevel = 1070 then<br/>				(* Set the target brightness level to 12%, if the last Lumgate entered the maximum level *)<br/>				For iLoop := 1 To 240 do<br/>					If arrLumgates[iLoop].iModuleLevel = 0 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 1) then<br/>						arrLumgates[iLoop].iOutputLevelManual		:=	120;<br/>						iTemp										:=	iLoop;<br/>					Elsif arrLumgates[iLoop].iModuleLevel = 1 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 2) then<br/>						arrLumgates[iLoop].iOutputLevelManual		:=	120;<br/>						iTemp										:=	iLoop;<br/>					Elsif arrLumgates[iLoop].iModuleLevel = 2 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 3) then<br/>						arrLumgates[iLoop].iOutputLevelManual		:=	120;<br/>						iTemp										:=	iLoop;<br/>					Elsif arrLumgates[iLoop].iModuleLevel = 3 and arrLumgates[iLoop].xAvailable and (iSelectBranch = 0 or iSelectBranch = 4) then<br/>						arrLumgates[iLoop].iOutputLevelManual		:=	120;<br/>						iTemp										:=	iLoop;<br/>					End_if;<br/>				End_For;<br/>				iCommission	:=	4;<br/>			End_If;<br/>		<br/>		4:<br/>			If arrLumgates[iTemp].iActualOutputLevel &lt; 150 then<br/>				iCommission	:=	2;<br/>			End_If;<br/>	End_Case;<br/>(* End_ move Commissioning block to Lumgate Controll *)<br/>
									<br/>If xReadConfigFiles then<br/>	iGeneralControl	:=	0;<br/>End_if;<br/>
									<br/>Case iGeneralControl Of<br/>	0:<br/>		strDiag					:=	'Reading configuration files...';<br/>		xStartupProcessDone		:=	False;<br/>	<br/>		(* Reset detected file states *)<br/>		xChangedNetFileExist		:=	False;<br/>		xNetworkConfigFileExist		:=	False;<br/>		xChangedLumgateFileExist	:=	False;<br/>		xLumgateConfigFileExist		:=	False;<br/>		xChangedL20FileExist		:=	False;<br/>		xL20ConfigFileExist			:=	False;<br/>		xChangedThreshold1FileExist	:=	False;<br/>		xThreshold1ConfigFileExist	:=	False;<br/>		xChangedThreshold2FileExist	:=	False;<br/>		xThreshold2ConfigFileExist	:=	False;<br/>		xChangedThreshold3FileExist	:=	False;<br/>		xThreshold3ConfigFileExist	:=	False;<br/>		xChangedThreshold4FileExist	:=	False;<br/>		xThreshold4ConfigFileExist	:=	False;<br/>
									<br/>		(* Trigger file reading *)<br/>		xReadNetworkConfig_1	:=	True;<br/>		xReadNetworkConfig		:=	True;<br/>		xReadLumgateConfig_1	:=	True;<br/>		xReadLumgateConfig		:=	True;<br/>		xDetectLumgateFormat	:=	True;<br/>		xReadSensorConfig_1		:=	True;<br/>		xReadSensorConfig		:=	True;<br/>		xReadThresholdConfig1_1	:=	True;<br/>		xReadThresholdConfig1	:=	True;<br/>		xReadThresholdConfig2_1	:=	True;<br/>		xReadThresholdConfig2	:=	True;<br/>		xReadThresholdConfig3_1	:=	True;<br/>		xReadThresholdConfig3	:=	True;<br/>		xReadThresholdConfig4_1	:=	True;<br/>		xReadThresholdConfig4	:=	True;<br/>		arrSegment[1]	:=	0;<br/>		arrSegment[2]	:=	0;<br/>		arrSegment[3]	:=	0;<br/>		arrSegment[4]	:=	0;<br/>
									<br/>		(* V2.01 Changes *)<br/>		udtLevelConfiguration_L20_1.diAverageTime	:=	diAverageTime;<br/>		udtLevelConfiguration_L20_1.iHysteric		:=	iHysteresis;<br/>		udtLevelConfiguration_L20_1.strName1		:=	strConfigurationName1_1;<br/>		udtLevelConfiguration_L20_1.strName2		:=	strConfigurationName1_2;<br/>		udtLevelConfiguration_L20_1.strName3		:=	strConfigurationName1_3;<br/>		udtLevelConfiguration_L20_1.strName4		:=	strConfigurationName1_4;<br/>		udtLevelConfiguration_L20_2.strName1		:=	strConfigurationName2_1;<br/>		udtLevelConfiguration_L20_2.strName2		:=	strConfigurationName2_2;<br/>		udtLevelConfiguration_L20_2.strName3		:=	strConfigurationName2_3;<br/>		udtLevelConfiguration_L20_2.strName4		:=	strConfigurationName2_4;<br/>		udtLevelConfiguration_L20_3.strName1		:=	strConfigurationName3_1;<br/>		udtLevelConfiguration_L20_3.strName2		:=	strConfigurationName3_2;<br/>		udtLevelConfiguration_L20_3.strName3		:=	strConfigurationName3_3;<br/>		udtLevelConfiguration_L20_3.strName4		:=	strConfigurationName3_4;<br/>		udtLevelConfiguration_L20_4.strName1		:=	strConfigurationName4_1;<br/>		udtLevelConfiguration_L20_4.strName2		:=	strConfigurationName4_2;<br/>		udtLevelConfiguration_L20_4.strName3		:=	strConfigurationName4_3;<br/>		udtLevelConfiguration_L20_4.strName4		:=	strConfigurationName4_4;<br/>		udtLevelConfiguration_L20_1.xActiveConfig1	:=	xActiveConfig1_1;<br/>		udtLevelConfiguration_L20_1.xActiveConfig2	:=	xActiveConfig1_2;<br/>		udtLevelConfiguration_L20_1.xActiveConfig3	:=	xActiveConfig1_3;<br/>		udtLevelConfiguration_L20_1.xActiveConfig4	:=	xActiveConfig1_4;<br/>		udtLevelConfiguration_L20_2.xActiveConfig1	:=	xActiveConfig2_1;<br/>		udtLevelConfiguration_L20_2.xActiveConfig2	:=	xActiveConfig2_2;<br/>		udtLevelConfiguration_L20_2.xActiveConfig3	:=	xActiveConfig2_3;<br/>		udtLevelConfiguration_L20_2.xActiveConfig4	:=	xActiveConfig2_4;<br/>		udtLevelConfiguration_L20_3.xActiveConfig1	:=	xActiveConfig3_1;<br/>		udtLevelConfiguration_L20_3.xActiveConfig2	:=	xActiveConfig3_2;<br/>		udtLevelConfiguration_L20_3.xActiveConfig3	:=	xActiveConfig3_3;<br/>		udtLevelConfiguration_L20_3.xActiveConfig4	:=	xActiveConfig3_4;<br/>		udtLevelConfiguration_L20_4.xActiveConfig1	:=	xActiveConfig4_1;<br/>		udtLevelConfiguration_L20_4.xActiveConfig2	:=	xActiveConfig4_2;<br/>		udtLevelConfiguration_L20_4.xActiveConfig3	:=	xActiveConfig4_3;<br/>		udtLevelConfiguration_L20_4.xActiveConfig4	:=	xActiveConfig4_4;<br/>
									<br/>		For iLoop := 1 To 240 do<br/>			arrLumgates[iLoop].xInConfigFile	:=	False;<br/>		End_For;<br/>
									<br/>		iGeneralControl			:=	1;<br/>
									<br/>	1:<br/>		strDiag					:=	'This process needs up to 2 minutes.';<br/>		iGeneralControl			:=	2;<br/>	<br/>	2:<br/>		If not xReadThresholdConfig4 then (* Last file, everything done *)<br/>			strDiag				:=	'Reading configuration done.';<br/>			xRequestStartupIB	:=	True;<br/>			xStartupProcessDone	:=	True;<br/>			xIBConfigSaved		:=	True;<br/>
									<br/>			iGeneralControl		:=	3;<br/>		End_If;<br/>
									<br/>	3:<br/>		If xActivateOutputData then		(* Interbus startup routine finished *)<br/>			For iLoop := 1 to 240 do	(* Copy retain data to Lumgate structure *)<br/>				arrLumgates[iLoop].arrPowerConsumption					:=	arrLumgateCurrentConsumption[iLoop];<br/>				(* V2.01 Changes *) <br/>				arrLumgates[iLoop].arrPowerConsumption_01				:=	arrLGCurrentConsumption_01[iLoop];<br/>				arrLumgates[iLoop].arrPowerConsumption_10				:=	arrLGCurrentConsumption_10[iLoop];<br/>				arrLumgates[iLoop].arrPowerConsumption_11				:=	arrLGCurrentConsumption_11[iLoop];<br/>				arrLumgates[iLoop].udtInternal.xPowerConsumptionCorrect	:=	True;<br/>
									<br/>				(* There is no minimum difference measured *)<br/>				If arrLumgates[iLoop].arrPowerConsumption[23] &lt;= arrLumgates[iLoop].arrPowerConsumption[12] then <br/>					arrLumgates[iLoop].udtInternal.xPowerConsumptionCorrect	:= 	False;<br/>				End_If;<br/>
									<br/>				(* There is no minimum difference measured *)<br/>				If arrLumgates[iLoop].arrPowerConsumption[12] &lt;= arrLumgates[iLoop].arrPowerConsumption[2] then <br/>					arrLumgates[iLoop].udtInternal.xPowerConsumptionCorrect	:= 	False;<br/>				End_If;<br/>			End_For;<br/>			iGeneralControl	:=	4;<br/>		End_If;<br/>
									<br/>	4:	<br/>		iGeneralControl	:=	5;			(* Restore hour counters *)<br/>
									<br/>		For iLoop := 1 to 240 do		(* Copy retain data to Lumgate structure *)<br/>			arrLumgates[iLoop].udtHourCounterGeneral		:=	arrHourCountersType1[iLoop];<br/>			arrLumgates[iLoop].udtHourCounterMaintenance	:=	arrHourCountersType2[iLoop];<br/>			arrLumgates[iLoop].udtHourCounter20_50			:=	arrHourCountersType3[iLoop];<br/>			arrLumgates[iLoop].udtHourCounter50_75			:=	arrHourCountersType4[iLoop];<br/>			arrLumgates[iLoop].udtHourCounter75_100			:=	arrHourCountersType5[iLoop];<br/>		End_For;<br/>	<br/>	5:<br/>		For iLoop := 1 to 240 do		(* Save hour counters *)<br/>			arrHourCountersType1[iLoop]	:=	arrLumgates[iLoop].udtHourCounterGeneral;<br/>			arrHourCountersType2[iLoop]	:=	arrLumgates[iLoop].udtHourCounterMaintenance;<br/>			arrHourCountersType3[iLoop]	:=	arrLumgates[iLoop].udtHourCounter20_50;<br/>			arrHourCountersType4[iLoop]	:=	arrLumgates[iLoop].udtHourCounter50_75;<br/>			arrHourCountersType5[iLoop]	:=	arrLumgates[iLoop].udtHourCounter75_100;<br/>		End_For;<br/>
									<br/>		(* V2.01 Changes *)<br/>		diAverageTime			:=	udtLevelConfiguration_L20_1.diAverageTime;<br/>		iHysteresis				:=	udtLevelConfiguration_L20_1.iHysteric;<br/>		strConfigurationName1_1	:=	udtLevelConfiguration_L20_1.strName1;<br/>		strConfigurationName1_2	:=	udtLevelConfiguration_L20_1.strName2;<br/>		strConfigurationName1_3	:=	udtLevelConfiguration_L20_1.strName3;<br/>		strConfigurationName1_4	:=	udtLevelConfiguration_L20_1.strName4;<br/>		strConfigurationName2_1	:=	udtLevelConfiguration_L20_2.strName1;<br/>		strConfigurationName2_2	:=	udtLevelConfiguration_L20_2.strName2;<br/>		strConfigurationName2_3	:=	udtLevelConfiguration_L20_2.strName3;<br/>		strConfigurationName2_4	:=	udtLevelConfiguration_L20_2.strName4;<br/>		strConfigurationName3_1	:=	udtLevelConfiguration_L20_3.strName1;<br/>		strConfigurationName3_2	:=	udtLevelConfiguration_L20_3.strName2;<br/>		strConfigurationName3_3	:=	udtLevelConfiguration_L20_3.strName3;<br/>		strConfigurationName3_4	:=	udtLevelConfiguration_L20_3.strName4;<br/>		strConfigurationName4_1	:=	udtLevelConfiguration_L20_4.strName1;<br/>		strConfigurationName4_2	:=	udtLevelConfiguration_L20_4.strName2;<br/>		strConfigurationName4_3	:=	udtLevelConfiguration_L20_4.strName3;<br/>		strConfigurationName4_4	:=	udtLevelConfiguration_L20_4.strName4;<br/>		xActiveConfig1_1		:=	udtLevelConfiguration_L20_1.xActiveConfig1;<br/>		xActiveConfig1_2		:=	udtLevelConfiguration_L20_1.xActiveConfig2;<br/>		xActiveConfig1_3		:=	udtLevelConfiguration_L20_1.xActiveConfig3;<br/>		xActiveConfig1_4		:=	udtLevelConfiguration_L20_1.xActiveConfig4;<br/>		xActiveConfig2_1		:=	udtLevelConfiguration_L20_2.xActiveConfig1;<br/>		xActiveConfig2_2		:=	udtLevelConfiguration_L20_2.xActiveConfig2;<br/>		xActiveConfig2_3		:=	udtLevelConfiguration_L20_2.xActiveConfig3;<br/>		xActiveConfig2_4		:=	udtLevelConfiguration_L20_2.xActiveConfig4;<br/>		xActiveConfig3_1		:=	udtLevelConfiguration_L20_3.xActiveConfig1;<br/>		xActiveConfig3_2		:=	udtLevelConfiguration_L20_3.xActiveConfig2;<br/>		xActiveConfig3_3		:=	udtLevelConfiguration_L20_3.xActiveConfig3;<br/>		xActiveConfig3_4		:=	udtLevelConfiguration_L20_3.xActiveConfig4;<br/>		xActiveConfig4_1		:=	udtLevelConfiguration_L20_4.xActiveConfig1;<br/>		xActiveConfig4_2		:=	udtLevelConfiguration_L20_4.xActiveConfig2;<br/>		xActiveConfig4_3		:=	udtLevelConfiguration_L20_4.xActiveConfig3;<br/>		xActiveConfig4_4		:=	udtLevelConfiguration_L20_4.xActiveConfig4;<br/>
									<br/>		If xWriteCurrent then<br/>			For iLoop := 1 to 240 do	(* Save measured current *)<br/>				arrLumgateCurrentConsumption[iLoop]	:=	arrLumgates[iLoop].arrPowerConsumption;<br/>				(* V2.01 Changes *)<br/>				arrLGCurrentConsumption_01[iLoop]	:=	arrLumgates[iLoop].arrPowerConsumption_01;<br/>				arrLGCurrentConsumption_10[iLoop]	:=	arrLumgates[iLoop].arrPowerConsumption_10;<br/>				arrLGCurrentConsumption_11[iLoop]	:=	arrLumgates[iLoop].arrPowerConsumption_11;<br/>			End_For;<br/>		End_if;<br/>End_Case;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="LineAnalyzer">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* FB_FileHandling / Line Analyzer *)<br/>Case iLineAnalyzer Of<br/>	0:<br/>		If xReadNetworkConfig_1 then<br/>			udtFileHandler.strFileNameSource	:=	'ATS_Network_Configuration_1.csv';(* At first try to read modyfied files *)<br/>			udtFileHandler.udiReadPosition	:=	Udint#0;	(* Reset file position pointer *)					(* | *)<br/>			iPositionCounter				:=	0;																(* | *)<br/>			iType							:=	1;			(* Define file type *)								(* | *)<br/>			iLineAnalyzer					:=	10;																(* | *)<br/>			xChangedFile					:=	True;		(* trigger for file modifications *)				(* | *)<br/>		Elsif xReadNetworkConfig then																			(* V *)<br/>			udtFileHandler.strFileNameSource	:=	'ATS_Network_Configuration.csv';(* Then, in case of no modifyed file exist, *)<br/>			udtFileHandler.udiReadPosition	:=	Udint#0;							(* search for the original file             *)<br/>			iPositionCounter				:=	0;<br/>			iType							:=	1;<br/>			iLineAnalyzer					:=	10;<br/>		Elsif xReadLumgateConfig_1 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Lumgate_Configuration_1.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 2;<br/>			iLineAnalyzer					:= 10;<br/>			xChangedFile					:=	True;<br/>		Elsif xReadLumgateConfig then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Lumgate_Configuration.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 2;<br/>			iLineAnalyzer					:= 10;<br/>		Elsif xReadSensorConfig_1 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_L20_Configuration_1.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 3;<br/>			iLineAnalyzer					:= 10;<br/>			xChangedFile					:=	True;<br/>		Elsif xReadSensorConfig then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_L20_Configuration.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 3;<br/>			iLineAnalyzer					:= 10;<br/>		Elsif xReadThresholdConfig1_1 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Threshold_1_Configuration_1.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 4;<br/>			iLineAnalyzer					:= 10;<br/>			xChangedFile					:=	True;<br/>		Elsif xReadThresholdConfig1 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Threshold_1_Configuration.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 4;<br/>			iLineAnalyzer					:= 10;<br/>		Elsif xReadThresholdConfig2_1 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Threshold_2_Configuration_1.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 5;<br/>			iLineAnalyzer					:= 10;<br/>			xChangedFile					:=	True;<br/>		Elsif xReadThresholdConfig2 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Threshold_2_Configuration.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 5;<br/>			iLineAnalyzer					:= 10;<br/>		Elsif xReadThresholdConfig3_1 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Threshold_3_Configuration_1.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 6;<br/>			iLineAnalyzer					:= 10;<br/>			xChangedFile					:=	True;<br/>		Elsif xReadThresholdConfig3 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Threshold_3_Configuration.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 6;<br/>			iLineAnalyzer					:= 10;<br/>		Elsif xReadThresholdConfig4_1 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Threshold_4_Configuration_1.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 7;<br/>			iLineAnalyzer					:= 10;<br/>			xChangedFile					:=	True;<br/>		Elsif xReadThresholdConfig4 then<br/>			udtFileHandler.strFileNameSource	:= 'ATS_Threshold_4_Configuration.csv';<br/>			udtFileHandler.udiReadPosition	:= Udint#0;<br/>			iPositionCounter				:= 0;<br/>			iType							:= 7;<br/>			iLineAnalyzer					:= 10;<br/>		Elsif xWriteLumgateConfig then<br/>			xRequestWritingLumgateConfig	:= True;<br/>			iLineAnalyzer					:= 20;	(* Block read trigger during writing process *)<br/>		End_If;<br/>		<br/>	10:<br/>		If not udtFileHandler.xRequest then<br/>			udtFileHandler.xRequest		:=	True;<br/>			udtFileHandler.iTasktype	:=	3; (* Read data *)<br/>			iLineAnalyzer				:=	11;<br/>		End_If;<br/>
									<br/>	11:<br/>		If xWaitFileHandling then (* Reading from flash is ready *)<br/>			If udtFileHandler.udiReadPosition &gt; Udint#0 then (* File exists and contains data *)<br/>				xReadLines		:= True;<br/>				iLineAnalyzer	:= 12;<br/>				(* Display detected files *)<br/>				If iType = 1 then		(* Network config *)<br/>					If xChangedFile then<br/>						xChangedNetFileExist	:=	True;<br/>						xNetworkConfigFileExist	:=	False;<br/>					Else<br/>						xNetworkConfigFileExist	:=	True;<br/>						xChangedNetFileExist	:=	False;<br/>					End_if;<br/>				Elsif iType = 2 then	(* Lumgate config *)<br/>					If xChangedFile then<br/>						xChangedLumgateFileExist:=	True;<br/>						xAlarm					:=	False;	(* Senseless without Lumgate config *)<br/>						xLumgateConfigFileExist	:=	False;<br/>					Else<br/>						xLumgateConfigFileExist	:=	True;<br/>						xAlarm					:=	False;<br/>						xChangedLumgateFileExist:=	False;<br/>					End_if;<br/>				Elsif iType = 3 then	(* Sensor config *)<br/>					If xChangedFile then<br/>						xChangedL20FileExist	:=	True;<br/>						xL20ConfigFileExist		:=	False;<br/>					Else<br/>						xL20ConfigFileExist		:=	True;<br/>						xChangedL20FileExist	:=	False;<br/>					End_if;<br/>				Elsif iType = 4 then	(* Threshold table 1 *)<br/>					If xChangedFile then<br/>						xChangedThreshold1FileExist	:=	True;<br/>						xThreshold1ConfigFileExist	:=	False;<br/>					Else<br/>						xThreshold1ConfigFileExist	:=	True;<br/>						xChangedThreshold1FileExist	:=	False;<br/>					End_if;<br/>				Elsif iType = 5 then	(* Threshold table 2 *)<br/>					If xChangedFile then<br/>						xChangedThreshold2FileExist	:=	True;<br/>						xThreshold2ConfigFileExist	:=	False;<br/>					Else<br/>						xThreshold2ConfigFileExist	:=	True;<br/>						xChangedThreshold2FileExist	:=	False;<br/>					End_if;<br/>				Elsif iType = 6 then	(* Threshold table 3 *)<br/>					If xChangedFile then<br/>						xChangedThreshold3FileExist	:=	True;<br/>						xThreshold3ConfigFileExist	:=	False;<br/>					Else<br/>						xThreshold3ConfigFileExist	:=	True;<br/>						xChangedThreshold3FileExist	:=	False;<br/>					End_if;<br/>				Elsif iType = 7 then	(* Threshold table 4 *)<br/>					If xChangedFile then<br/>						xChangedThreshold4FileExist	:=	True;<br/>						xThreshold4ConfigFileExist	:=	False;<br/>					Else<br/>						xThreshold4ConfigFileExist	:=	True;<br/>						xChangedThreshold4FileExist	:=	False;<br/>					End_if;<br/>				End_if;<br/>			Elsif udtFileHandler.udiReadPosition = Udint#0 and xChangedFile then <br/>			(* Modifyed file does not exist, try original file *)<br/>				iLineAnalyzer	:= 30;<br/>			Elsif udtFileHandler.udiReadPosition = Udint#0 then <br/>			(* Original file does also not exist *)<br/>				iLineAnalyzer	:= 13;<br/>				If iType = 1 then<br/>					xNetworkConfigFileExist		:=	False;<br/>				Elsif iType = 2 then<br/>					xLumgateConfigFileExist		:=	False;<br/>				Elsif iType = 3 then<br/>					xL20ConfigFileExist			:=	False;<br/>				Elsif iType = 4 then<br/>					xThreshold1ConfigFileExist	:=	False;<br/>				Elsif iType = 5 then<br/>					xThreshold2ConfigFileExist	:=	False;<br/>				Elsif iType = 6 then<br/>					xThreshold3ConfigFileExist	:=	False;<br/>				Elsif iType = 7 then<br/>					xThreshold4ConfigFileExist	:=	False;<br/>				End_if;<br/>			End_If;<br/>		End_If;<br/>
									<br/>	12:<br/>		If not xWaitFileHandling then<br/>			If xEnd then	(* Reading file done *)<br/>				xEnd	:=	False;<br/>
									<br/>				(* reset "read file trigger" *)<br/>				Case iType of<br/>					1:	xReadNetworkConfig		:=	False;<br/>						xReadNetworkConfig_1	:=	False;<br/>					2:	xReadLumgateConfig		:=	False;<br/>						xReadLumgateConfig_1	:=	False;<br/>					3:	xReadSensorConfig		:=	False;<br/>						xReadSensorConfig_1		:=	False;<br/>					4:	xReadThresholdConfig1	:=	False;<br/>						xReadThresholdConfig1_1	:=	False;<br/>					5:	xReadThresholdConfig2	:=	False;<br/>						xReadThresholdConfig2_1	:=	False;<br/>					6:	xReadThresholdConfig3	:=	False;<br/>						xReadThresholdConfig3_1	:=	False;<br/>					7:	xReadThresholdConfig4	:=	False;<br/>						xReadThresholdConfig4_1	:=	False;<br/>				End_Case;<br/>
									<br/>				iLineAnalyzer	:=	0;<br/>			Else<br/>				iLineAnalyzer	:=	10;<br/>			End_If;<br/>		End_If;<br/>
									<br/>	13:<br/>		xWaitFileHandling	:=	False;<br/>
									<br/>		Case iType Of<br/>
									<br/>			1:	strDiag					:=	'Network configuration file not found';<br/>				xReadNetworkConfig		:=	False;<br/>
									<br/>			2:	strDiag					:=	'Lumgate configuration file not found';<br/>				xAlarm					:=	True;	(* ATS without a Lumgate configuration is useless *)<br/>				xReadLumgateConfig		:=	False;<br/>
									<br/>			3:	strDiag					:=	'Sensor configuration file not found';<br/>				xReadSensorConfig		:=	False;<br/>
									<br/>			4:	strDiag					:=	'Threshold configuration file 1 not found';<br/>				xReadThresholdConfig1	:=	False;<br/>
									<br/>			5:	strDiag					:=	'Threshold configuration file 2 not found';<br/>				xReadThresholdConfig2	:=	False;<br/>
									<br/>			6:	strDiag					:=	'Threshold configuration file 3 not found';<br/>				xReadThresholdConfig3	:=	False;<br/>
									<br/>			7:	strDiag					:=	'Threshold configuration file 4 not found';<br/>				xReadThresholdConfig4	:=	False;<br/>		End_Case;<br/>		iLineAnalyzer:= 0;<br/>
									<br/>	20:<br/>		If not xRequestWritingLumgateConfig then<br/>			iLineAnalyzer				:=	0;<br/>		End_If;<br/>
									<br/>	30:<br/>		xChangedFile					:=	False;<br/>		(* reset "read file trigger" *)<br/>		Case iType of<br/>			1:	xReadNetworkConfig_1	:= False;<br/>			2:	xReadLumgateConfig_1	:= False;<br/>			3:	xReadSensorConfig_1		:= False;<br/>			4:	xReadThresholdConfig1_1	:= False;<br/>			5:	xReadThresholdConfig2_1	:= False;<br/>			6:	xReadThresholdConfig3_1	:= False;<br/>			7:	xReadThresholdConfig4_1	:= False;<br/>		End_Case;<br/>
									<br/>		xWaitFileHandling				:=	False;<br/>		If not udtFileHandler.xRequest then<br/>			iLineAnalyzer				:=	31;<br/>		End_If;<br/>
									<br/>	31:	(* Back to read next file *)<br/>		udtFileHandler.xRequest				:= True;<br/>		udtFileHandler.strFileNameTarget	:= udtFileHandler.strFileNameSource;<br/>		udtFileHandler.iTasktype			:= 2;<br/>		iLineAnalyzer						:= 32;<br/>
									<br/>	32:<br/>		If not udtFileHandler.xRequest then<br/>			iLineAnalyzer					:= 0;<br/>		End_If;<br/>
									<br/>(*	33:<br/>		udtFileHandler.strFileNameSource	:= 'ATS_Lumgate_Configuration.csv'; <br/>		xReadThresholdConfig4				:=	False;<br/>		udtFileHandler.udiReadPosition		:= Udint#0;<br/>		iType								:= 2;<br/>		iLineAnalyzer						:= 10; *)<br/>End_Case;<br/>
									<br/>Case iFindLines of	(* Searching for contnt *)<br/>	0:<br/>		If xReadLines then<br/>			iBeginPosition	:= 0;<br/>			iFindLines		:= 1;<br/>		End_If;<br/>
									<br/>	1:	(* read file *)<br/>		xCRFound			:= False;<br/>		xEmptyPositionFound	:= False;<br/>		For iLoop := iBeginPosition to 5000 do<br/>			If arrFBuffer[iLoop] = Byte#16#0D then<br/>				iEndPosition	:= iLoop - 1;<br/>				xCRFound		:= True;<br/>				Exit;<br/>			Elsif arrFBuffer[iLoop] = Byte#0 then<br/>				iEndPosition		:= iLoop - 1;<br/>				xEmptyPositionFound	:= True;<br/>				Exit;<br/>			End_If;<br/>		End_For;<br/>		If xCRFound then (* Carriage return *)<br/>			iFindLines		:= 2;<br/>		Elsif xEmptyPositionFound then<br/>			xEnd			:= True;<br/>			iFindLines		:= 2;<br/>		Else<br/>			iPositionCounter				:= iPositionCounter + iBeginPosition;<br/>			udtFileHandler.udiReadPosition	:= Int_To_Udint(iPositionCounter);<br/>			xWaitFileHandling				:= False;<br/>			xReadLines						:= False;<br/>			iFindLines						:= 5;<br/>		End_If;<br/>
									<br/>	2:<br/>		diTranslateCount			:= Int_To_Dint(iEndPosition - iBeginPosition + 1);<br/>		diTranslateOffset			:= Int_To_Dint(iBeginPosition);<br/>		xTranslateRequest			:= True;<br/>		iFindLines					:= 3;<br/>
									<br/>	3:<br/>		If xTranslateDone then<br/>			xLineReady				:= True;<br/>			iFindLines				:= 4;<br/>		End_If;<br/>
									<br/>	4:<br/>		If not xLineReady then<br/>			iBeginPosition			:= iEndPosition + 3;<br/>			xTranslateRequest		:= False;<br/>			iFindLines				:= 1;<br/>
									<br/>			If xEnd then	(* End, next file *)<br/>				xReadLines			:= False;<br/>				xWaitFileHandling	:= False;<br/>				iLine				:= 0;<br/>				iFindLines			:= 0;<br/>			End_If;<br/>		End_If;<br/>
									<br/>	5:<br/>		If xReadLines then<br/>			iBeginPosition			:= 0;<br/>			iFindLines				:= 1;<br/>		End_If;<br/>End_Case;<br/>
									<br/>Case iReadConfiguration of<br/>	0:<br/>		If xLineReady then<br/>			iReadConfiguration	:= 10;<br/>		End_If;<br/>
									<br/>	2:<br/>		xLineReady				:= False;<br/>		iReadConfiguration		:= 0;<br/>
									<br/>	10:<br/>		xEmptyLine				:= False;<br/>		xIgnoreLine				:= False;<br/>		If len(strLineData) = 0 then<br/>			xEmptyLine			:= True;<br/>		End_If;<br/>		If not xEmptyLine then	(* Ignore comments signed with "*" *)<br/>			strFirstCharacter	:= Left(strLineData,1);<br/>			xIgnoreLine			:= EQ_String(strFirstCharacter,'*');<br/>		End_If;<br/>
									<br/>		If not xEmptyLine and not xIgnoreLine then<br/>			Case iType of<br/>			1:	iReadConfiguration	:= 11; (* Network configuration *)<br/>			2:	iReadConfiguration	:= 12; (* Lumgate configuration *)<br/>				For iLoop := 1 to 209 do<br/>					arrTempText[iLoop]	:=	'';<br/>				End_For;<br/>			3:	iReadConfiguration	:= 13; (* L20 configuration *)<br/>			4:	iReadConfiguration	:= 14; (* Threshold configuration 1 *)<br/>			5:	iReadConfiguration	:= 15; (* Threshold configuration 2 *)<br/>			6:	iReadConfiguration	:= 16; (* Threshold configuration 3 *)<br/>			7:	iReadConfiguration	:= 17; (* Threshold configuration 4 *)<br/>			End_Case;		<br/>		Else<br/>			xLineReady				:=	False;<br/>			iReadConfiguration		:=	0;<br/>		End_If;<br/>		<br/>	11:	(* Network configuration *)<br/>		iLine			:=	iLine + 1;<br/>		rLoadMaker		:=	rLoadMaker + 14.29;<br/>
									<br/>		Case iLine of<br/>		1:<br/>			(* Check plausibility...<br/>			Task for next version...	e.g. :=	find(strLineData,'IP: '); *)<br/>				udtNetworkConfiguration.strIP		:=	Delete(strLineData,4,1);<br/>				rLoadMaker							:=	14.29;<br/>				strLoadText							:=	'Network configuration...';<br/>		2:		udtNetworkConfiguration.strSubnet	:=	Delete(strLineData,8,1);<br/>		3:		udtNetworkConfiguration.strGateway	:=	Delete(strLineData,9,1);<br/>		4:		udtNetworkConfiguration.strIPModbus	:=	Delete(strLineData,11,1);<br/>				xExecuteIP_Translate				:=	True;	(* start string to arr_of_byte translation *)<br/>		5:		strTemp								:=	Right(strLineData,1);<br/>				udtNetworkConfiguration.iMode		:=	String_To_Int(strTemp);<br/>		6:		udtNetworkConfiguration.strDNS		:=	Delete(strLineData,10,1);<br/>		7:		strTemp								:=	Delete(strLineData,14,1);<br/>				udtNetworkConfiguration.xLumgateType	:=	int_to_bool(string_to_int(strTemp));<br/>
									<br/>				rLoadMaker							:=	100.0;<br/>		End_Case;<br/>
									<br/>		xLineReady			:= False;<br/>		iReadConfiguration	:= 0;<br/>
									<br/>		(* Safe data to recognize changes *)<br/>		udtActNetworkConfiguration	:=	udtNetworkConfiguration;<br/>
									<br/>	12:	(* Lumgate configuration *)<br/>		iLine			:=	iLine + 1;<br/>		rLoadMaker		:=	rLoadMaker + 0.41;<br/>		<br/>		(*	V2.01 changes: Detect file format EPO-IS-268-917 *)<br/>		If eq_string(strLineData,'File format version;2') and xDetectLumgateFormat then<br/>			rLoadMaker				:=	0.41;<br/>			strLoadText				:=	'Lumgate configuration...';<br/>			xIgnoreLine				:=	True;<br/>			iFileFormat				:=	2;<br/>			xDetectLumgateFormat	:=	False;<br/>		Elsif xDetectLumgateFormat then<br/>			rLoadMaker				:=	0.41;<br/>			strLoadText				:=	'Lumgate configuration...';<br/>			iFileFormat				:=	0;<br/>			xDetectLumgateFormat	:=	False;<br/>		End_if;<br/>
									<br/>		(*	V2.01 changes: New file format, include relay states EPO-IS-268-917 *)<br/>		If iFileFormat = 2 and not xIgnoreLine then<br/>			iElement	:=	0;<br/>
									<br/>			For iLoop := 1 to 209 do	(* Fill string array with Lumgate information *)<br/>				iPositionSeparator1	:= Find(strLineData,';');<br/>				iPositionSeparator2	:= Find(strLineData,'&amp;');	(* Seperatior between scenes and special scenes *)<br/>				iLength				:= Len(strLineData);<br/>
									<br/>				If iLength &gt; 0 and (iPositionSeparator1 &lt; iPositionSeparator2 or iPositionSeparator2 = 0) then<br/>					If not xShiftToSpecial then<br/>						iElement		:= iElement + 1;<br/>					Else<br/>						iElement		:= 165;	(* start storring special scenes *)<br/>						xShiftToSpecial	:= False;<br/>					End_If;<br/>
									<br/>					iNumber				:= iPositionSeparator1 - 1;<br/>					If iNumber &gt; 0 then<br/>						arrTempText[iElement]	:= Left(strLineData,iNumber);<br/>						strLineData				:= Delete(strLineData,iPositionSeparator1,1);<br/>					Else<br/>						arrTempText[iElement]	:= strLineData;	(* fill Lumgate data structure *)<br/>						strLineData				:= '';<br/>					End_If;<br/>
									<br/>				Elsif iLength &gt; 0 and iPositionSeparator1 &gt; iPositionSeparator2 then<br/>					iElement				:= iElement + 1;<br/>					iNumber					:= iPositionSeparator2 - 1;<br/>					arrTempText[iElement]	:= Left(strLineData,iNumber);<br/>					strLineData				:= Delete(strLineData,iPositionSeparator2,1);<br/>					xShiftToSpecial			:= True;<br/>	<br/>				Elsif iLength &gt; 0 and iPositionSeparator1 = 0 and iPositionSeparator2 = 0 then<br/>					iElement				:= iElement + 1;<br/>					arrTempText[iElement]	:= strLineData;<br/>
									<br/>				Elsif iPositionSeparator1 = 0 and iPositionSeparator2 = 0 then<br/>					iElement				:= 0;<br/>					Exit;<br/>				End_If;<br/>			End_For;<br/>
									<br/>			If ((len(arrTempText[2]) &gt; 50) or (len(arrTempText[2]) = 0)) then<br/>				(* In case of no comment, the complete dataset is not readable *)<br/>				arrTempText[2]	:=	'not available'; (* command field *)<br/>			End_if;<br/>
									<br/>			If (iLine &gt; 0) and (iLine &lt; 241) then	(* copy string array to Lumgate structure *)<br/>				arrLumgates[iLine].xInConfigFile:= True;	(* Lumgate in config file detected *)<br/>				iLength							:= Len(arrTempText[1]);<br/>				iLength							:= iLength - 2;<br/>				strTemp							:= Left(arrTempText[1],1);<br/>				arrLumgates[iLine].iModuleLevel	:= String_to_Int(strTemp);	(* Split address "X-YYY" into segment and module number *)<br/>				arrLumgates[iLine].iModuleLevel	:= arrLumgates[iLine].iModuleLevel - 1;<br/>
									<br/>				If iLength &gt; 0 then	<br/>			(* count configured Lumgates per segment to compare the configured and the real connected Lumgates *)<br/>					If arrLumgates[iLine].iModuleLevel = 0 then<br/>						arrSegment[1]	:=	arrSegment[1] + 1;<br/>					Elsif arrLumgates[iLine].iModuleLevel = 1 then<br/>						arrSegment[2]	:=	arrSegment[2] + 1;<br/>					Elsif arrLumgates[iLine].iModuleLevel = 2 then<br/>						arrSegment[3]	:=	arrSegment[3] + 1;<br/>					Elsif arrLumgates[iLine].iModuleLevel = 3 then<br/>						arrSegment[4]	:=	arrSegment[4] + 1;<br/>					End_if;<br/>					strTemp								:= Right(arrTempText[1],iLength);<br/>					arrLumgates[iLine].iModuleNumber	:= String_to_Int(strTemp);<br/>				End_If;<br/>
									<br/>				arrLumgates[iLine].strDescription:= arrTempText[2];<br/>				If EQ_String(arrTempText[3],'1') then<br/>					arrLumgates[iLine].xFailMode		:= True;<br/>				Else<br/>					arrLumgates[iLine].xFailMode		:= False;<br/>				End_If;<br/>				arrLumgates[iLine].iOutputLevelFailsave	:= String_To_Int(arrTempText[4]);<br/>				If EQ_String(arrTempText[5],'1') then<br/>					arrLumgates[iLine].xFailsaveRelay1		:= True;<br/>				Else<br/>					arrLumgates[iLine].xFailsaveRelay1		:= False;<br/>				End_If;<br/>				If EQ_String(arrTempText[6],'1') then<br/>					arrLumgates[iLine].xFailsaveRelay2		:= True;<br/>				Else<br/>					arrLumgates[iLine].xFailsaveRelay2		:= False;<br/>				End_If;<br/>				If EQ_String(arrTempText[7],'1') then<br/>					arrLumgates[iLine].xRelay1_NC 		:= True;<br/>				Else<br/>					arrLumgates[iLine].xRelay1_NC		:= False;<br/>				End_If;<br/>				If EQ_String(arrTempText[8],'1') then<br/>					arrLumgates[iLine].xRelay2_NC		:= True;<br/>				Else<br/>					arrLumgates[iLine].xRelay2_NC		:= False;<br/>				End_If;<br/>				arrLumgates[iLine].udtCloLed.udiHours	:= String_To_Udint(arrTempText[9]);<br/>				arrLumgates[iLine].udtCloLed.rPercentage:= String_To_Real(arrTempText[10]);<br/>				(* activate clo in case of existing data ( &gt; 0 ) *)<br/>				arrLumgates[iLine].udtCloLed.xActive	:= arrLumgates[iLine].udtCloLed.udiHours &gt; Udint#0 &amp; arrLumgates[iLine].udtCloLed.rPercentage &gt; 0.0;<br/>
									<br/>				arrLumgates[iLine].udtCloMaintenance.udiHours		:= String_To_Udint(arrTempText[11]);<br/>				arrLumgates[iLine].udtCloMaintenance.rPercentage	:= String_To_Real(arrTempText[12]);<br/>				(* activate maintenance factor in case of existing data ( &gt; 0 ) *)<br/>				arrLumgates[iLine].udtCloMaintenance.xActive		:= arrLumgates[iLine].udtCloMaintenance.udiHours &gt; Udint#0 &amp; arrLumgates[iLine].udtCloMaintenance.rPercentage &gt; 0.0;<br/>
									<br/>				arrLumgates[iLine].udtCurrentCheck.rPercentageWarning			:= String_To_Real(arrTempText[13]);<br/>				arrLumgates[iLine].udtCurrentCheck.xActiveCurrentCheckWarning	:= arrLumgates[iLine].udtCurrentCheck.rPercentageWarning &gt; 0.0;<br/>				(* activate current warnings in case of existing data ( &gt; 0 ) *)<br/>
									<br/>				arrLumgates[iLine].udtCurrentCheck.rPercentageError				:= String_To_Real(arrTempText[14]);<br/>				arrLumgates[iLine].udtCurrentCheck.xActiveCurrentCheckError		:= arrLumgates[iLine].udtCurrentCheck.rPercentageError &gt; 0.0;<br/>				(* activate current alarms in case of existing data ( &gt; 0 ) *)<br/>
									<br/>				For iLoop := 15 to 164 do<br/>					If iLoop = 15 then<br/>						iPositionScene	:=	1;<br/>					Else<br/>						iPositionScene	:=	iPositionScene + 1;<br/>					End_if;<br/>					(* Activate scenes in case of existing data ( &gt; 0 ) *)<br/>					If EQ_String(arrTempText[iLoop],'X') Or EQ_String(arrTempText[iLoop],'') then<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].iValue		:= 0;<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].xUsed		:= False;<br/>						iLoop	:=	iLoop + 1;<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay1 		:= False;<br/>						iLoop	:=	iLoop + 1;<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay2 		:= False;<br/>					Else<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].iValue		:= String_To_Int(arrTempText[iLoop]);<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].xUsed		:= True;<br/>						iLoop	:=	iLoop + 1;<br/>						If EQ_String(arrTempText[iLoop],'1')then<br/>							arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay1 		:= True;<br/>						Else<br/>							arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay1 		:= False;<br/>						End_if;<br/>						iLoop	:=	iLoop + 1;<br/>						If EQ_String(arrTempText[iLoop],'1')then<br/>							arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay2 		:= True;<br/>						Else<br/>							arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay2 		:= False;<br/>						End_if;<br/>					End_If;<br/>				End_For;<br/>
									<br/>				For iLoop := 165 to 207 do<br/>					If iLoop = 165 then<br/>						iPositionScene	:=	1;<br/>					Else<br/>						iPositionScene	:=	iPositionScene + 1;<br/>					End_if;<br/>					(* Activate special scenes in case of existing data ( &gt; 0 ) *)<br/>					If EQ_String(arrTempText[iLoop],'X') Or EQ_String(arrTempText[iLoop],'') then<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].iValue		:= 0;<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].xUsed		:= False;<br/>						iLoop	:=	iLoop + 1;<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay1 		:= False;<br/>						iLoop	:=	iLoop + 1;<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay2 		:= False;<br/>					Else<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].iValue		:= String_To_Int(arrTempText[iLoop]);<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].xUsed		:= True;<br/>						iLoop	:=	iLoop + 1;<br/>						If EQ_String(arrTempText[iLoop],'1')then<br/>							arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay1 		:= True;<br/>						Else<br/>							arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay1 		:= False;<br/>						End_if;<br/>						iLoop	:=	iLoop + 1;<br/>						If EQ_String(arrTempText[iLoop],'1')then<br/>							arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay2 		:= True;<br/>						Else<br/>							arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay2 		:= False;<br/>						End_if;<br/>					End_If;<br/>				End_For;<br/>				(* Safe data to recognize changes *)<br/>				arrLumgateConfig[iLine].arrDimmingScene			:=	arrLumgates[iLine].arrDimmingScene;<br/>				arrLumgateConfig[iLine].arrSpecialScene			:=	arrLumgates[iLine].arrSpecialScene;<br/>				arrLumgateConfig[iLine].iOutputLevelFailsave	:=	arrLumgates[iLine].iOutputLevelFailsave;<br/>				arrLumgateConfig[iLine].strDescription 			:=	arrLumgates[iLine].strDescription;<br/>				arrLumgateConfig[iLine].udtCloLed 				:=	arrLumgates[iLine].udtCloLed;<br/>				arrLumgateConfig[iLine].udtCloMaintenance		:=	arrLumgates[iLine].udtCloMaintenance;<br/>				arrLumgateConfig[iLine].udtCurrentCheck			:=	arrLumgates[iLine].udtCurrentCheck;<br/>				arrLumgateConfig[iLine].xFailMode				:=	arrLumgates[iLine].xFailMode;<br/>				arrLumgateConfig[iLine].xFailsaveRelay1 		:=	arrLumgates[iLine].xFailsaveRelay1;<br/>				arrLumgateConfig[iLine].xFailsaveRelay2 		:=	arrLumgates[iLine].xFailsaveRelay2;<br/>				arrLumgateConfig[iLine].xRelay1_NC 				:=	arrLumgates[iLine].xRelay1_NC;<br/>				arrLumgateConfig[iLine].xRelay2_NC		 		:=	arrLumgates[iLine].xRelay2_NC;<br/>			Else<br/>				xAlarm	:=	True;<br/>				strDiag	:=	'Error: To many Lumgates configured';<br/>			End_if;<br/>		Elsif iFileFormat = 0 then<br/>			For iLoop := 1 to 75 do<br/>				arrTempText[iLoop]	:=	'';<br/>			End_For;<br/>			iElement	:=	0;<br/>
									<br/>			For iLoop := 1 to 75 do	(* Fill string array with Lumgate information *)<br/>				iPositionSeparator1	:= Find(strLineData,';');<br/>				iPositionSeparator2	:= Find(strLineData,'&amp;');	(* Seperatior between scenes and special scenes *)<br/>				iLength				:= Len(strLineData);<br/>
									<br/>				If iLength &gt; 0 and (iPositionSeparator1 &lt; iPositionSeparator2 or iPositionSeparator2 = 0) then<br/>					If not xShiftToSpecial then<br/>						iElement		:= iElement + 1;<br/>					Else<br/>						iElement		:= 61;	(* start storring special scenes *)<br/>						xShiftToSpecial	:= False;<br/>					End_If;<br/>
									<br/>					iNumber				:= iPositionSeparator1 - 1;<br/>					If iNumber &gt; 0 then<br/>						arrTempText[iElement]	:= Left(strLineData,iNumber);<br/>						strLineData				:= Delete(strLineData,iPositionSeparator1,1);<br/>					Else<br/>						arrTempText[iElement]	:= strLineData;	(* fill Lumgate data structure *)<br/>						strLineData				:= '';<br/>					End_If;<br/>
									<br/>				Elsif iLength &gt; 0 and iPositionSeparator1 &gt; iPositionSeparator2 then<br/>					iElement				:= iElement + 1;<br/>					iNumber					:= iPositionSeparator2 - 1;<br/>					arrTempText[iElement]	:= Left(strLineData,iNumber);<br/>					strLineData				:= Delete(strLineData,iPositionSeparator2,1);<br/>					xShiftToSpecial			:= True;<br/>	<br/>				Elsif iLength &gt; 0 and iPositionSeparator1 = 0 and iPositionSeparator2 = 0 then<br/>					iElement				:= iElement + 1;<br/>					arrTempText[iElement]	:= strLineData;<br/>
									<br/>				Elsif iPositionSeparator1 = 0 and iPositionSeparator2 = 0 then<br/>					iElement				:= 0;<br/>					Exit;<br/>				End_If;<br/>				If ((len(arrTempText[2]) &gt; 50) or (len(arrTempText[2]) = 0)) then<br/>					(* In case of no comment, the complete dataset is not readable *)<br/>					arrTempText[2]	:=	'not available'; (* command field *)<br/>				End_if;<br/>			End_For;<br/>
									<br/>			If (iLine &gt; 0) and (iLine &lt; 241) then	(* copy string array to Lumgate structure *)<br/>				arrLumgates[iLine].xInConfigFile:= True;	(* Lumgate in config file detected *)<br/>				iLength							:= Len(arrTempText[1]);<br/>				iLength							:= iLength - 2;<br/>				strTemp							:= Left(arrTempText[1],1);<br/>				arrLumgates[iLine].iModuleLevel	:= String_to_Int(strTemp);	(* Split address "X-YYY" into segment and module number *)<br/>				arrLumgates[iLine].iModuleLevel	:= arrLumgates[iLine].iModuleLevel - 1;<br/>
									<br/>				If iLength &gt; 0 then	<br/>			(* count configured Lumgates per segment to compare the configured and the real connected Lumgates *)<br/>					If arrLumgates[iLine].iModuleLevel = 0 then<br/>						arrSegment[1]	:=	arrSegment[1] + 1;<br/>					Elsif arrLumgates[iLine].iModuleLevel = 1 then<br/>						arrSegment[2]	:=	arrSegment[2] + 1;<br/>					Elsif arrLumgates[iLine].iModuleLevel = 2 then<br/>						arrSegment[3]	:=	arrSegment[3] + 1;<br/>					Elsif arrLumgates[iLine].iModuleLevel = 3 then<br/>						arrSegment[4]	:=	arrSegment[4] + 1;<br/>					End_if;<br/>					strTemp								:= Right(arrTempText[1],iLength);<br/>					arrLumgates[iLine].iModuleNumber	:= String_to_Int(strTemp);<br/>				End_If;<br/>
									<br/>				arrLumgates[iLine].strDescription:= arrTempText[2];<br/>				If EQ_String(arrTempText[3],'1') then<br/>					arrLumgates[iLine].xFailMode		:= True;<br/>				Else<br/>					arrLumgates[iLine].xFailMode		:= False;<br/>				End_If;<br/>				arrLumgates[iLine].iOutputLevelFailsave	:= String_To_Int(arrTempText[4]);<br/>
									<br/>				(* V2.01 Changes: Set Relay default values *)<br/>				arrLumgates[iLine].xFailsaveRelay1		:= True;<br/>				arrLumgates[iLine].xFailsaveRelay2		:= True;<br/>				arrLumgates[iLine].xRelay1_NC 			:= True;<br/>				arrLumgates[iLine].xRelay2_NC			:= True;<br/>
									<br/>
									<br/>				arrLumgates[iLine].udtCloLed.udiHours	:= String_To_Udint(arrTempText[5]);<br/>				arrLumgates[iLine].udtCloLed.rPercentage:= String_To_Real(arrTempText[6]);<br/>				(* activate clo in case of existing data ( &gt; 0 ) *)<br/>				arrLumgates[iLine].udtCloLed.xActive	:= arrLumgates[iLine].udtCloLed.udiHours &gt; Udint#0 &amp; arrLumgates[iLine].udtCloLed.rPercentage &gt; 0.0;<br/>
									<br/>				arrLumgates[iLine].udtCloMaintenance.udiHours		:= String_To_Udint(arrTempText[7]);<br/>				arrLumgates[iLine].udtCloMaintenance.rPercentage	:= String_To_Real(arrTempText[8]);<br/>				(* activate maintenance factor in case of existing data ( &gt; 0 ) *)<br/>				arrLumgates[iLine].udtCloMaintenance.xActive		:= arrLumgates[iLine].udtCloMaintenance.udiHours &gt; Udint#0 &amp; arrLumgates[iLine].udtCloMaintenance.rPercentage &gt; 0.0;<br/>
									<br/>				arrLumgates[iLine].udtCurrentCheck.rPercentageWarning			:= String_To_Real(arrTempText[9]);<br/>				arrLumgates[iLine].udtCurrentCheck.xActiveCurrentCheckWarning	:= arrLumgates[iLine].udtCurrentCheck.rPercentageWarning &gt; 0.0;<br/>				(* activate current warnings in case of existing data ( &gt; 0 ) *)<br/>
									<br/>				arrLumgates[iLine].udtCurrentCheck.rPercentageError				:= String_To_Real(arrTempText[10]);<br/>				arrLumgates[iLine].udtCurrentCheck.xActiveCurrentCheckError		:= arrLumgates[iLine].udtCurrentCheck.rPercentageError &gt; 0.0;<br/>				(* activate current alarms in case of existing data ( &gt; 0 ) *)<br/>
									<br/>				For iLoop := 11 to 60 do<br/>					iPositionScene	:= iLoop - 10;<br/>					(* Activate scenes in case of existing data ( &gt; 0 ) *)<br/>					If EQ_String(arrTempText[iLoop],'X') Or EQ_String(arrTempText[iLoop],'') then<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].iValue		:= 0;<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].xUsed		:= False;<br/>					Else<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].iValue		:= String_To_Int(arrTempText[iLoop]);<br/>						If arrLumgates[iLine].arrDimmingScene[iPositionScene].iValue = 0 then<br/>							arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay1	:=	False;<br/>							arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay2	:=	False;<br/>						Else<br/>							arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay1	:=	True;<br/>							arrLumgates[iLine].arrDimmingScene[iPositionScene].xRelay2	:=	True;<br/>						End_if;<br/>						arrLumgates[iLine].arrDimmingScene[iPositionScene].xUsed		:= True;<br/>					End_If;<br/>				End_For;<br/>
									<br/>				For iLoop := 61 to 75 do<br/>					iPositionScene	:= iLoop - 60;<br/>					(* Activate special scenes in case of existing data ( &gt; 0 ) *)<br/>					If EQ_String(arrTempText[iLoop],'X') Or EQ_String(arrTempText[iLoop],'') then<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].iValue		:= 0;<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].xUsed		:= False;<br/>					Else<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].iValue		:= String_To_Int(arrTempText[iLoop]);<br/>						If arrLumgates[iLine].arrSpecialScene[iPositionScene].iValue = 0 then<br/>							arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay1	:=	False;<br/>							arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay2	:=	False;<br/>						Else<br/>							arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay1	:=	True;<br/>							arrLumgates[iLine].arrSpecialScene[iPositionScene].xRelay2	:=	True;<br/>						End_if;<br/>						arrLumgates[iLine].arrSpecialScene[iPositionScene].xUsed		:= True;<br/>					End_If;<br/>				End_For;<br/>				(* Safe data to recognize changes *)<br/>				arrLumgateConfig[iLine].arrDimmingScene			:=	arrLumgates[iLine].arrDimmingScene;<br/>				arrLumgateConfig[iLine].arrSpecialScene			:=	arrLumgates[iLine].arrSpecialScene;<br/>				arrLumgateConfig[iLine].iOutputLevelFailsave	:=	arrLumgates[iLine].iOutputLevelFailsave;<br/>				arrLumgateConfig[iLine].strDescription 			:=	arrLumgates[iLine].strDescription;<br/>				arrLumgateConfig[iLine].udtCloLed 				:=	arrLumgates[iLine].udtCloLed;<br/>				arrLumgateConfig[iLine].udtCloMaintenance		:=	arrLumgates[iLine].udtCloMaintenance;<br/>				arrLumgateConfig[iLine].udtCurrentCheck			:=	arrLumgates[iLine].udtCurrentCheck;<br/>				arrLumgateConfig[iLine].xFailMode				:=	arrLumgates[iLine].xFailMode;<br/>			Else<br/>				xAlarm	:=	True;<br/>				strDiag	:=	'Error: To many Lumgates configured';<br/>			End_if;<br/>		End_if;<br/>
									<br/>		xLineReady			:= False;<br/>		iReadConfiguration	:= 0;<br/>
									<br/>	13:	(* L20 configuration *)<br/>		iLine			:=	iLine + 1;<br/>		rLoadMaker		:=	rLoadMaker + 8.0;<br/>
									<br/>		Case iLine Of <br/>			1:<br/>				rLoadMaker					:=	8.0;<br/>				strLoadText					:=	'L20 configuration...';<br/>				arr_Inputs_L20[1].xActive	:= EQ_String(strLineData,'Sensor channel 1: 1');<br/>			2:<br/>				arr_Inputs_L20[2].xActive	:= EQ_String(strLineData,'Sensor channel 2: 1');<br/>			3:<br/>				arr_Inputs_L20[3].xActive	:= EQ_String(strLineData,'Sensor channel 3: 1');<br/>			4:<br/>				arr_Inputs_L20[4].xActive	:= EQ_String(strLineData,'Sensor channel 4: 1');<br/>
									<br/>			5:	(* Max analog values to norm 4 - 20 mA to max. 0.0 - 100000.0 *)<br/>				strTempValue				:=	Delete(strLineData,35,1);<br/>				udiTempValue				:=	string_to_udint(strTempValue);<br/>				udtL20Config.rMaxCd1		:=	limit_real(0.0,udint_to_real(udiTempValue),100000.0);<br/>
									<br/>			6:	<br/>				strTempValue				:=	Delete(strLineData,35,1);<br/>				udiTempValue				:=	string_to_udint(strTempValue);<br/>				udtL20Config.rMaxCd2		:=	limit_real(0.0,udint_to_real(udiTempValue),100000.0);<br/>
									<br/>			7:	<br/>				strTempValue				:=	Delete(strLineData,35,1);<br/>				udiTempValue				:=	string_to_udint(strTempValue);<br/>				udtL20Config.rMaxCd3		:=	limit_real(0.0,udint_to_real(udiTempValue),100000.0);<br/>
									<br/>			8:	<br/>				strTempValue				:=	Delete(strLineData,35,1);<br/>				udiTempValue				:=	string_to_udint(strTempValue);<br/>				udtL20Config.rMaxCd4		:=	limit_real(0.0,udint_to_real(udiTempValue),100000.0);<br/>
									<br/>			9:	(* Limit the analog input sources *)<br/>				strTempValue						:= Right(strLineData,1);<br/>				iTempValue							:= String_To_Int(strTempValue);<br/>				udtL20Config.iBackup_1_2_3_4_Limit	:= iTempValue;<br/>
									<br/>			10:<br/>				strTempValue						:= Right(strLineData,1);<br/>				iTempValue							:= String_to_Int(strTempValue);<br/>				udtL20Config.iBackup_2_3_4_1_Limit	:= iTempValue;<br/>
									<br/>			11:<br/>				strTempValue						:= Right(strLineData,1);<br/>				iTempValue							:= String_to_Int(strTempValue);<br/>				udtL20Config.iBackup_3_4_1_2_Limit	:= iTempValue;<br/>
									<br/>			12:<br/>				strTempValue						:= Right(strLineData,1);<br/>				iTempValue							:= String_to_Int(strTempValue);<br/>				udtL20Config.iBackup_4_1_2_3_Limit	:= iTempValue;<br/>				rLoadMaker					:=	100.0;<br/>		End_Case;<br/>
									<br/>		arrActL20Inputs	:=	arr_Inputs_L20;<br/>		udtActL20Config	:=	udtL20Config;<br/>
									<br/>		xLineReady			:= False;<br/>		iReadConfiguration	:= 0;<br/>
									<br/>	14:	(* Threshold configuration 1 *)<br/>		(* Step 15 - 17 is equal to 14 for different Threshold configurations *)<br/>		iLine			:=	iLine + 1;<br/>		rLoadMaker		:=	rLoadMaker + 1.7;<br/>
									<br/>		Case iLine Of<br/>		1:		udtProjectDescription.strName			:= Delete(strLineData,6,1);<br/>				rLoadMaker					:=	1.7;<br/>				strLoadText					:=	'Threshold configuration 1...';<br/>		2:		udtProjectDescription.strDescription	:= Delete(strLineData,13,1);<br/>		3:		udtProjectDescription.strLocation		:= Delete(strLineData,10,1);<br/>		4:		udtProjectDescription.strDesigner		:= Delete(strLineData,10,1);<br/>		5:		udtProjectDescription.strRevision		:= Delete(strLineData,10,1);<br/>
									<br/>		6: 		strTempValue	:= Delete(strLineData,7,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				udtLevelConfiguration_L20_1.iDelay:= iTempValue;<br/>				iDelay	:=	iTempValue;<br/>
									<br/>				(* V2.00 set default values until new configuration files are designd *)<br/>				(* These values are only remanent *)<br/>				If udtLevelConfiguration_L20_1.diAverageTime = dint#0 then<br/>					udtLevelConfiguration_L20_1.diAverageTime	:=	dint#5;<br/>				End_if;<br/>				If udtLevelConfiguration_L20_1.iHysteric = 0 then<br/>					udtLevelConfiguration_L20_1.iHysteric	:=	3;<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_1.strName1,'') then<br/>					udtLevelConfiguration_L20_1.strName1	:=	'Option 1';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_1.strName2,'') then<br/>					udtLevelConfiguration_L20_1.strName2	:=	'Option 2';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_1.strName3,'') then<br/>					udtLevelConfiguration_L20_1.strName3	:=	'Option 3';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_1.strName4,'') then<br/>					udtLevelConfiguration_L20_1.strName4	:=	'Option 4';<br/>				End_if;<br/>
									<br/>		7: 		(* Select source *)<br/>				strTempValue	:= Delete(strLineData,14,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				udtLevelConfiguration_L20_1.iInputValue:= iTempValue;	<br/>
									<br/>		8: 		(* Activate threshold levels *)<br/>				strTempValue	:= Delete(strLineData,15,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				iTempValue		:= Limit_Int(1,iTempValue,25);<br/>
									<br/>				For iLoop := 1 To 25 do<br/>					udtLevelConfiguration_L20_1.arrScenarioActive[iLoop]:= False;<br/>				End_For;<br/>
									<br/>				If iLoop &gt; 0 then<br/>					For iLoop := 1 to iTempValue do<br/>							udtLevelConfiguration_L20_1.arrScenarioActive[iLoop]	:=	True;<br/>					End_For;<br/>				End_If;<br/>
									<br/>		9,11,13,15,17,19,21,23,25:							(* Scene options 1 - 9 *)<br/>				If iLine = 9 then<br/>					iPosition	:=	1;<br/>				Else<br/>					iPosition	:=	iPosition + 1;<br/>				End_if;<br/>				If get_char(strLineData,1) = 48 then<br/>					strTempValue	:=	Delete(strLineData,7,1);<br/>				Else<br/>					strTempValue	:=	Delete(strLineData,6,1);<br/>				End_if;<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);			(* 1st option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][1]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);			(* 2nd option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);			(* 3rd option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][3]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);			(* 4th option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][4]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);	(* 5th option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][5]	:=	string_to_int(strTempValue);<br/>				udtLevelConfiguration_L20_1.xActive 	:=	True;<br/>
									<br/>		27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57:	(* Scene options 10 - 25 *)<br/>				iPosition	:=	iPosition + 1;<br/>				strTempValue	:=	Delete(strLineData,7,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);			(* 1st option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][1]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);			(* 2nd option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);			(* 3rd option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][3]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);			(* 4th option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][4]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);	(* 5th option *)<br/>				arrScenarioConfiguration_L20_1[iPosition][5]	:=	string_to_int(strTempValue);<br/>
									<br/>		10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58:	(* Thresholds *)<br/>				If iLine = 10 then<br/>					iPosition2	:=	1;<br/>				Else<br/>					iPosition2	:=	iPosition2 + 1;<br/>				End_if;<br/>				strTempValue	:=	Delete(strLineData,1,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);					(* Configuration 1 *)<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig1[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);					(* Configuration 2 *)<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig2[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);					(* Configuration 3 *)<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig3[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				If iTemp &gt; 0 then<br/>					strTempValue2	:=	Left(strTempValue,iTemp);<br/>				Else<br/>					strTempValue2	:=	strTempValue;<br/>				End_if;															(* Configuration 4 *)<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig4[iPosition2]	:=	string_to_int(strTempValue2);<br/>		<br/>		(* Old config file structure from V1.00: *)<br/>
									<br/>			(*	strTempValue	:= Delete(strLineData,19,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				iPosition		:= iLine - 8;<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig1[iPosition]:= iTempValue;<br/>
									<br/>		18..32: strTempValue	:= Delete(strLineData,20,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				iPosition		:= iLine - 8;<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig1[iPosition]:= iTempValue;<br/>
									<br/>		33..41: strTempValue	:= Delete(strLineData,19,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				iPosition		:= iLine - 32;<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig2[iPosition]:= iTempValue;<br/>
									<br/>		42..56: strTempValue	:= Delete(strLineData,20,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				iPosition		:= iLine - 32;<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig2[iPosition]:= iTempValue;<br/>
									<br/>		57..65: strTempValue	:= Delete(strLineData,19,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				iPosition		:= iLine - 56;<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig3[iPosition]:= iTempValue;<br/>
									<br/>		66..80: strTempValue	:= Delete(strLineData,20,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				iPosition		:= iLine - 56;<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig3[iPosition]:= iTempValue;<br/>
									<br/>		81..89: strTempValue	:= Delete(strLineData,19,1);<br/>				iTempValue		:= String_to_Int(strTempValue);<br/>				iPosition		:= iLine - 80;<br/>				udtLevelConfiguration_L20_1.arrScenarioConfig4[iPosition]:= iTempValue;<br/>
									<br/>		90..104:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 80;<br/>					udtLevelConfiguration_L20_1.arrScenarioConfig4[iPosition]:= iTempValue;<br/>
									<br/>		105..109:	strTempValue	:= Delete(strLineData,19,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 104;<br/>					arrScenarioConfiguration_L20_1[1][iPosition]:= iTempValue;<br/>
									<br/>		110..114:	strTempValue	:= Delete(strLineData,19,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 109;<br/>					arrScenarioConfiguration_L20_1[2][iPosition]:= iTempValue;<br/>
									<br/>		115..119:	strTempValue	:= Delete(strLineData,19,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 114;<br/>					arrScenarioConfiguration_L20_1[3][iPosition]:= iTempValue;<br/>
									<br/>		120..124:	strTempValue	:= Delete(strLineData,19,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 119;<br/>					arrScenarioConfiguration_L20_1[4][iPosition]:= iTempValue;<br/>
									<br/>		125..129:	strTempValue	:= Delete(strLineData,19,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 124;<br/>					arrScenarioConfiguration_L20_1[5][iPosition]:= iTempValue;<br/>
									<br/>		130..134:	strTempValue	:= Delete(strLineData,19,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 129;<br/>					arrScenarioConfiguration_L20_1[6][iPosition]:= iTempValue;<br/>
									<br/>		135..139:	strTempValue	:= Delete(strLineData,19,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 134;<br/>					arrScenarioConfiguration_L20_1[7][iPosition]:= iTempValue;<br/>
									<br/>		140..144:	strTempValue	:= Delete(strLineData,19,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 139;<br/>					arrScenarioConfiguration_L20_1[8][iPosition]:= iTempValue;<br/>
									<br/>		145..149:	strTempValue	:= Delete(strLineData,19,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 144;<br/>					arrScenarioConfiguration_L20_1[9][iPosition]:= iTempValue;<br/>
									<br/>		150..154:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 149;<br/>					arrScenarioConfiguration_L20_1[10][iPosition]:= iTempValue;<br/>
									<br/>		155..159:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 154;<br/>					arrScenarioConfiguration_L20_1[11][iPosition]:= iTempValue;<br/>
									<br/>		160..164:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 159;<br/>					arrScenarioConfiguration_L20_1[12][iPosition]:= iTempValue;<br/>
									<br/>		165..169:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 164;<br/>					arrScenarioConfiguration_L20_1[13][iPosition]:= iTempValue;<br/>
									<br/>		170..174:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 169;<br/>					arrScenarioConfiguration_L20_1[14][iPosition]:= iTempValue;<br/>
									<br/>		175..179:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 174;<br/>					arrScenarioConfiguration_L20_1[15][iPosition]:= iTempValue;<br/>
									<br/>		180..184:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 179;<br/>					arrScenarioConfiguration_L20_1[16][iPosition]:= iTempValue;<br/>
									<br/>		185..189:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 184;<br/>					arrScenarioConfiguration_L20_1[17][iPosition]:= iTempValue;<br/>
									<br/>		190..194:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 189;<br/>					arrScenarioConfiguration_L20_1[18][iPosition]:= iTempValue;<br/>
									<br/>		195..199:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 194;<br/>					arrScenarioConfiguration_L20_1[19][iPosition]:= iTempValue;<br/>
									<br/>		200..204:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 199;<br/>					arrScenarioConfiguration_L20_1[20][iPosition]:= iTempValue;<br/>
									<br/>		205..209:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 204;<br/>					arrScenarioConfiguration_L20_1[21][iPosition]:= iTempValue;<br/>
									<br/>		210..214:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 209;<br/>					arrScenarioConfiguration_L20_1[22][iPosition]:= iTempValue;<br/>
									<br/>		215..219:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 214;<br/>					arrScenarioConfiguration_L20_1[23][iPosition]:= iTempValue;<br/>
									<br/>		220..224:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 219;<br/>					arrScenarioConfiguration_L20_1[24][iPosition]:= iTempValue;<br/>
									<br/>		225..229:	strTempValue	:= Delete(strLineData,20,1);<br/>					iTempValue		:= String_to_Int(strTempValue);<br/>					iPosition		:= iLine - 224;<br/>					arrScenarioConfiguration_L20_1[25][iPosition]:= iTempValue; *)<br/>		Else<br/>			xAlarm	:=	True;<br/>			strDiag	:=	'Error: Invalid Threshold 1 configuration file format';<br/>		End_Case;<br/>
									<br/>		(* Safe data to recognize changes *)<br/>		udtActThresholdConfig1		:=	udtLevelConfiguration_L20_1;<br/>		arrActScenarioConfig_L20_1	:=	arrScenarioConfiguration_L20_1;<br/>
									<br/>		xLineReady			:= False;<br/>		iReadConfiguration	:= 0;<br/>
									<br/>
									<br/>	15:	(* Threshold configuration 2 *)<br/>		(* Equal to step 14 for Threshold table 2 *)<br/>		iLine			:=	iLine + 1;<br/>		rLoadMaker		:=	rLoadMaker + 1.7;<br/>
									<br/>		Case iLine Of<br/>		1:		udtProjectDescription.strName			:=	Delete(strLineData,6,1);<br/>				rLoadMaker					:=	1.7;<br/>				strLoadText					:=	'Threshold configuration 2...';<br/>		2:		udtProjectDescription.strDescription	:=	Delete(strLineData,13,1);<br/>		3:		udtProjectDescription.strLocation		:=	Delete(strLineData,10,1);<br/>		4:		udtProjectDescription.strDesigner		:=	Delete(strLineData,10,1);<br/>		5:		udtProjectDescription.strRevision		:=	Delete(strLineData,10,1);<br/>
									<br/>		6: 		strTempValue							:=	Delete(strLineData,7,1);<br/>				iTempValue								:=	String_to_Int(strTempValue);<br/>				udtLevelConfiguration_L20_2.iDelay		:=	iTempValue;<br/>				If udtLevelConfiguration_L20_2.diAverageTime = dint#0 then<br/>					udtLevelConfiguration_L20_2.diAverageTime	:=	dint#5;<br/>				End_if;<br/>				If udtLevelConfiguration_L20_2.iHysteric = 0 then<br/>					udtLevelConfiguration_L20_2.iHysteric		:=	3;<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_2.strName1,'') then<br/>					udtLevelConfiguration_L20_2.strName1	:=	'Option 1';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_2.strName2,'') then<br/>					udtLevelConfiguration_L20_2.strName2	:=	'Option 2';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_1.strName3,'') then<br/>					udtLevelConfiguration_L20_2.strName3	:=	'Option 3';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_1.strName4,'') then<br/>					udtLevelConfiguration_L20_2.strName4	:=	'Option 4';<br/>				End_if;<br/>
									<br/>		7: 		strTempValue							:=	Delete(strLineData,14,1);<br/>				iTempValue								:=	String_to_Int(strTempValue);<br/>				udtLevelConfiguration_L20_2.iInputValue	:=	iTempValue;<br/>
									<br/>		8: 		strTempValue							:=	Delete(strLineData,15,1);<br/>				iTempValue								:=	String_to_Int(strTempValue);<br/>				iTempValue								:=	Limit_Int(1,iTempValue,25);<br/>
									<br/>				For iLoop	:=	1 to 25 do<br/>						udtLevelConfiguration_L20_2.arrScenarioActive[iLoop]		:=	False;<br/>				End_For;<br/>
									<br/>				If iLoop &gt; 0 then<br/>					For iLoop := 1 to iTempValue do<br/>							udtLevelConfiguration_L20_2.arrScenarioActive[iLoop]	:=	True;<br/>					End_For;<br/>				End_If;<br/>
									<br/>		9,11,13,15,17,19,21,23,25:							(* Scene options 1 - 9 *)<br/>				If iLine = 9 then<br/>					iPosition	:=	1;<br/>				Else<br/>					iPosition	:=	iPosition + 1;<br/>				End_if;<br/>				If get_char(strLineData,1) = 48 then<br/>					strTempValue	:=	Delete(strLineData,7,1);<br/>				Else<br/>					strTempValue	:=	Delete(strLineData,6,1);<br/>				End_if;<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_2[iPosition][1]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_2[iPosition][2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_2[iPosition][3]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_2[iPosition][4]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				arrScenarioConfiguration_L20_2[iPosition][5]	:=	string_to_int(strTempValue);<br/>				udtLevelConfiguration_L20_2.xActive 	:=	True;<br/>
									<br/>		27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57:	(* Scene options 10 - 25 *)<br/>				iPosition	:=	iPosition + 1;<br/>				strTempValue	:=	Delete(strLineData,7,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_2[iPosition][1]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_2[iPosition][2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_2[iPosition][3]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_2[iPosition][4]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				arrScenarioConfiguration_L20_2[iPosition][5]	:=	string_to_int(strTempValue);<br/>
									<br/>		10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58:	(* Thresholds *)<br/>				If iLine = 10 then<br/>					iPosition2	:=	1;<br/>				Else<br/>					iPosition2	:=	iPosition2 + 1;<br/>				End_if;<br/>				strTempValue	:=	Delete(strLineData,1,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig1[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig2[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig3[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				If iTemp &gt; 0 then<br/>					strTempValue2	:=	Left(strTempValue,iTemp);<br/>				Else<br/>					strTempValue2	:=	strTempValue;<br/>				End_if;<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig4[iPosition2]	:=	string_to_int(strTempValue2);<br/>				<br/>		(*		Old config file structure from V1.00:<br/>		<br/>		9..17: 	strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 8;<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig1[iPosition]	:=	iTempValue;<br/>
									<br/>		18..32: strTempValue	:=	Delete(strLineData,20,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 8;<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig1[iPosition]	:=	iTempValue;<br/>
									<br/>		33..41: strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 32;<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig2[iPosition]	:=	iTempValue;<br/>
									<br/>		42..56: strTempValue	:=	Delete(strLineData,20,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 32;<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig2[iPosition]	:=	iTempValue;<br/>
									<br/>		57..65: strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 56;<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig3[iPosition]	:=	iTempValue;<br/>
									<br/>		66..80: strTempValue	:=	Delete(strLineData,20,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 56;<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig3[iPosition]	:=	iTempValue;<br/>
									<br/>		81..89: strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 80;<br/>				udtLevelConfiguration_L20_2.arrScenarioConfig4[iPosition]	:=	iTempValue;<br/>
									<br/>		90..104:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 80;<br/>					udtLevelConfiguration_L20_2.arrScenarioConfig4[iPosition]	:=	iTempValue;<br/>
									<br/>
									<br/>		105..109:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 104;<br/>					arrScenarioConfiguration_L20_2[1][iPosition]	:=	iTempValue;<br/>
									<br/>		110..114:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 109;<br/>					arrScenarioConfiguration_L20_2[2][iPosition]	:=	iTempValue;<br/>
									<br/>		115..119:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 114;<br/>					arrScenarioConfiguration_L20_2[3][iPosition]	:=	iTempValue;<br/>
									<br/>		120..124:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 119;<br/>					arrScenarioConfiguration_L20_2[4][iPosition]	:=	iTempValue;<br/>
									<br/>		125..129:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 124;<br/>					arrScenarioConfiguration_L20_2[5][iPosition]	:=	iTempValue;<br/>
									<br/>		130..134:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 129;<br/>					arrScenarioConfiguration_L20_2[6][iPosition]	:=	iTempValue;<br/>
									<br/>		135..139:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 134;<br/>					arrScenarioConfiguration_L20_2[7][iPosition]	:=	iTempValue;<br/>
									<br/>		140..144:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue	:=	String_to_Int(strTempValue);<br/>					iPosition	:=	iLine - 139;<br/>					arrScenarioConfiguration_L20_2[8][iPosition]	:=	iTempValue;<br/>
									<br/>		145..149:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 144;<br/>					arrScenarioConfiguration_L20_2[9][iPosition]	:=	iTempValue;<br/>
									<br/>		150..154:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 149;<br/>					arrScenarioConfiguration_L20_2[10][iPosition]	:=	iTempValue;<br/>
									<br/>		155..159:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 154;<br/>					arrScenarioConfiguration_L20_2[11][iPosition]	:=	iTempValue;<br/>
									<br/>		160..164:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 159;<br/>					arrScenarioConfiguration_L20_2[12][iPosition]	:=	iTempValue;<br/>
									<br/>		165..169:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 164;<br/>					arrScenarioConfiguration_L20_2[13][iPosition]	:=	iTempValue;<br/>
									<br/>		170..174:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 169;<br/>					arrScenarioConfiguration_L20_2[14][iPosition]	:=	iTempValue;<br/>
									<br/>		175..179:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 174;<br/>					arrScenarioConfiguration_L20_2[15][iPosition]	:=	iTempValue;<br/>
									<br/>		180..184:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 179;<br/>					arrScenarioConfiguration_L20_2[16][iPosition]	:=	iTempValue;<br/>
									<br/>		185..189:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 184;<br/>					arrScenarioConfiguration_L20_2[17][iPosition]	:=	iTempValue;<br/>
									<br/>		190..194:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 189;<br/>					arrScenarioConfiguration_L20_2[18][iPosition]	:=	iTempValue;<br/>
									<br/>		195..199:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 194;<br/>					arrScenarioConfiguration_L20_2[19][iPosition]	:=	iTempValue;<br/>
									<br/>		200..204:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 199;<br/>					arrScenarioConfiguration_L20_2[20][iPosition]	:=	iTempValue;<br/>
									<br/>		205..209:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 204;<br/>					arrScenarioConfiguration_L20_2[21][iPosition]	:=	iTempValue;<br/>
									<br/>		210..214:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 209;<br/>					arrScenarioConfiguration_L20_2[22][iPosition]	:=	iTempValue;<br/>
									<br/>		215..219:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 214;<br/>					arrScenarioConfiguration_L20_2[23][iPosition]	:=	iTempValue;<br/>
									<br/>		220..224:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 219;<br/>					arrScenarioConfiguration_L20_2[24][iPosition]	:=	iTempValue;<br/>
									<br/>		225..229:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 224;<br/>					arrScenarioConfiguration_L20_2[25][iPosition]	:=	iTempValue; *)<br/>		Else<br/>			xAlarm	:=	True;<br/>			strDiag	:=	'Error: Invalid Threshold 2 configuration file format';<br/>		End_Case; <br/>
									<br/>		udtActThresholdConfig2		:=	udtLevelConfiguration_L20_2;<br/>		arrActScenarioConfig_L20_2	:=	arrScenarioConfiguration_L20_2;<br/>
									<br/>		xLineReady			:=	False;<br/>		iReadConfiguration	:=	0;<br/>
									<br/>	16:<br/>		iLine			:=	iLine + 1;<br/>		rLoadMaker		:=	rLoadMaker + 1.7;<br/>
									<br/>		Case iLine of<br/>		1:		udtProjectDescription.strName			:=	Delete(strLineData,6,1);<br/>				rLoadMaker					:=	1.7;<br/>				strLoadText					:=	'Threshold configuration 3...';<br/>		2:		udtProjectDescription.strDescription	:=	Delete(strLineData,13,1);<br/>		3:		udtProjectDescription.strLocation		:=	Delete(strLineData,10,1);<br/>		4:		udtProjectDescription.strDesigner		:=	Delete(strLineData,10,1);<br/>		5:		udtProjectDescription.strRevision		:=	Delete(strLineData,10,1);<br/>
									<br/>		6: 		strTempValue	:=	Delete(strLineData,7,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				udtLevelConfiguration_L20_3.iDelay	:=	iTempValue;<br/>				If udtLevelConfiguration_L20_3.diAverageTime = dint#0 then<br/>					udtLevelConfiguration_L20_3.diAverageTime	:=	dint#5;<br/>				End_if;<br/>				If udtLevelConfiguration_L20_3.iHysteric = 0 then<br/>					udtLevelConfiguration_L20_3.iHysteric		:=	3;<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_3.strName1,'') then<br/>					udtLevelConfiguration_L20_3.strName1	:=	'Option 1';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_3.strName2,'') then<br/>					udtLevelConfiguration_L20_3.strName2	:=	'Option 2';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_3.strName3,'') then<br/>					udtLevelConfiguration_L20_3.strName3	:=	'Option 3';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_3.strName4,'') then<br/>					udtLevelConfiguration_L20_3.strName4	:=	'Option 4';<br/>				End_if;<br/>
									<br/>		7: 		strTempValue	:=	Delete(strLineData,14,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				udtLevelConfiguration_L20_3.iInputValue	:=	iTempValue;<br/>
									<br/>		8: 		strTempValue	:=	Delete(strLineData,15,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iTempValue		:=	Limit_Int(1,iTempValue,25);<br/>
									<br/>				For iLoop := 1 to 25 do<br/>					udtLevelConfiguration_L20_3.arrScenarioActive[iLoop]	:=	False;<br/>				End_For;<br/>
									<br/>				If iLoop &gt; 0 then<br/>					For iLoop := 1 to iTempValue do<br/>						udtLevelConfiguration_L20_3.arrScenarioActive[iLoop]	:=	True;<br/>					End_For;<br/>				End_If;<br/>
									<br/>		9,11,13,15,17,19,21,23,25:							(* Scene options 1 - 9 *)<br/>				If iLine = 9 then<br/>					iPosition	:=	1;<br/>				Else<br/>					iPosition	:=	iPosition + 1;<br/>				End_if;<br/>				If get_char(strLineData,1) = 48 then<br/>					strTempValue	:=	Delete(strLineData,7,1);<br/>				Else<br/>					strTempValue	:=	Delete(strLineData,6,1);<br/>				End_if;<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_3[iPosition][1]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_3[iPosition][2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_3[iPosition][3]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_3[iPosition][4]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				arrScenarioConfiguration_L20_3[iPosition][5]	:=	string_to_int(strTempValue);<br/>				udtLevelConfiguration_L20_3.xActive	:=	True;<br/>
									<br/>		27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57:	(* Scene options 10 - 25 *)<br/>				iPosition	:=	iPosition + 1;<br/>				strTempValue	:=	Delete(strLineData,7,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_3[iPosition][1]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_3[iPosition][2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_3[iPosition][3]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_3[iPosition][4]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				arrScenarioConfiguration_L20_3[iPosition][5]	:=	string_to_int(strTempValue);<br/>
									<br/>		10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58:	(* Thresholds *)<br/>				If iLine = 10 then<br/>					iPosition2	:=	1;<br/>				Else<br/>					iPosition2	:=	iPosition2 + 1;<br/>				End_if;<br/>				strTempValue	:=	Delete(strLineData,1,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig1[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig2[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig3[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				If iTemp &gt; 0 then<br/>					strTempValue2	:=	Left(strTempValue,iTemp);<br/>				Else<br/>					strTempValue2	:=	strTempValue;<br/>				End_if;<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig4[iPosition2]	:=	string_to_int(strTempValue2);<br/>
									<br/>	(*	9..17: 	strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 8;<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig1[iPosition]	:=	iTempValue;<br/>
									<br/>		18..32: strTempValue	:=	Delete(strLineData,20,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 8;<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig1[iPosition]	:=	iTempValue;<br/>
									<br/>		33..41: strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 32;<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig2[iPosition]	:=	iTempValue;<br/>
									<br/>		42..56: strTempValue	:=	Delete(strLineData,20,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 32;<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig2[iPosition]	:=	iTempValue;<br/>
									<br/>		57..65: strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 56;<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig3[iPosition]	:=	iTempValue;<br/>
									<br/>		66..80: strTempValue	:=	Delete(strLineData,20,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 56;<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig3[iPosition]	:=	iTempValue;<br/>
									<br/>		81..89: strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 80;<br/>				udtLevelConfiguration_L20_3.arrScenarioConfig4[iPosition]	:=	iTempValue;<br/>
									<br/>		90..104:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 80;<br/>					udtLevelConfiguration_L20_3.arrScenarioConfig4[iPosition]	:=	iTempValue;<br/>
									<br/>		105..109:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 104;<br/>					arrScenarioConfiguration_L20_3[1][iPosition]	:=	iTempValue;<br/>
									<br/>		110..114:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 109;<br/>					arrScenarioConfiguration_L20_3[2][iPosition]	:=	iTempValue;<br/>
									<br/>		115..119:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 114;<br/>					arrScenarioConfiguration_L20_3[3][iPosition]	:=	iTempValue;<br/>
									<br/>		120..124:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 119;<br/>					arrScenarioConfiguration_L20_3[4][iPosition]	:=	iTempValue;<br/>
									<br/>		125..129:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 124;<br/>					arrScenarioConfiguration_L20_3[5][iPosition]	:=	iTempValue;<br/>
									<br/>		130..134:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 129;<br/>					arrScenarioConfiguration_L20_3[6][iPosition]	:=	iTempValue;<br/>
									<br/>		135..139:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 134;<br/>					arrScenarioConfiguration_L20_3[7][iPosition]	:=	iTempValue;<br/>
									<br/>		140..144:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 139;<br/>					arrScenarioConfiguration_L20_3[8][iPosition]	:=	iTempValue;<br/>
									<br/>		145..149:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 144;<br/>					arrScenarioConfiguration_L20_3[9][iPosition]	:=	iTempValue;<br/>
									<br/>		150..154:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 149;<br/>					arrScenarioConfiguration_L20_3[10][iPosition]	:=	iTempValue;<br/>
									<br/>		155..159:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 154;<br/>					arrScenarioConfiguration_L20_3[11][iPosition]	:=	iTempValue;<br/>
									<br/>		160..164:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 159;<br/>					arrScenarioConfiguration_L20_3[12][iPosition]	:=	iTempValue;<br/>
									<br/>		165..169:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 164;<br/>					arrScenarioConfiguration_L20_3[13][iPosition]	:=	iTempValue;<br/>
									<br/>		170..174:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 169;<br/>					arrScenarioConfiguration_L20_3[14][iPosition]	:=	iTempValue;<br/>
									<br/>		175..179:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 174;<br/>					arrScenarioConfiguration_L20_3[15][iPosition]	:=	iTempValue;<br/>
									<br/>		180..184:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 179;<br/>					arrScenarioConfiguration_L20_3[16][iPosition]	:=	iTempValue;<br/>
									<br/>		185..189:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 184;<br/>					arrScenarioConfiguration_L20_3[17][iPosition]	:=	iTempValue;<br/>
									<br/>		190..194:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 189;<br/>					arrScenarioConfiguration_L20_3[18][iPosition]	:=	iTempValue;<br/>
									<br/>		195..199:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 194;<br/>					arrScenarioConfiguration_L20_3[19][iPosition]	:=	iTempValue;<br/>
									<br/>		200..204:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 199;<br/>					arrScenarioConfiguration_L20_3[20][iPosition]	:=	iTempValue;<br/>
									<br/>		205..209:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 204;<br/>					arrScenarioConfiguration_L20_3[21][iPosition]	:=	iTempValue;<br/>
									<br/>		210..214:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 209;<br/>					arrScenarioConfiguration_L20_3[22][iPosition]	:=	iTempValue;<br/>
									<br/>		215..219:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 214;<br/>					arrScenarioConfiguration_L20_3[23][iPosition]	:=	iTempValue;<br/>
									<br/>		220..224:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 219;<br/>					arrScenarioConfiguration_L20_3[24][iPosition]	:=	iTempValue;<br/>
									<br/>		225..229:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 224;<br/>					arrScenarioConfiguration_L20_3[25][iPosition]	:=	iTempValue; *)<br/>		Else<br/>			xAlarm	:=	True;<br/>			strDiag	:=	'Error: Invalid Threshold 3 configuration file format';<br/>		End_Case; <br/>
									<br/>		udtActThresholdConfig3		:=	udtLevelConfiguration_L20_3;<br/>		arrActScenarioConfig_L20_3	:=	arrScenarioConfiguration_L20_3;<br/>
									<br/>		xLineReady			:=	False;<br/>		iReadConfiguration	:=	0;<br/>
									<br/>
									<br/>	17:<br/>		iLine			:=	iLine + 1;<br/>		rLoadMaker		:=	rLoadMaker + 1.7;<br/>
									<br/>		Case iLine Of<br/>		1:		udtProjectDescription.strName			:=	Delete(strLineData,6,1);<br/>				rLoadMaker					:=	1.7;<br/>				strLoadText					:=	'Threshold configuration 4...';<br/>		2:		udtProjectDescription.strDescription	:=	Delete(strLineData,13,1);<br/>		3:		udtProjectDescription.strLocation		:=	Delete(strLineData,10,1);<br/>		4:		udtProjectDescription.strDesigner		:=	Delete(strLineData,10,1);<br/>		5:		udtProjectDescription.strRevision		:=	Delete(strLineData,10,1);<br/>
									<br/>		6: 		strTempValue	:=	Delete(strLineData,7,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				udtLevelConfiguration_L20_4.iDelay	:=	iTempValue;<br/>				If udtLevelConfiguration_L20_4.diAverageTime = dint#0 then<br/>					udtLevelConfiguration_L20_4.diAverageTime	:=	dint#5;<br/>				End_if;<br/>				If udtLevelConfiguration_L20_4.iHysteric = 0 then<br/>					udtLevelConfiguration_L20_4.iHysteric		:=	3;<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_4.strName1,'') then<br/>					udtLevelConfiguration_L20_4.strName1	:=	'Option 1';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_4.strName2,'') then<br/>					udtLevelConfiguration_L20_4.strName2	:=	'Option 2';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_4.strName3,'') then<br/>					udtLevelConfiguration_L20_4.strName3	:=	'Option 3';<br/>				End_if;<br/>				If eq_string(udtLevelConfiguration_L20_4.strName4,'') then<br/>					udtLevelConfiguration_L20_4.strName4	:=	'Option 4';<br/>				End_if;<br/>
									<br/>		7: 		strTempValue	:=	Delete(strLineData,14,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				udtLevelConfiguration_L20_4.iInputValue	:=	iTempValue;<br/>
									<br/>		8: 		strTempValue	:=	Delete(strLineData,15,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iTempValue		:=	Limit_Int(1,iTempValue,25);<br/>
									<br/>				For iLoop := 1 to 25 do<br/>					udtLevelConfiguration_L20_4.arrScenarioActive[iLoop]	:=	False;<br/>				End_For;<br/>
									<br/>				If iLoop &gt; 0 then<br/>					For iLoop := 1 to iTempValue do<br/>						udtLevelConfiguration_L20_4.arrScenarioActive[iLoop]	:=	True;<br/>					End_For;<br/>				End_If;<br/>
									<br/>		9,11,13,15,17,19,21,23,25:							(* Scene options 1 - 9 *)<br/>				If iLine = 9 then<br/>					iPosition	:=	1;<br/>				Else<br/>					iPosition	:=	iPosition + 1;<br/>				End_if;<br/>				If get_char(strLineData,1) = 48 then<br/>					strTempValue	:=	Delete(strLineData,7,1);<br/>				Else<br/>					strTempValue	:=	Delete(strLineData,6,1);<br/>				End_if;<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_4[iPosition][1]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_4[iPosition][2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_4[iPosition][3]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_4[iPosition][4]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				arrScenarioConfiguration_L20_4[iPosition][5]	:=	string_to_int(strTempValue);<br/>				udtLevelConfiguration_L20_4.xActive	:=	True;<br/>
									<br/>		27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57:	(* Scene options 10 - 25 *)<br/>				iPosition	:=	iPosition + 1;<br/>				strTempValue	:=	Delete(strLineData,7,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_4[iPosition][1]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_4[iPosition][2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_4[iPosition][3]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				arrScenarioConfiguration_L20_4[iPosition][4]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				arrScenarioConfiguration_L20_4[iPosition][5]	:=	string_to_int(strTempValue);<br/>
									<br/>		10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58:	(* Thresholds *)<br/>				If iLine = 10 then<br/>					iPosition2	:=	1;<br/>				Else<br/>					iPosition2	:=	iPosition2 + 1;<br/>				End_if;<br/>				strTempValue	:=	Delete(strLineData,1,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig1[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig2[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				strTempValue2	:=	Left(strTempValue,iTemp);<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig3[iPosition2]	:=	string_to_int(strTempValue2);<br/>				strTempValue	:=	Delete(strTempValue,iTempValue,1);<br/>				iTempValue		:=	find(strTempValue,';');<br/>				iTemp			:=	iTempValue - 1;<br/>				If iTemp &gt; 0 then<br/>					strTempValue2	:=	Left(strTempValue,iTemp);<br/>				Else<br/>					strTempValue2	:=	strTempValue;<br/>				End_if;<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig4[iPosition2]	:=	string_to_int(strTempValue2);<br/>
									<br/>	(*	9..17: 	strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 8;<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig1[iPosition]	:=	iTempValue;<br/>
									<br/>		18..32: strTempValue	:=	Delete(strLineData,20,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 8;<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig1[iPosition]	:=	iTempValue;<br/>
									<br/>		33..41: strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 32;<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig2[iPosition]	:=	iTempValue;<br/>
									<br/>		42..56: strTempValue	:=	Delete(strLineData,20,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 32;<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig2[iPosition]	:=	iTempValue;<br/>
									<br/>		57..65: strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 56;<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig3[iPosition]	:=	iTempValue;<br/>
									<br/>		66..80: strTempValue	:=	Delete(strLineData,20,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 56;<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig3[iPosition]	:=	iTempValue;<br/>
									<br/>		81..89: strTempValue	:=	Delete(strLineData,19,1);<br/>				iTempValue		:=	String_to_Int(strTempValue);<br/>				iPosition		:=	iLine - 80;<br/>				udtLevelConfiguration_L20_4.arrScenarioConfig4[iPosition]	:=	iTempValue;<br/>
									<br/>		90..104:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 80;<br/>					udtLevelConfiguration_L20_4.arrScenarioConfig4[iPosition]	:=	iTempValue;<br/>
									<br/>		105..109:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 104;<br/>					arrScenarioConfiguration_L20_4[1][iPosition]	:=	iTempValue;<br/>
									<br/>		110..114:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 109;<br/>					arrScenarioConfiguration_L20_4[2][iPosition]	:=	iTempValue;<br/>
									<br/>		115..119:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 114;<br/>					arrScenarioConfiguration_L20_4[3][iPosition]	:=	iTempValue;<br/>
									<br/>		120..124:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 119;<br/>					arrScenarioConfiguration_L20_4[4][iPosition]	:=	iTempValue;<br/>
									<br/>		125..129:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 124;<br/>					arrScenarioConfiguration_L20_4[5][iPosition]	:=	iTempValue;<br/>
									<br/>		130..134:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 129;<br/>					arrScenarioConfiguration_L20_4[6][iPosition]	:=	iTempValue;<br/>
									<br/>		135..139:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 134;<br/>					arrScenarioConfiguration_L20_4[7][iPosition]	:=	iTempValue;<br/>
									<br/>		140..144:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 139;<br/>					arrScenarioConfiguration_L20_4[8][iPosition]	:=	iTempValue;<br/>
									<br/>		145..149:	strTempValue	:=	Delete(strLineData,19,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 144;<br/>					arrScenarioConfiguration_L20_4[9][iPosition]	:=	iTempValue;<br/>
									<br/>		150..154:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 149;<br/>					arrScenarioConfiguration_L20_4[10][iPosition]	:=	iTempValue;<br/>
									<br/>		155..159:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 154;<br/>					arrScenarioConfiguration_L20_4[11][iPosition]	:=	iTempValue;<br/>
									<br/>		160..164:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 159;<br/>					arrScenarioConfiguration_L20_4[12][iPosition]	:=	iTempValue;<br/>
									<br/>		165..169:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 164;<br/>					arrScenarioConfiguration_L20_4[13][iPosition]	:=	iTempValue;<br/>
									<br/>		170..174:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 169;<br/>					arrScenarioConfiguration_L20_4[14][iPosition]	:=	iTempValue;<br/>
									<br/>		175..179:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 174;<br/>					arrScenarioConfiguration_L20_4[15][iPosition]	:=	iTempValue;<br/>
									<br/>		180..184:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 179;<br/>					arrScenarioConfiguration_L20_4[16][iPosition]	:=	iTempValue;<br/>
									<br/>		185..189:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 184;<br/>					arrScenarioConfiguration_L20_4[17][iPosition]	:=	iTempValue;<br/>
									<br/>		190..194:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 189;<br/>					arrScenarioConfiguration_L20_4[18][iPosition]	:=	iTempValue;<br/>
									<br/>		195..199:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 194;<br/>					arrScenarioConfiguration_L20_4[19][iPosition]	:=	iTempValue;<br/>
									<br/>		200..204:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 199;<br/>					arrScenarioConfiguration_L20_4[20][iPosition]	:=	iTempValue;<br/>
									<br/>		205..209:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 204;<br/>					arrScenarioConfiguration_L20_4[21][iPosition]	:=	iTempValue;<br/>
									<br/>		210..214:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 209;<br/>					arrScenarioConfiguration_L20_4[22][iPosition]	:=	iTempValue;<br/>
									<br/>		215..219:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 214;<br/>					arrScenarioConfiguration_L20_4[23][iPosition]	:=	iTempValue;<br/>
									<br/>		220..224:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 219;<br/>					arrScenarioConfiguration_L20_4[24][iPosition]	:=	iTempValue;<br/>
									<br/>		225..229:	strTempValue	:=	Delete(strLineData,20,1);<br/>					iTempValue		:=	String_to_Int(strTempValue);<br/>					iPosition		:=	iLine - 224;<br/>					arrScenarioConfiguration_L20_4[25][iPosition]	:=	iTempValue; *)<br/>		Else<br/>			xAlarm	:=	True;<br/>			strDiag	:=	'Error: Invalid Threshold 4 configuration file format';<br/>		End_Case;<br/>
									<br/>		udtActThresholdConfig4		:=	udtLevelConfiguration_L20_4;<br/>		arrActScenarioConfig_L20_4	:=	arrScenarioConfiguration_L20_4;<br/>
									<br/>		xLineReady			:=	False;<br/>		iReadConfiguration	:=	0;<br/>End_Case;<br/>
									<br/>TON_Delay_Write(IN	:=	iWriteLumgateConfig = 6,PT	:=	T#2s);<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="CompareConfig">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* FB_FileHandling / CompareConfig *)<br/>(* Compare actual configuration with the last imported or saved configuration *)<br/>TON_CompareDelay(IN:=(iOldCompare = iCompare),PT:=t#1s); (* Delay between checks to reduce cpu load *)<br/>iOldCompare	:=	iCompare;<br/>
									<br/>If (iWriteLumgateConfig = 0) then<br/>Case iCompare of<br/>	0:	(* Waiting for delay time and compleating reading process *)<br/>		If TON_CompareDelay.Q and not xReadThresholdConfig4 then<br/>			iCompare	:=	1;<br/>		End_if;<br/>
									<br/>	1:	(* Network Parameter *)<br/>		If udtNetworkConfiguration.iMode = udtActNetworkConfiguration.iMode	(* Operation mode. Stand allone, TCS PN, ... *)<br/>		and arrActIP_Address[1] = arrIP_Address[1]<br/>		and arrActSubnetMask[1] = arrSubnetMask[1]<br/>		and arrActStdGateway[1] = arrStdGateway[1]<br/>		and arrActIP_Address[2] = arrIP_Address[2]<br/>		and arrActSubnetMask[2] = arrSubnetMask[2]<br/>		and arrActStdGateway[2] = arrStdGateway[2]<br/>		and arrActIP_Address[3] = arrIP_Address[3]<br/>		and arrActSubnetMask[3] = arrSubnetMask[3]<br/>		and arrActStdGateway[3] = arrStdGateway[3]<br/>		and arrActIP_Address[4] = arrIP_Address[4]<br/>		and arrActSubnetMask[4] = arrSubnetMask[4]<br/>		and arrActStdGateway[4] = arrStdGateway[4]<br/>		and eq_string(udtNetworkConfiguration.strDNS,udtActNetworkConfiguration.strDNS)	(* No function at the moment *)<br/>		and eq_string(udtNetworkConfiguration.strIPModbus,udtActNetworkConfiguration.strIPModbus) then<br/>			xChangedNetConfig	:=	False;<br/>		Else<br/>			xChangedNetConfig	:=	True;<br/>		End_if;<br/>		iCompare	:=	2;<br/>	<br/>	2:	(* L20 Configuration *)<br/>		If udtL20Config.iBackup_1_2_3_4_Limit = udtActL20Config.iBackup_1_2_3_4_Limit<br/>		and udtL20Config.iBackup_2_3_4_1_Limit = udtActL20Config.iBackup_2_3_4_1_Limit<br/>		and udtL20Config.iBackup_3_4_1_2_Limit = udtActL20Config.iBackup_3_4_1_2_Limit<br/>		and udtL20Config.iBackup_4_1_2_3_Limit = udtActL20Config.iBackup_4_1_2_3_Limit<br/>		and udtL20Config.rMaxCd1 = udtActL20Config.rMaxCd1<br/>		and udtL20Config.rMaxCd2 = udtActL20Config.rMaxCd2<br/>		and udtL20Config.rMaxCd3 = udtActL20Config.rMaxCd3<br/>		and udtL20Config.rMaxCd4 = udtActL20Config.rMaxCd4<br/>		and arr_Inputs_L20[1].xActive = arrActL20Inputs[1].xActive<br/>		and arr_Inputs_L20[2].xActive = arrActL20Inputs[2].xActive<br/>		and arr_Inputs_L20[3].xActive = arrActL20Inputs[3].xActive<br/>		and arr_Inputs_L20[4].xActive = arrActL20Inputs[4].xActive then<br/>			xChangedL20Config	:=	False;<br/>		Else<br/>			xChangedL20Config	:=	True;<br/>		End_if;<br/>		iCompare	:=	3;<br/>
									<br/>	3:	(* Threshold 1 *)<br/>		xChangedThreshold1	:=	False;<br/>		If  udtLevelConfiguration_L20_1.iDelay = udtActThresholdConfig1.iDelay			(* \ *)<br/>		and udtLevelConfiguration_L20_1.iInputValue = udtActThresholdConfig1.iInputValue(*  }Write and compare this values only with the first threshold configuration file *)<br/>	(*	and udtLevelConfiguration_L20_1.xActive = udtActThresholdConfig1.xActive		(* / *)<br/>		(*<br/>		Change threshold configuration during the process is allowed...<br/>		...the active configurations are not part of the configuration files...<br/>
									<br/>		and udtLevelConfiguration_L20_1.xActiveConfig1 = udtActThresholdConfig1.xActiveConfig1<br/>		and udtLevelConfiguration_L20_1.xActiveConfig2 = udtActThresholdConfig1.xActiveConfig2<br/>		and udtLevelConfiguration_L20_1.xActiveConfig3 = udtActThresholdConfig1.xActiveConfig3<br/>		and udtLevelConfiguration_L20_1.xActiveConfig4 = udtActThresholdConfig1.xActiveConfig4*) then<br/>			For iLoop := 1 to 25 do<br/>				If udtLevelConfiguration_L20_1.arrScenarioActive[iLoop] &lt;&gt; udtActThresholdConfig1.arrScenarioActive[iLoop] then<br/>					Exit;		(* Count of scenarios *)<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 26 then<br/>				xChangedThreshold1	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_1.arrScenarioConfig1[iLoop] &lt;&gt; udtActThresholdConfig1.arrScenarioConfig1[iLoop] then<br/>					Exit;		(* Scenario config 1 values *)<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold1	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_1.arrScenarioConfig2[iLoop] &lt;&gt; udtActThresholdConfig1.arrScenarioConfig2[iLoop] then<br/>					Exit;		(* Scenario config 2 values *)<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold1	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_1.arrScenarioConfig3[iLoop] &lt;&gt; udtActThresholdConfig1.arrScenarioConfig3[iLoop] then<br/>					Exit;		(* Scenario config 3 values *)<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold1	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_1.arrScenarioConfig4[iLoop] &lt;&gt; udtActThresholdConfig1.arrScenarioConfig4[iLoop] then<br/>					Exit;		(* Scenario config 4 values *)<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold1	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 25 do<br/>				For iLoop2 := 1 to 5 do<br/>					If arrActScenarioConfig_L20_1[iLoop][iLoop2] &lt;&gt; arrScenarioConfiguration_L20_1[iLoop][iLoop2] then<br/>						Exit;		(* Scene options 1-5 *)<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 6 then<br/>					xChangedThreshold1	:=	True;<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 26 or iLoop2 &lt; 6 then<br/>				xChangedThreshold1	:=	True;<br/>			End_if;<br/>		Else<br/>			xChangedThreshold1	:=	True;<br/>		End_if;<br/>		iCompare	:=	4;<br/>
									<br/>	4:	(* Threshold 2 *)<br/>		xChangedThreshold2	:=	False;<br/>		If (* udtLevelConfiguration_L20_2.iDelay = udtActThresholdConfig2.iDelay<br/>
									<br/>			use only the delay from the first threshold config file<br/>
									<br/>		and *) udtLevelConfiguration_L20_2.iInputValue = udtActThresholdConfig2.iInputValue<br/>	(*	and udtLevelConfiguration_L20_2.xActive = udtActThresholdConfig2.xActive<br/>		and udtLevelConfiguration_L20_2.xActiveConfig1 = udtActThresholdConfig2.xActiveConfig1<br/>		and udtLevelConfiguration_L20_2.xActiveConfig2 = udtActThresholdConfig2.xActiveConfig2<br/>		and udtLevelConfiguration_L20_2.xActiveConfig3 = udtActThresholdConfig2.xActiveConfig3<br/>		and udtLevelConfiguration_L20_2.xActiveConfig4 = udtActThresholdConfig2.xActiveConfig4*) then<br/>			For iLoop := 1 to 25 do<br/>				If udtLevelConfiguration_L20_2.arrScenarioActive[iLoop] &lt;&gt; udtActThresholdConfig2.arrScenarioActive[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 26 then<br/>				xChangedThreshold2	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_2.arrScenarioConfig1[iLoop] &lt;&gt; udtActThresholdConfig2.arrScenarioConfig1[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold2	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_2.arrScenarioConfig2[iLoop] &lt;&gt; udtActThresholdConfig2.arrScenarioConfig2[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold2	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_2.arrScenarioConfig3[iLoop] &lt;&gt; udtActThresholdConfig2.arrScenarioConfig3[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold2	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_2.arrScenarioConfig4[iLoop] &lt;&gt; udtActThresholdConfig2.arrScenarioConfig4[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold2	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 25 do<br/>				For iLoop2 := 1 to 5 do<br/>					If arrActScenarioConfig_L20_2[iLoop][iLoop2] &lt;&gt; arrScenarioConfiguration_L20_2[iLoop][iLoop2] then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 6 then<br/>					xChangedThreshold2	:=	True;<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 26 or iLoop2 &lt; 6 then<br/>				xChangedThreshold2	:=	True;<br/>			End_if;<br/>		Else<br/>			xChangedThreshold2	:=	True;<br/>		End_if;<br/>		iCompare	:=	5;<br/>
									<br/>	5:	(* Threshold 3 *)<br/>		xChangedThreshold3	:=	False;<br/>		If (* udtLevelConfiguration_L20_3.iDelay = udtActThresholdConfig3.iDelay<br/>		and *) udtLevelConfiguration_L20_3.iInputValue = udtActThresholdConfig3.iInputValue<br/>	(*	and udtLevelConfiguration_L20_3.xActive = udtActThresholdConfig3.xActive<br/>		and udtLevelConfiguration_L20_3.xActiveConfig1 = udtActThresholdConfig3.xActiveConfig1<br/>		and udtLevelConfiguration_L20_3.xActiveConfig2 = udtActThresholdConfig3.xActiveConfig2<br/>		and udtLevelConfiguration_L20_3.xActiveConfig3 = udtActThresholdConfig3.xActiveConfig3<br/>		and udtLevelConfiguration_L20_3.xActiveConfig4 = udtActThresholdConfig3.xActiveConfig4*) then<br/>			For iLoop := 1 to 25 do<br/>				If udtLevelConfiguration_L20_3.arrScenarioActive[iLoop] &lt;&gt; udtActThresholdConfig3.arrScenarioActive[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 26 then<br/>				xChangedThreshold3	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_3.arrScenarioConfig1[iLoop] &lt;&gt; udtActThresholdConfig3.arrScenarioConfig1[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold3	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_3.arrScenarioConfig2[iLoop] &lt;&gt; udtActThresholdConfig3.arrScenarioConfig2[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold3	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_3.arrScenarioConfig3[iLoop] &lt;&gt; udtActThresholdConfig3.arrScenarioConfig3[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold3	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_3.arrScenarioConfig4[iLoop] &lt;&gt; udtActThresholdConfig3.arrScenarioConfig4[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold3	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 25 do<br/>				For iLoop2 := 1 to 5 do<br/>					If arrActScenarioConfig_L20_3[iLoop][iLoop2] &lt;&gt; arrScenarioConfiguration_L20_3[iLoop][iLoop2] then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 6 then<br/>					xChangedThreshold3	:=	True;<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 26 or iLoop2 &lt; 6 then<br/>				xChangedThreshold3	:=	True;<br/>			End_if;<br/>		Else<br/>			xChangedThreshold3	:=	True;<br/>		End_if;<br/>		iCompare	:=	6;<br/>
									<br/>	6:	(* Threshold 4 *)<br/>		xChangedThreshold4	:=	False;<br/>		If (* udtLevelConfiguration_L20_4.iDelay = udtActThresholdConfig4.iDelay<br/>		and *) udtLevelConfiguration_L20_4.iInputValue = udtActThresholdConfig4.iInputValue<br/>	(*	and udtLevelConfiguration_L20_4.xActive = udtActThresholdConfig4.xActive<br/>		and udtLevelConfiguration_L20_4.xActiveConfig1 = udtActThresholdConfig4.xActiveConfig1<br/>		and udtLevelConfiguration_L20_4.xActiveConfig2 = udtActThresholdConfig4.xActiveConfig2<br/>		and udtLevelConfiguration_L20_4.xActiveConfig3 = udtActThresholdConfig4.xActiveConfig3<br/>		and udtLevelConfiguration_L20_4.xActiveConfig4 = udtActThresholdConfig4.xActiveConfig4*) then<br/>			For iLoop := 1 to 25 do<br/>				If udtLevelConfiguration_L20_4.arrScenarioActive[iLoop] &lt;&gt; udtActThresholdConfig4.arrScenarioActive[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 26 then<br/>				xChangedThreshold4	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_4.arrScenarioConfig1[iLoop] &lt;&gt; udtActThresholdConfig4.arrScenarioConfig1[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold4	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_4.arrScenarioConfig2[iLoop] &lt;&gt; udtActThresholdConfig4.arrScenarioConfig2[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold4	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_4.arrScenarioConfig3[iLoop] &lt;&gt; udtActThresholdConfig4.arrScenarioConfig3[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold4	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 24 do<br/>				If udtLevelConfiguration_L20_4.arrScenarioConfig4[iLoop] &lt;&gt; udtActThresholdConfig4.arrScenarioConfig4[iLoop] then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 25 then<br/>				xChangedThreshold4	:=	True;<br/>			End_if;<br/>			For iLoop := 1 to 25 do<br/>				For iLoop2 := 1 to 5 do<br/>					If arrActScenarioConfig_L20_4[iLoop][iLoop2] &lt;&gt; arrScenarioConfiguration_L20_4[iLoop][iLoop2] then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 6 then<br/>					xChangedThreshold4	:=	True;<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop &lt; 26 or iLoop2 &lt; 6 then<br/>				xChangedThreshold4	:=	True;<br/>			End_if;<br/>		Else<br/>			xChangedThreshold4	:=	True;<br/>		End_if;<br/>		iCompare	:=	7;<br/>
									<br/>	7:	(* Lumgates *)<br/>		xChangedLumgate1	:=	False;<br/>		For iLoop := 1 to 60 do	(* Splitting compare Lumgates in to a couple of steps *)<br/>			If eq_string(arrLumgates[iLoop].strDescription,arrLumgateConfig[iLoop].strDescription)<br/>			and not xTakeActualConfig<br/>			and arrLumgates[iLoop].xRelay1_NC = arrLumgateConfig[iLoop].xRelay1_NC<br/>			and arrLumgates[iLoop].xRelay2_NC = arrLumgateConfig[iLoop].xRelay2_NC<br/>			and arrLumgates[iLoop].xFailsaveRelay1 = arrLumgateConfig[iLoop].xFailsaveRelay1<br/>			and arrLumgates[iLoop].xFailsaveRelay2 = arrLumgateConfig[iLoop].xFailsaveRelay2<br/>			and arrLumgates[iLoop].xFailMode = arrLumgateConfig[iLoop].xFailMode<br/>			and arrLumgates[iLoop].iOutputLevelFailsave = arrLumgateConfig[iLoop].iOutputLevelFailsave<br/>			and arrLumgates[iLoop].udtCloLed.rPercentage = arrLumgateConfig[iLoop].udtCloLed.rPercentage<br/>			and arrLumgates[iLoop].udtCloLed.udiHours = arrLumgateConfig[iLoop].udtCloLed.udiHours<br/>			and arrLumgates[iLoop].udtCloMaintenance.rPercentage = arrLumgateConfig[iLoop].udtCloMaintenance.rPercentage<br/>			and arrLumgates[iLoop].udtCloMaintenance.udiHours = arrLumgateConfig[iLoop].udtCloMaintenance.udiHours<br/>			and arrLumgates[iLoop].udtCurrentCheck.rPercentageError = arrLumgateConfig[iLoop].udtCurrentCheck.rPercentageError<br/>			and arrLumgates[iLoop].udtCurrentCheck.rPercentageWarning = arrLumgateConfig[iLoop].udtCurrentCheck.rPercentageWarning then<br/>				For iLoop2 := 1 to 50 do<br/>					If arrLumgates[iLoop].arrDimmingScene[iLoop2].iValue &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].iValue<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xUsed &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xUsed<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xRelay1 &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xRelay1<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xRelay2 &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xRelay2 then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 51 then<br/>					xChangedLumgate1	:=	True;<br/>					iCompare		:=	0;<br/>				End_if;<br/>
									<br/>				For iLoop2 := 1 to 15 do<br/>					If arrLumgates[iLoop].arrSpecialScene[iLoop2].iValue &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].iValue<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xUsed &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xUsed<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay1 &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xRelay1<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay2 &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xRelay2 then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 16 then<br/>					xChangedLumgate1	:=	True;<br/>					iCompare		:=	0;<br/>				End_if;<br/>			Elsif not arrLumgates[iLoop].xAvailable then<br/>				iLoop	:=	iLoop;<br/>			Else<br/>				Exit;<br/>			End_if;<br/>		End_for;<br/>		If iLoop &lt; 61 then<br/>			xChangedLumgate1	:=	True;<br/>			iCompare		:=	0;<br/>		Else<br/>			iCompare		:=	8;<br/>		End_if;<br/>
									<br/>	8:	(* Lumgates *)<br/>		xChangedLumgate2	:=	False;<br/>		For iLoop := 61 to 120 do<br/>			If eq_string(arrLumgates[iLoop].strDescription,arrLumgateConfig[iLoop].strDescription)<br/>			and arrLumgates[iLoop].xRelay1_NC = arrLumgateConfig[iLoop].xRelay1_NC<br/>			and arrLumgates[iLoop].xRelay2_NC = arrLumgateConfig[iLoop].xRelay2_NC<br/>			and arrLumgates[iLoop].xFailsaveRelay1 = arrLumgateConfig[iLoop].xFailsaveRelay1<br/>			and arrLumgates[iLoop].xFailsaveRelay2 = arrLumgateConfig[iLoop].xFailsaveRelay2<br/>			and arrLumgates[iLoop].xFailMode = arrLumgateConfig[iLoop].xFailMode<br/>			and arrLumgates[iLoop].iOutputLevelFailsave = arrLumgateConfig[iLoop].iOutputLevelFailsave<br/>			and arrLumgates[iLoop].udtCloLed.rPercentage = arrLumgateConfig[iLoop].udtCloLed.rPercentage<br/>			and arrLumgates[iLoop].udtCloLed.udiHours = arrLumgateConfig[iLoop].udtCloLed.udiHours<br/>			and arrLumgates[iLoop].udtCloMaintenance.rPercentage = arrLumgateConfig[iLoop].udtCloMaintenance.rPercentage<br/>			and arrLumgates[iLoop].udtCloMaintenance.udiHours = arrLumgateConfig[iLoop].udtCloMaintenance.udiHours<br/>			and arrLumgates[iLoop].udtCurrentCheck.rPercentageError = arrLumgateConfig[iLoop].udtCurrentCheck.rPercentageError<br/>			and arrLumgates[iLoop].udtCurrentCheck.rPercentageWarning = arrLumgateConfig[iLoop].udtCurrentCheck.rPercentageWarning then<br/>				For iLoop2 := 1 to 50 do<br/>					If arrLumgates[iLoop].arrDimmingScene[iLoop2].iValue &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].iValue<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xUsed &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xUsed<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xRelay1 &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xRelay1<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xRelay2 &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xRelay2 then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 51 then<br/>					xChangedLumgate2	:=	True;<br/>					iCompare		:=	0;<br/>				End_if;<br/>
									<br/>				For iLoop2 := 1 to 15 do<br/>					If arrLumgates[iLoop].arrSpecialScene[iLoop2].iValue &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].iValue<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xUsed &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xUsed<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay1 &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xRelay1<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay2 &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xRelay2 then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 16 then<br/>					xChangedLumgate2	:=	True;<br/>					iCompare		:=	0;<br/>				End_if;<br/>			Elsif not arrLumgates[iLoop].xAvailable then<br/>				iLoop	:=	iLoop;<br/>			Else<br/>				Exit;<br/>			End_if;<br/>		End_for;<br/>		If iLoop &lt; 121 then<br/>			xChangedLumgate2	:=	True;<br/>			iCompare		:=	0;<br/>		Else<br/>			iCompare		:=	9;<br/>		End_if;<br/>
									<br/>	9:	(* Lumgates *)<br/>		xChangedLumgate3	:=	False;<br/>		For iLoop := 121 to 180 do<br/>			If eq_string(arrLumgates[iLoop].strDescription,arrLumgateConfig[iLoop].strDescription)<br/>			and arrLumgates[iLoop].xRelay1_NC = arrLumgateConfig[iLoop].xRelay1_NC<br/>			and arrLumgates[iLoop].xRelay2_NC = arrLumgateConfig[iLoop].xRelay2_NC<br/>			and arrLumgates[iLoop].xFailsaveRelay1 = arrLumgateConfig[iLoop].xFailsaveRelay1<br/>			and arrLumgates[iLoop].xFailsaveRelay2 = arrLumgateConfig[iLoop].xFailsaveRelay2<br/>			and arrLumgates[iLoop].xFailMode = arrLumgateConfig[iLoop].xFailMode<br/>			and arrLumgates[iLoop].iOutputLevelFailsave = arrLumgateConfig[iLoop].iOutputLevelFailsave<br/>			and arrLumgates[iLoop].udtCloLed.rPercentage = arrLumgateConfig[iLoop].udtCloLed.rPercentage<br/>			and arrLumgates[iLoop].udtCloLed.udiHours = arrLumgateConfig[iLoop].udtCloLed.udiHours<br/>			and arrLumgates[iLoop].udtCloMaintenance.rPercentage = arrLumgateConfig[iLoop].udtCloMaintenance.rPercentage<br/>			and arrLumgates[iLoop].udtCloMaintenance.udiHours = arrLumgateConfig[iLoop].udtCloMaintenance.udiHours<br/>			and arrLumgates[iLoop].udtCurrentCheck.rPercentageError = arrLumgateConfig[iLoop].udtCurrentCheck.rPercentageError<br/>			and arrLumgates[iLoop].udtCurrentCheck.rPercentageWarning = arrLumgateConfig[iLoop].udtCurrentCheck.rPercentageWarning then<br/>				For iLoop2 := 1 to 50 do<br/>					If arrLumgates[iLoop].arrDimmingScene[iLoop2].iValue &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].iValue<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xUsed &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xUsed<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xRelay1 &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xRelay1<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xRelay2 &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xRelay2 then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 51 then<br/>					xChangedLumgate3	:=	True;<br/>					iCompare		:=	0;<br/>				End_if;<br/>
									<br/>				For iLoop2 := 1 to 15 do<br/>					If arrLumgates[iLoop].arrSpecialScene[iLoop2].iValue &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].iValue<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xUsed &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xUsed<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay1 &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xRelay1<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay2 &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xRelay2 then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 16 then<br/>					xChangedLumgate3	:=	True;<br/>					iCompare		:=	0;<br/>				End_if;<br/>			Elsif not arrLumgates[iLoop].xAvailable then<br/>				iLoop	:=	iLoop;<br/>			Else<br/>				Exit;<br/>			End_if;<br/>		End_for;<br/>		If iLoop &lt; 181 then<br/>			xChangedLumgate3	:=	True;<br/>			iCompare		:=	0;<br/>		Else<br/>			iCompare		:=	10;<br/>		End_if;<br/>
									<br/>	10:	(* Lumgates *)<br/>		xChangedLumgate4	:=	False;<br/>		For iLoop := 181 to 240 do<br/>			If eq_string(arrLumgates[iLoop].strDescription,arrLumgateConfig[iLoop].strDescription)<br/>			and arrLumgates[iLoop].xRelay1_NC = arrLumgateConfig[iLoop].xRelay1_NC<br/>			and arrLumgates[iLoop].xRelay2_NC = arrLumgateConfig[iLoop].xRelay2_NC<br/>			and arrLumgates[iLoop].xFailsaveRelay1 = arrLumgateConfig[iLoop].xFailsaveRelay1<br/>			and arrLumgates[iLoop].xFailsaveRelay2 = arrLumgateConfig[iLoop].xFailsaveRelay2<br/>			and arrLumgates[iLoop].xFailMode = arrLumgateConfig[iLoop].xFailMode<br/>			and arrLumgates[iLoop].iOutputLevelFailsave = arrLumgateConfig[iLoop].iOutputLevelFailsave<br/>			and arrLumgates[iLoop].udtCloLed.rPercentage = arrLumgateConfig[iLoop].udtCloLed.rPercentage<br/>			and arrLumgates[iLoop].udtCloLed.udiHours = arrLumgateConfig[iLoop].udtCloLed.udiHours<br/>			and arrLumgates[iLoop].udtCloMaintenance.rPercentage = arrLumgateConfig[iLoop].udtCloMaintenance.rPercentage<br/>			and arrLumgates[iLoop].udtCloMaintenance.udiHours = arrLumgateConfig[iLoop].udtCloMaintenance.udiHours<br/>			and arrLumgates[iLoop].udtCurrentCheck.rPercentageError = arrLumgateConfig[iLoop].udtCurrentCheck.rPercentageError<br/>			and arrLumgates[iLoop].udtCurrentCheck.rPercentageWarning = arrLumgateConfig[iLoop].udtCurrentCheck.rPercentageWarning then<br/>				For iLoop2 := 1 to 50 do<br/>					If arrLumgates[iLoop].arrDimmingScene[iLoop2].iValue &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].iValue<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xUsed &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xUsed<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xRelay1 &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xRelay1<br/>					or arrLumgates[iLoop].arrDimmingScene[iLoop2].xRelay2 &lt;&gt; arrLumgateConfig[iLoop].arrDimmingScene[iLoop2].xRelay2 then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 51 then<br/>					xChangedLumgate4	:=	True;<br/>					iCompare		:=	0;<br/>				End_if;<br/>
									<br/>				For iLoop2 := 1 to 15 do<br/>					If arrLumgates[iLoop].arrSpecialScene[iLoop2].iValue &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].iValue<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xUsed &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xUsed<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay1 &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xRelay1<br/>					or arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay2 &lt;&gt; arrLumgateConfig[iLoop].arrSpecialScene[iLoop2].xRelay2 then<br/>						Exit;<br/>					End_if;<br/>				End_for;<br/>				If iLoop2 &lt; 16 then<br/>					xChangedLumgate4	:=	True;<br/>					iCompare		:=	0;<br/>				End_if;<br/>			Elsif not arrLumgates[iLoop].xAvailable then<br/>				iLoop	:=	iLoop;<br/>			Else<br/>				Exit;<br/>			End_if;<br/>		End_for;<br/>		If iLoop &lt; 241 then<br/>			xChangedLumgate4	:=	True;<br/>		End_if;<br/>		iCompare	:=	0;<br/>End_Case;<br/>
									<br/>(* Create Errors and diagnostic messages *)<br/>R_TRIG_ChangedLumgate(CLK	:=	xChangedLumgate);<br/>R_TRIG_ChangedThreshold1(CLK:=	xChangedThreshold1);<br/>R_TRIG_ChangedThreshold2(CLK:=	xChangedThreshold2);<br/>R_TRIG_ChangedThreshold3(CLK:=	xChangedThreshold3);<br/>R_TRIG_ChangedThreshold4(CLK:=	xChangedThreshold4);<br/>R_TRIG_ChangedNet(CLK		:=	xChangedNetConfig);<br/>R_TRIG_ChangedL20(CLK		:=	xChangedL20Config);<br/>If R_TRIG_ChangedLumgate.Q then<br/>	strDiag			:=	'Lumgate configuration changed';<br/>Elsif R_TRIG_ChangedThreshold1.Q then<br/>	strDiag			:=	'Threshold 1 configuration changed';<br/>Elsif R_TRIG_ChangedThreshold2.Q then<br/>	strDiag			:=	'Threshold 2 configuration changed';<br/>Elsif R_TRIG_ChangedThreshold3.Q then<br/>	strDiag			:=	'Threshold 3 configuration changed';<br/>Elsif R_TRIG_ChangedThreshold4.Q then<br/>	strDiag			:=	'Threshold 4 configuration changed';<br/>Elsif R_TRIG_ChangedNet.Q then<br/>	strDiag			:=	'Network configuration changed';<br/>Elsif R_TRIG_ChangedL20.Q then<br/>	strDiag			:=	'Sensor configuration changed';<br/>End_if;<br/>
									<br/>xChangedLumgate	:=	xChangedLumgate1 or	xChangedLumgate2 or	xChangedLumgate3 or	xChangedLumgate4;<br/>If xChangedLumgate or xChangedThreshold1 or xChangedThreshold2 or xChangedThreshold3 or xChangedThreshold4<br/>or xChangedNetConfig or xChangedL20Config or xCommissioning then<br/>	xPreAlarm	:=	True;<br/>Else<br/>	xPreAlarm	:=	False;<br/>End_if;<br/>Else<br/>	xChangedLumgate		:=	False;<br/>	xChangedLumgate1	:=	False;<br/>	xChangedLumgate2	:=	False;<br/>	xChangedLumgate3	:=	False;<br/>	xChangedLumgate4	:=	False;<br/>	xChangedThreshold1	:=	False;<br/>	xChangedThreshold2	:=	False;<br/>	xChangedThreshold3	:=	False;<br/>	xChangedThreshold4	:=	False;<br/>	xChangedNetConfig	:=	False;<br/>	xChangedL20Config	:=	False;<br/>End_if;<br/>
									<br/>
									<br/>FB_HelpSetIP_01_1(<br/>xActivate				:=	true,<br/>xTakeIP					:=	xExecuteIP_Translate,<br/>arrIP_Address			:=	arrIP_Address,<br/>arrSubnetMask			:=	arrSubnetMask,<br/>arrStdGateway			:=	arrStdGateway,<br/>udtNetworkParameter		:=	udtNetworkConfiguration);<br/>
									<br/>xExecuteIP_Translate	:=	FB_HelpSetIP_01_1.xTakeIP;<br/>arrIP_Address			:=	FB_HelpSetIP_01_1.arrIP_Address;<br/>arrSubnetMask			:=	FB_HelpSetIP_01_1.arrSubnetMask;<br/>arrStdGateway			:=	FB_HelpSetIP_01_1.arrStdGateway;<br/>udtNetworkConfiguration	:=	FB_HelpSetIP_01_1.udtNetworkParameter;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="WriteFile">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* FB_FileHandling / WriteFile *)<br/>If udtConfigFiles.xLumgate and iWriteLumgateConfig = 0 then (* wait for compleating another writting process *)<br/>	udtConfigFiles.xLumgate			:=	False;	(* Reset write trigger *)<br/>	iConfigType						:=	0;		(* Lumgate *)<br/>	xWriteFile						:=	False;<br/>	xRequestWritingLumgateConfig	:=	True;<br/>	xWriteFormatNumber				:=	True;<br/>Elsif udtConfigFiles.xSensor and iWriteLumgateConfig = 0 then<br/>	udtConfigFiles.xSensor			:=	False;<br/>	iConfigType						:=	6;		(* L20 *)<br/>	xWriteFile						:=	False;<br/>	xRequestWritingLumgateConfig	:=	True;<br/>Elsif udtConfigFiles.xThreshold1 and iWriteLumgateConfig = 0 then<br/>	udtConfigFiles.xThreshold1		:=	False;<br/>	iConfigType						:=	1;		(* Threshold 1 *)<br/>	xWriteFile						:=	False;<br/>	xRequestWritingLumgateConfig	:=	True;<br/>Elsif udtConfigFiles.xThreshold2 and iWriteLumgateConfig = 0 then<br/>	udtConfigFiles.xThreshold2		:=	False;<br/>	iConfigType						:=	2;		(* Threshold 2 *)<br/>	xWriteFile						:=	False;<br/>	xRequestWritingLumgateConfig	:=	True;<br/>Elsif udtConfigFiles.xThreshold3 and iWriteLumgateConfig = 0 then<br/>	udtConfigFiles.xThreshold3		:=	False;<br/>	iConfigType						:=	3;		(* Threshold 3 *)<br/>	xWriteFile						:=	False;<br/>	xRequestWritingLumgateConfig	:=	True;<br/>Elsif udtConfigFiles.xThreshold4 and iWriteLumgateConfig = 0 then<br/>	udtConfigFiles.xThreshold4		:=	False;<br/>	iConfigType						:=	4;		(* Threshold 4 *)<br/>	xWriteFile						:=	False;<br/>	xRequestWritingLumgateConfig	:=	True;<br/>Elsif udtConfigFiles.xNetwork and iWriteLumgateConfig = 0 then<br/>	udtConfigFiles.xNetwork			:=	False;<br/>	iConfigType						:=	5;		(* Network *)<br/>	xWriteFile						:=	False;<br/>	xRequestWritingLumgateConfig	:=	True;<br/>End_If;<br/>
									<br/>Case iWriteLumgateConfig of<br/>
									<br/>	0:	(* Wait for write trigger *)<br/>		If xRequestWritingLumgateConfig then<br/>			iTempPointer		:=	0;	(* e.g. Lumgate no. *)<br/>			iWriteLumgateConfig	:=	100;<br/>			iTable				:=	0;	<br/>		End_If;<br/>
									<br/>	100:	(* Open / Create File *)<br/>		 If not udtFileHandler.xRequest then<br/>				udtFileHandler.xRequest			:=	True;<br/>				udtFileHandler.iTasktype		:=	2;		(* Remove old file	*)<br/>				iWriteLumgateConfig				:=	101;	(* Name of the file *)<br/>															(*		|			*)<br/>		 	If iConfigType = 0 then 						(*		V			*)<br/>				udtFileHandler.strFileNameTarget	:=	'ATS_Lumgate_Configuration_1.csv';<br/>				strDiag								:=	'Write file "ATS_Lumgate_Configuration_1.csv"';<br/>			Elsif iConfigType = 1 then<br/>				udtFileHandler.strFileNameTarget	:=	'ATS_Threshold_1_Configuration_1.csv';<br/>				strDiag								:=	'Write file "ATS_Threshold_1_Configuration_1.csv"';<br/>			Elsif iConfigType = 2 then<br/>				udtFileHandler.strFileNameTarget	:=	'ATS_Threshold_2_Configuration_1.csv';<br/>				strDiag								:=	'Write file "ATS_Threshold_2_Configuration_1.csv"';<br/>			Elsif iConfigType = 3 then<br/>				udtFileHandler.strFileNameTarget	:=	'ATS_Threshold_3_Configuration_1.csv';<br/>				strDiag								:=	'Write file "ATS_Threshold_3_Configuration_1.csv"';<br/>			Elsif iConfigType = 4 then<br/>				udtFileHandler.strFileNameTarget	:=	'ATS_Threshold_4_Configuration_1.csv';<br/>				strDiag								:=	'Write file "ATS_Threshold_4_Configuration_1.csv"';<br/>			Elsif iConfigType = 5 then<br/>				udtFileHandler.strFileNameTarget	:=	'ATS_Network_Configuration_1.csv';<br/>				strDiag								:=	'Write file "ATS_Network_Configuration_1.csv"';<br/>			Elsif iConfigType = 6 then<br/>				udtFileHandler.strFileNameTarget	:=	'ATS_L20_Configuration_1.csv';<br/>				strDiag								:=	'Write file "ATS_L20_Configuration_1.csv"';<br/>			End_if;<br/>		End_If;<br/>
									<br/>	101:	(* Select which data should be written *)<br/>		 If not udtFileHandler.xRequest then<br/>		 	If iConfigType = 0 then<br/>				iWriteLumgateConfig	:=	1;			(* Lumgate Config File *)<br/>			Elsif iConfigType = 1 then<br/>				iWriteLumgateConfig	:=	1001;		(* Threshold 1 Config File *)<br/>			Elsif iConfigType = 2 then<br/>				iWriteLumgateConfig	:=	2001; 		(* Threshold 2 Config File *)<br/>			Elsif iConfigType = 3 then<br/>				iWriteLumgateConfig	:=	3001;		(* Threshold 3 Config File *)<br/>			Elsif iConfigType = 4 then<br/>				iWriteLumgateConfig	:=	4001;		(* Threshold 4 Config File *)<br/>			Elsif iConfigType = 5 then<br/>				iWriteLumgateConfig	:=	5002;		(* Network Config File *)<br/>			Elsif iConfigType = 6 then<br/>				iWriteLumgateConfig	:=	6002;		(* L20 Config File *)<br/>			End_if;<br/>		End_If;<br/>		<br/>	1:		(* Lumgate counter *)<br/>		iTempPointer			:=	iTempPointer + 1;<br/>		If arrLumgates[iTempPointer].xInConfigFile and not xTakeActualConfig then	(* Write data of all configured Lumgates *)<br/>			iWriteLumgateConfig	:=	2;<br/>		Elsif arrLumgates[iTempPointer].xAvailable and xTakeActualConfig then		(* Write data of all available Lumgates *)<br/>			iWriteLumgateConfig	:=	2;<br/>			arrSegment[1]	:=	0;		(* Reset expected Lumgate counter *)<br/>			arrSegment[2]	:=	0;<br/>			arrSegment[3]	:=	0;<br/>			arrSegment[4]	:=	0;<br/>			For iLoop := 1 to 240 do	(* Fill expected Lumgate counter *)<br/>				arrLumgates[iLoop].xInConfigFile	:=	False;<br/>				If arrLumgates[iLoop].xAvailable then<br/>					If arrLumgates[iLoop].iModuleLevel = 0 then<br/>						arrSegment[1]	:=	arrSegment[1] + 1;<br/>					Elsif arrLumgates[iLoop].iModuleLevel = 1 then<br/>						arrSegment[2]	:=	arrSegment[2] + 1;<br/>					Elsif arrLumgates[iLoop].iModuleLevel = 2 then<br/>						arrSegment[3]	:=	arrSegment[3] + 1;<br/>					Elsif arrLumgates[iLoop].iModuleLevel = 3 then<br/>						arrSegment[4]	:=	arrSegment[4] + 1;<br/>					End_if;<br/>				End_if;<br/>			End_for;<br/>		Elsif iTempPointer = 240 then<br/>			iWriteLumgateConfig	:=	11;<br/>		Else<br/>			arrLumgates[iTempPointer].iModuleLevel			:=	0;<br/>			arrLumgates[iTempPointer].iModuleNumberGeneral	:=	0;<br/>			arrLumgates[iTempPointer].iModuleNumber			:=	0;<br/>			arrLumgates[iTempPointer].xAvailable			:=	False;<br/>			arrLumgates[iTempPointer].xInConfigFile			:=	False;<br/>		End_If;<br/>	<br/>	1001:	(* Threshold 1 counter *)<br/>		iTempPointer			:=	iTempPointer + 1;<br/>		iWriteLumgateConfig		:=	1002;<br/>
									<br/>	2001:	(* Threshold 2 counter *)<br/>		iTempPointer			:=	iTempPointer + 1;<br/>		iWriteLumgateConfig		:=	2002;<br/>
									<br/>
									<br/>	3001:	(* Threshold 3 counter *)<br/>		iTempPointer			:=	iTempPointer + 1;<br/>		iWriteLumgateConfig		:=	3002;<br/>
									<br/>
									<br/>	4001:	(* Threshold 4 counter *)<br/>		iTempPointer			:=	iTempPointer + 1;<br/>		iWriteLumgateConfig		:=	4002;<br/>
									<br/>
									<br/>	2:	(* Lumgate config file *)<br/>		sModuleLevel	:=	Int_To_String((arrLumgates[iTempPointer].iModuleLevel + 1),'%01d');<br/>		sModuleNumber	:=	Int_To_String(arrLumgates[iTempPointer].iModuleNumber,'%01d');<br/>
									<br/>		(*	V2.01 changes: Include file format EPO-IS-268-917 *)<br/>		If xWriteFormatNumber then<br/>			xWriteFormatNumber	:=	False;<br/>			strTempText			:=	'File format version;2';<br/>			strTempText			:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText			:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText			:=	concat(strTempText,sModuleLevel);<br/>		Else<br/>			strTempText	:=	sModuleLevel;<br/>		End_if;<br/>
									<br/>		(* Lumgate address X-YYY *)<br/>		strTempText	:=	Concat(strTempText,'-');<br/>		strTempText	:=	Concat(strTempText,sModuleNumber);<br/>		strTempText	:=	Concat(strTempText,';');<br/>		If eq_string(arrLumgates[iTempPointer].strDescription,'') then<br/>			arrLumgates[iTempPointer].strDescription	:=	'no description';<br/>		End_if;<br/>		strTempText	:=	Concat(strTempText,arrLumgates[iTempPointer].strDescription);<br/>		strTempText	:=	Concat(strTempText,';');<br/>
									<br/>		If arrLumgates[iTempPointer].xFailMode then<br/>			strTempText	:=	Concat(strTempText,'1;');<br/>		Else<br/>			strTempText	:=	Concat(strTempText,'0;');<br/>		End_If;<br/>
									<br/>		strTempInfo	:=	Int_To_String(arrLumgates[iTempPointer].iOutputLevelFailsave,'%01d');<br/>		strTempText	:=	Concat(strTempText,strTempInfo);<br/>		strTempText	:=	Concat(strTempText,';');<br/>
									<br/>		(*	V2.01 changes: Include failsafe relay states EPO-IS-268-917 *)<br/>		If arrLumgates[iTempPointer].xFailsaveRelay1 then<br/>			strTempText	:=	Concat(strTempText,'1;');<br/>		Else<br/>			strTempText	:=	Concat(strTempText,'0;');<br/>		End_If;<br/>
									<br/>		If arrLumgates[iTempPointer].xFailsaveRelay2 then<br/>			strTempText	:=	Concat(strTempText,'1;');<br/>		Else<br/>			strTempText	:=	Concat(strTempText,'0;');<br/>		End_If;<br/>
									<br/>		(*	V2.01 changes: Include relay options EPO-IS-268-917 *)<br/>		If arrLumgates[iTempPointer].xRelay1_NC then<br/>			strTempText	:=	Concat(strTempText,'1;');<br/>		Else<br/>			strTempText	:=	Concat(strTempText,'0;');<br/>		End_If;<br/>
									<br/>		If arrLumgates[iTempPointer].xRelay2_NC then<br/>			strTempText	:=	Concat(strTempText,'1;');<br/>		Else<br/>			strTempText	:=	Concat(strTempText,'0;');<br/>		End_If;<br/>
									<br/>		(* CLO LED *)<br/>		If arrLumgates[iTempPointer].udtCloLed.xActive then<br/>			strTempInfo	:=	Udint_To_String(arrLumgates[iTempPointer].udtCloLed.udiHours,'%01u');<br/>			strTempText	:=	Concat(strTempText,strTempInfo);<br/>			strTempText	:=	Concat(strTempText,';');<br/>			strTempInfo	:=	Real_To_String(arrLumgates[iTempPointer].udtCloLed.rPercentage,'%03.1f');<br/>			strTempText	:=	Concat(strTempText,strTempInfo);<br/>			strTempText	:=	Concat(strTempText,';');<br/>		Else<br/>			strTempText	:=	Concat(strTempText,'0;0.0;');<br/>		End_If;<br/>
									<br/>		(* CLO Maintenance *)<br/>		If arrLumgates[iTempPointer].udtCloMaintenance.xActive then<br/>			strTempInfo	:=	Udint_To_String(arrLumgates[iTempPointer].udtCloMaintenance.udiHours,'%01u');<br/>			strTempText	:=	Concat(strTempText,strTempInfo);<br/>			strTempText	:=	Concat(strTempText,';');<br/>			strTempInfo	:=	Real_To_String(arrLumgates[iTempPointer].udtCloMaintenance.rPercentage,'%03.1f');<br/>			strTempText	:=	Concat(strTempText,strTempInfo);<br/>			strTempText	:=	Concat(strTempText,';');<br/>		Else<br/>			strTempText	:=	Concat(strTempText,'0;0.0;');<br/>		End_If;<br/>
									<br/>		(* Current check "Warning" *)<br/>		If arrLumgates[iTempPointer].udtCurrentCheck.xActiveCurrentCheckWarning then<br/>			strTempInfo	:=	Real_To_String(arrLumgates[iTempPointer].udtCurrentCheck.rPercentageWarning,'%03.1f');<br/>			strTempText	:=	Concat(strTempText,strTempInfo);<br/>			strTempText	:=	Concat(strTempText,';');<br/>		Else<br/>			strTempText	:=	Concat(strTempText,'0.0;');<br/>		End_If;<br/>
									<br/>		(* Current check "Error" *)<br/>		If arrLumgates[iTempPointer].udtCurrentCheck.xActiveCurrentCheckError then<br/>			strTempInfo	:=	Real_To_String(arrLumgates[iTempPointer].udtCurrentCheck.rPercentageError,'%03.1f');<br/>			strTempText	:=	Concat(strTempText,strTempInfo);<br/>			strTempText	:=	Concat(strTempText,';');<br/>		Else<br/>			strTempText	:=	Concat(strTempText,'0.0;');<br/>		End_If;<br/>
									<br/>		For iLoop := 1 to 50 do<br/>			If arrLumgates[iTempPointer].arrDimmingScene[iLoop].xUsed then<br/>				strTempInfo	:=	Int_To_String(arrLumgates[iTempPointer].arrDimmingScene[iLoop].iValue,'%01d');<br/>				strTempText	:=	Concat(strTempText,strTempInfo);<br/>
									<br/>				(*	V2.01 changes: Include relay states EPO-IS-268-917 *)<br/>				If arrLumgates[iTempPointer].arrDimmingScene[iLoop].xRelay1 then<br/>					strTempText	:=	Concat(strTempText,';1');<br/>				Else<br/>					strTempText	:=	Concat(strTempText,';0');<br/>				End_If;<br/>				If arrLumgates[iTempPointer].arrDimmingScene[iLoop].xRelay2 then<br/>					strTempText	:=	Concat(strTempText,';1');<br/>				Else<br/>					strTempText	:=	Concat(strTempText,';0');<br/>				End_If;<br/>			Else<br/>				strTempText	:=	Concat(strTempText,'X;X;X');	(* Enter "X" for unused scenes and special scenes *)<br/>			End_If;<br/>						<br/>			If iLoop &lt; 50 then<br/>				strTempText	:=	Concat(strTempText,';');<br/>			Else<br/>				strTempText	:=	Concat(strTempText,'&amp;');	(* Seperator between scenes and special scenes *)<br/>			End_If;<br/>		End_For;<br/>					<br/>		For iLoop := 1 to 15 do<br/>			If arrLumgates[iTempPointer].arrSpecialScene[iLoop].xUsed then<br/>				strTempInfo	:=	Int_To_String(arrLumgates[iTempPointer].arrSpecialScene[iLoop].iValue,'%01d');<br/>				strTempText	:=	Concat(strTempText,strTempInfo);<br/>				<br/>				(*	V2.01 changes: Include relay states EPO-IS-268-917 *)<br/>				If arrLumgates[iTempPointer].arrSpecialScene[iLoop].xRelay1 then<br/>					strTempText	:=	Concat(strTempText,';1');<br/>				Else<br/>					strTempText	:=	Concat(strTempText,';0');<br/>				End_If;<br/>				If arrLumgates[iTempPointer].arrSpecialScene[iLoop].xRelay2 then<br/>					strTempText	:=	Concat(strTempText,';1');<br/>				Else<br/>					strTempText	:=	Concat(strTempText,';0');<br/>				End_If;<br/>			Else<br/>				strTempText	:=	Concat(strTempText,'X;X;X');<br/>			End_If;<br/>					<br/>			If iLoop &lt; 15 then<br/>				strTempText	:=	Concat(strTempText,';');<br/>			End_If;<br/>		End_For;<br/>	<br/>		iWriteLumgateConfig	:=	3;<br/>		iLenght				:=	Len(strTempText);<br/>
									<br/>	1002:	(* Threshold config file 1 *)<br/>		If iTempPointer = 1 then<br/>			strTempText	:=	concat('Name:;',udtProjectDescription.strName);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Description:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strDescription);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Location:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strLocation);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Designer:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strDesigner);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Revision:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strRevision);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Delay:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.iDelay,'%02d'));<br/>			iDelay		:=	udtLevelConfiguration_L20_1.iDelay;<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Sensor Value:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.iInputValue,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			iCounter	:=	0;<br/>			For iLoop := 1 to 25 do<br/>				If udtLevelConfiguration_L20_1.arrScenarioActive[iLoop] then<br/>					iCounter	:=	iCounter + 1;<br/>				End_if;<br/>			End_for;<br/>			strTempText	:=	concat(strTempText,'Active levels:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(iCounter,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		End_if;<br/>		If iTempPointer = 25 then 	(* Scene options *)<br/>			strTempText	:=	int_to_string(iTempPointer,'%02d');<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][5],'%02d'));<br/>		Elsif iTempPointer = 1 then	(* Scene options *)<br/>			strTempText	:=	concat(strTempText,int_to_string(iTempPointer,'%02d'));<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][5],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,';');	(* Thresholds *)<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.arrScenarioConfig1[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.arrScenarioConfig2[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.arrScenarioConfig3[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.arrScenarioConfig4[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		Else						(* Scene options *)<br/>			strTempText	:=	int_to_string(iTempPointer,'%02d');<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_1[iTempPointer][5],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,';');	(* Thresholds *)<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.arrScenarioConfig1[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.arrScenarioConfig2[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.arrScenarioConfig3[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_1.arrScenarioConfig4[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		End_if;<br/>
									<br/>		iWriteLumgateConfig	:=	3;<br/>		iLenght				:=	Len(strTempText);<br/>
									<br/>	2002:	(* Threshold config file 2 *)<br/>		If iTempPointer = 1 then<br/>			strTempText	:=	concat('Name:;',udtProjectDescription.strName);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Description:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strDescription);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Location:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strLocation);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Designer:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strDesigner);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Revision:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strRevision);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Delay:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.iDelay,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Sensor Value:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.iInputValue,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			iCounter	:=	0;<br/>			For iLoop := 1 to 25 do<br/>				If udtLevelConfiguration_L20_2.arrScenarioActive[iLoop] then<br/>					iCounter	:=	iCounter + 1;<br/>				End_if;<br/>			End_for;<br/>			strTempText	:=	concat(strTempText,'Active levels:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(iCounter,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		End_if;<br/>		If iTempPointer = 25 then<br/>			strTempText	:=	int_to_string(iTempPointer,'%02d');<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][5],'%02d'));<br/>		Elsif iTempPointer = 1 then<br/>			strTempText	:=	concat(strTempText,int_to_string(iLoop,'%02d'));<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][5],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.arrScenarioConfig1[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.arrScenarioConfig2[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.arrScenarioConfig3[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.arrScenarioConfig4[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		Else<br/>			strTempText	:=	int_to_string(iTempPointer,'%02d');<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_2[iTempPointer][5],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.arrScenarioConfig1[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.arrScenarioConfig2[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.arrScenarioConfig3[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_2.arrScenarioConfig4[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		End_if;<br/>
									<br/>		iWriteLumgateConfig	:=	3;<br/>		iLenght				:=	Len(strTempText);<br/>
									<br/>	3002:	(* Threshold config file 3 *)<br/>		If iTempPointer = 1 then<br/>			strTempText	:=	concat('Name:;',udtProjectDescription.strName);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Description:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strDescription);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Location:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strLocation);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Designer:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strDesigner);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Revision:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strRevision);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Delay:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.iDelay,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Sensor Value:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.iInputValue,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			iCounter	:=	0;<br/>			For iLoop := 1 to 25 do<br/>				If udtLevelConfiguration_L20_3.arrScenarioActive[iLoop] then<br/>					iCounter	:=	iCounter + 1;<br/>				End_if;<br/>			End_for;<br/>			strTempText	:=	concat(strTempText,'Active levels:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(iCounter,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		End_if;<br/>		If iTempPointer = 25 then<br/>			strTempText	:=	int_to_string(iTempPointer,'%02d');<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][5],'%02d'));<br/>		Elsif iTempPointer = 1 then<br/>			strTempText	:=	concat(strTempText,int_to_string(iTempPointer,'%02d'));<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][5],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.arrScenarioConfig1[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.arrScenarioConfig2[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.arrScenarioConfig3[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.arrScenarioConfig4[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		Else<br/>			strTempText	:=	int_to_string(iTempPointer,'%02d');<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_3[iTempPointer][5],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.arrScenarioConfig1[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.arrScenarioConfig2[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.arrScenarioConfig3[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_3.arrScenarioConfig4[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		End_if;<br/>
									<br/>		iWriteLumgateConfig	:=	3;<br/>		iLenght				:=	Len(strTempText);<br/>
									<br/>	4002:	(* Threshold config file 4 *)<br/>		If iTempPointer = 1 then<br/>			strTempText	:=	concat('Name:;',udtProjectDescription.strName);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Description:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strDescription);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Location:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strLocation);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Designer:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strDesigner);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Revision:;');<br/>			strTempText	:=	concat(strTempText,udtProjectDescription.strRevision);<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Delay:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.iDelay,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,'Sensor Value:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.iInputValue,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			iCounter	:=	0;<br/>			For iLoop := 1 to 25 do<br/>				If udtLevelConfiguration_L20_4.arrScenarioActive[iLoop] then<br/>					iCounter	:=	iCounter + 1;<br/>				End_if;<br/>			End_for;<br/>			strTempText	:=	concat(strTempText,'Active levels:;');<br/>			strTempText	:=	concat(strTempText,int_to_string(iCounter,'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		End_if;<br/>		If iTempPointer = 25 then<br/>			strTempText	:=	int_to_string(iTempPointer,'%02d');<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][5],'%02d'));<br/>		Elsif iTempPointer = 1 then<br/>			strTempText	:=	concat(strTempText,int_to_string(iTempPointer,'%02d'));<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][5],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.arrScenarioConfig1[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.arrScenarioConfig2[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.arrScenarioConfig3[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.arrScenarioConfig4[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		Else<br/>			strTempText	:=	int_to_string(iTempPointer,'%02d');<br/>			strTempText	:=	concat(strTempText,';;;;;');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][1],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][2],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][3],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][4],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(arrScenarioConfiguration_L20_4[iTempPointer][5],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.arrScenarioConfig1[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.arrScenarioConfig2[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.arrScenarioConfig3[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText,';');<br/>			strTempText	:=	concat(strTempText,int_to_string(udtLevelConfiguration_L20_4.arrScenarioConfig4[iTempPointer],'%02d'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>			strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		End_if;<br/>
									<br/>		iWriteLumgateConfig	:=	3;<br/>		iLenght				:=	Len(strTempText);<br/>
									<br/>	5002:	(* Network config *)<br/>		udtNetworkConfiguration.strIP		:=	byte_to_string(arrActIP_Address[1], '%u');<br/>		udtNetworkConfiguration.strIP		:=	concat(udtNetworkConfiguration.strIP,'.');<br/>		udtNetworkConfiguration.strIP		:=	concat(udtNetworkConfiguration.strIP, byte_to_string(arrActIP_Address[2], '%u'));<br/>		udtNetworkConfiguration.strIP		:=	concat(udtNetworkConfiguration.strIP,'.');<br/>		udtNetworkConfiguration.strIP		:=	concat(udtNetworkConfiguration.strIP, byte_to_string(arrActIP_Address[3], '%u'));<br/>		udtNetworkConfiguration.strIP		:=	concat(udtNetworkConfiguration.strIP,'.');<br/>		udtNetworkConfiguration.strIP		:=	concat(udtNetworkConfiguration.strIP, byte_to_string(arrActIP_Address[4], '%u'));<br/>		strTempText							:=	concat('IP:;',	udtNetworkConfiguration.strIP);<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		strTempText							:=	concat(strTempText,'Subnet:;');<br/>		udtNetworkConfiguration.strSubnet	:=	byte_to_string(arrActSubnetMask[1], '%u');<br/>		udtNetworkConfiguration.strSubnet	:=	concat(udtNetworkConfiguration.strSubnet,'.');<br/>		udtNetworkConfiguration.strSubnet	:=	concat(udtNetworkConfiguration.strSubnet, byte_to_string(arrActSubnetMask[2], '%u'));<br/>		udtNetworkConfiguration.strSubnet	:=	concat(udtNetworkConfiguration.strSubnet,'.');<br/>		udtNetworkConfiguration.strSubnet	:=	concat(udtNetworkConfiguration.strSubnet, byte_to_string(arrActSubnetMask[3], '%u'));<br/>		udtNetworkConfiguration.strSubnet	:=	concat(udtNetworkConfiguration.strSubnet,'.');<br/>		udtNetworkConfiguration.strSubnet	:=	concat(udtNetworkConfiguration.strSubnet, byte_to_string(arrActSubnetMask[4], '%u'));<br/>		strTempText							:=	concat(strTempText, udtNetworkConfiguration.strSubnet);<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		strTempText							:=	concat(strTempText,'Gateway:;');<br/>		udtNetworkConfiguration.strGateway	:=	byte_to_string(arrActStdGateway[1], '%u');<br/>		udtNetworkConfiguration.strGateway	:=	concat(udtNetworkConfiguration.strGateway,'.');<br/>		udtNetworkConfiguration.strGateway	:=	concat(udtNetworkConfiguration.strGateway, byte_to_string(arrActStdGateway[2], '%u'));<br/>		udtNetworkConfiguration.strGateway	:=	concat(udtNetworkConfiguration.strGateway,'.');<br/>		udtNetworkConfiguration.strGateway	:=	concat(udtNetworkConfiguration.strGateway, byte_to_string(arrActStdGateway[3], '%u'));<br/>		udtNetworkConfiguration.strGateway	:=	concat(udtNetworkConfiguration.strGateway,'.');<br/>		udtNetworkConfiguration.strGateway	:=	concat(udtNetworkConfiguration.strGateway, byte_to_string(arrActStdGateway[4], '%u'));<br/>		strTempText							:=	concat(strTempText, udtNetworkConfiguration.strGateway);<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		strTempText							:=	concat(strTempText,'IP Modbus:;');<br/>		strTempText							:=	concat(strTempText,udtNetworkConfiguration.strIPModbus);<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		strTempText							:=	concat(strTempText,'Working Mode:;');<br/>		strTempText							:=	concat(strTempText,int_to_string(udtNetworkConfiguration.iMode,'%01d'));<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		strTempText							:=	concat(strTempText,'DNS Name:;');<br/>		strTempText							:=	concat(strTempText,udtNetworkConfiguration.strDNS);<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText							:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		strTempText							:=	concat(strTempText,'Lumgate Type:;');<br/>		strTempText							:=	concat(strTempText,int_to_string(bool_to_int(udtNetworkConfiguration.xLumgateType),'%01d')); <br/>
									<br/>		xExecuteIP_Translate				:=	true;<br/>		iWriteLumgateConfig					:=	3;<br/>		iLenght								:=	Len(strTempText);<br/>
									<br/>	6002:	(* Sensor config *)<br/>		If arr_Inputs_L20[1].xActive then<br/>			strTempText	:=	'Sensor channel 1: 1';<br/>		Else<br/>			strTempText	:=	'Sensor channel 1: 0';<br/>		End_if;<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		If arr_Inputs_L20[2].xActive then<br/>			strTempText	:=	concat(strTempText,'Sensor channel 2: 1');<br/>		Else<br/>			strTempText	:=	concat(strTempText,'Sensor channel 2: 0');<br/>		End_if;<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		If arr_Inputs_L20[3].xActive then<br/>			strTempText	:=	concat(strTempText,'Sensor channel 3: 1');<br/>		Else<br/>			strTempText	:=	concat(strTempText,'Sensor channel 3: 0');<br/>		End_if;<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>		If arr_Inputs_L20[4].xActive then<br/>			strTempText	:=	concat(strTempText,'Sensor channel 4: 1');<br/>		Else<br/>			strTempText	:=	concat(strTempText,'Sensor channel 4: 0');<br/>		End_if;<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>
									<br/>		strTempText	:=	concat(strTempText,'Sensor channel 1 max. Cd/m2 value: ');<br/>		strTempText	:=	concat(strTempText,udint_to_string(real_to_udint(udtL20Config.rMaxCd1) ,'%06u'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>
									<br/>		strTempText	:=	concat(strTempText,'Sensor channel 2 max. Cd/m2 value: ');<br/>		strTempText	:=	concat(strTempText,udint_to_string(real_to_udint(udtL20Config.rMaxCd2) ,'%06u'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>
									<br/>		strTempText	:=	concat(strTempText,'Sensor channel 3 max. Cd/m2 value: ');<br/>		strTempText	:=	concat(strTempText,udint_to_string(real_to_udint(udtL20Config.rMaxCd3) ,'%06u'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>
									<br/>		strTempText	:=	concat(strTempText,'Sensor channel 4 max. Cd/m2 value: ');<br/>		strTempText	:=	concat(strTempText,udint_to_string(real_to_udint(udtL20Config.rMaxCd4) ,'%06u'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>
									<br/>		strTempText	:=	concat(strTempText,'Limit backup sequence 1_2_3_4: ');<br/>		strTempText	:=	concat(strTempText,int_to_string(udtL20Config.iBackup_1_2_3_4_Limit,'%02d'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>
									<br/>		strTempText	:=	concat(strTempText,'Limit backup sequence 2_3_4_1: ');<br/>		strTempText	:=	concat(strTempText,int_to_string(udtL20Config.iBackup_2_3_4_1_Limit,'%02d'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>
									<br/>		strTempText	:=	concat(strTempText,'Limit backup sequence 3_4_1_2_: ');<br/>		strTempText	:=	concat(strTempText,int_to_string(udtL20Config.iBackup_3_4_1_2_Limit,'%02d'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>
									<br/>		strTempText	:=	concat(strTempText,'Limit backup sequence 4_1_2_3_: ');<br/>		strTempText	:=	concat(strTempText,int_to_string(udtL20Config.iBackup_4_1_2_3_Limit,'%02d'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#13, '%c'));<br/>		strTempText	:=	concat(strTempText, byte_to_string(byte#10, '%c'));<br/>
									<br/>		iWriteLumgateConfig	:=	3;<br/>		iLenght				:=	Len(strTempText);<br/>
									<br/>	3:	(* Wait for file handler *)<br/>		If not udtFileHandler.xRequest then<br/>			xPartLeft			:=	False;<br/>			iWriteLumgateConfig	:=	4;<br/>		End_If;<br/>	<br/>	4:	(* fill buffer *)<br/>		For iLoop := 1 to iLenght do<br/>			arrFBuffer[iBufferPosition]	:=	Int_To_Byte(Get_Char(strTempText,iLoop));<br/>
									<br/>			iBufferPosition				:=	iBufferPosition + 1;<br/>			If iBufferPosition &gt; 4998 then (* Max buffer size - CR and LF *)<br/>				iWriteLumgateConfig		:=	5;<br/>				iPositionActuelText		:=	iLoop;<br/>				xPartLeft				:=	True;	(* write a part *)<br/>				Exit;<br/>			End_If;<br/>		End_For;<br/>		If not xPartLeft then (* Next line *)<br/>			iWriteLumgateConfig	:=	10;<br/>		End_If;<br/>	<br/>	5:	(* Lumgate information *)<br/>		udtFileHandler.iAmountOverwriteChar	:=	0;<br/>		udtFileHandler.udiAmountData		:=	Int_To_Udint(iBufferPosition - 1);<br/>		udtFileHandler.iTasktype			:=	0;<br/>		udtFileHandler.strFileNameTarget	:=	'ATS_Lumgate_Configuration_1.csv';<br/>		udtFileHandler.xRequest				:=	True;<br/>		iWriteLumgateConfig					:=	6;<br/>		<br/>		(* update compare dataset *)<br/>		For iLoop := 1 to 240 do<br/>			If xTakeActualConfig then<br/>				arrLumgates[iLoop].xInConfigFile				:=	arrLumgates[iLoop].xAvailable;<br/>			End_if;<br/>			arrLumgateConfig[iLoop].arrDimmingScene			:=	arrLumgates[iLoop].arrDimmingScene;<br/>			arrLumgateConfig[iLoop].arrSpecialScene			:=	arrLumgates[iLoop].arrSpecialScene;<br/>			arrLumgateConfig[iLoop].iOutputLevelFailsave	:=	arrLumgates[iLoop].iOutputLevelFailsave;<br/>			arrLumgateConfig[iLoop].strDescription 			:=	arrLumgates[iLoop].strDescription;<br/>			arrLumgateConfig[iLoop].udtCloLed 				:=	arrLumgates[iLoop].udtCloLed;<br/>			arrLumgateConfig[iLoop].udtCloMaintenance		:=	arrLumgates[iLoop].udtCloMaintenance;<br/>			arrLumgateConfig[iLoop].udtCurrentCheck			:=	arrLumgates[iLoop].udtCurrentCheck;<br/>			arrLumgateConfig[iLoop].xFailMode				:=	arrLumgates[iLoop].xFailMode;<br/>			arrLumgateConfig[iLoop].xFailsaveRelay1			:=	arrLumgates[iLoop].xFailsaveRelay1;<br/>			arrLumgateConfig[iLoop].xFailsaveRelay2			:=	arrLumgates[iLoop].xFailsaveRelay2;<br/>			arrLumgateConfig[iLoop].xRelay1_NC				:=	arrLumgates[iLoop].xRelay1_NC;<br/>			arrLumgateConfig[iLoop].xRelay2_NC				:=	arrLumgates[iLoop].xRelay2_NC;<br/>
									<br/>		End_for;<br/>		xChangedLumgateFileExist			:=	True;<br/>		xLumgateConfigFileExist				:=	False;<br/>
									<br/>	1005:<br/>		udtFileHandler.iAmountOverwriteChar	:=	0;<br/>		udtFileHandler.udiAmountData		:=	Int_To_Udint(iBufferPosition - 1);<br/>		udtFileHandler.iTasktype			:=	0;<br/>		udtFileHandler.strFileNameTarget	:=	'ATS_Threshold_1_Configuration_1.csv';<br/>		udtFileHandler.xRequest				:=	True;<br/>		iWriteLumgateConfig					:=	6;<br/>
									<br/>		(* update compare dataset *)<br/>		udtActThresholdConfig1				:=	udtLevelConfiguration_L20_1;<br/>		arrActScenarioConfig_L20_1			:=	arrScenarioConfiguration_L20_1;<br/>		xChangedThreshold1FileExist			:=	True;<br/>		xThreshold1ConfigFileExist			:=	False;<br/>
									<br/>	2005:<br/>		udtFileHandler.iAmountOverwriteChar	:=	0;<br/>		udtFileHandler.udiAmountData		:=	Int_To_Udint(iBufferPosition - 1);<br/>		udtFileHandler.iTasktype			:=	0;<br/>		udtFileHandler.strFileNameTarget	:=	'ATS_Threshold_2_Configuration_1.csv';<br/>		udtFileHandler.xRequest				:=	True;<br/>		iWriteLumgateConfig					:=	6;<br/>
									<br/>		(* update compare dataset *)<br/>		udtActThresholdConfig2				:=	udtLevelConfiguration_L20_2;<br/>		arrActScenarioConfig_L20_2			:=	arrScenarioConfiguration_L20_2;<br/>		xChangedThreshold2FileExist			:=	True;<br/>		xThreshold2ConfigFileExist			:=	False;<br/>
									<br/>	3005:<br/>		udtFileHandler.iAmountOverwriteChar	:=	0;<br/>		udtFileHandler.udiAmountData		:=	Int_To_Udint(iBufferPosition - 1);<br/>		udtFileHandler.iTasktype			:=	0;<br/>		udtFileHandler.strFileNameTarget	:=	'ATS_Threshold_3_Configuration_1.csv';<br/>		udtFileHandler.xRequest				:=	True;<br/>		iWriteLumgateConfig					:=	6;<br/>
									<br/>		(* update compare dataset *)<br/>		udtActThresholdConfig3				:=	udtLevelConfiguration_L20_3;<br/>		arrActScenarioConfig_L20_3			:=	arrScenarioConfiguration_L20_3;<br/>		xChangedThreshold3FileExist			:=	True;<br/>		xThreshold3ConfigFileExist			:=	False;<br/>
									<br/>	4005:<br/>		udtFileHandler.iAmountOverwriteChar	:=	0;<br/>		udtFileHandler.udiAmountData		:=	Int_To_Udint(iBufferPosition - 1);<br/>		udtFileHandler.iTasktype			:=	0;<br/>		udtFileHandler.strFileNameTarget	:=	'ATS_Threshold_4_Configuration_1.csv';<br/>		udtFileHandler.xRequest				:=	True;<br/>		iWriteLumgateConfig					:=	6;<br/>
									<br/>		(* update compare dataset *)<br/>		udtActThresholdConfig4				:=	udtLevelConfiguration_L20_4;<br/>		arrActScenarioConfig_L20_4			:=	arrScenarioConfiguration_L20_4;<br/>		xChangedThreshold4FileExist			:=	True;<br/>		xThreshold4ConfigFileExist			:=	False;<br/>
									<br/>	5005:<br/>		udtFileHandler.iAmountOverwriteChar	:=	0;<br/>		udtFileHandler.udiAmountData		:=	Int_To_Udint(iBufferPosition - 1);<br/>		udtFileHandler.iTasktype			:=	0;<br/>		udtFileHandler.strFileNameTarget	:=	'ATS_Network_Configuration_1.csv';<br/>		strDiag								:=	'File "ATS_Network_Configuration_1.csv" was written';<br/>		udtFileHandler.xRequest				:=	True;<br/>		iWriteLumgateConfig					:=	6;<br/>
									<br/>		(* update compare dataset *)<br/>		udtActNetworkConfiguration			:=	udtNetworkConfiguration;<br/>		xChangedNetFileExist				:=	True;<br/>		xNetworkConfigFileExist				:=	False;<br/>
									<br/>	6005:<br/>		udtFileHandler.iAmountOverwriteChar	:=	0;<br/>		udtFileHandler.udiAmountData		:=	Int_To_Udint(iBufferPosition - 1);<br/>		udtFileHandler.iTasktype			:=	0;<br/>		udtFileHandler.strFileNameTarget	:=	'ATS_L20_Configuration_1.csv';<br/>		strDiag								:=	'File "ATS_L20_Configuration_1.csv" was written';<br/>		udtFileHandler.xRequest				:=	True;<br/>		iWriteLumgateConfig					:=	6;<br/>
									<br/>		(* update compare dataset *)<br/>		arrActL20Inputs						:=	arr_Inputs_L20;<br/>		udtActL20Config						:=	udtL20Config;<br/>		xChangedL20FileExist				:=	True;<br/>		xL20ConfigFileExist					:=	False;<br/>
									<br/>	6:<br/>		If TON_Delay_Write.Q then<br/>			iWriteLumgateConfig	:=	7;<br/>		End_If;<br/>	<br/>	7:<br/>		If not udtFileHandler.xRequest then<br/>			For iLoop := 0 to 5000 do<br/>				arrFBuffer[iLoop] := Byte#0;<br/>			End_For;<br/>		End_If;<br/>		iBufferPosition	:=	0;<br/>
									<br/>		If xPartLeft then (* Continue with the existing text *)<br/>
									<br/>		(*	iPositionActuelText	:=	iPositionActuelText + 1;*)<br/>			For iLoop := iPositionActuelText to iLenght do<br/>				arrFBuffer[iBufferPosition]	:=	Int_To_Byte(Get_Char(strTempText,iLoop));<br/>				iBufferPosition				:=	iBufferPosition + 1;<br/>			End_For;<br/>			iPositionActuelText	:=	0;<br/>			xPartLeft			:=	False;<br/>		End_If;<br/>
									<br/>		If iTempPointer &lt; 241 then<br/>			iWriteLumgateConfig	:=	10;<br/>		Else<br/>			iTempPointer		:=	0;<br/>			iWriteLumgateConfig	:=	11;<br/>			strDiag				:=	'File "ATS_Lumgate_Configuration_1.csv" was written';<br/>			xTakeActualConfig	:=	False;<br/>		End_If;<br/>		If iConfigType &gt; 4 then<br/>			iTempPointer		:=	0;<br/>			iWriteLumgateConfig	:=	11;<br/>			xTakeActualConfig	:=	False;<br/>		End_if;<br/>			<br/>	10:<br/>		arrFBuffer[iBufferPosition]	:=	Byte#16#D;<br/>		iBufferPosition				:=	iBufferPosition + 1;<br/>		arrFBuffer[iBufferPosition]	:=	Byte#16#A;<br/>		iBufferPosition				:=	iBufferPosition + 1;<br/>
									<br/>		If iConfigType = 0 then<br/>			iTempPointer	:=	iTempPointer + 1;<br/>			If iTempPointer &lt; 241 then<br/>
									<br/>				If arrLumgates[iTempPointer].xInConfigFile and not xTakeActualConfig then<br/>					iWriteLumgateConfig		:=	2;<br/>				Elsif arrLumgates[iTempPointer].xAvailable and xTakeActualConfig then<br/>					arrLumgates[iTempPointer].xInConfigFile	:=	True;<br/>					iWriteLumgateConfig		:=	2;<br/>				Elsif iTempPointer = 240 then<br/>					If iBufferPosition = 2 then (* No extra data anymore *)<br/>						iWriteLumgateConfig	:=	11;<br/>						strDiag				:=	'File "ATS_Lumgate_Configuration_1.csv" was written';<br/>						xTakeActualConfig	:=	False;<br/>					Else<br/>						iWriteLumgateConfig	:=	5;<br/>					End_If;<br/>				Else<br/>					iBufferPosition									:=	iBufferPosition - 2;<br/>					arrLumgates[iTempPointer].iModuleLevel			:=	0;<br/>					arrLumgates[iTempPointer].iModuleNumberGeneral	:=	0;<br/>					arrLumgates[iTempPointer].iModuleNumber			:=	0;<br/>					arrLumgates[iTempPointer].xAvailable			:=	False;<br/>					arrLumgates[iTempPointer].xInConfigFile			:=	False;<br/>				End_If;<br/>			Else<br/>				If iBufferPosition = 2 then (* No extra data anymore *)<br/>					iWriteLumgateConfig	:=	11;<br/>					strDiag				:=	'File "ATS_Lumgate_Configuration_1.csv" was written';<br/>					xTakeActualConfig	:=	False;<br/>				Else<br/>					iWriteLumgateConfig	:=	5;<br/>				End_If;<br/>			End_If;<br/>		Elsif iConfigType = 1 then<br/>			iTempPointer	:=	iTempPointer + 1;<br/>			If iTempPointer &lt; 26 then<br/>				iWriteLumgateConfig	:=	1002;<br/>			Else<br/>				If iBufferPosition = 2 then (* No extra data anymore *)<br/>					strDiag				:=	'File "ATS_Threshold_1_Configuration_1.csv" was written';<br/>					iWriteLumgateConfig	:=	11;<br/>				Else<br/>					iWriteLumgateConfig	:=	1005;<br/>				End_If;<br/>			End_If;<br/>		Elsif iConfigType = 2 then<br/>			iTempPointer	:=	iTempPointer + 1;<br/>			If iTempPointer &lt; 26 then<br/>				iWriteLumgateConfig	:=	2002;<br/>			Else<br/>				If iBufferPosition = 2 then (* No extra data anymore *)<br/>					strDiag				:=	'File "ATS_Threshold_2_Configuration_1.csv" was written';<br/>					iWriteLumgateConfig	:=	11;<br/>				Else<br/>					iWriteLumgateConfig	:=	2005;<br/>				End_If;<br/>			End_If;<br/>		Elsif iConfigType = 3 then<br/>			iTempPointer	:=	iTempPointer + 1;<br/>			If iTempPointer &lt; 26 then<br/>				iWriteLumgateConfig	:=	3002;<br/>			Else<br/>				If iBufferPosition = 2 then (* No extra data anymore *)<br/>					strDiag				:=	'File "ATS_Threshold_3_Configuration_1.csv" was written';<br/>					iWriteLumgateConfig	:=	11;<br/>				Else<br/>					iWriteLumgateConfig	:=	3005;<br/>				End_If;<br/>			End_If;<br/>		Elsif iConfigType = 4 then<br/>			iTempPointer	:=	iTempPointer + 1;<br/>			If iTempPointer &lt; 26 then<br/>				iWriteLumgateConfig	:=	4002;<br/>			Else<br/>				If iBufferPosition = 2 then (* No extra data anymore *)<br/>					strDiag				:=	'File "ATS_Threshold_4_Configuration_1.csv" was written';<br/>					iWriteLumgateConfig	:=	11;<br/>				Else<br/>					iWriteLumgateConfig	:=	4005;<br/>				End_If;<br/>			End_If;<br/>		Elsif iConfigType = 5 then<br/>			iWriteLumgateConfig	:=	5005;<br/>		Elsif iConfigType = 6 then<br/>			iWriteLumgateConfig	:=	6005;<br/>		End_if;<br/>
									<br/>	11:	xRequestWritingLumgateConfig	:=	False;<br/>		iWriteLumgateConfig	:=	0;<br/>End_Case;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="FileManager">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* FB_FileHandling / FileManager *)<br/>Case iFileHandling Of<br/>
									<br/>0:<br/>	If udtFileHandler.xRequest Then<br/>		Case udtFileHandler.iTasktype Of<br/>			0:	iFileHandling	:=	 20; (* Write data from ram to file *)<br/>			2:	iFileHandling	:=	 60; (* Remove file *)<br/>			3:	iFileHandling	:=	 80; (* Read data from file to ram *)<br/>		End_Case;<br/>	End_If;<br/>
									<br/>20:<br/>	xFoExecute		:=	 True; <br/>	strFoName			:=	 udtFileHandler.strFileNameTarget;<br/>	iFileHandling	:=	 21;<br/>
									<br/>21:<br/>	If xFoDone Then<br/>		uiFileHandleTarget	:=	 uiFoHandle;<br/>		xFoExecute		:=	 False;<br/>		xFsExecute		:=	 True;<br/>		uiFsHandle		:=	 uiFileHandleTarget;<br/>		diFsPosition	:=	 Int_To_Dint(Neg(udtFileHandler.iAmountOverwriteChar));<br/>		(*If udtFileHandler.iFileNumber &lt;&gt; 0 &amp; udtFileHandler.iFileNumber &lt; 81 Then<br/>			iTempNumber	:=	 udtFileHandler.iFileNumber;<br/>			strFileMem.ArrFileInfo[iTempNumber].udiEndPointer	:=	 strFileMem.ArrFileInfo[iTempNumber].udiEndPointer - Int_To_Udint(udtFileHandler.iAmountOverwriteChar);<br/>		End_If;*)<br/>		uiFsMode		:=	 Uint#2;<br/>		iFileHandling	:=	 22;<br/>	End_If;<br/>
									<br/>22:<br/>	If xFsDone Then<br/>		xFsExecute		:=	 False;<br/>		xFwExecute		:=	 True;<br/>		uiFwHandle		:=	 uiFileHandleTarget;<br/>		udFwLength		:=	 udtFileHandler.udiAmountData;<br/>	(*	If udtFileHandler.iFileNumber &lt;&gt; 0 &amp; udtFileHandler.iFileNumber &lt; 81 Then<br/>			iTempNumber	:=	 udtFileHandler.iFileNumber;<br/>			strFileMem.ArrFileInfo[iTempNumber].udiEndPointer	:=	 strFileMem.ArrFileInfo[iTempNumber].udiEndPointer + udFwLength;<br/>		End_If;*)<br/>		iFileHandling	:=	 23;<br/>	End_If;<br/>
									<br/>23:<br/>	If xFwDone Then<br/>		xFwExecute		:=	 False;<br/>		xFcExecute		:=	 True;<br/>		uiFcHandle		:=	 uiFileHandleTarget;<br/>		iFileHandling	:=	 24;<br/>	End_If;<br/>
									<br/>24:	<br/>	If xFcDone Then<br/>		xFcExecute		:=	 False;<br/>		iFileHandling	:=	 100;<br/>	End_If;<br/>
									<br/>60:	<br/>	xFrExecute		:=	 True;<br/>	strFrName			:=	 udtFileHandler.strFileNameTarget;<br/>	iFileHandling	:=	 61;<br/>
									<br/>61:	<br/>	If xFrDone or xFrError Then<br/>		xFrExecute		:=	 False;<br/>		iFileHandling	:=	 100;<br/>	End_If;<br/>
									<br/>80:	<br/>	xFoExecute		:=	 True;<br/>	strFoName			:=	 udtFileHandler.strFileNameSource;<br/>	iFileHandling	:=	 81;<br/>
									<br/>81:	<br/>	If xFoDone Then<br/>		uiFileHandleSource	:=	 uiFoHandle;<br/>		xFoExecute			:=	 False;<br/>		xFsExecute			:=	 True;<br/>		uiFsHandle			:=	 uiFileHandleSource;<br/>		diFsPosition		:=	 Udint_To_Dint(udtFileHandler.udiReadPosition);<br/>		uiFsMode			:=	 Uint#0;<br/>		iFileHandling		:=	 82;<br/>	End_If;<br/>
									<br/>82:	<br/>	If xFsDone Then<br/>		xFsExecute		:=	 False;<br/>		xFreExecute		:=	 True;<br/>		uiFreHandle		:=	 uiFileHandleSource;<br/>		udFreMaxLength	:=	 Udint#5001;<br/>		iFileHandling	:=	 83;<br/>	End_If;<br/>
									<br/>83:	<br/>	If xFreDone Then<br/>		xFreExecute		:=	 False;<br/>		xFcExecute		:=	 True;<br/>		udtFileHandler.udiReadPosition	:=	 udtFileHandler.udiReadPosition + udFreLengthRead;<br/>		udiTempAmount	:=	 udFreLengthRead;<br/>		uiFcHandle		:=	 uiFileHandleSource;<br/>		iFileHandling	:=	 84;<br/>	End_If;<br/>
									<br/>84:	<br/>	If xFcDone Then<br/>		xFcExecute			:=	 False;<br/>		xWaitFileHandling	:=	 True;<br/>		iFileHandling		:=	 85;<br/>	End_If;	<br/>
									<br/>85:	<br/>	If Not xWaitFileHandling Then<br/>			udtFileHandler.xRequest	:=	 False;<br/>		iFileHandling				:=	 0;<br/>	End_If;<br/>
									<br/>100:<br/>	udtFileHandler.iAmountOverwriteChar	:=	 0;<br/>	udtFileHandler.iFileNumber			:=	 0;<br/>	udtFileHandler.iTasktype			:=	 0;<br/>	udtFileHandler.strFileNameSource	:=	 '';<br/>	udtFileHandler.strFileNameTarget	:=	 '';<br/>	udtFileHandler.udiAmountData		:=	 Udint#0;<br/>	udtFileHandler.udiReadPosition		:=	 Udint#0;<br/>	udtFileHandler.xMultipleRun			:=	 False;<br/>	udtFileHandler.xRequest				:=	 False;<br/>	udtFileHandler.xFileMemorySource	:=	 False;<br/>	iFileHandling						:=	 0;<br/>End_Case;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="ServiceBlocks">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* FB_FileHandling / ServiceBlocks *)<br/>(* File Open *)<br/>
									<br/>File_Open_Flash(Execute	:=	xFoExecute,<br/>Name					:=	strFoName);<br/>
									<br/>xFoDone					:=	File_Open_Flash.Done;<br/>uiFoHandle				:=	File_Open_Flash.Handle;<br/>xFoError				:=	File_Open_Flash.Error;<br/>uiFoErrorId				:=	File_Open_Flash.ErrorID;<br/>
									<br/>(************************************************************************)<br/>(* File Seek *)<br/>
									<br/>File_Seek_Flash(Execute	:= xFsExecute,<br/>Handle					:= uiFsHandle,<br/>Position				:= diFsPosition,<br/>Mode					:= uiFsMode);<br/>
									<br/>xFsDone					:=	File_Seek_Flash.Done;<br/>xFsError				:=	File_Seek_Flash.Error;<br/>uiFsErrorId				:=	File_Seek_Flash.ErrorID;<br/>
									<br/>(************************************************************************)<br/>(* File Write *)<br/>
									<br/>File_Write_Flash(Execute:= xFwExecute,<br/>Handle					:= uiFwHandle,<br/>Buffer					:= arrFBuffer,<br/>Length					:= udFwLength);<br/>
									<br/>xFwDone					:=	File_Write_Flash.Done;<br/>udFwLengthWritten		:=	File_Write_Flash.LengthWritten;<br/>arrFBuffer				:=	File_Write_Flash.Buffer;<br/>xFwError				:=	File_Write_Flash.Error;<br/>uiFwErrorId				:=	File_Write_Flash.ErrorID;<br/>
									<br/>(************************************************************************)<br/>(* File Read *)<br/>
									<br/>File_Read_Flash(Execute	:= xFreExecute,<br/>Handle					:= uiFreHandle,<br/>Buffer					:= arrFBuffer,<br/>MaxLength				:= udFreMaxLength);<br/>
									<br/>xFreDone				:=	File_Read_Flash.Done;<br/>udFreLengthRead			:=	File_Read_Flash.LengthRead;<br/>arrFBuffer				:=	File_Read_Flash.Buffer;<br/>xFreError				:=	File_Read_Flash.Error;<br/>uiFreErrorId			:=	File_Read_Flash.ErrorID;<br/>
									<br/>(************************************************************************)<br/>(* File Close *)<br/>
									<br/>File_Close_Flash(Execute:= xFcExecute,<br/>Handle					:= uiFcHandle);<br/>
									<br/>xFcDone					:=	File_Close_Flash.Done;<br/>xFcError				:=	File_Close_Flash.Error;<br/>uiFcErrorId				:=	File_Close_Flash.ErrorID;<br/>
									<br/>(************************************************************************)<br/>(* File Remove *)<br/>
									<br/>File_Remove_Flash(Execute:= xFrExecute,<br/>Name					:= strFrName);<br/>
									<br/>xFrDone					:=	File_Remove_Flash.Done;<br/>xFrError				:=	File_Remove_Flash.Error;<br/>uiFrErrorId				:=	File_Remove_Flash.ErrorID;<br/>
									<br/>(************************************************************************)<br/>(* Buf To String *)<br/>
									<br/>TranslateData(REQ		:= xTranslateRequest,<br/>BUF_FORMAT				:= False,<br/>BUF_OFFS				:= diTranslateOffset,<br/>BUF_CNT					:= diTranslateCount,<br/>BUFFER					:= arrFBuffer,<br/>DST						:= strLineData);<br/>
									<br/>xTranslateDone			:=	TranslateData.DONE;<br/>xTranslateError			:=	TranslateData.ERROR;<br/>iTranslateStatus		:=	TranslateData.STATUS;<br/>arrFBuffer				:=	TranslateData.BUFFER;<br/>strLineData				:=	TranslateData.DST;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_FileHandling_01T" xmlns="http://www.w3.org/1999/xhtml">V2.01 Changes:<br/>- add 2nd file format for Lumgate configuration<br/>	- Seperator "File format version;2"<br/>- saving remanent Threshold information<br/>	- Analog average time<br/>	- Threshold hysteresis<br/>	- Threshold option names<br/>	- Active Threshold options<br/>- saving remanent current curves<br/>	- 4 curves a 23 values for 240 Lumgates<br/>	- write in next versions into a new file to reduce remanent memory<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_InterbusStartup_01" pouType="functionBlock" pouGroup="Interbus_Startup" lastChange="2016-11-16T12:31:41">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInterbusRun" group="Input parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic input from Interbus state</p>
								</html>
							</documentation>
						</variable>
						<variable name="xActivateOutputData" group="Input parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate output process data after complete startup</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrInputPD" group="Input parameter">
							<type>
								<derived name="ARR_IBS_PD_DATA_B_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Process data connection</p>
								</html>
							</documentation>
						</variable>
						<variable name="iDelay" group="Input parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scene switching delay to delay the calculated Lumgate output values</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB is active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xDone" group="Output parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Startup process done</p>
								</html>
							</documentation>
						</variable>
						<variable name="xError" group="Output parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Any Interbus error occurs</p>
								</html>
							</documentation>
						</variable>
						<variable name="xPreAlarm" group="Output parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Warning during Interbus startup</p>
								</html>
							</documentation>
						</variable>
						<variable name="strDiag" group="Output parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic text</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrOutputPD" group="Output parameter">
							<type>
								<derived name="ARR_IBS_PD_DATA_B_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Process data connection</p>
								</html>
							</documentation>
						</variable>
						<variable name="iTotalDevices" group="Output parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iActDevice" group="Output parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iIBS_State" group="Output parameter">
							<type>
								<INT/>
							</type>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="arrIB_Configuration" group="In- Output parameter">
							<type>
								<derived name="ARR_IBS_CONF_ENTRIES_1_256"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Interbus device communication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrLumgates" group="In- Output parameter">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate communication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="xManualTrig" group="In- Output parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger, restart Interbus</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<externalVars retain="false">
						<variable name="MASTER_DIAG_STATUS_REG_DTC" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnoseroutine ist aktiv</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_RUN" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Datenübertragung ist aktiv</p>
								</html>
							</documentation>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="iIB_Startup" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTeach" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xActivateStartup" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActiveStartup" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xReadyStartup" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xInitNewConfig" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xErrorStartup" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xDoneStartup" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="wDiagCodeStartup" redundant="true" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="dwDiagCodeStartup" group="Default">
							<type>
								<DWORD/>
							</type>
						</variable>
						<variable name="strDiagCodeStartup" group="Default">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="wDiagCodeProcessData" redundant="true" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="dwAddDiagCodeProcessData" group="Default">
							<type>
								<DWORD/>
							</type>
						</variable>
						<variable name="strDiagCodeProcessData" group="Default">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xActivateProcessData" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xTeach" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop3" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="wTemp" redundant="true" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="wTempValue" redundant="true" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="wTempValueMeasurement" redundant="true" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="xStartTimer" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iNumberLumgate" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iModuleNumber" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xActiveProcessData" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xErrorProcessData" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="arrOutgoingPD" redundant="true" group="Default">
							<type>
								<derived name="ARR_IBS_PD_DATA_B_1_512"/>
							</type>
						</variable>
						<variable name="arrIB_SysConfig" redundant="true" group="Default">
							<type>
								<derived name="ARR_IBC_DATA_1_512"/>
							</type>
						</variable>
						<variable name="iCountOfRBT" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iCountOfAI" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iCountOfLumgate" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTotalAmountWithConfig" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="arrActualOutput" group="Default">
							<type>
								<derived name="ARR_I_1_240"/>
							</type>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="F_TRIG_InterbusRun" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="iCountOfOther" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="arrActualModuleNumber" group="Default">
							<type>
								<derived name="ARR_I_1_240"/>
							</type>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="tDealy" group="Default">
							<type>
								<TIME/>
							</type>
						</variable>
						<variable name="TON_Timeout" group="Default">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="iBS_Devices" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xIBS_DeviceCountOK" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="xStepup" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="TON_ReadDevices" group="Default">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
						<variable name="TON_IBS_Startup" group="Default">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
						<variable name="iActualIB_Device" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="xIB_ConfigSaved" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="iNumberLumgate1" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iNumberLumgate2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iNumberLumgate3" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iNumberLumgate4" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="arrActualRelayState1" group="Default">
							<type>
								<derived name="ARR_X_1_240"/>
							</type>
						</variable>
						<variable name="arrActualRelayState2" redundant="true" group="Default">
							<type>
								<derived name="ARR_X_1_240"/>
							</type>
						</variable>
					</localVars>
					<inputVars retain="false">
						<variable name="xLumgateType" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</inputVars>
					<localVars retain="false">
						<variable name="F_DiagnosticRoutine" group="FB_Instanzes">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_Interbus" group="FB_Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="TON_Startup" group="FB_Instanzes">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
						<variable name="TON_DelayTest" group="FB_Instanzes">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
						<variable name="IBStartup" group="FB_Instanzes">
							<type>
								<derived name="FB_InterbusStartup"/>
							</type>
						</variable>
						<variable name="ProcessData" group="FB_Instanzes">
							<type>
								<derived name="FB_PD_Assign"/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_InterbusStartup_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* InterbusStartup *)<br/>R_TRIG_Interbus(CLK		:=	xInterbusRun);<br/>F_TRIG_InterbusRun(CLK	:=	MASTER_DIAG_STATUS_REG_RUN);<br/>
									<br/>If xActivate then<br/>	If not xInterbusRun then<br/>		strDiag		:=	'Warning: System is not ready to work';<br/>		xPreAlarm	:=	True;<br/>	End_if;<br/>	Case iIB_Startup of<br/>
									<br/>		0:	(* Activate Interbus Startup FB *)<br/>			xActivateStartup		:=	True;<br/>			iIB_Startup				:=	1;<br/>			xError					:=	False;<br/>			strDiag					:=	'Start up Interbus';<br/>
									<br/>		1:	<br/>			If xActiveStartup and xReadyStartup then	(* Startup FB is ready *)<br/>				xInitNewConfig		:=	True;<br/>				iIB_Startup			:=	2;<br/>
									<br/>			Elsif xErrorStartup or TON_Timeout.Q then<br/>				iIB_Startup			:=	999;<br/>			End_If;<br/>
									<br/>		2:	(* Interbus device detection complete *)<br/>			If xDoneStartup then <br/>				xActivateProcessData	:=	True; 		(* IBS Process data FB *)<br/>				xActivateOutputData		:=	False;		(* Set Output data to 2 V per Lumgate *)<br/>				xTeach					:=	True;<br/>				xActive					:=	True;<br/>				iIB_Startup				:=	3;<br/>			Elsif xErrorStartup then<br/>				strDiag					:=	'Interbus Error';<br/>				xActivateStartup		:=	False;<br/>				xInitNewConfig			:=	False;<br/>				iIB_Startup				:=	999;<br/>			End_If;<br/>
									<br/>		3:<br/>			If TON_IBS_Startup.Q then<br/>				xActivateOutputData		:=	True;<br/>				strDiag					:=	'System startup complete';<br/>				xPreAlarm				:=	False;<br/>				iIB_Startup				:=	4;<br/>			End_if;<br/>
									<br/>		4:	(* Target step. Leave only in case of failure or rescan command *)<br/>			If not MASTER_DIAG_STATUS_REG_RUN then		(* Rescan after a failure occurs *)<br/>				xActive					:=	False;<br/>				xActivateOutputData		:=	True;<br/>				iIB_Startup				:= 	5;<br/>			Elsif xManualTrig then						(* Manual Rescan *)<br/>				xActive					:=	False;<br/>				xActivateOutputData		:=	True;<br/>				iIB_Startup				:= 	7;<br/>			End_If;<br/>
									<br/>		5:	(* Restart after failure *)<br/>			xActivateStartup		:= 	False;<br/>			xInitNewConfig			:= 	False;<br/>			xActivateProcessData	:= 	False;<br/>
									<br/>			For iLoop:= 1 to 256 do	(* Reset Interbus device structure *)<br/>				If iLoop &lt; 241 then<br/>					arrLumgates[iLoop].iModuleNumberGeneral		:=	0;<br/>				End_if;<br/>				arrIB_Configuration[iLoop].xDeviceCopyed		:= 	False;<br/>				arrIB_Configuration[iLoop].iPdLenCompl			:= 	0;<br/>				arrIB_Configuration[iLoop].iPdLenIn				:= 	0;<br/>				arrIB_Configuration[iLoop].iPdLenOut			:= 	0;<br/>				arrIB_Configuration[iLoop].iPntrPdBeginIn		:= 	0;<br/>				arrIB_Configuration[iLoop].iPntrPdBeginOut		:= 	0;<br/>				arrIB_Configuration[iLoop].iReservedBytesIn		:= 	0;<br/>				arrIB_Configuration[iLoop].iReservedBytesOut	:= 	0;<br/>				arrIB_Configuration[iLoop].iCntPdd				:= 	0;<br/>				arrIB_Configuration[iLoop].bModuleID			:= 	Byte#0;<br/>			End_For;<br/>			iIB_Startup	:= 	55;<br/>
									<br/>		55:	<br/>			If F_DiagnosticRoutine.Q then		(* Wait for the end of the IBS diagnostic routine *)<br/>				xStartTimer			:=	True;	(* Start delay timer *)<br/>				xManualTrig			:= 	False;<br/>				iIB_Startup			:= 	6;<br/>			End_If;<br/>
									<br/>		6:	<br/>			If TON_DelayTest.Q then<br/>				xStartTimer			:= 	False;	(* Restart IBS Startup *)<br/>				xActivateStartup	:= 	True;<br/>				iIB_Startup			:= 	1;<br/>			End_If;<br/>
									<br/>		7:	<br/>			xManualTrig				:=	False;	(* Start delay timer *)<br/>			xStartTimer				:= 	True;<br/>			iIB_Startup				:= 	8;<br/>
									<br/>		8:	<br/>			If TON_DelayTest.Q then<br/>				xStartTimer			:= 	False;<br/>				iIB_Startup			:= 	9;		(* Reset IBS Structure *)<br/>			End_If;<br/>	<br/>		9:	<br/>			xActivateStartup		:= 	False;<br/>			xInitNewConfig			:= 	False;<br/>			xActivateProcessData	:= 	False;<br/>
									<br/>			For iLoop := 1 to 256 do<br/>				If iLoop &lt; 241 then<br/>					arrLumgates[iLoop].iModuleNumberGeneral		:=	0;<br/>				End_if;<br/>				arrIB_Configuration[iLoop].xDeviceCopyed		:= 	False;<br/>				arrIB_Configuration[iLoop].iPdLenCompl			:= 	0;<br/>				arrIB_Configuration[iLoop].iPdLenIn				:= 	0;<br/>				arrIB_Configuration[iLoop].iPdLenOut			:= 	0;<br/>				arrIB_Configuration[iLoop].iPntrPdBeginIn		:= 	0;<br/>				arrIB_Configuration[iLoop].iPntrPdBeginOut		:= 	0;<br/>				arrIB_Configuration[iLoop].iReservedBytesIn		:= 	0;<br/>				arrIB_Configuration[iLoop].iReservedBytesOut	:= 	0;<br/>				arrIB_Configuration[iLoop].iCntPdd				:= 	0;<br/>				arrIB_Configuration[iLoop].bModuleID			:= 	Byte#0;<br/>		<br/>			End_For;<br/>
									<br/>			xStartTimer				:= 	True;<br/>			xManualTrig				:= 	False;<br/>			iIB_Startup				:= 	6;<br/>
									<br/>		999:<br/>			xActivateProcessData	:= 	False;<br/>			xInitNewConfig			:=	False;<br/>			xActivateStartup		:=	False;<br/>			xError					:=	True;<br/>			iIB_Startup				:= 	0;<br/>	End_case;<br/>
									<br/>Else<br/>	xActivateOutputData		:=	False;<br/>	xActivateProcessData	:= 	False;<br/>	xInitNewConfig			:=	False;<br/>	xActivateStartup		:=	False;<br/>	iIB_Startup				:=	0;<br/>	xError					:=	False;<br/>	xActive					:=	False;<br/>End_if;<br/>
									<br/>F_DiagnosticRoutine(CLK	:=	MASTER_DIAG_STATUS_REG_DTC);<br/>TON_DelayTest(IN		:=	xStartTimer,	PT	:=	T#1s);<br/>TON_Timeout(IN			:=	iIB_Startup = 2,PT	:=	t#2m);<br/>TON_IBS_Startup(IN		:=	iIB_Startup = 3,PT	:=	t#5s);<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="TeachPosition">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* InterbusStartup *)<br/>xDone				:=	False;<br/>Case iTeach of<br/>
									<br/>	0:	<br/>		If xTeach then<br/>			iLoop3	:= 	0;<br/>			For iLoop := 1 to 240 do	(* Reset availability *)<br/>				arrLumgates[iLoop].xAvailable	:=	False;<br/>			End_For;<br/>			iTeach	:= 	5;<br/>		End_If;<br/>
									<br/>	1: (* not used *)<br/>		For iLoop := 1 to 4 do<br/>			iNumberLumgate	:= 	0;<br/>			wTemp			:= 	int_to_word(iLoop - 1);<br/>
									<br/>			For iActualIB_Device := 1 to 256 do<br/>				(* Detect and sort Lumgates *)<br/>				If arrIB_Configuration[iActualIB_Device].wModuleLevel = wTemp and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>					iNumberLumgate								:=	iNumberLumgate + 1;<br/>					iLoop3										:= 	iLoop3 + 1;<br/>					arrLumgates[iLoop3].iModuleLevel			:= 	iLoop - 1;<br/>					arrLumgates[iLoop3].iModuleNumberGeneral	:= 	iActualIB_Device;<br/>					arrLumgates[iLoop3].iModuleNumber			:=	iNumberLumgate;<br/>					arrLumgates[iLoop3].xAvailable				:=	True;<br/>				End_If;<br/>			End_For;<br/>		End_For;<br/>
									<br/>		iNumberLumgate	:= 	0;<br/>		iTeach			:= 	17;	(* Check for invalid bus devices *)<br/>		xTeach			:= 	False;<br/>		xDone			:=	True;<br/>		xIB_ConfigSaved	:=	True;<br/>
									<br/>	5:<br/>		iNumberLumgate	:= 	0;<br/>		iNumberLumgate1	:=	0;<br/>
									<br/>		For iActualIB_Device := 1 to 90 do	(* Search for Lumgates *)<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#0 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:= 	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do	(* Search for the fitting configuration *)<br/>					If arrLumgates[iLoop2].iModuleLevel = 0 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate1								:= 	iNumberLumgate1 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:= 	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	6;<br/>
									<br/>	6:<br/>		For iActualIB_Device := 91 to 180 do	(* Split the searching process in a couple of parts to reduce the cycle time *)<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#0 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:=	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 0 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate1								:= 	iNumberLumgate1 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:=	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	7;<br/>	<br/>	7:<br/>		For iActualIB_Device	:= 181 to 256 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#0 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:=	iNumberLumgate + 1;<br/>				For iLoop2:= 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 0 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate1								:= 	iNumberLumgate1 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:=	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	8;<br/>
									<br/>	8:<br/>		iNumberLumgate	:= 	0;<br/>		iNumberLumgate2	:=	0;<br/>		For iActualIB_Device := 1 to 90 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = word#1 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:=	 iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 1 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate2								:= 	iNumberLumgate2 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:= 	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:=	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	9;<br/>
									<br/>	9:<br/>		For iActualIB_Device := 91 to 180 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = word#1 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:= 	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 1 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate2								:= 	iNumberLumgate2 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:= 	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	10;<br/>	<br/>	10:<br/>		For iActualIB_Device := 181 to 256 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#1 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:= 	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 1 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate2								:= 	iNumberLumgate2 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:=	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	11;<br/>
									<br/>	11:<br/>		iNumberLumgate	:= 	0;<br/>		iNumberLumgate3	:=	0;<br/>		For iActualIB_Device := 1 to 90 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#2 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:= 	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 2 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate3								:= 	iNumberLumgate3 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:= 	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	12;<br/>
									<br/>	12:<br/>		For iActualIB_Device := 91 to 180 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#2 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:= 	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 2 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate3								:= 	iNumberLumgate3 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:=	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	13;<br/>	<br/>	13:<br/>		For iActualIB_Device := 181 to 256 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#2 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:=	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 2 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate3								:= 	iNumberLumgate3 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:= 	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;	<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	14;<br/>
									<br/>	14:<br/>		iNumberLumgate	:=	0;<br/>		iNumberLumgate4	:=	0;<br/>		For iActualIB_Device := 1 to 90 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#3 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:=	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 3 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate4								:= 	iNumberLumgate4 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:= 	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:=	 15;<br/>
									<br/>	15:<br/>		For iActualIB_Device := 91 to 180 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#3 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:= 	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 3 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate4								:= 	iNumberLumgate4 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:= 	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:= 	True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach	:= 	16;<br/>	<br/>	16:<br/>		For iActualIB_Device := 181 to 256 do<br/>			If arrIB_Configuration[iActualIB_Device].wModuleLevel = Word#3 and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				iNumberLumgate	:= 	iNumberLumgate + 1;<br/>				For iLoop2 := 1 to 240 do<br/>					If arrLumgates[iLoop2].iModuleLevel = 3 and arrLumgates[iLoop2].iModuleNumber = iNumberLumgate then<br/>						iNumberLumgate4								:= 	iNumberLumgate4 + 1;<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:=	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:=	 True;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>		iTeach				:= 	161;<br/>
									<br/>	161:<br/>		(* Search for Lumgates without a configuration *)<br/>		For iActualIB_Device := 1 to 65 do<br/>			If not arrIB_Configuration[iActualIB_Device].xDeviceCopyed and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				For iLoop2 := 1 to 240 do	(* Add all not configured Lumgates at the end of the structure *)<br/>					If not arrLumgates[iLoop2].xAvailable and not arrLumgates[iLoop2].xInConfigFile then<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:=	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:=	True;<br/>						arrLumgates[iLoop2].iModuleLevel			:= 	word_to_int(arrIB_Configuration[iActualIB_Device].wModuleLevel);<br/>
									<br/>						(* Enter a basic configuration *)<br/>						arrLumgates[iLoop2].iActualOutputLevel		:=	222;<br/>						arrLumgates[iLoop2].iOutputLevelFailsave	:=	222;<br/>						arrLumgates[iLoop2].iTargetOutputLevel		:=	222;<br/>						arrLumgates[iLoop2].strDescription			:=	'Dev. not configured';<br/>						arrLumgates[iLoop2].xFailMode				:=	True;<br/>
									<br/>						If arrLumgates[iLoop2].iModuleLevel = 0 then<br/>							iNumberLumgate1	:=	iNumberLumgate1 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate1;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 1 then<br/>							iNumberLumgate2	:=	iNumberLumgate2 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate2;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 2 then<br/>							iNumberLumgate3	:=	iNumberLumgate3 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate3;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 3 then<br/>							iNumberLumgate4	:=	iNumberLumgate4 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate4;<br/>						End_if;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>
									<br/>		iTeach				:= 	162;<br/>
									<br/>	162:<br/>		(* Search for Lumgates without a configuration *)<br/>		For iActualIB_Device := 66 to 130 do<br/>			If not arrIB_Configuration[iActualIB_Device].xDeviceCopyed and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				For iLoop2 := 1 to 240 do	(* Add all not configured Lumgates at the end of the structure *)<br/>					If not arrLumgates[iLoop2].xAvailable and not arrLumgates[iLoop2].xInConfigFile then<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:=	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:=	True;<br/>						arrLumgates[iLoop2].iModuleLevel			:= 	word_to_int(arrIB_Configuration[iActualIB_Device].wModuleLevel);<br/>
									<br/>						(* Enter a basic configuration *)<br/>						arrLumgates[iLoop2].iActualOutputLevel		:=	222;<br/>						arrLumgates[iLoop2].iOutputLevelFailsave	:=	222;<br/>						arrLumgates[iLoop2].iTargetOutputLevel		:=	222;<br/>						arrLumgates[iLoop2].strDescription			:=	'Dev. not configured';<br/>						arrLumgates[iLoop2].xFailMode				:=	True;<br/>
									<br/>						If arrLumgates[iLoop2].iModuleLevel = 0 then<br/>							iNumberLumgate1	:=	iNumberLumgate1 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate1;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 1 then<br/>							iNumberLumgate2	:=	iNumberLumgate2 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate2;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 2 then<br/>							iNumberLumgate3	:=	iNumberLumgate3 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate3;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 3 then<br/>							iNumberLumgate4	:=	iNumberLumgate4 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate4;<br/>						End_if;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>
									<br/>		iTeach				:= 	163;<br/>	163:<br/>		(* Search for Lumgates without a configuration *)<br/>		For iActualIB_Device := 131 to 195 do<br/>			If not arrIB_Configuration[iActualIB_Device].xDeviceCopyed and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				For iLoop2 := 1 to 240 do	(* Add all not configured Lumgates at the end of the structure *)<br/>					If not arrLumgates[iLoop2].xAvailable and not arrLumgates[iLoop2].xInConfigFile then<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:=	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:=	True;<br/>						arrLumgates[iLoop2].iModuleLevel			:= 	word_to_int(arrIB_Configuration[iActualIB_Device].wModuleLevel);<br/>
									<br/>						(* Enter a basic configuration *)<br/>						arrLumgates[iLoop2].iActualOutputLevel		:=	222;<br/>						arrLumgates[iLoop2].iOutputLevelFailsave	:=	222;<br/>						arrLumgates[iLoop2].iTargetOutputLevel		:=	222;<br/>						arrLumgates[iLoop2].strDescription			:=	'Dev. not configured';<br/>						arrLumgates[iLoop2].xFailMode				:=	True;<br/>
									<br/>						If arrLumgates[iLoop2].iModuleLevel = 0 then<br/>							iNumberLumgate1	:=	iNumberLumgate1 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate1;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 1 then<br/>							iNumberLumgate2	:=	iNumberLumgate2 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate2;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 2 then<br/>							iNumberLumgate3	:=	iNumberLumgate3 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate3;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 3 then<br/>							iNumberLumgate4	:=	iNumberLumgate4 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate4;<br/>						End_if;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>
									<br/>		iTeach				:= 	164;<br/>	164:<br/>		(* Search for Lumgates without a configuration *)<br/>		For iActualIB_Device := 196 to 256 do<br/>			If not arrIB_Configuration[iActualIB_Device].xDeviceCopyed and arrIB_Configuration[iActualIB_Device].bModuleID = Byte#16#33 then<br/>				For iLoop2 := 1 to 240 do	(* Add all not configured Lumgates at the end of the structure *)<br/>					If not arrLumgates[iLoop2].xAvailable and not arrLumgates[iLoop2].xInConfigFile then<br/>						arrLumgates[iLoop2].iModuleNumberGeneral	:=	iActualIB_Device;<br/>						arrLumgates[iLoop2].xAvailable				:=	True;<br/>						arrLumgates[iLoop2].iModuleLevel			:= 	word_to_int(arrIB_Configuration[iActualIB_Device].wModuleLevel);<br/>
									<br/>						(* Enter a basic configuration *)<br/>						arrLumgates[iLoop2].iActualOutputLevel		:=	222;<br/>						arrLumgates[iLoop2].iOutputLevelFailsave	:=	222;<br/>						arrLumgates[iLoop2].iTargetOutputLevel		:=	222;<br/>						arrLumgates[iLoop2].strDescription			:=	'Dev. not configured';<br/>						arrLumgates[iLoop2].xFailMode				:=	True;<br/>
									<br/>						If arrLumgates[iLoop2].iModuleLevel = 0 then<br/>							iNumberLumgate1	:=	iNumberLumgate1 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate1;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 1 then<br/>							iNumberLumgate2	:=	iNumberLumgate2 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate2;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 2 then<br/>							iNumberLumgate3	:=	iNumberLumgate3 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate3;<br/>						Elsif arrLumgates[iLoop2].iModuleLevel = 3 then<br/>							iNumberLumgate4	:=	iNumberLumgate4 + 1;<br/>							arrLumgates[iLoop2].iModuleNumber			:=	iNumberLumgate4;<br/>						End_if;<br/>
									<br/>						arrIB_Configuration[iActualIB_Device].xDeviceCopyed	:=	True;<br/>						Exit;<br/>					End_If;<br/>				End_For;<br/>			End_If;<br/>		End_For;<br/>
									<br/>		iTeach				:= 	17;<br/>		xTeach				:= 	False;<br/>		xDone				:=	True;<br/>		xIB_ConfigSaved		:=	True;<br/>		xActivateOutputData	:=	True;<br/>
									<br/>	17:	(* Check Interbus devices *)<br/>		xDone			:=	True;<br/>		iCountOfRBT		:=	0;<br/>		iCountOfAI		:=	0;<br/>		iCountOfLumgate	:=	0;<br/>		iCountOfOther	:=	0;<br/>
									<br/>		For iLoop := 1 to 256 do<br/>			If arrIB_Configuration[iLoop].bModuleID = Byte#4 then (* RBT *)<br/>				iCountOfRBT		:= iCountOfRBT + 1;<br/>			End_If;<br/>
									<br/>			If arrIB_Configuration[iLoop].bModuleID = Byte#16#7F then (* Analog input module *)<br/>				iCountOfAI		:= iCountOfAI + 1;<br/>			End_If;<br/>
									<br/>			If arrIB_Configuration[iLoop].bModuleID = Byte#16#33 then (* Lumgate *)<br/>				iCountOfLumgate	:= iCountOfLumgate + 1;<br/>			End_If;<br/>
									<br/>			If arrIB_Configuration[iLoop].bModuleID &lt;&gt; Byte#16#33 and arrIB_Configuration[iLoop].bModuleID &lt;&gt; Byte#16#4 <br/>			and arrIB_Configuration[iLoop].bModuleID &lt;&gt; Byte#16#7F and arrIB_Configuration[iLoop].bModuleID &lt;&gt; Byte#0 then (* other devices *)<br/>				iCountOfOther	:= iCountOfOther + 1;<br/>			End_If;<br/>		End_For;<br/>
									<br/>		xError						:= False;<br/>		iTotalAmountWithConfig		:= 0;<br/>
									<br/>		For iLoop := 1 to 240 do<br/>			If arrLumgates[iLoop].xInConfigFile and not arrLumgates[iLoop].xAvailable then<br/>				xError				:= True;<br/>			End_If;<br/>			If arrLumgates[iLoop].xAvailable then<br/>				iTotalAmountWithConfig	:= iTotalAmountWithConfig + 1;<br/>			End_If;<br/>		End_For;<br/>
									<br/>		If iCountOfRBT &gt; 4 then<br/>			strDiag	:= 'Error: More than 4 RBT modules are found';<br/>			xError	:= True;<br/>		End_If;<br/>
									<br/>		If iCountOfRBT &lt; 4 then<br/>			strDiag	:= 'Error: Less than 4 RBT modules are found';<br/>			xError	:= True;<br/>		End_If;<br/>
									<br/>		If iCountOfAI = 0 then<br/>			strDiag	:= 'Error: No analog input module found';<br/>			xError	:= True;<br/>		End_If;<br/>
									<br/>		If iCountOfAI &gt; 1 then<br/>			strDiag	:= 'Error: More than 1 analog input module found';<br/>			xError	:= True;<br/>		End_If;<br/>
									<br/>		If iCountOfLumgate &gt; 240 then<br/>			strDiag	:= 'Error: More than 240 Lumgates found';<br/>			xError	:= True;<br/>		End_If;<br/>
									<br/>		If iCountOfOther &gt; 0 then<br/>			strDiag	:=	'Error: Invalid Interbus devices are found';<br/>			xError	:=	True;<br/>		End_if;<br/>
									<br/>		iTeach	:=	0;<br/>End_Case;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="HardwareConnection">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* InterbusStartup *)<br/>For iLoop := 1 to 240 do<br/>	If arrLumgates[iLoop].xAvailable and xActivateOutputData then<br/>		iModuleNumber							:=	arrLumgates[iLoop].iModuleNumberGeneral;<br/>		arrIB_Configuration[iModuleNumber].arrPdOut[1].X6:= arrLumgates[iLoop].xFailMode;						(* 0 = Hold, 1 = Failsave values *)<br/>		arrIB_Configuration[iModuleNumber].arrPdOut[1].X7:= arrLumgates[iLoop].xSafe; 							(* Rising Edge: Load failsave values *)<br/>
									<br/>		arrLumgates[iLoop].xInput1				:= 	arrIB_Configuration[iModuleNumber].arrPdIn[1].X4; 			(* digital input 1 *)<br/>		arrLumgates[iLoop].xInput2				:= 	arrIB_Configuration[iModuleNumber].arrPdIn[1].X5;			(* digital input 2 *)<br/>		arrLumgates[iLoop].iActualOutputLevel	:= 	limit_int(0,arrLumgates[iLoop].iActualOutputLevel,1070); 	(* analog value *)<br/>
									<br/>		wTempValueMeasurement					:=	word#0; 													(* measurement *)<br/>		wTempValueMeasurement.B0				:=	arrIB_Configuration[iModuleNumber].arrPdIn[2];<br/>		wTempValueMeasurement.X8				:=	arrIB_Configuration[iModuleNumber].arrPdIn[1].X0;<br/>		wTempValueMeasurement.X9				:=	arrIB_Configuration[iModuleNumber].arrPdIn[1].X1;<br/>
									<br/>		If xLumgateType then<br/>			arrLumgates[iLoop].iMeasurement			:=	word_to_int(wTempValueMeasurement) * 5;<br/>		Else<br/>			arrLumgates[iLoop].iMeasurement			:=	word_to_int(wTempValueMeasurement) * 8;<br/>		End_if;<br/>		arrLumgates[iLoop].xErrorOutputLevel	:=	arrIB_Configuration[iModuleNumber].arrPdIn[1].X2;			(* Error output data *)<br/>		arrLumgates[iLoop].xSafeSet				:=	arrIB_Configuration[iModuleNumber].arrPdIn[1].X6;			(* Safe set *)<br/>		arrLumgates[iLoop].xSafeFinish			:=	arrIB_Configuration[iModuleNumber].arrPdIn[1].X7;			(* Safe finish *)<br/>	End_If;<br/>
									<br/>	If TON_Startup.Q then		(* delay calculated output *)<br/>		wTempValue								:= 	int_to_word(arrLumgates[iLoop].iActualOutputLevel) or word#1;	(* Set lowest Bit *)<br/>		arrActualOutput[iLoop]					:=	arrLumgates[iLoop].iActualOutputLevel;					(* Store calculated output remanent *)<br/>		arrActualRelayState1[iLoop]				:=	arrLumgates[iLoop].xRelay1;<br/>		arrActualRelayState2[iLoop]				:=	arrLumgates[iLoop].xRelay2;<br/>		arrActualModuleNumber[iLoop]			:=	arrLumgates[iLoop].iModuleNumberGeneral;<br/>
									<br/>		iBS_Devices								:=	iTotalDevices;<br/>
									<br/>		If arrLumgates[iLoop].xAvailable and xActivateOutputData then<br/>			iModuleNumber						:=	arrLumgates[iLoop].iModuleNumberGeneral;<br/>			If iModuleNumber &gt; 0 then<br/>				arrIB_Configuration[iModuleNumber].arrPdOut[2]		:= 	wTempValue.B0;<br/>				arrIB_Configuration[iModuleNumber].arrPdOut[1].X0	:= 	wTempValue.X8;<br/>				arrIB_Configuration[iModuleNumber].arrPdOut[1].X1	:= 	wTempValue.X9;<br/>				arrIB_Configuration[iModuleNumber].arrPdOut[1].X2	:= 	wTempValue.X10;<br/>				arrIB_Configuration[iModuleNumber].arrPdOut[1].X4	:=	arrLumgates[iLoop].xRelay1; 		(* Relay 1 *)<br/>				arrIB_Configuration[iModuleNumber].arrPdOut[1].X5	:=	arrLumgates[iLoop].xRelay2;			(* Relay 2 *)<br/>			End_if;<br/>		End_if;<br/>
									<br/>	Elsif xIBS_DeviceCountOK then<br/>	(* Supply the Lumgate outputs with the failsafe values, in case of an bus error or a power up,<br/>	 if the count of Lumgates is equal to the count befor the error occurs *)<br/>		If ((arrActualModuleNumber[iLoop] &gt; 0) and (arrLumgates[iLoop].iModuleNumberGeneral = 0)) then<br/>			arrLumgates[iLoop].iModuleNumberGeneral		:=	arrActualModuleNumber[iLoop];<br/>		End_if;<br/>		If arrLumgates[iLoop].xFailMode then<br/>			arrLumgates[iLoop].iActualOutputLevel		:=	arrLumgates[iLoop].iOutputLevelFailsave;<br/>
									<br/>			If arrLumgates[iLoop].xRelay1_NC then<br/>				arrLumgates[iLoop].xRelay1					:=	not arrLumgates[iLoop].xFailsaveRelay1; 		(* Relay 1 *)<br/>			Else<br/>				arrLumgates[iLoop].xRelay1					:=	arrLumgates[iLoop].xFailsaveRelay1; 		(* Relay 1 *)<br/>			End_if;<br/>			If arrLumgates[iLoop].xRelay2_NC then<br/>				arrLumgates[iLoop].xRelay2					:=	not arrLumgates[iLoop].xFailsaveRelay2; 		(* Relay 2 *)<br/>			Else<br/>				arrLumgates[iLoop].xRelay2					:=	arrLumgates[iLoop].xFailsaveRelay2; 		(* Relay 2 *)<br/>			End_if;<br/>		Elsif arrActualOutput[iLoop] &lt;&gt; 0 then<br/>			arrLumgates[iLoop].iActualOutputLevel		:=	arrActualOutput[iLoop];			(* Set last valid calculated output until the startup is complete *)<br/>
									<br/>			arrLumgates[iLoop].xRelay1					:=	arrActualRelayState1[iLoop]; 		(* Relay 1 *)<br/>			arrLumgates[iLoop].xRelay2					:=	arrActualRelayState2[iLoop]; 		(* Relay 2 *)<br/>		End_if;			<br/>		wTempValue										:= 	int_to_word(arrLumgates[iLoop].iActualOutputLevel) or word#1;<br/>
									<br/>		If iModuleNumber &gt; 0 then<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[2]		:= 	wTempValue.B0;<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X0	:= 	wTempValue.X8;<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X1	:= 	wTempValue.X9;<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X2	:= 	wTempValue.X10;<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X4	:=	arrLumgates[iLoop].xRelay1; 		(* Relay 1 *)<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X5	:=	arrLumgates[iLoop].xRelay2;			(* Relay 2 *)<br/>		End_if;<br/>
									<br/>	Else<br/>	(* Supply the Lumgate outputs with a general failsafe value, in case of an bus error or a power up,<br/>	 if the count of Lumgates is &gt;&gt;&gt;not&lt;&lt;&lt; equal to the count befor the error occurs *)<br/>		arrLumgates[iLoop].iActualOutputLevel			:=	250;<br/>		If arrLumgates[iLoop].iModuleNumberGeneral = 0 then<br/>			arrLumgates[iLoop].iModuleNumberGeneral		:=	iLoop + 5;<br/>		End_if;<br/>		wTempValue										:= 	int_to_word(arrLumgates[iLoop].iActualOutputLevel) or word#1;<br/>		arrLumgates[iLoop].xRelay1						:=	False; 		(* Relay 1 *)<br/>		arrLumgates[iLoop].xRelay2						:=	False; 		(* Relay 2 *)<br/>
									<br/>		iModuleNumber									:=	arrLumgates[iLoop].iModuleNumberGeneral;<br/>		If iModuleNumber &gt; 0 then<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[2]		:= 	wTempValue.B0;<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X0	:= 	wTempValue.X8;<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X1	:= 	wTempValue.X9;<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X2	:= 	wTempValue.X10;<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X4	:=	arrLumgates[iLoop].xRelay1; 		(* Relay 1 *)<br/>			arrIB_Configuration[iModuleNumber].arrPdOut[1].X5	:=	arrLumgates[iLoop].xRelay2;			(* Relay 2 *)<br/>		End_if;<br/>	End_if;<br/>End_For;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="FunctionBlocks">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* InterbusStartup *)<br/>IBStartup(xActivate	:= 	xActivateStartup,	 (* FB_InterbusStartup *)<br/>xInitNewConfig		:= 	xInitNewConfig,<br/>xOS					:= 	False,<br/>tWatchdog			:= 	t#50s,<br/>arrIBC_SysConf		:= 	arrIB_SysConfig,<br/>arrIBS_ConfEntry	:= 	arrIB_Configuration);<br/>
									<br/>xActiveStartup		:=	IBStartup.xActive;<br/>xReadyStartup		:=	IBStartup.xReady;<br/>xDoneStartup		:=	IBStartup.xDone;<br/>xErrorStartup		:=	IBStartup.xError;<br/>wDiagCodeStartup	:=	IBStartup.wDiagCode;<br/>dwDiagCodeStartup	:=	IBStartup.dwAddDiagCode;<br/>iTotalDevices		:=	IBStartup.iIBS_Modules;<br/>iActDevice			:=	IBStartup.iIdxCntMod;<br/>strDiagCodeStartup	:=	IBStartup.strDiagCode;<br/>arrIB_SysConfig		:=	IBStartup.arrIBC_SysConf;<br/>arrIB_Configuration	:=	IBStartup.arrIBS_ConfEntry;<br/>
									<br/>If IBStartup.iState = 80 then<br/>	iIBS_State	:=	1;						(* Visu Rescan messages, Search for Interbus devices *)<br/>Elsif IBStartup.iState = 150 or IBStartup.iState = 160 then<br/>	iIBS_State	:=	2;						(* Visu Rescan messages, Collect device information *)<br/>Elsif IBStartup.iState = 170 or IBStartup.iState = 180 then<br/>	iIBS_State	:=	3;						(* Visu Rescan messages, Get process data *)<br/>Else<br/>	iIBS_State	:=	0;						(* Visu Rescan messages, hide *)<br/>End_if;<br/>
									<br/>If TON_ReadDevices.Q and iTotalDevices = iBS_Devices then<br/>	xIBS_DeviceCountOK	:=	True;<br/>Else<br/>	xIBS_DeviceCountOK	:=	False;<br/>End_if;<br/>
									<br/>ProcessData(xActivate:= xActivateProcessData, (* FB_PD_Assign *)<br/>arrInput_PD			:=	arrInputPD,<br/>arrIBS_ConfEntry	:=	arrIB_Configuration);<br/>
									<br/>xActiveProcessData		:=	ProcessData.xActive;<br/>xErrorProcessData		:=	ProcessData.xError;<br/>wDiagCodeProcessData	:=	ProcessData.wDiagCode;<br/>dwAddDiagCodeProcessData:=	ProcessData.dwAddDiagCode;<br/>strDiagCodeProcessData	:=	ProcessData.strDiagCode;<br/>arrOutgoingPD			:=	ProcessData.arrOutput_PD;<br/>arrIB_Configuration		:=	ProcessData.arrIBS_ConfEntry;<br/>
									<br/>If xActivateOutputData or xIBS_DeviceCountOK Then<br/>	arrOutputPD	:= arrOutgoingPD;<br/>Else<br/>	For iLoop := 1 to 512 do<br/>		If iLoop &gt; 9 and not xStepup then<br/>			arrOutputPD[iLoop]	:=	byte#16#C9;	(* Failsafe value 20.1 % during the Startup *)<br/>			xStepup				:=	True;<br/>		Elsif iLoop = 10 then<br/>			arrOutputPD[iLoop]	:=	byte#16#C9;<br/>			xStepup				:=	True;<br/>		Elsif xStepup and iLoop &gt; 9 then<br/>			arrOutputPD[iLoop]	:=	byte#16#00;<br/>			xStepup				:=	False;<br/>		Else<br/>			arrOutputPD[iLoop]	:=	byte#0;<br/>		End_if;<br/>	End_For;	<br/>End_If;<br/>
									<br/>(* Delay the output data ( 8s + 5 * switch scene delay ) *)<br/>tDealy	:=	dint_to_time(dint#8000 + (int_to_dint(iDelay) * dint#5000));<br/>TON_Startup(IN:=xActivateOutputData,PT:=tDealy);<br/>
									<br/>TON_ReadDevices(IN:=((iTotalDevices = iActDevice) and (IBStartup.iState = 0) and xDoneStartup),PT:=t#2s);<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_InterbusStartup_01T" xmlns="http://www.w3.org/1999/xhtml">
							<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_IBC_ProcResp" pouType="functionBlock" pouGroup="Interbus_Startup" lastChange="2015-11-09T11:41:56">
				<interface>
					<localVars retain="false">
						<variable name="wCodeResp" group="Local variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Confirmed request code</p>
								</html>
							</documentation>
						</variable>
						<variable name="wParameterCount" group="Local variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Number of parameters of IB master request</p>
								</html>
							</documentation>
						</variable>
						<variable name="wResult" group="Local variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Result of IB master request</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIndexDst" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index of preprocessed response data array</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIndexEnd" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Position of last parameter in response data array</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIndexSrc" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index of unprocessed response data array</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrorReqCode" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error flag: Send request code &lt;&gt; confirmed request code</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrorResult" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error flag: Result of response not ok</p>
								</html>
							</documentation>
						</variable>
					</localVars>
					<inputVars retain="false">
						<variable name="xActivate" group="Input variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xExecute" group="Input variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger processing of response from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="wCodeReq" group="Input variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Request code that was sent to IB master</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB activated</p>
								</html>
							</documentation>
						</variable>
						<variable name="xNDR" group="Output variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">New data ready</p>
								</html>
							</documentation>
						</variable>
						<variable name="xError" group="Output variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error while processing FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="wCode" group="Output variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Confirmed request code with highest bit filtered out</p>
								</html>
							</documentation>
						</variable>
						<variable name="wDiagCode" group="Output variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic code</p>
								</html>
							</documentation>
						</variable>
						<variable name="wAddDiagCode" group="Output variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Additional diagnostic information</p>
								</html>
							</documentation>
						</variable>
						<variable name="iDataLength" group="Output variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Data length of response</p>
								</html>
							</documentation>
						</variable>
						<variable name="xReady" group="Output variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB ready for new request</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="arrIBC_Resp" group="InOut variables">
							<type>
								<derived name="ARR_IBC_REC_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array containing response from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrData" group="InOut variables">
							<type>
								<derived name="ARR_IBC_DATA_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array containing preprocessed response</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="R_TRIG_Execute" group="FBs, functions">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger processing of response from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="R_TRIG_Activate" group="FBs, functions">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger activation of FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="F_TRIG_Activate" group="FBs, functions">
							<type>
								<derived name="F_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger deactivation of FB</p>
								</html>
							</documentation>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="Inputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">R_TRIG_Activate(CLK := xActivate);<br/>F_TRIG_Activate(CLK := xActivate);<br/>
									<br/>(*Activation of FB*)<br/>IF R_TRIG_Activate.Q THEN<br/>
									<br/>	xActive 		:= TRUE;<br/>	wCodeResp		:= WORD#16#0000;<br/>	wParameterCount	:= WORD#16#0000;<br/>	wResult			:= WORD#16#0000;<br/>	iIndexDst		:= 0;<br/>	iIndexEnd		:= 0;<br/>	iIndexSrc		:= 0;<br/>	xError			:= FALSE;<br/>	xErrorReqCode	:= FALSE;<br/>	xReady			:= FALSE;<br/>	xErrorResult	:= FALSE;<br/>	wCode			:= WORD#16#0000;<br/>	wDiagCode		:= WORD#16#0000;<br/>	wAddDiagCode	:= WORD#16#0000;<br/>	iDataLength		:= 0;<br/>
									<br/>
									<br/>(*Deactivation of FB*)<br/>ELSIF F_TRIG_Activate.Q THEN<br/>
									<br/>	xActive 		:= FALSE;<br/>	wCodeResp		:= WORD#16#0000;<br/>	wParameterCount	:= WORD#16#0000;<br/>	wResult			:= WORD#16#0000;<br/>	iIndexDst		:= 0;<br/>	iIndexEnd		:= 0;<br/>	iIndexSrc		:= 0;<br/>	xError			:= FALSE;<br/>	xErrorReqCode	:= FALSE;<br/>	xReady			:= FALSE;<br/>	xErrorResult	:= FALSE;<br/>	wCode			:= WORD#16#0000;<br/>	wDiagCode		:= WORD#16#0000;<br/>	wAddDiagCode	:= WORD#16#0000;<br/>	iDataLength		:= 0;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Logic">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(*Block for preprocessing interbus control responses*)<br/>
									<br/>IF xActive THEN<br/>
									<br/>	(*Set default output value*)<br/>	xNDR := FALSE;<br/>	<br/>	(*Trigger preprocessing of response*)<br/>	R_TRIG_Execute(CLK := xExecute);<br/>
									<br/>	IF R_TRIG_Execute.Q THEN<br/>
									<br/>		(*Reset response array*)<br/>		FOR iIndexDst := 1 TO 512 DO<br/>
									<br/>			arrData[iIndexDst] := WORD#16#0000;<br/>
									<br/>		END_FOR;<br/>
									<br/>		wCodeResp		:= arrIBC_Resp[1];				(*Confirmed request code*)<br/>		wParameterCount	:= arrIBC_Resp[2];				(*Number of following parameters*)<br/>		wResult			:= arrIBC_Resp[3];				(*Result of request*)<br/>		wCode			:= wCodeResp &amp; WORD#16#7FFF;	(*Request code with masked out first bit*)<br/>
									<br/>		(*Check if sent request code equals confirmed request code*)<br/>		IF (wCode &lt;&gt; wCodeReq) THEN<br/>
									<br/>			xErrorReqCode	:= TRUE;			(*Set error flag*)<br/>
									<br/>		ELSE<br/>
									<br/>			iIndexEnd	:= WORD_TO_INT(wParameterCount) + 2;	(*Determine index of last parameter*)<br/>
									<br/>			(*If result word &lt;&gt; 0 -&gt; error*)<br/>			IF (wResult = WORD#0000) THEN<br/>
									<br/>				iIndexDst := 0;	(*Reset index for array containing preprocessed data*)<br/>
									<br/>				(*Fill array with preprocessed data*)<br/>				FOR iIndexSrc := 4 TO iIndexEnd DO<br/>
									<br/>					iIndexDst 			:= iIndexDst + 1;			(*Increment index*)<br/>					arrData[iIndexDst] 	:= arrIBC_Resp[iIndexSrc];	(*Assign response value to matching item of array*)<br/>
									<br/>				END_FOR;<br/>
									<br/>				iDataLength := iIndexDst;			(*Save data length of preprocessed response*)<br/>				xNDR 		:= TRUE;				(*Set flag: New data ready*)<br/>
									<br/>			ELSE<br/>
									<br/>				xErrorResult	:= TRUE;			(*Set error flag*)<br/>				arrData[1]		:= WORD#16#0000;	(*Reset first value of response array in case of error*)<br/>
									<br/>			END_IF;<br/>
									<br/>		END_IF;<br/>
									<br/>	END_IF;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Outputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(*Error processing*)<br/>IF xErrorReqCode AND xActive THEN<br/>
									<br/>	xError			:= TRUE;			(*Set error flag*)<br/>	xReady			:= FALSE;			(*FB not ready*)<br/>	wDiagCode		:= WORD#16#C010;	(*Set error code*)<br/>	wAddDiagCode	:= wCodeResp;		(*Set additional diagnostic information*)<br/>
									<br/>ELSIF xErrorResult AND xActive THEN<br/>
									<br/>	xError			:= TRUE;			(*Set error flag*)<br/>	xReady			:= FALSE;			(*FB not ready*)<br/>	wDiagCode		:= WORD#16#C020;	(*Set diagnostic code*)<br/>	wAddDiagCode	:= arrIBC_Resp[4];	(*Set additional diagnostic information*)<br/>
									<br/>ELSIF R_TRIG_Execute.Q AND xActive THEN<br/>
									<br/>	xReady			:= FALSE;			(*FB not ready*)<br/>	wDiagCode		:= WORD#16#8200;	(*Set default diagnostic value*)<br/>	wAddDiagCode	:= WORD#16#0000;	(*Set default additional diagnostic information*)<br/>
									<br/>ELSIF NOT R_TRIG_Execute.Q AND xActive THEN<br/>
									<br/>	xReady			:= TRUE;			(*FB ready for new request*)<br/>	wDiagCode		:= WORD#16#8000;	(*Set default diagnostic value*)<br/>	wAddDiagCode	:= WORD#16#0000;	(*Set default additional diagnostic information*)<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_IBC_ProcRespT" xmlns="http://www.w3.org/1999/xhtml">**************************************************************************<br/>
							<br/>Copyright © 2014 Phoenix Contact GmbH &amp; Co. KG D-32825-Blomberg<br/>All rights reserved<br/>
							<br/>**************************************************************************<br/>
							<br/>Name	:	FB_IBC_ProcResp<br/>
							<br/>State	:	[x] evaluation  [ ] released<br/>
							<br/>Development Environment	:<br/>	PC WORX 	:	6.10.200<br/>	Controller	:	ILC 350 PN v3.96F.1, ILC 130 ETH v3.91.04<br/>	Devices		: 	-<br/>
							<br/>**************************************************************************<br/>
							<br/>Change Notes:<br/>
							<br/>Date		Version		Author		Description<br/>--------------------------------------------------------------------------<br/>31.07.17	1.00		PxCE/ACr	initial version<br/>
							<br/>**************************************************************************<br/>
							<br/>The function block FB_IBC_ProcResp preprocesses the data which are received <br/>by the interbus control firmware function block.<br/>The preprocessing contains the following steps:<br/>
							<br/>- verification of the confirmed request code in the response<br/>- check if number of parameters is plausible<br/>- check if result of response is positive<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_InterbusStartup" pouType="functionBlock" pouGroup="Interbus_Startup" lastChange="2016-07-11T10:33:48">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate function block</p>
								</html>
							</documentation>
						</variable>
						<variable name="xInitNewConfig" group="Input Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Read in new interbus configuration</p>
								</html>
							</documentation>
						</variable>
						<variable name="xOS" group="Input Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Select operating system of PLC: 0 - ProConOS; 1 - eClr</p>
								</html>
							</documentation>
						</variable>
						<variable name="tWatchdog" group="Input Parameters">
							<type>
								<TIME/>
							</type>
							<initialValue>
								<simpleValue value="TIME#5s"/>
							</initialValue>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Time of state watchdog</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Function block activated</p>
								</html>
							</documentation>
						</variable>
						<variable name="xReady" group="Output parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Function block ready for new request</p>
								</html>
							</documentation>
						</variable>
						<variable name="xDone" group="Output parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Function block completed</p>
								</html>
							</documentation>
						</variable>
						<variable name="xError" group="Output parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error during processing of function block</p>
								</html>
							</documentation>
						</variable>
						<variable name="wDiagCode" group="Output parameters">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic information</p>
								</html>
							</documentation>
						</variable>
						<variable name="dwAddDiagCode" group="Output parameters">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Additional diagnostic information</p>
								</html>
							</documentation>
						</variable>
						<variable name="strDiagCode" group="Output parameters">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Function block status as string</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="arrIBC_SysConf" group="InOut Parameters">
							<type>
								<derived name="ARR_IBC_DATA_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Preprocessed response from interbus control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrIBS_ConfEntry" group="InOut Parameters">
							<type>
								<derived name="ARR_IBS_CONF_ENTRIES_1_256"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array of structure containing information about connected modules</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="R_TRIG_Activate" group="FBs, functions">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger returns TRUE on activation of FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="R_TRIG_IBCReq" group="FBs, functions">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger on rising edge of interbus control request</p>
								</html>
							</documentation>
						</variable>
						<variable name="R_TRIG_InitNewConfig" group="FBs, functions">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger returns TRUE if new interbus configuration is read in</p>
								</html>
							</documentation>
						</variable>
						<variable name="F_TRIG_Activate" group="FBs, functions">
							<type>
								<derived name="F_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger returns TRUE on deactivation of FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="FB_PD_EvalCompRefList_1" group="FBs, functions">
							<type>
								<derived name="FB_PD_EvalCompRefList"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Function block for evaluation of compact process data reference list</p>
								</html>
							</documentation>
						</variable>
						<variable name="EvalPdDescr_1" group="FBs, functions">
							<type>
								<derived name="FB_PD_EvalDescr"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Function block for evaluation of process data descriptions</p>
								</html>
							</documentation>
						</variable>
						<variable name="TON_WD_StateMachine" group="FBs, functions">
							<type>
								<derived name="TON"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Watchdog timer of FB state machine</p>
								</html>
							</documentation>
						</variable>
						<variable name="Proc_IBC_Resp_1" group="FBs, functions">
							<type>
								<derived name="FB_IBC_ProcResp"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Function block for preprocessing response from interbus control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="IB_CONTROL_1" group="FBs, functions">
							<type>
								<derived name="IB_CONTROL"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Interbus control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xActivateEvalPdDescr" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate function block for evaluation of process data description</p>
								</html>
							</documentation>
						</variable>
						<variable name="xActivateProc_IBC_Resp" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate processing function block for response from interbus control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrConfig" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Data length of response from IB master invalid</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrBusRun" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bus not running after completion of dynamic interbus configuration</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrBusStatus" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bus error: No data transfer</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrIBC" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error reported by interbus control function block</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrParam" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error processing response from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrResp" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error while waiting for response from interbus control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrStateMachineWD" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">State machine watchdog timeout</p>
								</html>
							</documentation>
						</variable>
						<variable name="xErrState" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">State machine in undefined state</p>
								</html>
							</documentation>
						</variable>
						<variable name="xIBC_Err" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Flag: Error detected by interbus control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xIBC_NDR" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Flag: New data received by interbus control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xIBC_Req" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger new interbus control FB request</p>
								</html>
							</documentation>
						</variable>
						<variable name="wIBC_RespCode" group="Local variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Confirmed request code of response from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="wIBC_RespDiagCode" group="Local variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic code of function block for preprocessing response from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="wIBC_RespAddDiagCode" group="Local variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Additional diagnostic code of function block for preprocessing response from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="wDiagnosticStatus" group="Local variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic status word from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="wUsedAttributes" group="Local variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Used attributes for IB master request</p>
								</html>
							</documentation>
						</variable>
						<variable name="xIBC_Resp_Active" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xIBC_Resp_Err" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error reported by FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xIBC_Resp_NDR" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">New data ready</p>
								</html>
							</documentation>
						</variable>
						<variable name="xMoreFollows" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">More data following, further request needed</p>
								</html>
							</documentation>
						</variable>
						<variable name="bBusSegNumber" group="Local variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bus segment number of module</p>
								</html>
							</documentation>
						</variable>
						<variable name="bModule_ID" group="Local variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Module ID</p>
								</html>
							</documentation>
						</variable>
						<variable name="bPDDataTypeMask" group="Local variables">
							<type>
								<BYTE/>
							</type>
							<initialValue>
								<simpleValue value="BYTE#16#C0"/>
							</initialValue>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bitmask for evaluation of PD data type</p>
								</html>
							</documentation>
						</variable>
						<variable name="bPDDataLengthMask" group="Local variables">
							<type>
								<BYTE/>
							</type>
							<initialValue>
								<simpleValue value="BYTE#16#3F"/>
							</initialValue>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bitmask for evaluation of PD data length</p>
								</html>
							</documentation>
						</variable>
						<variable name="bPosNumber" group="Local variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Position number of module in bus segment</p>
								</html>
							</documentation>
						</variable>
						<variable name="xPdEvalActive" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">PD evaluation function block active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xRecPdDescrList" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Receiving process data description list of specified module</p>
								</html>
							</documentation>
						</variable>
						<variable name="xStateWatchdogEn" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Enable watchdog of state machine</p>
								</html>
							</documentation>
						</variable>
						<variable name="dwIBC_AddErr" group="Local variables">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Additional error information of IB control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIBC_RespDataLength" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Data length of response from IB control FB</p>
								</html>
							</documentation>
						</variable>
					</localVars>
					<outputVars retain="false">
						<variable name="iIBS_Modules" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Number of connected interbus modules</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIdxCntMod" group="Local variables">
							<type>
								<INT/>
							</type>
							<initialValue>
								<simpleValue value="INT#1"/>
							</initialValue>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index for number of modules</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<localVars retain="false">
						<variable name="iIndex" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index for selection of module in module structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIndexArrInit" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index for initialisation of arrays</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIndexSysParam" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index for selection of response parameters</p>
								</html>
							</documentation>
						</variable>
						<variable name="iMaxModules" group="Local variables">
							<type>
								<INT/>
							</type>
							<initialValue>
								<simpleValue value="64"/>
							</initialValue>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Maximum number of connected modules</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPDLength" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">PD length of module</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPDDataType" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">PD data type of module</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPntrPDBeginIn" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Pointer to next unassigned input PD byte</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPntrPDBeginOut" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Pointer to next unassigned output PD byte</p>
								</html>
							</documentation>
						</variable>
					</localVars>
					<outputVars retain="false">
						<variable name="iState" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">State variable of state machine</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<localVars retain="false">
						<variable name="iStateLast" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Last processed state before error</p>
								</html>
							</documentation>
						</variable>
						<variable name="udiCountErrState" group="Local variables">
							<type>
								<UDINT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Count activations of error state</p>
								</html>
							</documentation>
						</variable>
						<variable name="xRecComp_PD_RefList" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Receiving compact process data reference list</p>
								</html>
							</documentation>
						</variable>
						<variable name="xActivateEvalCompRefList" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB for evaluation of compact process data reference list</p>
								</html>
							</documentation>
						</variable>
						<variable name="xEvalCompRefListActive" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB for evaluation of compact process data reference list active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xEvalCompRefListError" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error while processing compact process data reference list</p>
								</html>
							</documentation>
						</variable>
						<variable name="xEvalPdDescError" group="Local variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error while processing process data description list</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrIBC_RecData" group="Local variables">
							<type>
								<derived name="ARR_IBC_REC_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array containing response from interbus control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrIBC_SndData" group="Local variables">
							<type>
								<derived name="ARR_IBC_SND_1_8"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array containing request for interbus control FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtDiagnosticStatus" group="Local variables">
							<type>
								<derived name="UDT_IB_DIAG_STATUS"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Structure containing IB diagnostic register variables</p>
								</html>
							</documentation>
						</variable>
						<variable name="iArrayNumber" group="Local variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="i" redundant="true" group="Local variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTest" redundant="true" group="Local variables">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="MASTER_DIAG_STATUS_REG_RUN" group="External variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Datenübertragung ist aktiv</p>
								</html>
							</documentation>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="bModuleID" redundant="true" group="External variables">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="bTest" redundant="true" group="External variables">
							<type>
								<BYTE/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="Inputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">R_TRIG_Activate(CLK := xActivate);<br/>F_TRIG_Activate(CLK := xActivate);<br/>
									<br/>IF R_TRIG_Activate.Q THEN<br/>
									<br/>	xActive 				:= TRUE;<br/>	xErrBusStatus			:= FALSE;<br/>	xErrConfig				:= FALSE;<br/>	xErrIBC					:= FALSE;<br/>	xErrResp				:= FALSE;<br/>	xErrState				:= FALSE;<br/>	xError					:= FALSE;<br/>	xStateWatchdogEn		:= FALSE;<br/>	xDone					:= FALSE;<br/>	xReady					:= FALSE;<br/>	xRecPdDescrList			:= FALSE;<br/>	xRecComp_PD_RefList		:= FALSE;<br/>	xActivateProc_IBC_Resp	:= TRUE;		(*Activate function block for processing of response from interbus controller*)<br/>	xActivateEvalPdDescr	:= TRUE;		(*Activate function block for evaluation of process data description list*)<br/>
									<br/>	dwAddDiagCode			:= DWORD#16#00000000;<br/>	wDiagCode				:= WORD#16#0000;<br/>	strDiagCode				:= '';<br/>	iState					:= 0;<br/>	iMaxModules				:= 256;<br/>	iIdxCntMod 				:= 1;<br/>	iPntrPDBeginIn			:= 1;<br/>	iPntrPDBeginOut			:= 1;<br/>
									<br/>
									<br/>	xActivateProc_IBC_Resp	:= TRUE;<br/>	xActivateEvalPdDescr	:= TRUE;<br/>	xActivateEvalCompRefList:= TRUE;<br/>	xIBC_Req				:= FALSE;<br/>	xIBC_NDR				:= FALSE;<br/>	xIBC_Err				:= FALSE;<br/>	xErrIBC					:= FALSE;<br/>	xIBC_Resp_NDR			:= FALSE;<br/>	xIBC_Resp_Active		:= FALSE;<br/>	xIBC_Resp_Err			:= FALSE;<br/>	xErrResp				:= FALSE;<br/>	xErrBusStatus			:= FALSE;<br/>	xErrBusRun				:= FALSE;<br/>	xMoreFollows			:= FALSE;<br/>	xErrConfig				:= FALSE;<br/>	xStateWatchdogEn		:= FALSE;<br/>	xErrParam				:= FALSE;<br/>	xStateWatchdogEn		:= FALSE;<br/>	xErrStateMachineWD		:= FALSE;<br/>	xRecPdDescrList			:= FALSE;<br/>	xPdEvalActive			:= FALSE;<br/>	bBusSegNumber			:= BYTE#16#00;<br/>	bPosNumber				:= BYTE#16#00;<br/>	bPDDataTypeMask			:= BYTE#16#C0;<br/>	bPDDataLengthMask		:= BYTE#16#3F;<br/>	bModule_ID				:= BYTE#16#00;<br/>	wIBC_RespCode			:= WORD#16#0000;<br/>	wIBC_RespDiagCode		:= WORD#16#0000;<br/>	wIBC_RespAddDiagCode	:= WORD#16#0000;<br/>	wDiagnosticStatus		:= WORD#16#0000;<br/>	wUsedAttributes			:= WORD#16#0000;<br/>	dwIBC_AddErr			:= DWORD#16#0000;<br/>	iState					:= 0;<br/>	iIBC_RespDataLength		:= 0;<br/>	iIBS_Modules			:= 0;<br/>	iPDLength				:= 0;<br/>	iPDDataType				:= 0;<br/>	iStateLast				:= 0;<br/>	iIndex					:= 1;<br/>	iIndexSysParam			:= 1;<br/>	iIdxCntMod				:= 1;<br/>	iPntrPDBeginIn			:= 1;<br/>	iPntrPDBeginOut			:= 1;<br/>	udiCountErrState		:= UDINT#0;<br/>
									<br/>
									<br/>	FOR iIndexArrInit := 1 TO 512 BY 1 DO<br/>
									<br/>		arrIBC_RecData[iIndexArrInit]	:= WORD#16#0000;<br/>
									<br/>	END_FOR;<br/>
									<br/>	FOR iIndexArrInit := 1 TO 8 BY 1 DO<br/>
									<br/>		arrIBC_SndData[iIndexArrInit]	:= WORD#16#0000;<br/>
									<br/>	END_FOR;<br/>
									<br/>	udtDiagnosticStatus.xActive	:= FALSE;<br/>	udtDiagnosticStatus.xBD		:= FALSE;<br/>	udtDiagnosticStatus.xBit0	:= FALSE;<br/>	udtDiagnosticStatus.xBit4	:= FALSE;<br/>	udtDiagnosticStatus.xBit9	:= FALSE;<br/>	udtDiagnosticStatus.xBus	:= FALSE;<br/>	udtDiagnosticStatus.xCtrl	:= FALSE;<br/>	udtDiagnosticStatus.xForce	:= FALSE;<br/>	udtDiagnosticStatus.xPF		:= FALSE;<br/>	udtDiagnosticStatus.xReady	:= FALSE;<br/>	udtDiagnosticStatus.xRun	:= FALSE;<br/>
									<br/>ELSIF F_TRIG_Activate.Q THEN<br/>
									<br/>	xActive					:= FALSE;<br/>	xIBC_Req				:= FALSE;<br/>	xReady					:= FALSE;<br/>	iState					:= 0;<br/>	xErrBusStatus			:= FALSE;<br/>	xErrConfig				:= FALSE;<br/>	xErrIBC					:= FALSE;<br/>	xErrResp				:= FALSE;<br/>	xErrState				:= FALSE;<br/>	xErrBusRun				:= FALSE;<br/>	xError					:= FALSE;<br/>	xStateWatchdogEn		:= FALSE;<br/>	xDone					:= FALSE;<br/>	xReady					:= FALSE;<br/>	xRecComp_PD_RefList		:= FALSE;<br/>	dwAddDiagCode			:= DWORD#16#00000000;<br/>	wDiagCode				:= WORD#16#0000;<br/>	strDiagCode				:= '';<br/>	iIdxCntMod 				:= 1;<br/>	iPntrPDBeginIn			:= 1;<br/>	iPntrPDBeginOut			:= 1;<br/>	xRecPdDescrList			:= FALSE;<br/>	xActivateProc_IBC_Resp	:= TRUE;		(*Activate function block for processing of response from interbus controller*)<br/>	xActivateEvalPdDescr	:= TRUE;		(*Activate function block for evaluation of process data description list*)<br/>	xActivateEvalCompRefList:= FALSE;<br/>
									<br/>	xIBC_Req				:= FALSE;<br/>	xIBC_NDR				:= FALSE;<br/>	xIBC_Err				:= FALSE;<br/>	xErrIBC					:= FALSE;<br/>	xActivateProc_IBC_Resp	:= FALSE;<br/>	xIBC_Resp_NDR			:= FALSE;<br/>	xIBC_Resp_Active		:= FALSE;<br/>	xIBC_Resp_Err			:= FALSE;<br/>	xErrResp				:= FALSE;<br/>	xErrBusStatus			:= FALSE;<br/>	xMoreFollows			:= FALSE;<br/>	xErrConfig				:= FALSE;<br/>	xStateWatchdogEn		:= FALSE;<br/>	xErrParam				:= FALSE;<br/>	xStateWatchdogEn		:= FALSE;<br/>	xErrStateMachineWD		:= FALSE;<br/>	xRecPdDescrList			:= FALSE;<br/>	xPdEvalActive			:= FALSE;<br/>	xActivateEvalPdDescr	:= FALSE;<br/>	bBusSegNumber			:= BYTE#16#00;<br/>	bPosNumber				:= BYTE#16#00;<br/>	bPDDataTypeMask			:= BYTE#16#00;<br/>	bPDDataLengthMask		:= BYTE#16#00;<br/>	bModule_ID				:= BYTE#16#00;<br/>	wIBC_RespCode			:= WORD#16#0000;<br/>	wIBC_RespDiagCode		:= WORD#16#0000;<br/>	wIBC_RespAddDiagCode	:= WORD#16#0000;<br/>	wDiagnosticStatus		:= WORD#16#0000;<br/>	wUsedAttributes			:= WORD#16#0000;<br/>	dwIBC_AddErr			:= DWORD#16#00000000;<br/>	iState					:= 0;<br/>	iIBC_RespDataLength		:= 0;<br/>	iIndex					:= 0;<br/>	iIBS_Modules			:= 0;<br/>	iIndexSysParam			:= 0;<br/>	iPDLength				:= 0;<br/>	iPDDataType				:= 0;<br/>	iMaxModules				:= 0;<br/>	iStateLast				:= 0;<br/>	iIdxCntMod				:= 0;<br/>	iPntrPDBeginIn			:= 0;<br/>	iPntrPDBeginOut			:= 0;<br/>	udiCountErrState		:= UDINT#0;<br/>
									<br/>	FOR iIndexArrInit := 1 TO 512 BY 1 DO<br/>
									<br/>		arrIBC_RecData[iIndexArrInit]	:= WORD#16#0000;<br/>
									<br/>	END_FOR;<br/>
									<br/>	FOR iIndexArrInit := 1 TO 8 BY 1 DO<br/>
									<br/>		arrIBC_SndData[iIndexArrInit]	:= WORD#16#0000;<br/>
									<br/>	END_FOR;<br/>
									<br/>	udtDiagnosticStatus.xActive	:= FALSE;<br/>	udtDiagnosticStatus.xBD		:= FALSE;<br/>	udtDiagnosticStatus.xBit0	:= FALSE;<br/>	udtDiagnosticStatus.xBit4	:= FALSE;<br/>	udtDiagnosticStatus.xBit9	:= FALSE;<br/>	udtDiagnosticStatus.xBus	:= FALSE;<br/>	udtDiagnosticStatus.xCtrl	:= FALSE;<br/>	udtDiagnosticStatus.xForce	:= FALSE;<br/>	udtDiagnosticStatus.xPF		:= FALSE;<br/>	udtDiagnosticStatus.xReady	:= FALSE;<br/>	udtDiagnosticStatus.xRun	:= FALSE;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Logic">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(***** Function blocks *****)<br/>
									<br/>(*************************************************Block interbus control start*************************************************)<br/>IB_CONTROL_1.REQ		:= xIBC_Req;				(*Trigger new interbus control request*)<br/>IB_CONTROL_1.ADD_ERROR	:= dwIBC_AddErr;			(*Additional error information of interbus control function block*)<br/>IB_CONTROL_1.SD_1		:= arrIBC_SndData;			(*Array of word containing interbus control command*)<br/>IB_CONTROL_1.RD_1		:= arrIBC_RecData;			(*Array of word containing received data from interbus control function block*)<br/>
									<br/>IB_CONTROL_1();										(*Call interbus control function block*)<br/>
									<br/>xIBC_NDR				:= IB_CONTROL_1.NDR;		(*Flag reports new received data*)<br/>xIBC_Err				:= IB_CONTROL_1.ERROR;		(*Error detected by interbus control function block*)<br/>dwIBC_AddErr			:= IB_CONTROL_1.ADD_ERROR;	(*Additional error information*)<br/>arrIBC_SndData			:= IB_CONTROL_1.SD_1;		(*Array of word containing interbus control command*)		<br/>arrIBC_RecData			:= IB_CONTROL_1.RD_1;		(*Array of word containing received data from interbus control function block*)<br/>
									<br/>(*Save diagnostic information in case of error during execution of IB Control*)<br/>R_TRIG_InitNewConfig	(CLK := xInitNewConfig);	(*Trigger returns TRUE on request of initialisation of new configuration*)<br/>(*************************************************Block interbus control end*************************************************)<br/>
									<br/>
									<br/>(*************************************************Block process interbus control response start******************************)<br/>Proc_IBC_Resp_1.xActivate		:= xActivateProc_IBC_Resp;				(*Activation of function block*)<br/>Proc_IBC_Resp_1.xExecute		:= xIBC_NDR AND NOT xIBC_Err;			(*Request processing of response from interbus control function block*)<br/>Proc_IBC_Resp_1.wCodeReq		:= arrIBC_SndData[1];					(*Identification code of last interbus control command*)<br/>Proc_IBC_Resp_1.arrIBC_Resp		:= arrIBC_RecData;						(*Array containing raw response from interbus control function block*)<br/>Proc_IBC_Resp_1.arrData			:= arrIBC_SysConf;						(*Array containing processed response from function block*)<br/>
									<br/>Proc_IBC_Resp_1();														(*Call function block for processing of response from function block*)<br/>
									<br/>xIBC_Resp_NDR					:= Proc_IBC_Resp_1.xNDR;				(*New process data available from function block*)<br/>xIBC_Resp_Active				:= Proc_IBC_Resp_1.xActive;				(*Function block activated*)<br/>xIBC_Resp_Err					:= Proc_IBC_Resp_1.xError;				(*Error reported by function block*)<br/>wIBC_RespCode					:= Proc_IBC_Resp_1.wCode;				(*Identification code of answered interbus control command*)<br/>wIBC_RespDiagCode				:= Proc_IBC_Resp_1.wDiagCode;			(*Diagnostic code of function block*)<br/>wIBC_RespAddDiagCode			:= Proc_IBC_Resp_1.wAddDiagCode;		(*Additional diagnostic information*)<br/>iIBC_RespDataLength				:= Proc_IBC_Resp_1.iDataLength;			(*Data length of response from interbus control FB*)<br/>arrIBC_RecData					:= Proc_IBC_Resp_1.arrIBC_Resp;			(*Array containing raw response from interbus control function block*)<br/>arrIBC_SysConf					:= Proc_IBC_Resp_1.arrData;				(*Array containing processed response from function block*)<br/>(*************************************************Block process interbus control response end********************************)<br/>
									<br/>(*************************************************Block evaluation of process data descriptions start************************)<br/>EvalPdDescr_1.xActivate			:= xActivateEvalPdDescr;				(*Activation of function block*)<br/>EvalPdDescr_1.xExecute			:= xIBC_Resp_NDR AND xRecPdDescrList;	(*Trigger evaluation of last received process data descriptions*)<br/>EvalPdDescr_1.arrIBC_SysConf	:= arrIBC_SysConf;						(*Array containing processed response from interbus response processing function block*)<br/>EvalPdDescr_1.arrIBS_ConfEntry	:= arrIBS_ConfEntry;					(*Array containing structure with information about connected modules*)<br/>EvalPdDescr_1.iIdxCntMod		:= iIdxCntMod;							(*Index for selection of module*)<br/>EvalPdDescr_1.iPntrPDBeginIn	:= iPntrPDBeginIn;						(*Pointer to first unassigned byte of input process data*)<br/>EvalPdDescr_1.iPntrPdBeginOut	:= iPntrPDBeginOut;						(*Pointer to first unassigned byte of output process data*)<br/>
									<br/>EvalPdDescr_1();														(*Call function block for evaluation of process data descriptions*)<br/>
									<br/>arrIBC_SysConf					:= EvalPdDescr_1.arrIBC_SysConf;		(*Array containing processed response from interbus response processing function block*)<br/>arrIBS_ConfEntry				:= EvalPdDescr_1.arrIBS_ConfEntry;		(*Array containing structure with information about connected modules*)<br/>xPdEvalActive					:= EvalPdDescr_1.xActive;				(*Function block activated*)<br/>iPntrPDBeginIn					:= EvalPdDescr_1.iPntrPDBeginIn;		(*Pointer to first unassigned byte of input process data*)	<br/>iPntrPDBeginOut					:= EvalPdDescr_1.iPntrPdBeginOut;		(*Pointer to first unassigned byte of output process data*)<br/>xEvalPdDescError				:= EvalPdDescr_1.xError;				(*Error during evaluation of process data description list*)<br/>(*************************************************Block evaluation of process data descriptions end**************************)<br/>
									<br/>(*******************************************Block evaluation of compact process data reference list start********************)<br/>FB_PD_EvalCompRefList_1.xActivate 			:= xActivateEvalCompRefList;<br/>FB_PD_EvalCompRefList_1.xExecute			:= xIBC_Resp_NDR AND xRecComp_PD_RefList;<br/>FB_PD_EvalCompRefList_1.arrIBC_SysConf		:= arrIBC_SysConf;<br/>FB_PD_EvalCompRefList_1.arrIBS_ConfEntry	:= arrIBS_ConfEntry;<br/>
									<br/>FB_PD_EvalCompRefList_1();<br/>
									<br/>arrIBC_SysConf								:= FB_PD_EvalCompRefList_1.arrIBC_SysConf;<br/>arrIBS_ConfEntry							:= FB_PD_EvalCompRefList_1.arrIBS_ConfEntry;<br/>xEvalCompRefListActive						:= FB_PD_EvalCompRefList_1.xActive;<br/>xEvalCompRefListError						:= FB_PD_EvalCompRefList_1.xError;<br/>
									<br/>IF xActive THEN<br/>
									<br/>	CASE iState OF<br/>
									<br/>		0:	(*Idle state*)<br/>
									<br/>			xIBC_Req := FALSE;<br/>	<br/>			(*Initialise variables*)<br/>			IF R_TRIG_InitNewConfig.Q THEN<br/>
									<br/>				iState 	:= iState + 10; (*Jump into next step*)<br/>				xDone	:= FALSE;<br/>
									<br/>			END_IF;<br/>
									<br/>	<br/>		10:	(*Send Get_Version_Info command to device*)<br/>
									<br/>			arrIBC_SndData[1] 		:= WORD#16#032A;	(*032A: Get_Version_Info*)<br/>			arrIBC_SndData[2] 		:= WORD#16#0000;	(*0000: No further parameters*)<br/>
									<br/>			xIBC_Req 				:= TRUE;			(*Send interbus control request*)<br/>
									<br/>			iState 					:= iState + 10;		(*Jump into next step*)<br/>
									<br/>		20:	(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;						(*Reset interbus control function block request*)<br/>				(*Check if interbus control function block is reporting error*)<br/>				IF NOT xIBC_Resp_Err THEN<br/>
									<br/>					iState 		:= iState + 10;			(*Jump into next step*)<br/>
									<br/>				ELSE<br/>					xErrResp 	:= TRUE;				(*Set error flag*)<br/>					iState		:= 999;					(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>
									<br/>		30:	(*Send request to receive exclusive rights*)<br/>
									<br/>			arrIBC_SndData[1]	:= WORD#16#014F;		(*014F: Change exclusive rights*)<br/>			arrIBC_SndData[2]	:= WORD#16#0001;		(*0001: One parameter following*)<br/>			arrIBC_SndData[3]	:= WORD#16#0001;		(*0001: Turn on exclusive rights*)<br/>
									<br/>			xIBC_Req 			:= TRUE;				(*Send interbus control request*)<br/>
									<br/>			iState 				:= iState + 10;			(*Jump into next step*)<br/>
									<br/>		40:	(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;						(*Reset interbus control function block request*)<br/>				(*Check if interbus control function block is reporting error*)<br/>				IF NOT xIBC_Resp_Err THEN<br/>
									<br/>					iState 		:= iState + 10;			(*Jump into next step*)<br/>
									<br/>				ELSE<br/>					<br/>					xErrResp 	:= TRUE;				(*Set error flag*)<br/>					iState		:= 999;					(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>
									<br/>		50:	(*Send alarm stop request to interbus master*)<br/>	<br/>			arrIBC_SndData[1]	:= WORD#16#1303;		(*1303: Alarm stop*)<br/>			arrIBC_SndData[2]	:= WORD#16#0000;		(*0000: No further parameters following*)<br/>
									<br/>			xIBC_Req			:= TRUE;				(*Trigger interbus control request*)<br/>
									<br/>			iState				:= iState + 10;			(*Jump into next step*)<br/>
									<br/>
									<br/>		60:	(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;						(*Reset interbus control function block request*)<br/>				(*Check if interbus control function block is reporting error*)<br/>				IF NOT xIBC_Resp_Err THEN<br/>
									<br/>					iState 		:= iState + 10;			(*Jump into next step*)<br/>
									<br/>				ELSE<br/>					<br/>					xErrResp 	:= TRUE;				(*Set error flag*)<br/>					iState		:= 999;					(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>		70:	(*Send create configuration request to interbus master*)<br/>		<br/>			arrIBC_SndData[1]	:= WORD#16#0710;	(*0710: Create configuration request*)<br/>			arrIBC_SndData[2]	:= WORD#16#0001;	(*0001: One further parameter following*)<br/>			arrIBC_SndData[3]	:= WORD#16#0001;	(*0001: Set frame reference number to 1*)<br/>
									<br/>			xIBC_Req			:= TRUE;			(*Trigger interbus control request*)<br/>
									<br/>			iState 				:= iState +10;		(*Jump into next step*)<br/>
									<br/>		80:	(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;						(*Reset interbus control function block request*)<br/>				(*Check if interbus control function block is reporting error*)<br/>				IF NOT xIBC_Resp_Err THEN<br/>
									<br/>					iState 		:= iState + 10;			(*Jump into next step*)<br/>
									<br/>				ELSE<br/>
									<br/>					xErrResp 	:= TRUE;				(*Set error flag*)<br/>					iState		:= 999;					(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>
									<br/>		90:	(*Send start data transfer request to interbus master*)<br/>
									<br/>			arrIBC_SndData[1]	:= WORD#16#0701;		(*0701: Start data transfer*)<br/>			arrIBC_SndData[2]	:= WORD#16#0000;		(*0000: No further parameters following*)<br/>
									<br/>			xIBC_Req			:= TRUE;				(*Trigger interbus control request*)<br/>
									<br/>			iState 				:= iState + 10;			(*Jump into next step*)<br/>
									<br/>		100:(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;						(*Reset interbus control function block request*)<br/>				(*Check if interbus control function block is reporting error*)<br/>				IF NOT xIBC_Resp_Err THEN<br/>
									<br/>					iState 		:= iState + 10;			(*Jump into next step*)<br/>
									<br/>				ELSE<br/>					<br/>					xErrResp 	:= TRUE;				(*Set error flag*)<br/>					iState		:= 999;					(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>		110:(*Read content of diagnostic status register with read value request*)<br/>
									<br/>
									<br/>			arrIBC_SndData[1] := WORD#16#0351;	(*0351: Read value request*)<br/>			arrIBC_SndData[2] := WORD#16#0002;	(*0002: 2 parameters following*)<br/>			arrIBC_SndData[3] := WORD#16#0001;	(*0001: Read out status of 1 variable*)<br/>
									<br/>			arrIBC_SndData[4] := WORD#16#0104;	(*0104: Identification code of diagnostic register variable*)<br/>
									<br/>			xIBC_Req 	:= TRUE;				(*Trigger interbus control request*)<br/>					<br/>			iState	:= iState + 10;				(*Jump into next step*)<br/>
									<br/>		120:(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;	(*Reset interbus control function block request*)<br/>				(*Check if interbus control function block is reporting error*)<br/>				IF NOT xIBC_Resp_Err THEN<br/>					(*Check if response has correct data length*)<br/>					IF (iIBC_RespDataLength &gt;= 3) THEN<br/>
									<br/>						(*Check if response is matching request*)<br/>						IF 	(arrIBC_SysConf[1] = WORD#16#0001)		(*0001: Read out status of 1 variable*)<br/>						AND	(arrIBC_SysConf[2] = WORD#16#0104) THEN	(*0104: Identification code of diagnostic register variable*)<br/>
									<br/>							(*Variables available as system variables in global variables sheet, too*)<br/>							wDiagnosticStatus 			:= arrIBC_SysConf[3];		(*Copy diagnostic status word to appropriate variable*)<br/>
									<br/>							udtDiagnosticStatus.xPF 	:= wDiagnosticStatus.X1;	(*Status of peripheral error*)<br/>							udtDiagnosticStatus.xBus 	:= wDiagnosticStatus.X2;	(*Status of bus error*)<br/>							udtDiagnosticStatus.xCtrl 	:= wDiagnosticStatus.X3;	(*Status of control device error*)<br/>
									<br/>							udtDiagnosticStatus.xRun 	:= wDiagnosticStatus.X5;	(*Status of data transfer acitve flag*) <br/>							udtDiagnosticStatus.xActive	:= wDiagnosticStatus.X6;	(*Status of selected configuration ready flag*)<br/>							udtDiagnosticStatus.xReady 	:= wDiagnosticStatus.X7;	(*Status of control device ready flag*)<br/>
									<br/>							udtDiagnosticStatus.xBD 	:= wDiagnosticStatus.X8;<br/>							udtDiagnosticStatus.xForce 	:= wDiagnosticStatus.X10;<br/>
									<br/>						END_IF;<br/>
									<br/>						(*Check if data transfer is active*)<br/>						IF udtDiagnosticStatus.xRun THEN<br/>
									<br/>							iState	:= iState + 10;	(*Jump into next step*)<br/>							<br/>							(*Reset buffer for received data*)<br/>							FOR iIndex := 1 TO 512 DO<br/>
									<br/>								arrIBC_RecData[iIndex] := WORD#16#0000;<br/>
									<br/>							END_FOR;<br/>
									<br/>						ELSE<br/>
									<br/>							xErrBusStatus 	:= TRUE;	(*Set bus error flag*)<br/>							iState 			:= 999;		(*Jump into error state*)<br/>
									<br/>						END_IF;<br/>
									<br/>					ELSE<br/>
									<br/>						xErrConfig 	:= TRUE;	(*Set inappropriate response error flag*)<br/>						iState 		:= 999;		(*Jump into error state*)<br/>
									<br/>					END_IF;<br/>				<br/>				ELSE<br/>
									<br/>					xErrResp 	:= TRUE;	(*Set response error flag*)<br/>					iState		:= 999;		(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>			<br/>			END_IF;<br/>
									<br/>			iTest:= 120;<br/>
									<br/>		130:(*Read out information about connected interbus devices with complete read configuration request*)<br/>
									<br/>			arrIBC_SndData[1]	:= WORD#16#030B;	(*030B: Complete read configuration*)<br/>			arrIBC_SndData[2]	:= WORD#16#0001;	(*0001: One parameter following*)<br/>			arrIBC_SndData[3]	:= WORD#16#0003;	(*0003: Selected used attributes: Device no., device code*)<br/>
									<br/>			xIBC_Req			:= TRUE;			(*Trigger interbus control request*)<br/>
									<br/>			iState 				:= iState +10;		(*Jump into next state*)<br/>
									<br/>		140:(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;	(*Reset interbus control function block request*)<br/>				(*Check if error occured during processing of response*)<br/>				IF NOT xIBC_Resp_Err THEN<br/>					(*Check if response length is valid*)<br/>					IF (iIBC_RespDataLength &gt;= 5) THEN<br/>
									<br/>						xMoreFollows	:= arrIBC_SysConf[1].X0;												(*Flag signalising more data is following, further request needed*)<br/>						wUsedAttributes	:= arrIBC_SysConf[3];													(*Read out selection of attributes*)<br/>						iIBS_Modules	:= UINT_TO_INT(WORD_TO_UINT(arrIBC_SysConf[5]));						(*Read out number of connected interbus modules*)<br/>						iIndexSysParam 	:= 6;																	(*Set index of system parameter array to 6: Start with device number of first module*)<br/>						(*Process all connected modules*)<br/>						FOR iIndex := 1 TO iIBS_Modules DO<br/>							<br/>							(*Leave loop if index variable containing invalid value*)<br/>							IF (iIndex &gt; iMaxModules) THEN<br/>								<br/>								iState := 999;<br/>								EXIT;<br/>
									<br/>							END_IF;<br/>
									<br/>							(*Check if device number is selected as attribute*)<br/>							IF wUsedAttributes.X0 THEN<br/>
									<br/>								bBusSegNumber							:= arrIBC_SysConf[iIndexSysParam].B1;	(*Read out bus segment number*)<br/>								bPosNumber								:= arrIBC_SysConf[iIndexSysParam].B0;	(*Read out position number in segment*)<br/>								arrIBS_ConfEntry[iIndex].bBusSegm		:= bBusSegNumber;						(*Write bus segment number into module structure*)<br/>								arrIBS_ConfEntry[iIndex].bPosNum		:= bPosNumber;							(*Write position number into module structure*)<br/>								iIndexSysParam 							:= iIndexSysParam + 1;					(*Select next system parameter*)<br/>							(*If attribute is not used write 0 into parameter variables, select next system parameter*)<br/>							ELSE<br/>
									<br/>								arrIBS_ConfEntry[iIndex].bBusSegm		:= BYTE#16#00;<br/>								arrIBS_ConfEntry[iIndex].bPosNum		:= BYTE#16#00;<br/>								iIndexSysParam 							:= iIndexSysParam + 1;<br/>
									<br/>							END_IF;<br/>							(*Check if device code is selected as attribute*)<br/>							IF wUsedAttributes.X1 THEN<br/>							<br/>								iPDDataType								:= UINT_TO_INT(BYTE_TO_UINT(bPDDataTypeMask AND arrIBC_SysConf[iIndexSysParam].B1));	(*Read out data type of process data*)<br/>								iPDLength								:= UINT_TO_INT(BYTE_TO_UINT(bPDDataLengthMask AND arrIBC_SysConf[iIndexSysParam].B1));	(*Read out length of process data*)<br/>								bModuleID								:= arrIBC_SysConf[iIndexSysParam].B0;													(*Read out module id code*)<br/>								arrIBS_ConfEntry[iIndex].bModuleID		:= bModuleID;																			(*Write module id code into module structure*)<br/>								iIndexSysParam 							:= iIndexSysParam + 1;																	(*Select next system parameter*)<br/>								(*Check process data data type for further processing*)<br/>								CASE iPDDataType OF<br/>								(*0: Word*)<br/>								0:<br/>
									<br/>									arrIBS_ConfEntry[iIndex].iPdLenCompl := 16 * iPDLength;<br/>								(*128: Byte*)<br/>								128:<br/>
									<br/>									arrIBS_ConfEntry[iIndex].iPdLenCompl := 8 * iPDLength;<br/>								(*64: Nibble*)<br/>								64:<br/>
									<br/>									arrIBS_ConfEntry[iIndex].iPdLenCompl := 4 * iPDLength;<br/>								(*192: Bit*)<br/>								192:<br/>
									<br/>									arrIBS_ConfEntry[iIndex].iPdLenCompl := iPDLength;<br/>													<br/>								END_CASE;<br/>
									<br/>							(*If attribute is not used write 0 into parameter variables, select next system parameter*)<br/>							ELSE<br/>
									<br/>								arrIBS_ConfEntry[iIndex].bModuleID		:= BYTE#16#00;<br/>								arrIBS_ConfEntry[iIndex].iPdLenCompl	:= 0;<br/>								iIndexSysParam 							:= iIndexSysParam + 1;<br/>
									<br/>							END_IF;<br/>
									<br/>						END_FOR;<br/>						(*Jump into next step*)<br/>						IF NOT xOS THEN<br/>
									<br/>							iState := iState + 1;<br/>						<br/>						ELSE<br/>
									<br/>							iState := iState + 210;<br/>
									<br/>						END_IF;<br/>
									<br/>					ELSE<br/>						(*If response length invalid -&gt; error*)<br/>						xErrConfig 	:= TRUE;<br/>						iState		:= 999;<br/>
									<br/>					END_IF;<br/>
									<br/>				ELSE<br/>					(*Error during evaluation of response*)<br/>					xErrResp 		:= TRUE;<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>		141: arrIBC_SndData[1]	:= WORD#16#030B;	<br/>			arrIBC_SndData[2]	:= WORD#16#0001;<br/>			arrIBC_SndData[3]	:= WORD#16#0008;<br/>			arrIBC_SndData[4]	:= WORD#16#0000;<br/>			arrIBC_SndData[5]	:= WORD#16#0000;<br/>
									<br/>				xIBC_Req 			:= TRUE;			(*Trigger interbus control FB request*)<br/>				iState 				:= 142;		(*Jump into next step*)<br/>
									<br/>		142: 	IF xIBC_NDR THEN<br/>
									<br/>				xIBC_Req	:= FALSE;	(*Reset interbus control function block trigger*)<br/>
									<br/>
									<br/>				FOR i := 1 TO iIBS_Modules BY 1<br/>				DO<br/>					iArrayNumber := 5 + i;<br/>					arrIBS_ConfEntry[i].wModuleLevel  := arrIBC_SysConf[iArrayNumber];<br/>				END_FOR;<br/>				iState 				:= 150;		(*Jump into next step*)<br/>
									<br/>			end_if;<br/>
									<br/>		150:(*Send request for process data description header of specified module to interbus master*)<br/>			(*Check if module has process data*)<br/>			IF (arrIBS_ConfEntry[iIdxCntMod].iPdLenCompl &gt; 0) THEN<br/>
									<br/>				arrIBC_SndData[1]	:= WORD#16#0323;	(*0323: Get process data description list request*)<br/>				arrIBC_SndData[2]	:= WORD#16#0003;	(*0003: 3 parameters following*)<br/>				arrIBC_SndData[3]	:= WORD#16#0000 OR BYTE_TO_WORD(arrIBS_ConfEntry[iIdxCntMod].bPosNum) OR SHL(BYTE_TO_WORD(arrIBS_ConfEntry[iIdxCntMod].bBusSegm),8);	(*Specify address of selected module*)<br/>				arrIBC_SndData[4]	:= WORD#16#0000;	(*0000: Only read header of process data description*)<br/>				arrIBC_SndData[5]	:= WORD#16#0000;	(*0000: Only read header of process data description*)<br/>
									<br/>				xIBC_Req 			:= TRUE;			(*Trigger interbus control FB request*)<br/>				iState 				:= iState + 10;		(*Jump into next step*)<br/>
									<br/>			(*Select next module if module has no process data*)<br/>			ELSE<br/>				(*Skip next step if last module has no process data*)<br/>				IF (iIdxCntMod = iIBS_Modules) THEN<br/>
									<br/>					iIdxCntMod	:= 1;				(*Increment index for selection of module*)<br/>					iState 		:= iState + 20;		(*Skip next step, perform next operation*)<br/>
									<br/>				END_IF;	<br/>
									<br/>				iIdxCntMod 	:= iIdxCntMod + 1;	(*Select next module*)<br/>
									<br/>			END_IF;<br/>
									<br/>		160:(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_NDR THEN<br/>
									<br/>				xIBC_Req	:= FALSE;	(*Reset interbus control function block trigger*)<br/>				(*Check for error during processing of response from IB master*)<br/>				IF NOT xIBC_Resp_Err THEN<br/>					(*Check if length of response is valid*)<br/>					IF (iIBC_RespDataLength &gt;= 4) THEN<br/>
									<br/>						xMoreFollows							:= arrIBC_SysConf[1].X0;						(*True -&gt; not all data received, further receive request necessary*)<br/>						arrIBS_ConfEntry[iIdxCntMod].iCntPdd 	:= UINT_TO_INT(WORD_TO_UINT(arrIBC_SysConf[4]));(*Read out number of process data descriptions*)<br/>						(*Check if index of selected interbus module &lt; number of connected interbus modules*)<br/>						(*Jump into previous step to request process data descriptions*)<br/>						IF (iIdxCntMod &lt; iIBS_Modules) THEN<br/>
									<br/>							iIdxCntMod 	:= iIdxCntMod + 1;	(*Increment index for selection of module*)<br/>							iState 		:= iState - 10;		(*Jump into previous step*)<br/>						(*Jump into next step if process data descriptions of all modules have been received*)<br/>						ELSE<br/>
									<br/>							iIdxCntMod	:= 1;				(*Increment index for selection of module*)<br/>							iState 		:= iState + 10;		(*Jump into next step*)<br/>
									<br/>						END_IF;<br/>					(*Jump into error state if length of received data invalid*)<br/>					ELSE<br/>
									<br/>						xErrConfig 	:= TRUE;	(*Set error flag*)<br/>						iState		:= 999;		(*Jump into error state*)<br/>
									<br/>					END_IF;<br/>				(*Jump into error state if error while receiving response from IB control FB*) <br/>				ELSE<br/>
									<br/>					xErrResp 	:= TRUE;	(*Set error flag*)<br/>					iState		:= 999;		(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>		170:(*Send request for process data descriptions of specified module*)<br/>			(*Check if module has process data*)<br/>			IF (arrIBS_ConfEntry[iIdxCntMod].iPdLenCompl &gt; 0) THEN<br/>
									<br/>				arrIBC_SndData[1]	:= WORD#16#0323;	(*0323: Get process data description list request*)<br/>				arrIBC_SndData[2]	:= WORD#16#0003;	(*0003: 3 parameters following*)<br/>				arrIBC_SndData[3]	:= WORD#16#0000 OR BYTE_TO_WORD(arrIBS_ConfEntry[iIdxCntMod].bPosNum) OR SHL(BYTE_TO_WORD(arrIBS_ConfEntry[iIdxCntMod].bBusSegm),8);	(*Specify module address for process data description request*)<br/>				bTest	:=	arrIBS_ConfEntry[iIdxCntMod].bPosNum;<br/>				arrIBC_SndData[4]	:= WORD#16#0001;	(*0001: Start with process data description index 0001*)<br/>				arrIBC_SndData[5]	:= UINT_TO_WORD(INT_TO_UINT(arrIBS_ConfEntry[iIdxCntMod].iCntPdd));	(*Number of process data descriptions to be received*)<br/>
									<br/>				xIBC_Req 			:= TRUE;			(*Trigger interbus control FB request*)<br/>				xRecPdDescrList		:= TRUE;			(*Set flag: Process data description list is being received*)<br/>
									<br/>				iState 				:= iState + 10;		(*Jump into next step*)<br/>
									<br/>			ELSE<br/>				(*Skip next step if last module has no process data*)<br/>				IF (iIdxCntMod = iIBS_Modules) THEN<br/>
									<br/>					iIdxCntMod	:= 1;				(*Increment index for selection of module*)<br/>					iState 		:= iState + 20;		(*Skip next step, perform next operation*)<br/>
									<br/>				END_IF;	<br/>
									<br/>				iIdxCntMod := iIdxCntMod + 1;		(*Increment index for selection of module*)<br/>
									<br/>			END_IF;<br/>
									<br/>		180:(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;	(*Reset interbus control function block trigger*)<br/>				(*Check for error during processing of response from IB master*)<br/>				IF NOT xIBC_Resp_Err THEN<br/>					(*Check if length of response is valid*)<br/>					IF (iIBC_RespDataLength &gt;= 4) THEN<br/>
									<br/>						xMoreFollows	:= arrIBC_SysConf[1].X0;	(*True -&gt; not all data received, further receive request necessary*)<br/>						xRecPdDescrList	:= FALSE;					(*Reset flag: Receiving process of process data description list finished*)<br/>						(*Jump into next step after processing of all process data descriptions*)<br/>						IF xMoreFollows THEN<br/>
									<br/>							iState				:= iState - 10;		(*Jump into previous step to receive remaining process data descriptions*)<br/>
									<br/>						ELSIF (iIdxCntMod = iIBS_Modules) THEN<br/>
									<br/>							iState				:= iState + 10;		(*Jump into next step*)<br/>
									<br/>						ELSE<br/>
									<br/>							iIdxCntMod 			:= iIdxCntMod + 1;	(*Select next module*)<br/>							iState				:= iState - 10;		(*Jump into previous step to receive process data descriptions of next module*)<br/>
									<br/>						END_IF;<br/>					(*Jump into error state if length of received data invalid*)<br/>					ELSE<br/>
									<br/>						xErrConfig 	:= TRUE;	(*Set error flag*)<br/>						iState		:= 999;		(*Jump into error state*)<br/>
									<br/>					END_IF;<br/>
									<br/>				ELSE<br/>
									<br/>					xErrResp 	:= TRUE;	(*Error while receiving response from IB control function block*)<br/>					iState		:= 999;		(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>		350:<br/>
									<br/>			arrIBC_SndData[1]	:= WORD#16#0329;	(*0329: Get process data description list request*)<br/>			arrIBC_SndData[2]	:= WORD#16#0001;	(*0001: 1 parameter following*)<br/>			arrIBC_SndData[3]	:= WORD#16#1000;<br/>
									<br/>			xRecComp_PD_RefList	:= TRUE;			(*Flag: Receiving compact process data reference list*)<br/>			xIBC_Req 			:= TRUE;			(*Trigger interbus control FB request*)<br/>			iState 				:= iState + 10;		(*Jump into next step*)<br/>
									<br/>		360:(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;				(*Reset interbus control function block trigger*)<br/>
									<br/>				IF NOT xIBC_Resp_Err THEN<br/>
									<br/>					iState 		:= iState + 10;	(*Jump into next step*)<br/>
									<br/>				ELSE<br/>					<br/>					xErrResp 	:= TRUE;		(*Error while receiving response from IB control function block*)<br/>					iState		:= 999;			(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>			<br/>		370:<br/>
									<br/>			arrIBC_SndData[1]	:= WORD#16#0329;	(*0323: Get process data description list request*)<br/>			arrIBC_SndData[2]	:= WORD#16#0001;	(*0003: 3 parameters following*)<br/>			arrIBC_SndData[3]	:= WORD#16#2000;<br/>
									<br/>			xIBC_Req 			:= TRUE;			(*Trigger interbus control FB request*)<br/>			iState 				:= iState + 10;		(*Jump into next step*)<br/>			iTest				:= 370;<br/>
									<br/>
									<br/>		380:<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;				(*Reset interbus control function block trigger*)<br/>
									<br/>				IF NOT xIBC_Resp_Err THEN<br/>
									<br/>					xRecComp_PD_RefList	:= FALSE;		(*Flag: Receiving compact process data reference list*)<br/>					iState 				:= 190;			(*Jump into next step*)<br/>
									<br/>				ELSE<br/>					<br/>					xErrResp 			:= TRUE;		(*Error while receiving response from IB control function block*)<br/>					iState				:= 999;			(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>
									<br/>			(*TODO: Check modules with input and output data*)<br/>			(*TODO: test with RFC + safe components*)<br/>			(*TODO: test with modules containing more than 1 process data description*)<br/>
									<br/>		190:(*Send release exclusive rights request to IB master*)<br/>
									<br/>			arrIBC_SndData[1]	:= WORD#16#014F;	(*014F: Change exclusive rights*)<br/>			arrIBC_SndData[2]	:= WORD#16#0001;	(*0001: One parameter following*)<br/>			arrIBC_SndData[3]	:= WORD#16#0000;	(*0000: Release exclusive rights*)<br/>
									<br/>			xIBC_Req 			:= TRUE;			(*Trigger interbus control FB request*)<br/>
									<br/>			iState 				:= iState + 10;		(*Jump into next step*)<br/>
									<br/>		200:(*Wait for response from interbus control function block*)<br/>
									<br/>			IF xIBC_Resp_NDR THEN<br/>
									<br/>				xIBC_Req := FALSE;				(*Reset interbus control function block trigger*)<br/>
									<br/>				IF NOT xIBC_Resp_Err THEN<br/>
									<br/>					iState 		:= iState + 10;	(*Jump into next step*)<br/>
									<br/>				ELSE<br/>					<br/>					xErrResp 	:= TRUE;		(*Error while receiving response from IB control function block*)<br/>					iState		:= 999;			(*Jump into error state*)<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>		210:(*Check if interbus is running*)<br/>
									<br/>			IF MASTER_DIAG_STATUS_REG_RUN THEN<br/>
									<br/>				xDone 		:= TRUE;	(*Confirm processing of FB complete*)<br/>				iState		:= 0;<br/>
									<br/>			ELSE<br/>
									<br/>				xErrBusRun	:= TRUE;	(*Set error flag if interbus not running*)<br/>				iState		:= 999;		(*Jump into error state*)<br/>
									<br/>			END_IF;<br/>
									<br/>		999:(*Error state*)<br/>
									<br/>			xIBC_Req 			:= FALSE;	(*Reset interbus control FB trigger*)<br/>			xStateWatchdogEn 	:= FALSE;	(*Disable watchdog of state machine*)<br/>			iState 				:= iState;	(*Remain in error state until restart of FB*)<br/>
									<br/>		ELSE<br/>
									<br/>			iState 		:= 999;				(*Jump into error state if undefined state activated*)<br/>			xErrState	:= TRUE;			(*Set flag: State undefined*)<br/>
									<br/>	END_CASE;<br/>
									<br/>
									<br/>	IF (tWatchdog = TIME#0s) THEN<br/>
									<br/>		xStateWatchdogEn	:= FALSE;<br/>
									<br/>	ELSIF ((iState &gt; 0)	AND (iState &lt; 500) AND (iState = iStateLast)) THEN<br/>
									<br/>		xStateWatchdogEn	:= TRUE;<br/>
									<br/>	ELSE<br/>
									<br/>		xStateWatchdogEn	:= FALSE;<br/>
									<br/>	END_IF;<br/>
									<br/>	TON_WD_StateMachine.IN := xStateWatchdogEn;<br/>	TON_WD_StateMachine.PT := tWatchdog;<br/>	TON_WD_StateMachine();<br/>
									<br/>	IF TON_WD_StateMachine.Q THEN<br/>
									<br/>		(* count each new failure and store last status *)<br/>		udiCountErrState 	:= udiCountErrState + UDINT#1;<br/>		xErrStateMachineWD 	:= TRUE;<br/>
									<br/>		(* further handling in case of a failure *)<br/>		iState 				:= 999;<br/>
									<br/>	END_IF;<br/>
									<br/>END_IF;<br/>
									<br/>R_TRIG_IBCReq(CLK := xIBC_Req);<br/>
									<br/>IF R_TRIG_IBCReq.Q THEN<br/>
									<br/>	FOR iIndex := 1 TO 512 DO<br/>
									<br/>		arrIBC_RecData[iIndex] := WORD#16#0000;<br/>
									<br/>	END_FOR;<br/>
									<br/>END_IF;<br/>
									<br/>(* remember current step number *)<br/>IF NOT (iState = 999) THEN<br/>
									<br/>	iStateLast := iState;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Outputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(*Set FB outputs + Error processing*)<br/>
									<br/>IF xErrParam THEN<br/>
									<br/>	xReady 				:= FALSE;<br/>	xError				:= TRUE;<br/>	wDiagCode			:= WORD#16#0C10;<br/>	dwAddDiagCode		:= DWORD#16#00000000;<br/>	strDiagCode			:= 'Invalid input parameters';<br/>
									<br/>ELSIF xErrIBC OR xIBC_Err THEN<br/>
									<br/>	xReady				:= FALSE;<br/>	xError				:= TRUE;<br/>	wDiagCode			:= WORD#16#0C20;			(*Assign diagnostic code for interbus control FB error*)<br/>	dwAddDiagCode		:= dwIBC_AddErr;			(*Return additional error information from IB control function block*)<br/>	strDiagCode			:= 'Error processing FB IB Control';<br/>
									<br/>ELSIF xErrResp OR xIBC_Resp_Err THEN<br/>
									<br/>	xReady 				:= FALSE;<br/>	xError				:= TRUE;<br/>	wDiagCode			:= WORD#16#0C30;<br/>	dwAddDiagCode		:= WORD_TO_DWORD(wIBC_RespDiagCode);<br/>	strDiagCode			:= 'Error processing response from IB master';<br/>
									<br/>ELSIF xErrConfig THEN<br/>
									<br/>	xReady				:= FALSE;<br/>	xError				:= TRUE;<br/>	wDiagCode			:= WORD#16#0C40;<br/>	dwAddDiagCode		:= INT_TO_DWORD(iIBC_RespDataLength);<br/>	strDiagCode			:= 'Invalid response data length from IB master';<br/>
									<br/>ELSIF xErrBusStatus THEN<br/>
									<br/>	xReady				:= FALSE;<br/>	xError				:= TRUE;<br/>	wDiagCode			:= WORD#16#0C50;<br/>	dwAddDiagCode		:= DWORD#16#00000000;<br/>	dwAddDiagCode.X0	:= udtDiagnosticStatus.xReady;<br/>	dwAddDiagCode.X1	:= udtDiagnosticStatus.xActive;<br/>	dwAddDiagCode.X2	:= udtDiagnosticStatus.xRun;<br/>	strDiagCode			:= 'Wrong bus status';<br/>
									<br/>ELSIF xDone THEN<br/>
									<br/>	xReady				:= TRUE;<br/>	wDiagCode			:= WORD#16#1000;<br/>	dwAddDiagCode		:= INT_TO_DWORD(iState);<br/>	strDiagCode			:= 'Bus started';<br/>
									<br/>ELSIF (iState &gt;= 10) AND (iState &lt;= 30) THEN<br/>
									<br/>	xReady				:= FALSE;<br/>	wDiagCode			:= WORD#16#8100;<br/>	dwAddDiagCode		:= INT_TO_DWORD(iState);<br/>	strDiagCode			:= 'Initialization';<br/>
									<br/>ELSIF (iState &gt; 30) AND (iState &lt; 999) THEN<br/>
									<br/>	xReady				:= FALSE;<br/>	wDiagCode			:= WORD#16#8200;<br/>	dwAddDiagCode		:= INT_TO_DWORD(iState);<br/>	strDiagCode			:= 'Busy';<br/>
									<br/>ELSIF xActive THEN<br/>
									<br/>	xReady				:= TRUE;<br/>	wDiagCode			:= WORD#16#8000;<br/>	dwAddDiagCode		:= DWORD#16#00000000;<br/>	strDiagCode			:= 'Ready';<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_InterbusStartupT" xmlns="http://www.w3.org/1999/xhtml">**************************************************************************<br/>
							<br/>Copyright © 2014 Phoenix Contact GmbH &amp; Co. KG D-32825-Blomberg<br/>All rights reserved<br/>
							<br/>**************************************************************************<br/>
							<br/>Name	:	FB_InterbusStartup<br/>
							<br/>State	:	[x] evaluation  [ ] released<br/>
							<br/>Development Environment	:<br/>	PC WORX 	:	6.10.200<br/>	Controller	:	ILC 350 PN v3.96F.1, ILC 130 ETH v3.91.04<br/>	Devices		: 	-<br/>
							<br/>**************************************************************************<br/>
							<br/>Change Notes:<br/>
							<br/>Date		Version		Author		Description<br/>--------------------------------------------------------------------------<br/>31.07.17	1.00		PxCE/ACr	initial version<br/>
							<br/>**************************************************************************<br/>
							<br/>The function block FB_InterbusStartup reads in the connected interbus<br/>configuration and puts it into operation. The process is started if the<br/>variable xInitNewConfig turns TRUE.<br/>It is important to set the input variable xOS to the correct value.<br/>For ILC 1xx you need to set it to TRUE for eClr.<br/>For ILC 3xx and all RFCs the variable must be set to FALSE for ProConOs.<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_PD_Assign" pouType="functionBlock" pouGroup="Interbus_Startup" lastChange="2016-07-06T14:13:52">
				<interface>
					<localVars retain="false">
						<variable name="iIndexModules" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index for selection of modules</p>
								</html>
							</documentation>
						</variable>
						<variable name="iErrMemcopy" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Errorcode of memcopy function</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPntrInput_PD" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Pointer to next unassigned input process data byte</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPntrOutput_PD" group="Local variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Pointer to next unassigned output process data byte</p>
								</html>
							</documentation>
						</variable>
						<variable name="wMEMCPY" group="Local variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Memcopy function dummy variable</p>
								</html>
							</documentation>
						</variable>
						<variable name="dwSelCurModule" group="Local variables">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bit of currently processed module for comparison with selection bitmask</p>
								</html>
							</documentation>
						</variable>
						<variable name="dwModuleSelMask" group="Local variables">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Module selection mask</p>
								</html>
							</documentation>
						</variable>
						<variable name="i" group="Local variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="R_TRIG_Activate" group="Function block, functions">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger returns TRUE on rising edge of xActivate</p>
								</html>
							</documentation>
						</variable>
						<variable name="F_TRIG_Activate" group="Function block, functions">
							<type>
								<derived name="F_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger returns TRUE on falling edge of xActivate</p>
								</html>
							</documentation>
						</variable>
					</localVars>
					<inputVars retain="false">
						<variable name="xActivate" group="Input parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrInput_PD" group="Input parameters">
							<type>
								<derived name="ARR_IBS_PD_DATA_B_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Input process data of all modules</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB activated</p>
								</html>
							</documentation>
						</variable>
						<variable name="xError" group="Output parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error flag</p>
								</html>
							</documentation>
						</variable>
						<variable name="wDiagCode" group="Output parameters">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic code</p>
								</html>
							</documentation>
						</variable>
						<variable name="dwAddDiagCode" group="Output parameters">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Additional diagnostic information</p>
								</html>
							</documentation>
						</variable>
						<variable name="strDiagCode" group="Output parameters">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic code as string</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<outputVars retain="true">
						<variable name="arrOutput_PD" group="Output parameters">
							<type>
								<derived name="ARR_IBS_PD_DATA_B_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Output process data of all modules</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="arrIBS_ConfEntry" group="InOut parameters">
							<type>
								<derived name="ARR_IBS_CONF_ENTRIES_1_256"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array containing information about all connected modules</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
				</interface>
				<body>
					<ST>
						<worksheet name="Inputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">R_TRIG_Activate(CLK := xActivate);<br/>F_TRIG_Activate(CLK := xActivate);<br/>
									<br/>(*Activation of FB*)<br/>IF R_TRIG_Activate.Q THEN<br/>
									<br/>	xActive 		:= TRUE;<br/>	iIndexModules	:= 0;<br/>	iErrMemcopy		:= 0;<br/>	iPntrInput_PD	:= 0;<br/>	iPntrOutput_PD	:= 0;<br/>	dwModuleSelMask	:= DWORD#16#00000000;<br/>	dwSelCurModule	:= DWORD#16#00000000;<br/>	wMEMCPY			:= WORD#16#0000;<br/>(*Deactivation of FB*)<br/>ELSIF F_TRIG_Activate.Q THEN<br/>
									<br/>	xActive 		:= FALSE;<br/>	iIndexModules	:= 0;<br/>	iErrMemcopy		:= 0;<br/>	iPntrInput_PD	:= 0;<br/>	iPntrOutput_PD	:= 0;<br/>	dwModuleSelMask	:= DWORD#16#00000000;<br/>	dwSelCurModule	:= DWORD#16#00000000;<br/>	wMEMCPY			:= WORD#16#0000;<br/>
									<br/>	For i:= 1 To 512<br/>		Do<br/>			arrOutput_PD[i]:= arrOutput_PD[i]; (* jvo 17.05.2016, hold PD *)<br/>	End_For;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Logic">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">
									<br/>(*Process FB only if activated*)<br/>IF xActive THEN<br/>
									<br/>	(*Perform process data assignment if module has process data*)<br/>	FOR iIndexModules := 1 TO 256 BY 1 DO<br/>		(*Check if module has process data<br/>		IF (arrIBS_ConfEntry[iIndexModules].iPdLenCompl &gt; 0) THEN<br/>
									<br/>			IF (iIndexModules &lt;= 32) THEN<br/>
									<br/>				dwSelCurModule 	:= SHL_DWORD(DWORD#16#00000001, (iIndexModules - 1));<br/>				dwModuleSelMask	:= dwModuleSelMask1;<br/>
									<br/>			ELSE<br/>
									<br/>				dwSelCurModule 	:= SHL_DWORD(DWORD#16#00000001, (iIndexModules - 33));<br/>				dwModuleSelMask	:= dwModuleSelMask2;<br/>
									<br/>			END_IF;<br/>
									<br/>			IF DWORD_TO_BOOL(dwModuleSelMask AND dwSelCurModule) THEN<br/>
									<br/>				(*Check if module has input process data*)<br/>				IF (arrIBS_ConfEntry[iIndexModules].iPdLenIn &gt; 0) THEN<br/>
									<br/>					iPntrInput_PD	:= arrIBS_ConfEntry[iIndexModules].iPntrPdBeginIn;	(*Select pointer to beginning of input PD of module*)<br/>					wMEMCPY 		:= MEMCPY(iErrMemcopy, arrIBS_ConfEntry[iIndexModules].iReservedBytesIn,<br/>									arrInput_PD[iPntrInput_PD], arrIBS_ConfEntry[iIndexModules].arrPdIn[1]);	(*Copy input PD into module structure*)<br/>
									<br/>				END_IF;<br/>
									<br/>				(*Check if module has output process data*)<br/>				IF (arrIBS_ConfEntry[iIndexModules].iPdLenOut &gt; 0) THEN<br/>
									<br/>					iPntrOutput_PD	:= arrIBS_ConfEntry[iIndexModules].iPntrPdBeginOut;	(*Select pointer to beginning of output PD of module*)<br/>					wMEMCPY 		:= MEMCPY(iErrMemcopy, arrIBS_ConfEntry[iIndexModules].iReservedBytesOut, <br/>									arrIBS_ConfEntry[iIndexModules].arrPdOut[1], arrOutput_PD[iPntrOutput_PD]);	(*Copy output PD into output PD array*)<br/>
									<br/>				END_IF;<br/>
									<br/>		(*	END_IF;<br/>
									<br/>		END_IF;*)<br/>
									<br/>	END_FOR;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Outputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">
									<br/>(*Error processing*)<br/>IF (iErrMemcopy &lt;&gt; 0) AND xActive THEN<br/>
									<br/>	xError 			:= TRUE;<br/>	wDiagCode		:= WORD#16#C010;<br/>	dwAddDiagCode	:= INT_TO_DWORD(iErrMemcopy);<br/>	strDiagCode		:= 'Memcopy error';<br/>
									<br/>ELSIF xActive THEN<br/>
									<br/>	wDiagCode		:= WORD#16#8200;	(*Set default diagnostic value*)<br/>	dwAddDiagCode	:= DWORD#16#0000;	(*Set default additional diagnostic information*)<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_PD_AssignT" xmlns="http://www.w3.org/1999/xhtml">**************************************************************************<br/>
							<br/>Copyright © 2014 Phoenix Contact GmbH &amp; Co. KG D-32825-Blomberg<br/>All rights reserved<br/>
							<br/>**************************************************************************<br/>
							<br/>Name	:	FB_PD_Assign<br/>
							<br/>State	:	[x] evaluation  [ ] released<br/>
							<br/>Development Environment	:<br/>	PC WORX 	:	6.10.200<br/>	Controller	:	ILC 350 PN v3.96F.1, ILC 130 ETH v3.91.04<br/>	Devices		: 	-<br/>
							<br/>**************************************************************************<br/>
							<br/>Change Notes:<br/>
							<br/>Date		Version		Author		Description<br/>--------------------------------------------------------------------------<br/>31.07.17	1.00		PxCE/ACr	initial version<br/>
							<br/>**************************************************************************<br/>
							<br/>The function block FB_PD_Assign automatically assigns the process data of<br/>the module structure array (arrPdIn, arrPdOut) to the process data of the<br/>dummy module.<br/>The two input parameters dwModuleSelMask1 and dwModuleSelMask2 are used to<br/>select the modules for the automatic process data assignment.<br/>The parameter dwModuleSelMask1 is responsible for the selection of the <br/>first 32 modules, the parameter dwModuleSelMask2 is responsible for the<br/>selection of the second 32 modules.<br/>The selection is done in the form of a bitmask. If only the process data<br/>of the first modul needs to be exchanged automatically only Bit 0 must<br/>be set to TRUE. In this case the variable dwModuleSelMask1 would contain<br/>the value DWORD#16#00000001.<br/>To use this FB it is necessary for the automatic interbus startup<br/>to be completed.<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_PD_EvalCompRefList" pouType="functionBlock" pouGroup="Interbus_Startup" lastChange="2015-11-09T11:41:56">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xExecute" group="Input Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger execution of function block</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<inOutVars retain="false">
						<variable name="arrIBC_SysConf" group="InOut Parameters">
							<type>
								<derived name="ARR_IBC_DATA_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array containing preprocessed response from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrIBS_ConfEntry" group="InOut Parameters">
							<type>
								<derived name="ARR_IBS_CONF_ENTRIES_1_256"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array containing structures with information about connected IB modules</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB activated</p>
								</html>
							</documentation>
						</variable>
						<variable name="xError" group="Output Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error during evaluation of process data description</p>
								</html>
							</documentation>
						</variable>
						<variable name="xReady" group="Output Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Function block ready for new request</p>
								</html>
							</documentation>
						</variable>
						<variable name="wDiagCode" group="Output Parameters">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic status of FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="dwAddDiagCode" group="Output Parameters">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Additional diagnostic information of FB</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<localVars retain="false">
						<variable name="xErrorDataType" group="Local Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Invalid data type of processed process data</p>
								</html>
							</documentation>
						</variable>
						<variable name="wAddrDir" group="Local Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Address direction: 1000: Input PD; 2000: Output PD</p>
								</html>
							</documentation>
						</variable>
						<variable name="wEntryCount" group="Local Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Number of following parameters</p>
								</html>
							</documentation>
						</variable>
						<variable name="wDataCons" group="Local Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Data consistency of interbus device</p>
								</html>
							</documentation>
						</variable>
						<variable name="wPD_Address" group="Local Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Process data address</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIndex" group="Local Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index of process data references</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPointerEntry" group="Local Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Pointer to entry of compact process data reference list</p>
								</html>
							</documentation>
						</variable>
						<variable name="R_TRIG_Activate" group="FB Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger for activation of FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="F_TRIG_Activate" group="FB Instances">
							<type>
								<derived name="F_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger for deactivation of FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="R_TRIG_Exec" group="FB Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger execute command for evaluation of process data description</p>
								</html>
							</documentation>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="Inputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">R_TRIG_Activate(CLK := xActivate);<br/>F_TRIG_Activate(CLK := xActivate);<br/>
									<br/>(*Trigger activation of function block*)<br/>IF R_TRIG_Activate.Q THEN<br/>
									<br/>	xActive 		:= TRUE;<br/>	xError			:= FALSE;<br/>	xErrorDataType	:= FALSE;<br/>	xReady			:= FALSE;<br/>	iIndex			:= 0;<br/>	iPointerEntry	:= 0;<br/>	wAddrDir		:= WORD#16#0000;<br/>	wEntryCount		:= WORD#16#0000;<br/>	wDataCons		:= WORD#16#0000;<br/>	wPD_Address		:= WORD#16#0000;<br/>	wDiagCode		:= WORD#16#0000;<br/>
									<br/>(*Trigger deactivation of function block*)<br/>ELSIF F_TRIG_Activate.Q THEN<br/>
									<br/>	xActive 		:= FALSE;<br/>	xError			:= FALSE;<br/>	xErrorDataType	:= FALSE;<br/>	xReady			:= FALSE;<br/>	iIndex			:= 0;<br/>	iPointerEntry	:= 0;<br/>	wAddrDir		:= WORD#16#0000;<br/>	wEntryCount		:= WORD#16#0000;<br/>	wDataCons		:= WORD#16#0000;<br/>	wPD_Address		:= WORD#16#0000;<br/>	wDiagCode		:= WORD#16#0000;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Logic">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(*Perform function block operations if function block active*)<br/>IF xActive THEN<br/>
									<br/>	(*Wait for trigger to process evaluation of process data description*)<br/>	R_TRIG_Exec(CLK := xExecute);<br/>
									<br/>	IF R_TRIG_Exec.Q THEN<br/>
									<br/>		wAddrDir		:= arrIBC_SysConf[1];	(*Read out process data direction: 1000 - Input PD; 2000 - Output PD*)<br/>		wEntryCount		:= arrIBC_SysConf[2];	(*Number of following entries*)<br/>		iPointerEntry	:= 0;<br/>		iIndex			:= 0;<br/>
									<br/>		(*Process all process data entries of compact PD reference list*)<br/>		FOR iIndex := 1 TO UINT_TO_INT(WORD_TO_UINT(wEntryCount)) BY 1 DO<br/>
									<br/>			iPointerEntry	:= iIndex + 2;	(*Entry pointer = Index + 2 entries offset*)<br/>
									<br/>			(*If entry = FFFF -&gt; process data of module does not match requested data direction*)<br/>			IF NOT (arrIBC_SysConf[iPointerEntry] = WORD#16#FFFF) THEN<br/>
									<br/>				wDataCons		:= WORD#16#C000 AND arrIBC_SysConf[iPointerEntry];	(*Read out data consistency of process data of module*)<br/>				wPD_Address		:= WORD#16#3FFF AND arrIBC_SysConf[iPointerEntry];	(*Read out starting address of process data*)<br/>
									<br/>				(*Process input process data*)<br/>				IF (wAddrDir = WORD#16#1000) THEN<br/>
									<br/>					arrIBS_ConfEntry[iIndex].xInputPD	 		:= TRUE;										(*Module possesses input PD*)<br/>					arrIBS_ConfEntry[iIndex].iPntrPdBeginIn		:= UINT_TO_INT(WORD_TO_UINT(wPD_Address)) + 1;	(*Pointer to begin of input PD*)<br/>					arrIBS_ConfEntry[iIndex].iReservedBytesIn	:= arrIBS_ConfEntry[iIndex].iPdLenCompl / 8;	(*Reserved bytes for input PD*)<br/>					arrIBS_ConfEntry[iIndex].iPdLenIn			:= arrIBS_ConfEntry[iIndex].iPdLenCompl;		(*Set length of input PD*)<br/>					<br/>					(*If module possesses input PD -&gt; 1 Word is reserved at min on eClr device*)<br/>					IF (arrIBS_ConfEntry[iIndex].iReservedBytesIn &lt; 2) THEN<br/>
									<br/>						arrIBS_ConfEntry[iIndex].iReservedBytesIn := 2;<br/>
									<br/>					END_IF;<br/>
									<br/>					(*Reserved process data is rounded up to full word on eClr device*)<br/>					IF (arrIBS_ConfEntry[iIndex].iReservedBytesIn MOD 2 &lt;&gt; 0) THEN<br/>
									<br/>						arrIBS_ConfEntry[iIndex].iReservedBytesIn := arrIBS_ConfEntry[iIndex].iReservedBytesIn + 1 ;<br/>
									<br/>					END_IF;<br/>
									<br/>				ELSIF (wAddrDir = WORD#16#2000) THEN<br/>
									<br/>					arrIBS_ConfEntry[iIndex].xOutputPD 			:= TRUE;										(*Module possesses output PD*)<br/>					arrIBS_ConfEntry[iIndex].iPntrPdBeginOut	:= UINT_TO_INT(WORD_TO_UINT(wPD_Address)) + 1;	(*Pointer to begin of output PD*)<br/>					arrIBS_ConfEntry[iIndex].iReservedBytesOut	:= arrIBS_ConfEntry[iIndex].iPdLenCompl / 8;	(*Reserved bytes for output PD*)<br/>					arrIBS_ConfEntry[iIndex].iPdLenOut			:= arrIBS_ConfEntry[iIndex].iPdLenCompl;		(*Set length of output PD*)<br/>					<br/>					(*If module possesses output PD -&gt; 1 Word is reserved at min on eClr system*)<br/>					IF (arrIBS_ConfEntry[iIndex].iReservedBytesOut &lt; 2) THEN<br/>
									<br/>						arrIBS_ConfEntry[iIndex].iReservedBytesOut := 2;<br/>
									<br/>					END_IF;<br/>
									<br/>					(*Reserved process data is rounded up to full word on eClr device*)<br/>					IF (arrIBS_ConfEntry[iIndex].iReservedBytesOut MOD 2 &lt;&gt; 0) THEN<br/>
									<br/>						arrIBS_ConfEntry[iIndex].iReservedBytesOut := arrIBS_ConfEntry[iIndex].iReservedBytesOut + 1 ;<br/>
									<br/>					END_IF;<br/>
									<br/>				(*Report error in case of unknown process data direction*)<br/>				ELSE<br/>
									<br/>					xErrorDataType	:= TRUE;<br/>
									<br/>				END_IF;<br/>
									<br/>			END_IF;<br/>
									<br/>		END_FOR;<br/>
									<br/>	END_IF;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Outputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(*Process output parameters of FB*)<br/>
									<br/>IF NOT xActive THEN<br/>
									<br/>	xReady 			:= FALSE;<br/>	xError 			:= FALSE;<br/>	wDiagCode		:= WORD#16#0000;<br/>	dwAddDiagCode 	:= DWORD#16#00000000;<br/>
									<br/>ELSIF xActivate AND xErrorDataType THEN<br/>
									<br/>	xReady			:= FALSE;<br/>	xError			:= TRUE;<br/>	wDiagCode		:= WORD#16#C010;<br/>	dwAddDiagCode	:= DWORD#16#0000FFFF AND WORD_TO_DWORD(wAddrDir);<br/>
									<br/>ELSIF xActive AND NOT xError AND NOT R_TRIG_Exec.Q THEN<br/>
									<br/>	xReady 			:= TRUE;<br/>	wDiagCode		:= WORD#16#8000;<br/>	dwAddDiagCode	:= DWORD#16#00000000;<br/>
									<br/>ELSIF xActive AND NOT xError AND R_TRIG_Exec.Q THEN<br/>
									<br/>	xReady			:= FALSE;<br/>	wDiagCode		:= WORD#16#8200;<br/>	dwAddDiagCode	:= DWORD#16#00000000;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_PD_EvalCompRefListT" xmlns="http://www.w3.org/1999/xhtml">**************************************************************************<br/>
							<br/>Copyright © 2014 Phoenix Contact GmbH &amp; Co. KG D-32825-Blomberg<br/>All rights reserved<br/>
							<br/>**************************************************************************<br/>
							<br/>Name	:	FB_PD_EvalCompRefList<br/>
							<br/>State	:	[x] evaluation  [ ] released<br/>
							<br/>Development Environment	:<br/>	PC WORX 	:	6.10.200<br/>	Controller	:	ILC 350 PN v3.96F.1, ILC 130 ETH v3.91.04<br/>	Devices		: 	-<br/>
							<br/>**************************************************************************<br/>
							<br/>Change Notes:<br/>
							<br/>Date		Version		Author		Description<br/>--------------------------------------------------------------------------<br/>31.07.17	1.00		PxCE/ACr	initial version<br/>
							<br/>**************************************************************************<br/>
							<br/>The function block FB_PD_EvalCompRefList evaluates the response to the<br/>Read compact process data reference list request.<br/>It is used for PLCs of the eClr system.<br/>The function block is necessary for the assignment of the process data of<br/>specific module to the process data of the dummy module.<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_PD_EvalDescr" pouType="functionBlock" pouGroup="Interbus_Startup" lastChange="2015-11-09T11:41:56">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="xExecute" group="Input Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger execution of function block</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIdxCntMod" group="Input Parameters">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index for selection of module</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<inOutVars retain="false">
						<variable name="arrIBC_SysConf" group="InOut Parameters">
							<type>
								<derived name="ARR_IBC_DATA_1_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array containing preprocessed response from IB master</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrIBS_ConfEntry" group="InOut Parameters">
							<type>
								<derived name="ARR_IBS_CONF_ENTRIES_1_256"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Array containing structures with information about connected IB modules</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPntrPDBeginIn" group="InOut Parameters">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Pointer to begin of input process data of next module</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPntrPdBeginOut" group="InOut Parameters">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Pointer to begin of next output process data</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">FB activated</p>
								</html>
							</documentation>
						</variable>
						<variable name="xError" group="Output Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Error during evaluation of process data description</p>
								</html>
							</documentation>
						</variable>
						<variable name="xReady" group="Output Parameters">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Function block ready for new request</p>
								</html>
							</documentation>
						</variable>
						<variable name="wDiagCode" group="Output Parameters">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnostic status of FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="dwAddDiagCode" group="Output Parameters">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Additional diagnostic information of FB</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<localVars retain="false">
						<variable name="xErrorDataType" group="Local Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Invalid data type of processed process data</p>
								</html>
							</documentation>
						</variable>
						<variable name="xMoreFollows" group="Local Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Not all data of module received</p>
								</html>
							</documentation>
						</variable>
						<variable name="bBitPos" group="Local Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Offset of Bits in PD</p>
								</html>
							</documentation>
						</variable>
						<variable name="bDataDir" group="Local Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">0C - Input process data; 0D - Output process data</p>
								</html>
							</documentation>
						</variable>
						<variable name="bDataType" group="Local Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">0A - Byte string process data; 0F - Bit string process data</p>
								</html>
							</documentation>
						</variable>
						<variable name="bLength" group="Local Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Length of process data</p>
								</html>
							</documentation>
						</variable>
						<variable name="wBytePos" group="Local Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Offset of bytes in PD</p>
								</html>
							</documentation>
						</variable>
						<variable name="wDeviceNo" group="Local Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Device number</p>
								</html>
							</documentation>
						</variable>
						<variable name="wPDD_Count" group="Local Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Number of received process data descriptions</p>
								</html>
							</documentation>
						</variable>
						<variable name="wPDD_Index" group="Local Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index of process data description</p>
								</html>
							</documentation>
						</variable>
						<variable name="wStart_PDD_Index" group="Local Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Start index of process data descriptions</p>
								</html>
							</documentation>
						</variable>
						<variable name="iCntPdd" group="Local Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index variable for selection of process data description</p>
								</html>
							</documentation>
						</variable>
						<variable name="iExtLength" group="Local Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Process data extension length</p>
								</html>
							</documentation>
						</variable>
						<variable name="iIndex" group="Local Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Index of process data descriptions</p>
								</html>
							</documentation>
						</variable>
						<variable name="iPD_Length" group="Local Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Length of process data</p>
								</html>
							</documentation>
						</variable>
						<variable name="xTest" redundant="true" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="R_TRIG_Activate" group="FB Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger for activation of FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="R_TRIG_Exec" group="FB Instances">
							<type>
								<derived name="R_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger execute command for evaluation of process data description</p>
								</html>
							</documentation>
						</variable>
						<variable name="F_TRIG_Activate" group="FB Instances">
							<type>
								<derived name="F_TRIG"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Trigger for deactivation of FB</p>
								</html>
							</documentation>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="Inputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">R_TRIG_Activate(CLK := xActivate);<br/>F_TRIG_Activate(CLK := xActivate);<br/>
									<br/>(*Trigger activation of function block*)<br/>IF R_TRIG_Activate.Q THEN<br/>
									<br/>	xActive 			:= TRUE;<br/>	xError				:= FALSE;<br/>	xMoreFollows		:= FALSE;<br/>	bBitPos				:= BYTE#16#00;<br/>	bDataDir			:= BYTE#16#00;<br/>	bDataType			:= BYTE#16#00;<br/>	bLength				:= BYTE#16#00;<br/>	wBytePos			:= WORD#16#0000;<br/>	wDeviceNo			:= WORD#16#0000;<br/>	wPDD_Count			:= WORD#16#0000;<br/>	wPDD_Index			:= WORD#16#0000;<br/>	wStart_PDD_Index	:= WORD#16#0000;<br/>	iCntPdd				:= 0;<br/>	iExtLength			:= 0;<br/>	iIndex				:= 0;<br/>	iPD_Length			:= 0;<br/>
									<br/>(*Trigger deactivation of function block*)<br/>ELSIF F_TRIG_Activate.Q THEN<br/>
									<br/>	xActive 			:= FALSE;<br/>	xError				:= FALSE;<br/>	xMoreFollows		:= FALSE;<br/>	bBitPos				:= BYTE#16#00;<br/>	bDataDir			:= BYTE#16#00;<br/>	bDataType			:= BYTE#16#00;<br/>	bLength				:= BYTE#16#00;<br/>	wBytePos			:= WORD#16#0000;<br/>	wDeviceNo			:= WORD#16#0000;<br/>	wPDD_Count			:= WORD#16#0000;<br/>	wPDD_Index			:= WORD#16#0000;<br/>	wStart_PDD_Index	:= WORD#16#0000;<br/>	iCntPdd				:= 0;<br/>	iExtLength			:= 0;<br/>	iIndex				:= 0;<br/>	iPD_Length			:= 0;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Logic">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">
									<br/>(*Perform function block operations if function block active*)<br/>IF xActive THEN<br/>
									<br/>	(*Wait for trigger to process evaluation of process data description*)<br/>	R_TRIG_Exec(CLK := xExecute);<br/>
									<br/>	xMoreFollows	:= FALSE;<br/>
									<br/>	IF R_TRIG_Exec.Q THEN<br/>
									<br/>		xMoreFollows 		:= arrIBC_SysConf[1].X0;<br/>		wDeviceNo			:= arrIBC_SysConf[2];<br/>		wStart_PDD_Index	:= arrIBC_SysConf[3];<br/>		wPDD_Count			:= arrIBC_SysConf[4];<br/>		iIndex				:= 5;<br/>		<br/>		FOR iCntPdd := 1 TO UINT_TO_INT(WORD_TO_UINT(wPDD_Count)) BY 1 DO<br/>
									<br/>			wPDD_Index	:= arrIBC_SysConf[iIndex];<br/>			iIndex		:= iIndex + 1;<br/>			bDataDir	:= arrIBC_SysConf[iIndex].B1;<br/>			bDataType	:= arrIBC_SysConf[iIndex].B0;<br/>			iIndex		:= iIndex + 1;<br/>			wBytePos	:= arrIBC_SysConf[iIndex];<br/>
									<br/>			If wBytePos &lt;&gt; Word#0 Then<br/>				xTest:= True;<br/>			End_If;<br/>
									<br/>			iIndex		:= iIndex + 1;<br/>			bBitPos		:= arrIBC_SysConf[iIndex].B1;<br/>			bLength		:= arrIBC_SysConf[iIndex].B0;<br/>			iIndex		:= iIndex + 1;<br/>			iExtLength	:= UINT_TO_INT(BYTE_TO_UINT(arrIBC_SysConf[iIndex].B1));<br/>			iPD_Length 	:= UINT_TO_INT(BYTE_TO_UINT(bLength));<br/>
									<br/>			(*Data direction = 0C: Input process data*)<br/>			IF (bDataDir = BYTE#16#0C) THEN<br/>
									<br/>				arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginIn	:= iPntrPDBeginIn + UINT_TO_INT(WORD_TO_UINT(wBytePos));<br/>				arrIBS_ConfEntry[iIdxCntMod].xInputPD		:= TRUE;<br/>				<br/>				IF ((bDataType = BYTE#16#0A) AND (iPD_Length &gt; 0)) THEN<br/>
									<br/>					If (arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginIn Mod 2) = 0 &amp; iPD_Length &lt;&gt; 1 Then<br/>						arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginIn:= arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginIn + 1;<br/>					End_If;<br/>
									<br/>					arrIBS_ConfEntry[iIdxCntMod].iPdLenIn			:= arrIBS_ConfEntry[iIdxCntMod].iPdLenIn + iPD_Length * 8;<br/>					iPntrPDBeginIn									:= arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginIn + iPD_Length;<br/>					arrIBS_ConfEntry[iIdxCntMod].iReservedBytesIn	:= arrIBS_ConfEntry[iIdxCntMod].iReservedBytesIn + iPD_Length;<br/>
									<br/>				ELSIF ((bDataType = BYTE#16#0F) AND (iPD_Length &gt; 0)) THEN<br/>
									<br/>					If (arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginIn Mod 2) = 0 Then<br/>						arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginIn:= arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginIn + 1;<br/>					End_If;<br/>
									<br/>					arrIBS_ConfEntry[iIdxCntMod].iPdLenIn			:= arrIBS_ConfEntry[iIdxCntMod].iPdLenIn + iPD_Length;<br/>					iPntrPDBeginIn									:= arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginIn + 1;<br/>					arrIBS_ConfEntry[iIdxCntMod].iReservedBytesIn	:= arrIBS_ConfEntry[iIdxCntMod].iReservedBytesIn + 1;<br/>
									<br/>				ELSE<br/>
									<br/>					xErrorDataType	:= TRUE;<br/>					EXIT;<br/>
									<br/>				END_IF;<br/>
									<br/>			(*Data direction = 0D: Output process data*)<br/>			ELSIF (bDataDir = BYTE#16#0D) THEN<br/>
									<br/>				arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginOut 	:= iPntrPdBeginOut + UINT_TO_INT(WORD_TO_UINT(wBytePos));<br/>				arrIBS_ConfEntry[iIdxCntMod].xOutputPD			:= TRUE;<br/>
									<br/>				IF ((bDataType = BYTE#16#0A) AND (iPD_Length &gt; 0)) THEN<br/>
									<br/>					If (arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginOut Mod 2) = 0 &amp; iPD_Length &lt;&gt; 1 Then<br/>						arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginOut:= arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginOut + 1;<br/>					End_If;<br/>
									<br/>					arrIBS_ConfEntry[iIdxCntMod].iPdLenOut			:= arrIBS_ConfEntry[iIdxCntMod].iPdLenOut + iPD_Length * 8;<br/>					iPntrPDBeginOut									:= arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginOut + iPD_Length;<br/>					arrIBS_ConfEntry[iIdxCntMod].iReservedBytesOut	:= arrIBS_ConfEntry[iIdxCntMod].iReservedBytesOut + iPD_Length;<br/>
									<br/>				ELSIF ((bDataType = BYTE#16#0F) AND (iPD_Length &gt; 0)) THEN<br/>
									<br/>					If (arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginOut Mod 2) = 0 Then<br/>						arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginOut:= arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginOut + 1;<br/>					End_If;<br/>
									<br/>					arrIBS_ConfEntry[iIdxCntMod].iPdLenOut			:= arrIBS_ConfEntry[iIdxCntMod].iPdLenOut + iPD_Length;<br/>					iPntrPDBeginOut									:= arrIBS_ConfEntry[iIdxCntMod].iPntrPdBeginOut + 1;<br/>					arrIBS_ConfEntry[iIdxCntMod].iReservedBytesOut	:= arrIBS_ConfEntry[iIdxCntMod].iReservedBytesOut + 1;<br/>
									<br/>				ELSE<br/>
									<br/>					xErrorDataType	:= TRUE;<br/>					EXIT;<br/>
									<br/>				END_IF;<br/>			<br/>			END_IF;<br/>
									<br/>			IF (iExtLength &gt; 0) THEN<br/>
									<br/>				iIndex	:= iIndex + iExtLength;<br/>
									<br/>			ELSE<br/>
									<br/>				iIndex	:= iIndex + 1;<br/>
									<br/>			END_IF;<br/>
									<br/>		END_FOR;<br/>
									<br/>	END_IF;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Outputs">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(*Process output parameters of FB*)<br/>
									<br/>IF NOT xActive THEN<br/>
									<br/>	xReady 			:= FALSE;<br/>	xError 			:= FALSE;<br/>	wDiagCode		:= WORD#16#0000;<br/>	dwAddDiagCode 	:= DWORD#16#00000000;<br/>
									<br/>ELSIF xActivate AND xErrorDataType THEN<br/>
									<br/>	xReady			:= FALSE;<br/>	xError			:= TRUE;<br/>	wDiagCode		:= WORD#16#C010;<br/>	dwAddDiagCode	:= DWORD#16#0000FFFF AND BYTE_TO_DWORD(bDataType);<br/>
									<br/>ELSIF xActive AND NOT xError AND NOT R_TRIG_Exec.Q THEN<br/>
									<br/>	xReady 			:= TRUE;<br/>	wDiagCode		:= WORD#16#8000;<br/>	dwAddDiagCode	:= DWORD#16#00000000;<br/>
									<br/>ELSIF xActive AND NOT xError AND R_TRIG_Exec.Q THEN<br/>
									<br/>	xReady			:= FALSE;<br/>	wDiagCode		:= WORD#16#8200;<br/>	dwAddDiagCode	:= DWORD#16#00000000;<br/>
									<br/>END_IF;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_PD_EvalDescrT" xmlns="http://www.w3.org/1999/xhtml">**************************************************************************<br/>
							<br/>Copyright © 2014 Phoenix Contact GmbH &amp; Co. KG D-32825-Blomberg<br/>All rights reserved<br/>
							<br/>**************************************************************************<br/>
							<br/>Name	:	FB_PD_EvalDescr<br/>
							<br/>State	:	[x] evaluation  [ ] released<br/>
							<br/>Development Environment	:<br/>	PC WORX 	:	6.10.200<br/>	Controller	:	ILC 350 PN v3.96F.1, ILC 130 ETH v3.91.04<br/>	Devices		: 	-<br/>
							<br/>**************************************************************************<br/>
							<br/>Change Notes:<br/>
							<br/>Date		Version		Author		Description<br/>--------------------------------------------------------------------------<br/>31.07.17	1.00		PxCE/ACr	initial version<br/>
							<br/>**************************************************************************<br/>
							<br/>The function block FB_PD_EvalDescr evaluates the process data description<br/>list when it is received by the interbus control function block.<br/>The read out parameters are written into the structure of the appropriate<br/>module.<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_Web_Communication_01" pouType="functionBlock" pouGroup="Interface" lastChange="2016-11-01T14:33:05">
				<interface>
					<inOutVars retain="false">
						<variable name="udtLumgate" group="Output Parameter">
							<type>
								<derived name="udtWebLumgate"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Dataset to display one Lumgate</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<outputVars retain="false">
						<variable name="iTotalLumgatesRBT" group="Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Count of Lumgates at the selected RBT</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrLumgateWeb" group="Output Parameter">
							<type>
								<derived name="Arr_I_0_9"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Module Numbers of selected Lumgate range</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrSelectedConfiguration" group="Output Parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">?</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrActiveScenario" group="Output Parameter">
							<type>
								<derived name="ARR_X_1_25"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Enabled Scenarios of the selectet table</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectedScenario" group="Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Active Scenario in the selected table</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectedScene" group="Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Active Scene in selected Lumgate</p>
								</html>
							</documentation>
						</variable>
						<variable name="iChosedScene" group="Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Selected  Scene option 1 - 5 after hour balance</p>
								</html>
							</documentation>
						</variable>
						<variable name="arr5Lumgate" group="Output Parameter">
							<type>
								<derived name="ARR_X_0_9"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Availibility of the selected Lumgate range</p>
								</html>
							</documentation>
						</variable>
						<variable name="arr5LumgateValues" group="Output Parameter">
							<type>
								<derived name="Arr_I_0_9"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Output vlaues of the selected Lumgate range</p>
								</html>
							</documentation>
						</variable>
						<variable name="rAnalogValue" group="Output Parameter">
							<type>
								<REAL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">?</p>
								</html>
							</documentation>
						</variable>
						<variable name="wAnalogDiag" group="Output Parameter">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">?</p>
								</html>
							</documentation>
						</variable>
						<variable name="strCloState" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">CLO State (On / Off)</p>
								</html>
							</documentation>
						</variable>
						<variable name="strMaintenanceState" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Maintenance State (On / Off)</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrCurrentDiagram" group="Output Parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagrm curve - measured current</p>
								</html>
							</documentation>
						</variable>
						<variable name="iCurrentActual" group="Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagram dot - y position</p>
								</html>
							</documentation>
						</variable>
						<variable name="iActualPosition" group="Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagram dot - x position</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrCurrentDiagramWarningMin" group="Output Parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagram curve - current - warning deviation</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrCurrentDiagramWarningMax" group="Output Parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagram curve - current + warning deviation</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrCurrentDiagramAlarmMin" group="Output Parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagram curve - current - alarm deviation</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrCurrentDiagramAlarmMax" group="Output Parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagram curve - current + alarm deviation</p>
								</html>
							</documentation>
						</variable>
						<variable name="xLumgateEditable" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - editable</p>
								</html>
							</documentation>
						</variable>
						<variable name="strLumgateState" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - state (Mode)</p>
								</html>
							</documentation>
						</variable>
						<variable name="strDiag" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">?</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrScale" group="Output Parameter">
							<type>
								<derived name="Arr_I_0_4"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagram y scale text</p>
								</html>
							</documentation>
						</variable>
						<variable name="xShowMenue1" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Background 1 active</p>
								</html>
							</documentation>
						</variable>
						<variable name="xShowMenue2" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Background 2 active</p>
								</html>
							</documentation>
						</variable>
						<variable name="iDelay" group="Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">?</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrAnalogDiag" group="Output Parameter">
							<type>
								<derived name="ARR_W_1_4"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Discrete elements - Analog Input diagnostic</p>
								</html>
							</documentation>
						</variable>
						<variable name="xShowMenue3" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Background 3 active</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectedRBT" group="Output Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Feedback, selected RBT</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<localVars retain="false">
						<variable name="xR2Old" redundant="true" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xR1Old" redundant="true" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<outputVars retain="false">
						<variable name="iTempSelectedLumgate" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">?</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inputVars retain="false">
						<variable name="iSelectRBT" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Select RBT</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectLumgateSeite" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Select Lumgate Range (--- first 10 +++)</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectLumgateDevice" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate of Selected Range ( 1 - 10 )</p>
								</html>
							</documentation>
						</variable>
						<variable name="iLumgateSeite" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">? - == iSelectLumgateSeite</p>
								</html>
							</documentation>
						</variable>
						<variable name="iSelectSensor" group="Input Parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Select Thrashold table</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrAnalogValues" group="Input Parameter">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">raw analog values to display in an overview</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<inOutVars retain="false">
						<variable name="xFailMode" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - fail mode (failsafe / hold)</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtProject" group="In- Output Parameter">
							<type>
								<derived name="udt_WebDataProjectSettings"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Communication structure "System settings"</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtL20Config" group="In- Output Parameter">
							<type>
								<derived name="udtL20Input"/>
							</type>
						</variable>
						<variable name="xMenue1" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate menue 1</p>
								</html>
							</documentation>
						</variable>
						<variable name="xMenue2" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate menue 2</p>
								</html>
							</documentation>
						</variable>
						<variable name="xMenue3" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Activate menue 3</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtScenesHours" group="In- Output Parameter">
							<type>
								<derived name="udt_WebDataScenesHour"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Web structure "Sene hours"</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtCLO" group="In- Output Parameter">
							<type>
								<derived name="udt_WebDataLumgateCLO"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Web structure "CLO"</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtCurrent" group="In- Output Parameter">
							<type>
								<derived name="udt_WebDataLumgateCurrent"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Web structure "Current consumption"</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtScenes" group="In- Output Parameter">
							<type>
								<derived name="udt_WebDataLumgateScenes"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Web structure "Lumgate Scenes"</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtSource" group="In- Output Parameter">
							<type>
								<derived name="udt_WebDataSource"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Web structure "Analog sources"</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtThreshold" group="In- Output Parameter">
							<type>
								<derived name="udt_WebDataThreshold"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Web structure "Threshold table"</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrSceneHourCounter" group="In- Output Parameter">
							<type>
								<derived name="arr_1_50_udtLumgatePart1"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scene hour counter communication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrSelectedSensor" group="In- Output Parameter">
							<type>
								<derived name="ARR_R_1_24"/>
							</type>
						</variable>
						<variable name="arrSelectedScenario" group="In- Output Parameter">
							<type>
								<derived name="ARR_I_1_5"/>
							</type>
						</variable>
						<variable name="arrLumgates" group="In- Output Parameter">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate communicaation structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtLumgateData" group="In- Output Parameter">
							<type>
								<derived name="udtLumgateVisu"/>
							</type>
						</variable>
						<variable name="udtLumgateScenario" group="In- Output Parameter">
							<type>
								<derived name="udtWebLGScenario"/>
							</type>
						</variable>
						<variable name="udtLumgateSpecialScenario" group="In- Output Parameter">
							<type>
								<derived name="udtWebLGSpecialScenario"/>
							</type>
						</variable>
						<variable name="udtScenarioMode" group="In- Output Parameter">
							<type>
								<derived name="udtScene"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scene mode communication structure</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtLumgateCurrentConsumption" group="In- Output Parameter">
							<type>
								<derived name="udtWebLGCurrentConsumption"/>
							</type>
						</variable>
						<variable name="arrScenarioConfiguration" group="In- Output Parameter">
							<type>
								<derived name="ARR_I_1_4_1_25_1_5"/>
							</type>
						</variable>
						<variable name="arrLevelConfiguration" group="In- Output Parameter">
							<type>
								<derived name="ARR_UDT_L20Config"/>
							</type>
						</variable>
						<variable name="xSetManualLumgate" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - manual mode</p>
								</html>
							</documentation>
						</variable>
						<variable name="xEnableLumgateEdit" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - enable edit Lumgate site</p>
								</html>
							</documentation>
						</variable>
						<variable name="xSafeLumgate" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - safe Lumgate dataset</p>
								</html>
							</documentation>
						</variable>
						<variable name="xCancelLumgate" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - cancel Lumgate dataset</p>
								</html>
							</documentation>
						</variable>
						<variable name="strLumgateDescription" group="In- Output Parameter">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - description field</p>
								</html>
							</documentation>
						</variable>
						<variable name="rLevelFailsafe" group="In- Output Parameter">
							<type>
								<REAL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - failsafe value</p>
								</html>
							</documentation>
						</variable>
						<variable name="rManuelOutput" group="In- Output Parameter">
							<type>
								<REAL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lumgate structure - manual output value</p>
								</html>
							</documentation>
						</variable>
						<variable name="udtLumgateMain" group="In- Output Parameter">
							<type>
								<derived name="udtWebLG_Main"/>
							</type>
						</variable>
					</inOutVars>
					<localVars retain="true">
						<variable name="strUnit" group="Default">
							<type>
								<string length="80"/>
							</type>
							<initialValue>
								<simpleValue value="[cd/m²]"/>
							</initialValue>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="iTempSelectedLumgateOld" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iSelectSensorOld" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iScaleValue" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTempValue" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTempLevel" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="wSpecialScenario" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="iSelectLumgate" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iSelect" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTemp" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="F_TRIG_Failsafe" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_Config1" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_Config2" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_Config3" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="R_TRIG_Config4" group="Default">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_Web_Communication_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Web_Communication *)<br/>If xMenue1 then		(* Select symbolic top menue "System" *)<br/>	xMenue1		:=	False;<br/>	xShowMenue1	:=	True;<br/>	xShowMenue2	:=	False;<br/>	xShowMenue3	:=	False;<br/>Elsif xMenue2 then	(* Select symbolic top menue "Project" *)<br/>	xMenue2		:=	False;<br/>	xShowMenue2	:=	True;<br/>	xShowMenue1	:=	False;<br/>	xShowMenue3	:=	False;<br/>Elsif xMenue3 then	(* Select symbolic top menue "Home" *)<br/>	xMenue3		:=	False;<br/>	xShowMenue2	:=	False;<br/>	xShowMenue1	:=	False;<br/>	xShowMenue3	:=	True;<br/>Elsif not xShowMenue1 and not xShowMenue2 and not xShowMenue3 then<br/>	xShowMenue1	:=	False;<br/>	xShowMenue2	:=	False;<br/>	xShowMenue3	:=	True;<br/>End_if;<br/>iSelectedRBT	:=	iSelectRBT + 1;<br/>(* Calculate amount Lumgates per RBT *)<br/>	udtLumgateMain.arrAmountLumgates[1]	:=	0;<br/>	udtLumgateMain.arrAmountLumgates[2]	:=	0;<br/>	udtLumgateMain.arrAmountLumgates[3]	:=	0;<br/>	udtLumgateMain.arrAmountLumgates[4]	:=	0;<br/>	For iLoop := 1 to 240 do<br/>		If arrLumgates[iLoop].iModuleLevel = 0 and arrLumgates[iLoop].xAvailable then<br/>			udtLumgateMain.arrAmountLumgates[1]	:=	udtLumgateMain.arrAmountLumgates[1] + 1;<br/>		End_If;<br/>		If arrLumgates[iLoop].iModuleLevel = 1 and arrLumgates[iLoop].xAvailable then<br/>			udtLumgateMain.arrAmountLumgates[2]	:=	udtLumgateMain.arrAmountLumgates[2] + 1;<br/>		End_If;<br/>		If arrLumgates[iLoop].iModuleLevel = 2 and arrLumgates[iLoop].xAvailable then<br/>			udtLumgateMain.arrAmountLumgates[3]	:=	udtLumgateMain.arrAmountLumgates[3] + 1;<br/>		End_If;<br/>		If arrLumgates[iLoop].iModuleLevel = 3 and arrLumgates[iLoop].xAvailable then<br/>			udtLumgateMain.arrAmountLumgates[4]	:=	udtLumgateMain.arrAmountLumgates[4] + 1;<br/>		End_If;<br/>	End_For;<br/>(* Select data to display Lumgates in a branch (Select a Lumgate) *)<br/>For iLoop := 0 to 9 do	(* Voltage output *)<br/>	iTemp						:=	iLumgateSeite + iLoop;<br/>	arrLumgateWeb[iLoop]		:=	iTemp;<br/>	For iLoop2 := 1 to 240 do<br/>		If arrLumgates[iLoop2].iModuleLevel = iSelectRBT and arrLumgates[iLoop2].iModuleNumber = iTemp then<br/>			arr5LumgateValues[iLoop]	:=	arrLumgates[iTemp].iActualOutputLevel;<br/>		End_if;<br/>	End_for;<br/>End_for;<br/>(* Select data to display a single Lumgates *)<br/>iSelectLumgate	:=	iSelectLumgateDevice + iSelectLumgateSeite - 1;<br/>If iSelectRBT &gt;= 0 and iSelectRBT &lt; 4 and iSelectLumgate &gt; 0 and iSelectLumgate &lt; 240 then<br/>	For iLoop := 1 to 240 do<br/>		If arrLumgates[iLoop].iModuleLevel = iSelectRBT and arrLumgates[iLoop].iModuleNumber = iSelectLumgate then<br/>			iTempSelectedLumgate	:=	iLoop;<br/>			Exit;<br/>		End_if;<br/>	End_for;<br/>	If iTempSelectedLumgate &gt; 0 and iTempSelectedLumgate &lt; 241 then<br/>		udtLumgate.arrDimmingScene 				:=	arrLumgates[iTempSelectedLumgate].arrDimmingScene;<br/>
									<br/>		If arrLumgates[iTempSelectedLumgate].xRelay1 &lt;&gt; xR1Old<br/>		or arrLumgates[iTempSelectedLumgate].xRelay2 &lt;&gt; xR2Old then<br/>			xR1Old	:=	arrLumgates[iTempSelectedLumgate].xRelay1;<br/>			xR2Old	:=	arrLumgates[iTempSelectedLumgate].xRelay2;<br/>			If arrLumgates[iTempSelectedLumgate].xRelay1 and arrLumgates[iTempSelectedLumgate].xRelay2 then<br/>				udtLumgate.arrPowerConsumption   	:= arrLumgates[iTempSelectedLumgate].arrPowerConsumption_11;<br/>			Elsif arrLumgates[iTempSelectedLumgate].xRelay1 and not arrLumgates[iTempSelectedLumgate].xRelay2 then<br/>				udtLumgate.arrPowerConsumption   	:= arrLumgates[iTempSelectedLumgate].arrPowerConsumption_10;<br/>			Elsif not arrLumgates[iTempSelectedLumgate].xRelay1 and arrLumgates[iTempSelectedLumgate].xRelay2 then<br/>				udtLumgate.arrPowerConsumption   	:= arrLumgates[iTempSelectedLumgate].arrPowerConsumption_01;<br/>			Elsif not arrLumgates[iTempSelectedLumgate].xRelay1 and not arrLumgates[iTempSelectedLumgate].xRelay2 then<br/>				udtLumgate.arrPowerConsumption  	:= arrLumgates[iTempSelectedLumgate].arrPowerConsumption;<br/>			End_if;<br/>			udtCurrent.xRelay1	:=	arrLumgates[iTempSelectedLumgate].xRelay1;<br/>			udtCurrent.xRelay2	:=	arrLumgates[iTempSelectedLumgate].xRelay2;<br/>		Else<br/>			If udtCurrent.xRelay1 and udtCurrent.xRelay2 then<br/>				udtLumgate.arrPowerConsumption   	:= arrLumgates[iTempSelectedLumgate].arrPowerConsumption_11;<br/>			Elsif udtCurrent.xRelay1 and not udtCurrent.xRelay2 then<br/>				udtLumgate.arrPowerConsumption   	:= arrLumgates[iTempSelectedLumgate].arrPowerConsumption_10;<br/>			Elsif not udtCurrent.xRelay1 and udtCurrent.xRelay2 then<br/>				udtLumgate.arrPowerConsumption   	:= arrLumgates[iTempSelectedLumgate].arrPowerConsumption_01;<br/>			Elsif not udtCurrent.xRelay1 and not udtCurrent.xRelay2 then<br/>				udtLumgate.arrPowerConsumption  	:= arrLumgates[iTempSelectedLumgate].arrPowerConsumption;<br/>			End_if;<br/>		End_if;<br/>		If arrLumgates[iTempSelectedLumgate].xRelay1 = udtCurrent.xRelay1 and arrLumgates[iTempSelectedLumgate].xRelay2 = udtCurrent.xRelay2 then<br/>			udtCurrent.xRelaysEqual	:=	True;<br/>		Else<br/>			udtCurrent.xRelaysEqual	:=	False;<br/>		End_if;<br/>		<br/>		udtLumgate.arrSpecialScene				:=	arrLumgates[iTempSelectedLumgate].arrSpecialScene;<br/>		udtLumgate.iMode						:=	arrLumgates[iTempSelectedLumgate].iMode;<br/>		udtLumgate.iModuleLevel					:=	arrLumgates[iTempSelectedLumgate].iModuleLevel;<br/>		udtLumgate.iModuleNumber				:=	arrLumgates[iTempSelectedLumgate].iModuleNumber;<br/>		udtLumgate.iModuleNumberGeneral			:=	arrLumgates[iTempSelectedLumgate].iModuleNumberGeneral;<br/>		udtLumgate.rActualOutputLevel			:=	int_to_real(arrLumgates[iTempSelectedLumgate].iActualOutputLevel) / 10.0;<br/>		udtLumgate.rMeasurement					:=	int_to_real(arrLumgates[iTempSelectedLumgate].iMeasurement);<br/>		udtLumgate.rOutputLevelFailsave			:=	int_to_real(arrLumgates[iTempSelectedLumgate].iOutputLevelFailsave) / 10.0;<br/>		udtLumgate.rOutputLevelManual			:=	int_to_real(arrLumgates[iTempSelectedLumgate].iOutputLevelManual) / 10.0;<br/>		udtLumgate.rOutputLevelScenario			:=	int_to_real(arrLumgates[iTempSelectedLumgate].iOutputLevelScenario) / 10.0;<br/>		udtLumgate.rOutputLevelScenarioWithClo	:=	int_to_real(arrLumgates[iTempSelectedLumgate].iOutputLevelScenarioWithClo) / 10.0;<br/>		udtLumgate.rOutputLevelTeach			:=	int_to_real(arrLumgates[iTempSelectedLumgate].iOutputLevelTeach) / 10.0;<br/>		udtLumgate.rTargetOutputLevel			:=	int_to_real(arrLumgates[iTempSelectedLumgate].iTargetOutputLevel) / 10.0;<br/>		udtLumgate.udtCloLed.rAmountDecrease 	:=	int_to_real(arrLumgates[iTempSelectedLumgate].udtCloLed.iAmountDecrease) / 10.0;<br/>		udtLumgate.udtCloMaintenance.rAmountDecrease :=	int_to_real(arrLumgates[iTempSelectedLumgate].udtCloMaintenance.iAmountDecrease ) / 10.0;<br/>		udtLumgate.udtCurrentCheck				:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck;<br/>		udtLumgate.udtHourCounter20_50			:=	arrLumgates[iTempSelectedLumgate].udtHourCounter20_50;<br/>		udtLumgate.udtHourCounter50_75			:=	arrLumgates[iTempSelectedLumgate].udtHourCounter50_75;<br/>		udtLumgate.udtHourCounter75_100			:=	arrLumgates[iTempSelectedLumgate].udtHourCounter75_100;<br/>		udtLumgate.udtHourCounterGeneral		:=	arrLumgates[iTempSelectedLumgate].udtHourCounterGeneral;<br/>		udtLumgate.udtHourCounterMaintenance	:=	arrLumgates[iTempSelectedLumgate].udtHourCounterMaintenance;<br/>		udtLumgate.udtInternal					:=	arrLumgates[iTempSelectedLumgate].udtInternal;<br/>		udtLumgate.rSourceOutputLevel			:=	int_to_real(arrLumgates[iTempSelectedLumgate].iSourceOutputLevel) / 10.0;<br/>		udtLumgate.xAvailable					:=	arrLumgates[iTempSelectedLumgate].xAvailable;<br/>		udtLumgate.xInput1						:=	arrLumgates[iTempSelectedLumgate].xInput1;<br/>		udtLumgate.xInput2						:=	arrLumgates[iTempSelectedLumgate].xInput2;<br/>		udtLumgate.xRelay1						:=	arrLumgates[iTempSelectedLumgate].xRelay1;<br/>		udtLumgate.xRelay2						:=	arrLumgates[iTempSelectedLumgate].xRelay2;<br/>		udtLumgate.xSafeFinish					:=	arrLumgates[iTempSelectedLumgate].xSafeFinish;<br/>		udtLumgate.xSafeSet						:=	arrLumgates[iTempSelectedLumgate].xSafeSet;<br/>		udtLumgate.xTeachConsumption			:=	arrLumgates[iTempSelectedLumgate].xTeachConsumption;<br/>		udtLumgate.xTeachFailsave				:=	arrLumgates[iTempSelectedLumgate].xTeachFailsave;<br/>	End_if;<br/>End_if;<br/>
									<br/>(* Display count of Lumgates at selected branch *)<br/>If iSelectRBT &gt;= 0 and iSelectRBT &lt; 4 then<br/>	iSelect				:=	iSelectRBT + 1;<br/>	iTotalLumgatesRBT	:=	udtLumgateMain.arrAmountLumgates[iSelect];<br/>End_if;<br/>
									<br/>(* Hide Lumgates in the selected area wich are not available *)<br/>For iLoop := 0 to 9 do<br/>	If iTotalLumgatesRBT &gt;= arrLumgateWeb[iLoop] then<br/>		arr5Lumgate[iLoop]	:=	True;<br/>	Else<br/>		arr5Lumgate[iLoop]	:=	False;<br/>	End_if;<br/>End_for;<br/>
									<br/>(* Old *)<br/>For iLoop := 1 to 4 do<br/>	If udtLumgateMain.arrSelectNumber[iLoop] &lt; 1 or udtLumgateMain.arrSelectNumber[iLoop] &gt; udtLumgateMain.arrAmountLumgates[iLoop] then<br/>		udtLumgateMain.arrColorSelectNumber[iLoop]	:=	True;<br/>	Else<br/>		udtLumgateMain.arrColorSelectNumber[iLoop]	:=	False;<br/>	End_If;<br/>
									<br/>	If udtLumgateMain.arrButtonSelectNumber[iLoop] then<br/>		udtLumgateMain.arrButtonSelectNumber[iLoop]	:=	False;<br/>		iTempLevel	:=	iLoop - 1;<br/>		For iLoop2 := 1 to 240 do<br/>			If arrLumgates[iLoop2].iModuleLevel = iTempLevel and arrLumgates[iLoop2].iModuleNumber = udtLumgateMain.arrSelectNumber[iLoop] then<br/>				iTempSelectedLumgate	:=	iLoop2;<br/>				Exit;<br/>			End_If;<br/>		End_For;<br/>	End_If;<br/>End_For;<br/>
									<br/>iTempSelectedLumgate				:=	Limit_Int(1,iTempSelectedLumgate,240);<br/>
									<br/>udtLumgateData.iModuleLevel			:=	arrLumgates[iTempSelectedLumgate].iModuleLevel + 1;<br/>udtLumgateData.iModuleNumber		:=	arrLumgates[iTempSelectedLumgate].iModuleNumber;<br/>udtLumgateData.iModuleNumberGeneral	:=	arrLumgates[iTempSelectedLumgate].iModuleNumberGeneral;<br/>
									<br/>For iLoop := 1 to 50 do<br/>	udtLumgateScenario.arrScenarioActive[iLoop]	:=	False;<br/>	udtLumgateScenario.arrScenarioUsed[iLoop]	:=	arrLumgates[iTempSelectedLumgate].arrDimmingScene[iLoop].xUsed;<br/>	udtLumgateScenario.arrScenarioValue[iLoop]	:=	arrLumgates[iTempSelectedLumgate].arrDimmingScene[iLoop].iValue;<br/>End_For;<br/>
									<br/>For iLoop := 1 to 15 do<br/>	udtLumgateSpecialScenario.arrScenarioUsed[iLoop]	:=	arrLumgates[iTempSelectedLumgate].arrSpecialScene[iLoop].xUsed;<br/>	udtLumgateSpecialScenario.arrScenarioValue[iLoop]	:=	arrLumgates[iTempSelectedLumgate].arrSpecialScene[iLoop].iValue;<br/>End_For;<br/>
									<br/>If udtScenarioMode.arrActualScene[1] &gt; 0 then<br/>	iTempValue											:=	udtScenarioMode.arrActualScene[1];<br/>	udtLumgateScenario.arrScenarioActive[iTempValue]	:=	True;<br/>End_If;<br/>If udtScenarioMode.arrActualScene[2] &gt; 0 then<br/>	iTempValue											:=	udtScenarioMode.arrActualScene[2];<br/>	udtLumgateScenario.arrScenarioActive[iTempValue]	:=	True;<br/>End_If;<br/>If udtScenarioMode.arrActualScene[3] &gt; 0 then<br/>	iTempValue											:=	udtScenarioMode.arrActualScene[3];<br/>	udtLumgateScenario.arrScenarioActive[iTempValue]	:=	True;<br/>End_If;<br/>If udtScenarioMode.arrActualScene[4] &gt; 0 then<br/>	iTempValue											:=	udtScenarioMode.arrActualScene[4];<br/>	udtLumgateScenario.arrScenarioActive[iTempValue]	:=	True;<br/>End_If;<br/>
									<br/>(* Old *)<br/>If udtLumgateScenario.iEdit &lt;&gt; 0 then<br/>	udtLumgateScenario.iEditSet		:=	udtLumgateScenario.iEdit;<br/>	iTempValue						:=	udtLumgateScenario.iEditSet;<br/>	udtLumgateScenario.iEdit		:=	0;<br/>	udtLumgateScenario.iValueSet	:=	udtLumgateScenario.arrScenarioValue[iTempValue];<br/>	udtLumgateScenario.xUsedSetView	:=	udtLumgateScenario.arrScenarioUsed[iTempValue];<br/>End_If;<br/>(* Old *)<br/>If udtLumgateScenario.xUsedSet then<br/>	udtLumgateScenario.xUsedSet		:=	False;<br/>	udtLumgateScenario.xUsedSetView	:=	not udtLumgateScenario.xUsedSetView;<br/>End_If;<br/>(* Old *)<br/>If udtLumgateScenario.xSet then<br/>	udtLumgateScenario.xSet			:=	False;<br/>	iTempValue						:=	udtLumgateScenario.iEditSet;<br/>	udtLumgateScenario.iEditSet		:=	0;<br/>	udtLumgateScenario.iValueSet	:=	Limit_Int(0,udtLumgateScenario.iValueSet,1070);<br/>
									<br/>	arrLumgates[iTempSelectedLumgate].arrDimmingScene[iTempValue].xUsed	:=	udtLumgateScenario.xUsedSetView;<br/>	arrLumgates[iTempSelectedLumgate].arrDimmingScene[iTempValue].iValue	:=	udtLumgateScenario.iValueSet;<br/>End_If;<br/>(* Old *)<br/>udtLumgateScenario.xColorValue:= udtLumgateScenario.iValueSet &gt; 1070 or udtLumgateScenario.iValueSet &lt; 0;<br/>(* Old *)<br/>If udtLumgateSpecialScenario.iEdit &lt;&gt; 0 then<br/>	udtLumgateSpecialScenario.iEditSet		:=	udtLumgateSpecialScenario.iEdit;<br/>	iTempValue								:=	udtLumgateSpecialScenario.iEditSet;<br/>	udtLumgateSpecialScenario.iEdit			:=	0;<br/>	udtLumgateSpecialScenario.iValueSet		:=	udtLumgateSpecialScenario.arrScenarioValue[iTempValue];<br/>	udtLumgateSpecialScenario.xUsedSetView	:=	udtLumgateSpecialScenario.arrScenarioUsed[iTempValue];<br/>End_If;<br/>(* Old *)<br/>If udtLumgateSpecialScenario.xUsedSet then<br/>	udtLumgateSpecialScenario.xUsedSet		:=	False;<br/>	udtLumgateSpecialScenario.xUsedSetView	:=	not udtLumgateSpecialScenario.xUsedSetView;<br/>End_If;<br/>(* Old *)<br/>If udtLumgateSpecialScenario.xSet then<br/>	udtLumgateSpecialScenario.xSet			:=	False;<br/>	iTempValue								:=	udtLumgateSpecialScenario.iEditSet;<br/>	udtLumgateSpecialScenario.iEditSet		:=	0;<br/>	udtLumgateSpecialScenario.iValueSet		:=	Limit_Int(0,udtLumgateSpecialScenario.iValueSet,1070);<br/>
									<br/>	arrLumgates[iTempSelectedLumgate].arrSpecialScene[iTempValue].xUsed	:=	udtLumgateSpecialScenario.xUsedSetView;<br/>	arrLumgates[iTempSelectedLumgate].arrSpecialScene[iTempValue].iValue	:=	udtLumgateSpecialScenario.iValueSet;<br/>End_If;<br/>(* Old *)<br/>udtLumgateSpecialScenario.xColorValue	:=	udtLumgateSpecialScenario.iValueSet &gt; 1070 or udtLumgateSpecialScenario.iValueSet &lt; 0;<br/>
									<br/>udtLumgateSpecialScenario.arrScenarioActive[1]	:=	wSpecialScenario.X0;<br/>udtLumgateSpecialScenario.arrScenarioActive[2]	:=	wSpecialScenario.X1;<br/>udtLumgateSpecialScenario.arrScenarioActive[3]	:=	wSpecialScenario.X2;<br/>udtLumgateSpecialScenario.arrScenarioActive[4]	:=	wSpecialScenario.X3;<br/>udtLumgateSpecialScenario.arrScenarioActive[5]	:=	wSpecialScenario.X4;<br/>udtLumgateSpecialScenario.arrScenarioActive[6]	:=	wSpecialScenario.X5;<br/>udtLumgateSpecialScenario.arrScenarioActive[7]	:=	wSpecialScenario.X6;<br/>udtLumgateSpecialScenario.arrScenarioActive[8]	:=	wSpecialScenario.X7;<br/>udtLumgateSpecialScenario.arrScenarioActive[9]	:=	wSpecialScenario.X8;<br/>udtLumgateSpecialScenario.arrScenarioActive[10]	:=	wSpecialScenario.X9;<br/>udtLumgateSpecialScenario.arrScenarioActive[11]	:=	wSpecialScenario.X10;<br/>udtLumgateSpecialScenario.arrScenarioActive[12]	:=	wSpecialScenario.X11;<br/>udtLumgateSpecialScenario.arrScenarioActive[13]	:=	wSpecialScenario.X12;<br/>udtLumgateSpecialScenario.arrScenarioActive[14]	:=	wSpecialScenario.X13;<br/>udtLumgateSpecialScenario.arrScenarioActive[15]	:=	wSpecialScenario.X14;<br/>
									<br/>For iLoop := 1 to 22 do<br/>	udtLumgateCurrentConsumption.arrActualOutput[iLoop]	:=	False;<br/>End_For;<br/>
									<br/>(* Current consumption *)<br/>iTempValue	:=	arrLumgates[iTempSelectedLumgate].iActualOutputLevel;<br/>Case iTempValue of<br/>	0:<br/>		iActualPosition										:=	-15;	(* Position pointer *)<br/>	1..49:<br/>	 	udtLumgateCurrentConsumption.arrActualOutput[1]		:=	True; (* 0,01 *)<br/>		iActualPosition										:=	0;<br/>	51..149:<br/>		udtLumgateCurrentConsumption.arrActualOutput[3]		:=	True; (* 1,0 *)<br/>		iActualPosition										:=	30;<br/>	151..249:<br/>		udtLumgateCurrentConsumption.arrActualOutput[5]		:=	True; (* 2,0 *)<br/>		iActualPosition										:=	60;<br/>	251..349:<br/>		udtLumgateCurrentConsumption.arrActualOutput[7]		:=	True; (* 3,0 *)<br/>		iActualPosition										:=	90;<br/>	351..449:<br/>		udtLumgateCurrentConsumption.arrActualOutput[9]		:=	True; (* 4,0 *)<br/>		iActualPosition										:=	120;<br/>	451..549:<br/>		udtLumgateCurrentConsumption.arrActualOutput[11]	:=	True; (* 5,0 *)<br/>		iActualPosition										:=	150;<br/>	551..649:<br/>		udtLumgateCurrentConsumption.arrActualOutput[13]	:=	True; (* 6,0 *)<br/>		iActualPosition										:=	180;<br/>	651..749:<br/>		udtLumgateCurrentConsumption.arrActualOutput[15]	:=	True; (* 7,0 *)<br/>		iActualPosition										:=	210;<br/>	751..849:<br/>		udtLumgateCurrentConsumption.arrActualOutput[17]	:=	True; (* 8,0 *)<br/>		iActualPosition										:=	240;<br/>	851..949:<br/>		udtLumgateCurrentConsumption.arrActualOutput[19]	:=	True; (* 9,0 *)<br/>		iActualPosition										:=	270;<br/>	951..1069:<br/>		udtLumgateCurrentConsumption.arrActualOutput[21]	:=	True; (* 10,0 *)<br/>		iActualPosition										:=	300;<br/>End_Case;<br/>
									<br/>Case iTempValue of<br/>	2..99:<br/>		udtLumgateCurrentConsumption.arrActualOutput[2]		:=	True; (* 0,5 *)<br/>		iActualPosition										:=	15;<br/>	101..199:<br/>		udtLumgateCurrentConsumption.arrActualOutput[4]		:=	True; (* 1,5 *)<br/>		iActualPosition										:=	45;<br/>	201..299:<br/>		udtLumgateCurrentConsumption.arrActualOutput[6]		:=	True; (* 2,5 *)<br/>		iActualPosition										:=	75;<br/>	301..399:<br/>		udtLumgateCurrentConsumption.arrActualOutput[8]		:=	True; (* 3,5 *)<br/>		iActualPosition										:=	105;<br/>	401..499:<br/>		udtLumgateCurrentConsumption.arrActualOutput[10]	:=	True; (* 4,5 *)<br/>		iActualPosition										:=	135;<br/>	501..599:<br/>		udtLumgateCurrentConsumption.arrActualOutput[12]	:=	True; (* 5,5 *)<br/>		iActualPosition										:=	165;<br/>	601..699:<br/>		udtLumgateCurrentConsumption.arrActualOutput[14]	:=	True; (* 6,5 *)<br/>		iActualPosition										:=	195;<br/>	701..799:<br/>		udtLumgateCurrentConsumption.arrActualOutput[16]	:=	True; (* 7,5 *)<br/>		iActualPosition										:=	225;<br/>	801..899:<br/>		udtLumgateCurrentConsumption.arrActualOutput[18]	:=	True; (* 8,5 *)<br/>		iActualPosition										:=	255;<br/>	901..999:<br/>		udtLumgateCurrentConsumption.arrActualOutput[20]	:=	True; (* 9,5 *)<br/>		iActualPosition										:=	285;<br/>	1001..1070:<br/>		udtLumgateCurrentConsumption.arrActualOutput[22]	:=	True; (* 10,7 *)<br/>		iActualPosition										:=	315;<br/>End_Case;<br/>
									<br/>(* Old *)<br/>udtLumgateCurrentConsumption.strVoltage			:=	Int_To_String(iTempValue,'%01d');<br/>(* Old *)<br/>Case iTempValue of<br/>	0..9:<br/>		udtLumgateCurrentConsumption.strVoltage	:=	Concat('0,0',udtLumgateCurrentConsumption.strVoltage);<br/>	<br/>	10..99:<br/>		udtLumgateCurrentConsumption.strVoltage	:=	Concat('0,',udtLumgateCurrentConsumption.strVoltage);<br/>
									<br/>	100..999:<br/>		udtLumgateCurrentConsumption.strVoltage	:=	Insert(udtLumgateCurrentConsumption.strVoltage,',',1);<br/>
									<br/>	1000..1070:<br/>		udtLumgateCurrentConsumption.strVoltage	:=	Insert(udtLumgateCurrentConsumption.strVoltage,',',2);<br/>End_Case;<br/>
									<br/>If iTempValue &gt; 0 then<br/>	udtLumgateCurrentConsumption.iCurrent			:=	arrLumgates[iTempSelectedLumgate].iMeasurement;<br/>Else<br/>	udtLumgateCurrentConsumption.iCurrent			:=	0;<br/>End_If;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="LumgateState">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Edit Lumgate data *)<br/>If xEnableLumgateEdit then		(*Enable edit mode *)<br/>	xLumgateEditable	:=	True;<br/>	If xCancelLumgate or (iTempSelectedLumgate &lt;&gt; iTempSelectedLumgateOld) then	(* Exit edit mode, restore old date *)<br/>		xLumgateEditable	:=	False;<br/>		xEnableLumgateEdit	:=	False;<br/>		xSafeLumgate		:=	False;<br/>		xCancelLumgate		:=	False;<br/>	Else<br/>		(* Limit input values *)<br/>		rLevelFailsafe											:=	limit_real(0.0,rLevelFailsafe,107.0);<br/>		rManuelOutput											:=	limit_real(0.0,rManuelOutput,107.0);<br/>		arrLumgates[iTempSelectedLumgate].iOutputLevelManual	:=	real_to_int(rManuelOutput * 10.0);<br/>		arrLumgates[iTempSelectedLumgate].xManualRelay1			:=	udtLumgate.xManualRelay1;<br/>		arrLumgates[iTempSelectedLumgate].xManualRelay2			:=	udtLumgate.xManualRelay2;<br/>
									<br/>		arrLumgates[iTempSelectedLumgate].xAutomaticManual		:=	xSetManualLumgate;	(* Change mode directly *)<br/>
									<br/>		(* Detect fail mode changes, save the mode directly *)<br/>		If ((arrLumgates[iTempSelectedLumgate].xFailMode &lt;&gt; xFailMode)<br/>			or (arrLumgates[iTempSelectedLumgate].xFailsaveRelay1 &lt;&gt; udtLumgate.xFailsaveRelay1)<br/>			or (arrLumgates[iTempSelectedLumgate].xFailsaveRelay2 &lt;&gt; udtLumgate.xFailsaveRelay2)) then<br/>			arrLumgates[iTempSelectedLumgate].xFailMode				:=	xFailMode;<br/>			arrLumgates[iTempSelectedLumgate].xTeachFailsave		:=	True;<br/>			arrLumgates[iTempSelectedLumgate].xFailsaveRelay1		:=	udtLumgate.xFailsaveRelay1;<br/>			arrLumgates[iTempSelectedLumgate].xFailsaveRelay2		:=	udtLumgate.xFailsaveRelay2;<br/>		End_if;<br/>
									<br/>		If xSafeLumgate then	(* Exit edit mode, save changed values *)<br/>			xLumgateEditable	:=	False;<br/>			xEnableLumgateEdit	:=	False;<br/>			xSafeLumgate		:=	False;<br/>			xCancelLumgate		:=	False;<br/>		<br/>			arrLumgates[iTempSelectedLumgate].xRelay1_NC	:=	udtLumgate.xRelay1_NC;<br/>			arrLumgates[iTempSelectedLumgate].xRelay2_NC	:=	udtLumgate.xRelay2_NC;<br/>
									<br/>			If rLevelFailsafe &lt;&gt; int_to_real(arrLumgates[iTempSelectedLumgate].iOutputLevelFailsave / 10) then<br/>				arrLumgates[iTempSelectedLumgate].xTeachFailsave		:=	True;<br/>				arrLumgates[iTempSelectedLumgate].iOutputLevelFailsave	:=	real_to_int(rLevelFailsafe * 10.0);<br/>				arrLumgates[iTempSelectedLumgate].xFailsaveRelay1		:=	udtLumgate.xFailsaveRelay1;<br/>				arrLumgates[iTempSelectedLumgate].xFailsaveRelay2		:=	udtLumgate.xFailsaveRelay2;<br/>			End_if;<br/>			arrLumgates[iTempSelectedLumgate].strDescription		:=	strLumgateDescription;<br/>		End_if;<br/>	End_if;<br/>Else<br/>	iTempSelectedLumgateOld	:=	iTempSelectedLumgate;<br/>	rManuelOutput			:=	int_to_real(arrLumgates[iTempSelectedLumgate].iOutputLevelManual / 10);<br/>	xFailMode				:=	arrLumgates[iTempSelectedLumgate].xFailMode;<br/>	strLumgateDescription	:=	arrLumgates[iTempSelectedLumgate].strDescription;<br/>	xSetManualLumgate		:=	arrLumgates[iTempSelectedLumgate].xAutomaticManual;<br/>	rLevelFailsafe			:=	int_to_real(arrLumgates[iTempSelectedLumgate].iOutputLevelFailsave / 10);<br/>
									<br/>	udtLumgate.xFailsaveRelay1				:=	arrLumgates[iTempSelectedLumgate].xFailsaveRelay1;<br/>	udtLumgate.xFailsaveRelay2				:=	arrLumgates[iTempSelectedLumgate].xFailsaveRelay2;<br/>	udtLumgate.xRelay1_NC					:=	arrLumgates[iTempSelectedLumgate].xRelay1_NC;<br/>	udtLumgate.xRelay2_NC					:=	arrLumgates[iTempSelectedLumgate].xRelay2_NC;<br/>	udtLumgate.xManualRelay1				:=	arrLumgates[iTempSelectedLumgate].xManualRelay1;<br/>	udtLumgate.xManualRelay2				:=	arrLumgates[iTempSelectedLumgate].xManualRelay1;<br/>	udtLumgate.strDescription				:=	arrLumgates[iTempSelectedLumgate].strDescription;<br/>	udtLumgate.xAutomaticManual				:=	arrLumgates[iTempSelectedLumgate].xAutomaticManual;<br/>End_if;<br/>
									<br/>If arrLumgates[iTempSelectedLumgate].xAutomaticManual then<br/>	strLumgateState	:=	'Manuel mode';<br/>Elsif arrLumgates[iTempSelectedLumgate].xTeachConsumption then<br/>	strLumgateState	:=	'Teach current';<br/>Elsif arrLumgates[iTempSelectedLumgate].xError then<br/>	strLumgateState	:=	'Error';<br/>Elsif not arrLumgates[iTempSelectedLumgate].xAutomaticManual then<br/>	strLumgateState	:=	'Automatic mode';<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="CurrentConsumption">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Current Consuption - Diagram *)<br/>For iLoop := 1 to 22 do<br/>	iLoop2	:=	iLoop + 1;<br/>
									<br/>	(* Scale diagram *)<br/>	If udtCurrent.xRelay1 and udtCurrent.xRelay2 then<br/>		udtLumgateCurrentConsumption.arrCurrentValue[iLoop]   := arrLumgates[iTempSelectedLumgate].arrPowerConsumption_11[iLoop2];<br/>	Elsif udtCurrent.xRelay1 and not udtCurrent.xRelay2 then<br/>		udtLumgateCurrentConsumption.arrCurrentValue[iLoop]   := arrLumgates[iTempSelectedLumgate].arrPowerConsumption_10[iLoop2];<br/>	Elsif not udtCurrent.xRelay1 and udtCurrent.xRelay2 then<br/>		udtLumgateCurrentConsumption.arrCurrentValue[iLoop]   := arrLumgates[iTempSelectedLumgate].arrPowerConsumption_01[iLoop2];<br/>	Elsif not udtCurrent.xRelay1 and not udtCurrent.xRelay2 then<br/>		udtLumgateCurrentConsumption.arrCurrentValue[iLoop]   := arrLumgates[iTempSelectedLumgate].arrPowerConsumption[iLoop2];<br/>	End_if;<br/>	<br/>	If udtLumgateCurrentConsumption.arrCurrentValue[5] &lt; udtLumgateCurrentConsumption.arrCurrentValue[1] then<br/>		iScaleValue	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 120.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[1]));<br/>	Elsif udtLumgateCurrentConsumption.arrCurrentValue[10] &lt; udtLumgateCurrentConsumption.arrCurrentValue[5] then<br/>		iScaleValue	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 120.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[5]));<br/>	Elsif udtLumgateCurrentConsumption.arrCurrentValue[15] &lt; udtLumgateCurrentConsumption.arrCurrentValue[10] then<br/>		iScaleValue	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 120.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[10]));<br/>	Elsif udtLumgateCurrentConsumption.arrCurrentValue[22] &lt; udtLumgateCurrentConsumption.arrCurrentValue[15] then<br/>		iScaleValue	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 120.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[15]));<br/>	Else<br/>		iScaleValue	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[22]));<br/>	End_if;<br/>	If iScaleValue &lt; 100 then		(* max current &lt; 100 mA *)<br/>		(* Measured current dots *)<br/>		arrCurrentDiagram[iLoop]			:=	udtLumgateCurrentConsumption.arrCurrentValue[iLoop] * -1;<br/>		(* current - warning deviation *)<br/>		arrCurrentDiagramWarningMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) * -1;<br/>		(* current + warning deviation *)<br/>		arrCurrentDiagramWarningMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) * -1;<br/>		(* current - alarm deviation *)<br/>		arrCurrentDiagramAlarmMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) * -1;<br/>		(* current + alarm deviation *)<br/>		arrCurrentDiagramAlarmMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) * -1;<br/>		(* actual y position *)<br/>		iCurrentActual						:=	udtLumgateCurrentConsumption.iCurrent * -1;<br/>		(* y scale *)<br/>		arrScale[0]							:=	100;<br/>		arrScale[1]							:=	100 * 4	/ 5;<br/>		arrScale[2]							:=	100 * 3	/ 5;<br/>		arrScale[3]							:=	100 * 2	/ 5;<br/>		arrScale[4]							:=	100 * 1	/ 5;<br/>	Elsif iScaleValue &lt; 200 then	(* max current &lt; 200 mA *)<br/>		arrCurrentDiagram[iLoop]			:=	udtLumgateCurrentConsumption.arrCurrentValue[iLoop] / -2;<br/>		arrCurrentDiagramWarningMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -2;<br/>		arrCurrentDiagramWarningMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -2;<br/>		arrCurrentDiagramAlarmMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -2;<br/>		arrCurrentDiagramAlarmMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -2;<br/>		iCurrentActual						:=	udtLumgateCurrentConsumption.iCurrent / -2;<br/>		arrScale[0]							:=	200;<br/>		arrScale[1]							:=	200 * 4	/ 5;<br/>		arrScale[2]							:=	200 * 3	/ 5;<br/>		arrScale[3]							:=	200 * 2	/ 5;<br/>		arrScale[4]							:=	200 * 1	/ 5;<br/>	Elsif iScaleValue &lt; 300 then	(* max current &lt; 300 mA *)<br/>		arrCurrentDiagram[iLoop]			:=	udtLumgateCurrentConsumption.arrCurrentValue[iLoop] / -3;<br/>		arrCurrentDiagramWarningMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -3;<br/>		arrCurrentDiagramWarningMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -3;<br/>		arrCurrentDiagramAlarmMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -3;<br/>		arrCurrentDiagramAlarmMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -3;<br/>		iCurrentActual						:=	udtLumgateCurrentConsumption.iCurrent / -3;<br/>		arrScale[0]							:=	300;<br/>		arrScale[1]							:=	300 * 4	/ 5;<br/>		arrScale[2]							:=	300 * 3	/ 5;<br/>		arrScale[3]							:=	300 * 2	/ 5;<br/>		arrScale[4]							:=	300 * 1	/ 5;<br/>	Elsif iScaleValue &lt; 500 then	(* max current &lt; 500 mA *)<br/>		arrCurrentDiagram[iLoop]			:=	udtLumgateCurrentConsumption.arrCurrentValue[iLoop] / -5;<br/>		arrCurrentDiagramWarningMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -5;<br/>		arrCurrentDiagramWarningMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -5;<br/>		arrCurrentDiagramAlarmMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -5;<br/>		arrCurrentDiagramAlarmMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -5;<br/>		iCurrentActual						:=	udtLumgateCurrentConsumption.iCurrent / -5;<br/>		arrScale[0]							:=	500;<br/>		arrScale[1]							:=	500 * 4	/ 5;<br/>		arrScale[2]							:=	500 * 3	/ 5;<br/>		arrScale[3]							:=	500 * 2	/ 5;<br/>		arrScale[4]							:=	500 * 1	/ 5;<br/>	Elsif iScaleValue &lt; 1000 then	(* max current &lt; 1 A *)<br/>		arrCurrentDiagram[iLoop]			:=	udtLumgateCurrentConsumption.arrCurrentValue[iLoop] / -10;<br/>		arrCurrentDiagramWarningMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -10;<br/>		arrCurrentDiagramWarningMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -10;<br/>		arrCurrentDiagramAlarmMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -10;<br/>		arrCurrentDiagramAlarmMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -10;<br/>		iCurrentActual						:=	udtLumgateCurrentConsumption.iCurrent / -10;<br/>		arrScale[0]							:=	1000;<br/>		arrScale[1]							:=	1000 * 4	/ 5;<br/>		arrScale[2]							:=	1000 * 3	/ 5;<br/>		arrScale[3]							:=	1000 * 2	/ 5;<br/>		arrScale[4]							:=	1000 * 1	/ 5;<br/>	Elsif iScaleValue &lt; 3000 then	(* max current &lt; 3 A *)<br/>		arrCurrentDiagram[iLoop]			:=	udtLumgateCurrentConsumption.arrCurrentValue[iLoop] / -30;<br/>		arrCurrentDiagramWarningMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -30;<br/>		arrCurrentDiagramWarningMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -30;<br/>		arrCurrentDiagramAlarmMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -30;<br/>		arrCurrentDiagramAlarmMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -30;<br/>		iCurrentActual						:=	udtLumgateCurrentConsumption.iCurrent / -30;<br/>		arrScale[0]							:=	3000;<br/>		arrScale[1]							:=	3000 * 4	/ 5;<br/>		arrScale[2]							:=	3000 * 3	/ 5;<br/>		arrScale[3]							:=	3000 * 2	/ 5;<br/>		arrScale[4]							:=	3000 * 1	/ 5;<br/>	Elsif iScaleValue &lt; 5000 then	(* max current &lt; 5 A *)<br/>		arrCurrentDiagram[iLoop]			:=	udtLumgateCurrentConsumption.arrCurrentValue[iLoop] / -50;<br/>		arrCurrentDiagramWarningMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -50;<br/>		arrCurrentDiagramWarningMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -50;<br/>		arrCurrentDiagramAlarmMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -50;<br/>		arrCurrentDiagramAlarmMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -50;<br/>		iCurrentActual						:=	udtLumgateCurrentConsumption.iCurrent / -50;<br/>		arrScale[0]							:=	5000;<br/>		arrScale[1]							:=	5000 * 4	/ 5;<br/>		arrScale[2]							:=	5000 * 3	/ 5;<br/>		arrScale[3]							:=	5000 * 2	/ 5;<br/>		arrScale[4]							:=	5000 * 1	/ 5;<br/>	Elsif iScaleValue &lt; 10000 then	(* max current &lt; 10 A *)<br/>		arrCurrentDiagram[iLoop]			:=	udtLumgateCurrentConsumption.arrCurrentValue[iLoop] / -100;<br/>		arrCurrentDiagramWarningMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -100;<br/>		arrCurrentDiagramWarningMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -100;<br/>		arrCurrentDiagramAlarmMin[iLoop]	:=	real_to_int(((100.0 - arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -100;<br/>		arrCurrentDiagramAlarmMax[iLoop]	:=	real_to_int(((arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError + 100.0) / 100.0) * int_to_real(udtLumgateCurrentConsumption.arrCurrentValue[iLoop])) / -100;<br/>		iCurrentActual						:=	udtLumgateCurrentConsumption.iCurrent / -100;<br/>		arrScale[0]							:=	10000;<br/>		arrScale[1]							:=	uint_to_int(uint#10000 * uint#4	/ uint#5);<br/>		arrScale[2]							:=	10000 * 3	/ 5;<br/>		arrScale[3]							:=	10000 * 2	/ 5;<br/>		arrScale[4]							:=	10000 * 1	/ 5;<br/>	End_if;<br/>End_For;<br/>
									<br/>(* Execute current consuption for a single Lumgate *)<br/>If udtCurrent.xTeachCurrent then	(* Request curret teaching *)<br/>	If udtCurrent.xTeachConfirmation then		(* Confirm starting current teaching *)<br/>		udtCurrent.xTeachCurrent			:=	False;<br/>		udtCurrent.xTeachConfirmation		:=	False;<br/>		udtCurrent.xTeachNotConfirmation	:=	False;<br/>		arrLumgates[iTempSelectedLumgate].xTeachConsumption	:=	True;<br/>		strDiag												:=	'Starting current measurement';<br/>	Elsif udtCurrent.xTeachNotConfirmation then	(* Cancel starting current teaching *)<br/>		udtCurrent.xTeachCurrent			:=	False;<br/>		udtCurrent.xTeachConfirmation		:=	False;<br/>		udtCurrent.xTeachNotConfirmation	:=	False;<br/>	End_if;<br/>End_if;<br/>
									<br/>(* Execute current consuption for all Lumgates *)<br/>If udtCurrent.xTeachAll then<br/>	If udtCurrent.xTeachConfirmation then<br/>		udtCurrent.xTeachAll				:=	False;<br/>		udtCurrent.xTeachConfirmation		:=	False;<br/>		udtCurrent.xTeachNotConfirmation	:=	False;<br/>		For iLoop := 1 to 240 do<br/>			If arrLumgates[iLoop].xAvailable then<br/>				arrLumgates[iLoop].xTeachConsumption	:=	True;<br/>			End_if;<br/>		End_for;<br/>		strDiag										:=	'Starting current measurement';<br/>	Elsif udtCurrent.xTeachNotConfirmation then<br/>		udtCurrent.xTeachAll				:=	False;<br/>		udtCurrent.xTeachConfirmation		:=	False;<br/>		udtCurrent.xTeachNotConfirmation	:=	False;<br/>	End_if;<br/>End_if;<br/>
									<br/>(* Current consuption - Edit fields *)<br/>If udtCurrent.xEnableCurrentEdit then	(*Enable edit mode *)<br/>	udtCurrent.xEditableCurrent		:=	True;<br/>	If udtCurrent.xCancelCurrent or (iTempSelectedLumgate &lt;&gt; iTempSelectedLumgateOld) then(* Exit edit mode, restore old date *)<br/>		udtCurrent.xEditableCurrent		:=	False;<br/>		udtCurrent.xEnableCurrentEdit	:=	False;<br/>		udtCurrent.xSafeCurrent			:=	False;<br/>		udtCurrent.xCancelCurrent 		:=	False;<br/>	Else<br/>		(* Limit input values *)<br/>		udtCurrent.rDeviationError		:=	limit_real(0.0,udtCurrent.rDeviationError,100.0);<br/>		udtCurrent.rDeviationWarning	:=	limit_real(0.0,udtCurrent.rDeviationWarning,100.0);<br/>
									<br/>		If udtCurrent.xSafeCurrent then	(* Exit edit mode, save changed values *)<br/>			udtCurrent.xEditableCurrent		:=	False;<br/>			udtCurrent.xEnableCurrentEdit	:=	False;<br/>			udtCurrent.xSafeCurrent			:=	False;<br/>			udtCurrent.xCancelCurrent 		:=	False;<br/>
									<br/>			arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xActiveCurrentCheckWarning	:=	udtCurrent.xActivateWarning;<br/>			arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning			:=	udtCurrent.rDeviationWarning;<br/>			arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xActiveCurrentCheckError		:=	udtCurrent.xActivateError;<br/>			arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError				:=	udtCurrent.rDeviationError;<br/>		End_if;<br/>
									<br/>	End_if;<br/>Else	(* Updating values... *)<br/>	iTempSelectedLumgateOld						:=	iTempSelectedLumgate;<br/>	udtCurrent.xActivateWarning					:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xActiveCurrentCheckWarning;<br/>	udtCurrent.xActivateError					:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xActiveCurrentCheckError;<br/>
									<br/>	udtLumgateCurrentConsumption.xColorError	:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xError;<br/>	udtLumgateCurrentConsumption.xColorWarning	:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xWarning;<br/>	udtCurrent.rDeviationError					:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError;<br/>	udtCurrent.rDeviationWarning				:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning;<br/>End_if;<br/>
									<br/>udtLumgateCurrentConsumption.strPercentageError		:=	Real_To_String(arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageError,'%01.2f');<br/>udtLumgateCurrentConsumption.strPercentageWarning	:=	Real_To_String(arrLumgates[iTempSelectedLumgate].udtCurrentCheck.rPercentageWarning,'%01.2f');<br/>udtLumgateCurrentConsumption.iLimitMaxError			:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.iLimitMaxError;<br/>udtLumgateCurrentConsumption.iLimitMinError			:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.iLimitMinError;<br/>udtLumgateCurrentConsumption.iLimitMaxWarning		:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.iLimitMaxWarning;<br/>udtLumgateCurrentConsumption.iLimitMinWarning		:=	arrLumgates[iTempSelectedLumgate].udtCurrentCheck.iLimitMinWarning;<br/>
									<br/>If arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xActiveCurrentCheckError and arrLumgates[iTempSelectedLumgate].udtInternal.xPowerConsumptionCorrect then<br/>	udtLumgateCurrentConsumption.strStateError		:=	'On';<br/>Elsif not arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xActiveCurrentCheckError then<br/>	udtLumgateCurrentConsumption.strStateError		:=	'Off';<br/>Else<br/>	udtLumgateCurrentConsumption.strStateError		:=	'n.a.';<br/>End_If;<br/>
									<br/>If arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xActiveCurrentCheckWarning and arrLumgates[iTempSelectedLumgate].udtInternal.xPowerConsumptionCorrect then<br/>	udtLumgateCurrentConsumption.strStateWarning	:=	'On';<br/>Elsif not arrLumgates[iTempSelectedLumgate].udtCurrentCheck.xActiveCurrentCheckWarning then<br/>	udtLumgateCurrentConsumption.strStateWarning	:=	'Off';<br/>Else<br/>	udtLumgateCurrentConsumption.strStateWarning	:=	'n.a.';<br/>End_If;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="ConstantLightOutput">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Edit CLO data *)<br/>If udtCLO.xEnableCLO_Edit then	(*Enable edit mode *)<br/>	udtCLO.xEditableCLO			:=	True;<br/>
									<br/>	If udtCLO.xCancelCLO or (iTempSelectedLumgate &lt;&gt; iTempSelectedLumgateOld) then(* Exit edit mode, restore old date *)<br/>		udtCLO.xEditableCLO		:=	False;<br/>		udtCLO.xEnableCLO_Edit	:=	False;<br/>		udtCLO.xSafeCLO			:=	False;<br/>		udtCLO.xCancelCLO		:=	False;<br/>	Else<br/>		(* Limit input values *)<br/>		udtCLO.rDecreaseCLO				:=	limit_real(0.0,udtCLO.rDecreaseCLO,20.0);<br/>		udtCLO.rDecreaseMaintenance		:=	limit_real(0.0,udtCLO.rDecreaseMaintenance,20.0);<br/>
									<br/>		arrLumgates[iTempSelectedLumgate].udtHourCounterGeneral.xReset		:=	udtCLO.xResetOperatingHours;<br/>		arrLumgates[iTempSelectedLumgate].udtHourCounterMaintenance.xReset	:=	udtCLO.xResetMaintenanceHours;<br/>		arrLumgates[iTempSelectedLumgate].udtHourCounter20_50.xReset		:=	udtCLO.xResetOperatingHours;<br/>		arrLumgates[iTempSelectedLumgate].udtHourCounter50_75.xReset		:=	udtCLO.xResetOperatingHours;<br/>		arrLumgates[iTempSelectedLumgate].udtHourCounter75_100.xReset		:=	udtCLO.xResetOperatingHours;<br/>
									<br/>		If udtCLO.xSafeCLO then	(* Exit edit mode, save changed values *)<br/>			udtCLO.xEditableCLO		:=	False;<br/>			udtCLO.xEnableCLO_Edit	:=	False;<br/>			udtCLO.xSafeCLO			:=	False;<br/>			udtCLO.xCancelCLO		:=	False;<br/>
									<br/>			arrLumgates[iTempSelectedLumgate].udtCloLed.xActive					:=	udtCLO.xActivateCLO;<br/>			If udtCLO.xActivateCLO then<br/>				arrLumgates[iTempSelectedLumgate].udtCloLed.rPercentage			:=	udtCLO.rDecreaseCLO;<br/>				arrLumgates[iTempSelectedLumgate].udtCloLed.udiHours			:=	udtCLO.udiHoursCLO;<br/>			Else<br/>				arrLumgates[iTempSelectedLumgate].udtCloLed.rPercentage			:=	0.0;<br/>				arrLumgates[iTempSelectedLumgate].udtCloLed.udiHours			:=	udint#0;<br/>			End_if;<br/>
									<br/>			arrLumgates[iTempSelectedLumgate].udtCloMaintenance.xActive			:=	udtCLO.xActivateMaintenance;<br/>			If udtCLO.xActivateMaintenance then<br/>				arrLumgates[iTempSelectedLumgate].udtCloMaintenance.rPercentage	:=	udtCLO.rDecreaseMaintenance;<br/>				arrLumgates[iTempSelectedLumgate].udtCloMaintenance.udiHours	:=	udtCLO.udiHoursMaintenance;<br/>			Else<br/>				arrLumgates[iTempSelectedLumgate].udtCloMaintenance.rPercentage	:=	0.0;<br/>				arrLumgates[iTempSelectedLumgate].udtCloMaintenance.udiHours	:=	udint#0;<br/>			End_if;<br/>		End_if;<br/>
									<br/>	End_if;<br/>Else<br/>	iTempSelectedLumgateOld		:=	iTempSelectedLumgate;<br/>	udtCLO.xActivateCLO			:=	arrLumgates[iTempSelectedLumgate].udtCloLed.xActive;<br/>	udtCLO.rDecreaseCLO			:=	arrLumgates[iTempSelectedLumgate].udtCloLed.rPercentage;<br/>	udtCLO.udiHoursCLO			:=	arrLumgates[iTempSelectedLumgate].udtCloLed.udiHours;<br/>
									<br/>	udtCLO.xActivateMaintenance	:=	arrLumgates[iTempSelectedLumgate].udtCloMaintenance.xActive;<br/>	udtCLO.rDecreaseMaintenance	:=	arrLumgates[iTempSelectedLumgate].udtCloMaintenance.rPercentage;<br/>	udtCLO.udiHoursMaintenance	:=	arrLumgates[iTempSelectedLumgate].udtCloMaintenance.udiHours;<br/>
									<br/>End_if;<br/>
									<br/>If arrLumgates[iTempSelectedLumgate].udtCloLed.xActive then<br/>	strCloState			:=	'On';<br/>Else<br/>	strCloState			:=	'Off';<br/>End_If;<br/>
									<br/>If arrLumgates[iTempSelectedLumgate].udtCloMaintenance.xActive then<br/>	strMaintenanceState	:=	'On';<br/>Else<br/>	strMaintenanceState	:=	'Off';<br/>End_If;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Scenes">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Web interface - Scenes *)<br/>If udtScenes.xEnableSceneEdit then	(*Enable edit mode *)<br/>	udtScenes.xEditableScenes	:=	True;<br/>
									<br/>	If	udtScenes.xCancelScenes or (iTempSelectedLumgate &lt;&gt; iTempSelectedLumgateOld) then(* Exit edit mode, restore old date *)<br/>		udtScenes.xEnableSceneEdit	:=	False;<br/>		udtScenes.xEditableScenes	:=	False;<br/>		udtScenes.xCancelScenes		:=	False;<br/>		udtScenes.xSafeScenes		:=	False;<br/>	Else<br/>		(* Limit input values *)<br/>		udtScenes.iScene	:=	limit_int(1,udtScenes.iScene,50);<br/>		iTemp				:=	udtScenes.iScene;<br/>		(* en-/ disabel scenes directly *)<br/>		If udtScenes.xSet then<br/>			udtScenes.xSet	:=	False;<br/>			If arrLumgates[iTempSelectedLumgate].arrDimmingScene[iTemp].xUsed then<br/>				arrLumgates[iTempSelectedLumgate].arrDimmingScene[iTemp].xUsed	:=	False;<br/>			Else<br/>				arrLumgates[iTempSelectedLumgate].arrDimmingScene[iTemp].xUsed	:=	True;<br/>			End_if;<br/>		End_if;<br/>
									<br/>		udtScenes.iSpecialScene	:=	limit_int(1,udtScenes.iSpecialScene,15);<br/>		iTemp					:=	udtScenes.iSpecialScene;<br/>		(* en-/ disabel special scenes directly *)<br/>		If udtScenes.xSetSpecial then<br/>			udtScenes.xSetSpecial	:=	False;<br/>			If arrLumgates[iTempSelectedLumgate].arrSpecialScene[iTemp].xUsed  then<br/>				arrLumgates[iTempSelectedLumgate].arrSpecialScene[iTemp].xUsed	:=	False;<br/>			Else<br/>				arrLumgates[iTempSelectedLumgate].arrSpecialScene[iTemp].xUsed	:=	True;<br/>			End_if;<br/>		End_if;<br/>
									<br/>		If udtScenes.xSafeScenes then(* Exit edit mode, save changed values *)<br/>			udtScenes.xEnableSceneEdit	:=	False;<br/>			udtScenes.xEditableScenes	:=	False;<br/>			udtScenes.xCancelScenes		:=	False;<br/>			udtScenes.xSafeScenes		:=	False;<br/>
									<br/>			For iLoop := 1 to 50 do<br/>				arrLumgates[iTempSelectedLumgate].arrDimmingScene[iLoop].iValue :=	limit(0,udtScenes.arrSceneValues[iLoop],107) * 10;<br/>				<br/>				(*	V2.01 changes: Editable scene relay state EPO-IS-268-1668 *)<br/>				arrLumgates[iTempSelectedLumgate].arrDimmingScene[iLoop].xRelay1	:=	udtScenes.arrSceneRelays1[iLoop];<br/>				arrLumgates[iTempSelectedLumgate].arrDimmingScene[iLoop].xRelay2	:=	udtScenes.arrSceneRelays2[iLoop];<br/>			End_for;<br/>			For iLoop := 1 to 15 do<br/>				arrLumgates[iTempSelectedLumgate].arrSpecialScene[iLoop].iValue :=	limit(0,udtScenes.arrSpecialSceneValues[iLoop],107) * 10;<br/>
									<br/>				(*	V2.01 changes: Editable scene relay state EPO-IS-268-1668 *)<br/>				arrLumgates[iTempSelectedLumgate].arrSpecialScene[iLoop].xRelay1	:=	udtScenes.arrSpecialSceneRelays1[iLoop];<br/>				arrLumgates[iTempSelectedLumgate].arrSpecialScene[iLoop].xRelay2	:=	udtScenes.arrSpecialSceneRelays2[iLoop];<br/>			End_for;<br/>		End_if;<br/>
									<br/>
									<br/>	End_if;<br/>Else<br/>	iTempSelectedLumgateOld		:=	iTempSelectedLumgate;<br/>	For iLoop := 1 to 50 do<br/>		udtScenes.arrSceneValues[iLoop]		:=	arrLumgates[iTempSelectedLumgate].arrDimmingScene[iLoop].iValue / 10;<br/>
									<br/>		(*	V2.01 changes: Editable scene relay state EPO-IS-268-1668 *)<br/>		udtScenes.arrSceneRelays1[iLoop]	:=	arrLumgates[iTempSelectedLumgate].arrDimmingScene[iLoop].xRelay1;<br/>		udtScenes.arrSceneRelays2[iLoop]	:=	arrLumgates[iTempSelectedLumgate].arrDimmingScene[iLoop].xRelay2;<br/>	End_for;<br/>	For iLoop := 1 to 15 do<br/>		udtScenes.arrSpecialSceneValues[iLoop] :=	arrLumgates[iTempSelectedLumgate].arrSpecialScene[iLoop].iValue / 10;<br/>
									<br/>		(*	V2.01 changes: Editable scene relay state EPO-IS-268-1668 *)<br/>		udtScenes.arrSpecialSceneRelays1[iLoop]	:=	arrLumgates[iTempSelectedLumgate].arrSpecialScene[iLoop].xRelay1;<br/>		udtScenes.arrSpecialSceneRelays2[iLoop]	:=	arrLumgates[iTempSelectedLumgate].arrSpecialScene[iLoop].xRelay2;<br/>	End_for;<br/>End_if;<br/>
									<br/>(* Web interface - Scene Hour Counter *)<br/>If udtScenesHours.xEnableSceneEdit then	(*Enable edit mode *)<br/>	udtScenesHours.xEditableScenes	:=	True;<br/>
									<br/>	(* Limit input values *)<br/>	udtScenesHours.iScene	:=	limit_int(1,udtScenesHours.iScene,50);<br/>	iTemp					:=	udtScenesHours.iScene;<br/>
									<br/>	(* Reset a counter directly *)<br/>	If udtScenesHours.xSet then<br/>		udtScenesHours.xSet	:=	False;<br/>		arrSceneHourCounter[iTemp].iMinutes	:=	0;<br/>		arrSceneHourCounter[iTemp].iSeconds	:=	0;<br/>		arrSceneHourCounter[iTemp].udiHours	:=	udint#0;<br/>	End_if;<br/>
									<br/>	(* no function... *)<br/>	If udtScenesHours.xSafeScenes then<br/>		udtScenesHours.xEnableSceneEdit	:=	False;<br/>		udtScenesHours.xEditableScenes	:=	False;<br/>		udtScenesHours.xCancelScenes	:=	False;<br/>		udtScenesHours.xSafeScenes		:=	False;<br/>	End_if;<br/>	(* no function... *)<br/>	If	udtScenesHours.xCancelScenes then<br/>		udtScenesHours.xEnableSceneEdit	:=	False;<br/>		udtScenesHours.xEditableScenes	:=	False;<br/>		udtScenesHours.xCancelScenes	:=	False;<br/>		udtScenesHours.xSafeScenes		:=	False;<br/>	End_if;<br/>Else<br/>	udtScenesHours.xSet				:=	False;<br/>	udtScenesHours.xEditableScenes	:=	False;<br/>	udtScenesHours.xCancelScenes	:=	False;<br/>	udtScenesHours.xSafeScenes		:=	False;<br/>End_if;<br/>udtScenesHours.arrSceneHours :=	arrSceneHourCounter;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Threshold">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">R_TRIG_Config1(CLK	:=	udtThreshold.xActivateConfig1);<br/>R_TRIG_Config2(CLK	:=	udtThreshold.xActivateConfig2);<br/>R_TRIG_Config3(CLK	:=	udtThreshold.xActivateConfig3);<br/>R_TRIG_Config4(CLK	:=	udtThreshold.xActivateConfig4);<br/>
									<br/>(* Display message "Table is not active", if an inactive table is selected *)<br/>If udtThreshold.iViewConfig = 1 and udtThreshold.xActivateConfig1 then<br/>	udtThreshold.xTableNotActive	:=	False;<br/>Elsif udtThreshold.iViewConfig = 2 and udtThreshold.xActivateConfig2 then<br/>	udtThreshold.xTableNotActive	:=	False;<br/>Elsif udtThreshold.iViewConfig = 3 and udtThreshold.xActivateConfig3 then<br/>	udtThreshold.xTableNotActive	:=	False;<br/>Elsif udtThreshold.iViewConfig = 4 and udtThreshold.xActivateConfig4 then<br/>	udtThreshold.xTableNotActive	:=	False;<br/>Else<br/>	udtThreshold.xTableNotActive	:=	True;<br/>End_if;<br/>
									<br/>udtThreshold.iViewConfig	:=	limit_int(1,udtThreshold.iViewConfig,4);<br/>
									<br/>If udtThreshold.xEnableThresholdEdit then	(*Enable edit mode *)<br/>	udtThreshold.xEditableThreshold	:=	True;<br/>
									<br/>	If	udtThreshold.xCancelThreshold or (iSelectSensor &lt;&gt; iSelectSensorOld) then(* Exit edit mode, restore old date *)<br/>		udtThreshold.xEditableThreshold		:=	False;<br/>		udtThreshold.xCancelThreshold		:=	False;<br/>		udtThreshold.xEnableThresholdEdit	:=	False;<br/>		udtThreshold.xSafeThreshold			:=	False;<br/>	Else<br/>		(* move threshold slider to edit scene options *)<br/>		If udtThreshold.xIncrease and iSelectedScenario &lt; 25 then<br/>			udtThreshold.xIncrease	:=	False;<br/>			iSelectedScenario		:=	iSelectedScenario + 1;<br/>			arrSelectedScenario		:=	arrScenarioConfiguration[iSelectSensor][iSelectedScenario];<br/>		End_if;<br/>		If udtThreshold.xDecrease and iSelectedScenario &gt; 1 then<br/>			udtThreshold.xDecrease	:=	False;<br/>			iSelectedScenario		:=	iSelectedScenario - 1;<br/>			arrSelectedScenario		:=	arrScenarioConfiguration[iSelectSensor][iSelectedScenario];<br/>		End_if;<br/>
									<br/>		(* Select scene options *)<br/>		If iSelectedScenario &gt; 0 and iSelectedScenario &lt; 26 then<br/>			arrScenarioConfiguration[iSelectSensor][iSelectedScenario]	:=	arrSelectedScenario;<br/>		End_if;<br/>
									<br/>		(* Limit input values *)<br/>		udtThreshold.iThreshold		:=	limit_int(1,udtThreshold.iThreshold,25);<br/>		iTemp						:=	udtThreshold.iThreshold;<br/>		For iLoop := 1 to 24 do<br/>			arrSelectedSensor[iLoop]	:=	limit_real(1.0,arrSelectedSensor[iLoop],32768.0);<br/>		End_for;<br/>
									<br/>		(* Interlock to activate only one threshold configuration *)<br/>		If R_TRIG_Config1.Q then<br/>			udtThreshold.xActivateConfig1	:=	True;<br/>			udtThreshold.xActivateConfig2	:=	False;<br/>			udtThreshold.xActivateConfig3	:=	False;<br/>			udtThreshold.xActivateConfig4	:=	False;<br/>		Elsif R_TRIG_Config2.Q then<br/>			udtThreshold.xActivateConfig1	:=	False;<br/>			udtThreshold.xActivateConfig2	:=	True;<br/>			udtThreshold.xActivateConfig3	:=	False;<br/>			udtThreshold.xActivateConfig4	:=	False;<br/>		Elsif R_TRIG_Config3.Q then<br/>			udtThreshold.xActivateConfig1	:=	False;<br/>			udtThreshold.xActivateConfig2	:=	False;<br/>			udtThreshold.xActivateConfig3	:=	True;<br/>			udtThreshold.xActivateConfig4	:=	False;<br/>		Elsif R_TRIG_Config4.Q then<br/>			udtThreshold.xActivateConfig1	:=	False;<br/>			udtThreshold.xActivateConfig2	:=	False;<br/>			udtThreshold.xActivateConfig3	:=	False;<br/>			udtThreshold.xActivateConfig4	:=	True;<br/>		End_if;<br/>		<br/>		(* en-/ disable a threshold directly *)<br/>		If udtThreshold.xSet then<br/>			udtThreshold.xSet	:=	False;<br/>			If arrLevelConfiguration[iSelectSensor].arrScenarioActive[iTemp] then<br/>				arrLevelConfiguration[iSelectSensor].arrScenarioActive[iTemp]	:=	False;<br/>			Else<br/>				arrLevelConfiguration[iSelectSensor].arrScenarioActive[iTemp]	:=	True;<br/>			End_if;<br/>		End_if;<br/>
									<br/>		If udtThreshold.xSafeThreshold then	(* Exit edit mode, save changed values *)<br/>			udtThreshold.xEditableThreshold		:=	False;<br/>			udtThreshold.xCancelThreshold		:=	False;<br/>			udtThreshold.xEnableThresholdEdit	:=	False;<br/>			udtThreshold.xSafeThreshold			:=	False;<br/>
									<br/>			arrLevelConfiguration[iSelectSensor].xActiveConfig1	:=	udtThreshold.xActivateConfig1;<br/>			arrLevelConfiguration[iSelectSensor].xActiveConfig2	:=	udtThreshold.xActivateConfig2;<br/>			arrLevelConfiguration[iSelectSensor].xActiveConfig3	:=	udtThreshold.xActivateConfig3;<br/>			arrLevelConfiguration[iSelectSensor].xActiveConfig4	:=	udtThreshold.xActivateConfig4;<br/>
									<br/>			arrLevelConfiguration[iSelectSensor].strName1	:=	udtThreshold.strName1;<br/>			arrLevelConfiguration[iSelectSensor].strName2	:=	udtThreshold.strName2;<br/>			arrLevelConfiguration[iSelectSensor].strName3	:=	udtThreshold.strName3;<br/>			arrLevelConfiguration[iSelectSensor].strName4	:=	udtThreshold.strName4;<br/>		<br/>			udtScenarioMode.arrManualScene[iSelectSensor]	:=	udtThreshold.iManualScene;<br/>
									<br/>			If udtThreshold.iViewConfig = 1 then<br/>				For iLoop := 1 to 24 do<br/>					arrLevelConfiguration[iSelectSensor].arrScenarioConfig1[iLoop]	:=	real_to_int(arrSelectedSensor[iLoop]);<br/>				End_for;<br/>			Elsif udtThreshold.iViewConfig = 2 then<br/>				For iLoop := 1 to 24 do<br/>					arrLevelConfiguration[iSelectSensor].arrScenarioConfig2[iLoop]	:=	real_to_int(arrSelectedSensor[iLoop]);<br/>				End_for;<br/>			Elsif udtThreshold.iViewConfig = 3 then<br/>				For iLoop := 1 to 24 do<br/>					arrLevelConfiguration[iSelectSensor].arrScenarioConfig3[iLoop]	:=	real_to_int(arrSelectedSensor[iLoop]);<br/>				End_for;<br/>			Elsif udtThreshold.iViewConfig = 4 then<br/>				For iLoop := 1 to 24 do<br/>					arrLevelConfiguration[iSelectSensor].arrScenarioConfig4[iLoop]	:=	real_to_int(arrSelectedSensor[iLoop]);<br/>				End_for;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>Else<br/>	iSelectSensorOld	:=	iSelectSensor;<br/>	udtThreshold.iManualScene	:=	udtScenarioMode.arrManualScene[iSelectSensor];<br/>
									<br/>	If iSelectSensor &gt; 0 and iSelectSensor &lt; 5 then<br/>		arrActiveScenario	:=	arrLevelConfiguration[iSelectSensor].arrScenarioActive; <br/>		iSelectedScene		:=	arrLumgates[iTempSelectedLumgate].iActualScene;<br/>		(* iSelectedScene		:=	udtScenarioMode.arrActualScene[iSelectSensor]; *)<br/>		iSelectedScenario	:=	udtScenarioMode.arrScenario[iSelectSensor];<br/>		iChosedScene		:=	udtScenarioMode.arrScenarioOption[iSelectSensor];<br/>	End_if;<br/>
									<br/>	(* Select sensor *)<br/>	If iSelectSensor &gt; 0 and iSelectSensor &lt; 5 then<br/>		rAnalogValue		:=	arrAnalogValues[iSelectSensor].rValue;<br/>		wAnalogDiag			:=	arrAnalogValues[iSelectSensor].wDiagCode;<br/>		arrAnalogDiag[1]	:=	arrAnalogValues[1].wDiagCode;<br/>		arrAnalogDiag[2]	:=	arrAnalogValues[2].wDiagCode;<br/>		arrAnalogDiag[3]	:=	arrAnalogValues[3].wDiagCode;<br/>		arrAnalogDiag[4]	:=	arrAnalogValues[4].wDiagCode;<br/>
									<br/>		(* Select Threshold configuration (speed level) *)<br/>		arrActiveScenario				:=	arrLevelConfiguration[iSelectSensor].arrScenarioActive; <br/>		If udtThreshold.iViewConfig = 1 then<br/>			For iLoop := 1 to 24 do<br/>				arrSelectedSensor[iLoop]	:=	int_to_real(arrLevelConfiguration[iSelectSensor].arrScenarioConfig1[iLoop]);<br/>			End_for;<br/>		Elsif udtThreshold.iViewConfig = 2 then<br/>			For iLoop := 1 to 24 do<br/>				arrSelectedSensor[iLoop]	:=	int_to_real(arrLevelConfiguration[iSelectSensor].arrScenarioConfig2[iLoop]);<br/>			End_for;<br/>		Elsif udtThreshold.iViewConfig = 3 then<br/>			For iLoop := 1 to 24 do<br/>				arrSelectedSensor[iLoop]	:=	int_to_real(arrLevelConfiguration[iSelectSensor].arrScenarioConfig3[iLoop]);<br/>			End_for;<br/>		Elsif udtThreshold.iViewConfig = 4 then<br/>			For iLoop := 1 to 24 do<br/>				arrSelectedSensor[iLoop]	:=	int_to_real(arrLevelConfiguration[iSelectSensor].arrScenarioConfig4[iLoop]);<br/>			End_for;<br/>		End_if;<br/>		arrSelectedConfiguration		:=	arrScenarioConfiguration[iSelectSensor];<br/>		If iSelectedScenario &gt; 0 and iSelectedScenario &lt; 26 then<br/>			arrSelectedScenario			:=	arrScenarioConfiguration[iSelectSensor][iSelectedScenario];<br/>		Else<br/>			For iLoop := 1 to 5 do<br/>				arrSelectedScenario[iLoop]	:=	0;<br/>			End_for;<br/>		End_if;<br/>	End_if;<br/>
									<br/>	udtThreshold.xActivateConfig1	:=	arrLevelConfiguration[iSelectSensor].xActiveConfig1;<br/>	udtThreshold.xActivateConfig2	:=	arrLevelConfiguration[iSelectSensor].xActiveConfig2;<br/>	udtThreshold.xActivateConfig3	:=	arrLevelConfiguration[iSelectSensor].xActiveConfig3;<br/>	udtThreshold.xActivateConfig4	:=	arrLevelConfiguration[iSelectSensor].xActiveConfig4;<br/>
									<br/>	udtThreshold.strName1			:=	arrLevelConfiguration[iSelectSensor].strName1;<br/>	udtThreshold.strName2			:=	arrLevelConfiguration[iSelectSensor].strName2;<br/>	udtThreshold.strName3			:=	arrLevelConfiguration[iSelectSensor].strName3;<br/>	udtThreshold.strName4			:=	arrLevelConfiguration[iSelectSensor].strName4;<br/>End_if;<br/>
									<br/>If iSelectSensor &gt; 0 and iSelectSensor &lt; 5 then<br/>	arrActiveScenario	:=	arrLevelConfiguration[iSelectSensor].arrScenarioActive; <br/>End_if;<br/>
									<br/>iDelay	:=	arrLevelConfiguration[1].iDelay;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Sensor">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Web interface - select source *)<br/>If udtSource.xEnableSourceEdit then	(*Enable edit mode *)<br/>	udtSource.xEditableSource	:=	True;<br/>
									<br/>	(* Limit input values *)<br/>	udtSource.iLimit1	:=	limit(1,udtSource.iLimit1,4);<br/>	udtSource.iLimit2	:=	limit(1,udtSource.iLimit2,4);<br/>	udtSource.iLimit3	:=	limit(1,udtSource.iLimit3,4);<br/>	udtSource.iLimit4	:=	limit(1,udtSource.iLimit4,4);<br/>
									<br/>	If udtSource.xSaveSource then		(* Exit edit mode, save changed values *)<br/>		udtSource.xEditableSource		:=	False;<br/>		udtSource.xSaveSource			:=	False;<br/>		udtSource.xCancelSource			:=	False;<br/>		udtSource.xEnableSourceEdit		:=	False;<br/>
									<br/>		arrLevelConfiguration[1].iInputValue	:=	udtSource.iSelect1;<br/>		arrLevelConfiguration[2].iInputValue	:=	udtSource.iSelect2;<br/>		arrLevelConfiguration[3].iInputValue	:=	udtSource.iSelect3;<br/>		arrLevelConfiguration[4].iInputValue	:=	udtSource.iSelect4;<br/>
									<br/>		udtL20Config.iBackup_1_2_3_4_Limit		:=	udtSource.iLimit1;<br/>		udtL20Config.iBackup_2_3_4_1_Limit		:=	udtSource.iLimit2;<br/>		udtL20Config.iBackup_3_4_1_2_Limit		:=	udtSource.iLimit3;<br/>		udtL20Config.iBackup_4_1_2_3_Limit		:=	udtSource.iLimit4;<br/>		<br/>		udtL20Config.rMaxCd1					:=	udint_to_real(udtSource.udiMaxValue1);<br/>		udtL20Config.rMaxCd2					:=	udint_to_real(udtSource.udiMaxValue2);<br/>		udtL20Config.rMaxCd3					:=	udint_to_real(udtSource.udiMaxValue3);<br/>		udtL20Config.rMaxCd4					:=	udint_to_real(udtSource.udiMaxValue4);<br/>
									<br/>		strUnit							:=	udtSource.strUnit;<br/>	End_if;<br/>
									<br/>	If	udtSource.xCancelSource then	(* Exit edit mode, restore old date *)<br/>		udtSource.xEditableSource		:=	False;<br/>		udtSource.xSaveSource			:=	False;<br/>		udtSource.xCancelSource			:=	False;<br/>		udtSource.xEnableSourceEdit		:=	False;<br/>	End_if;<br/>Else<br/>	udtSource.iSelect1		:=	arrLevelConfiguration[1].iInputValue;<br/>	udtSource.iSelect2		:=	arrLevelConfiguration[2].iInputValue;<br/>	udtSource.iSelect3		:=	arrLevelConfiguration[3].iInputValue;<br/>	udtSource.iSelect4		:=	arrLevelConfiguration[4].iInputValue;<br/>	udtSource.iLimit1		:=	udtL20Config.iBackup_1_2_3_4_Limit;<br/>	udtSource.iLimit2		:=	udtL20Config.iBackup_2_3_4_1_Limit;<br/>	udtSource.iLimit3		:=	udtL20Config.iBackup_3_4_1_2_Limit;<br/>	udtSource.iLimit4		:=	udtL20Config.iBackup_4_1_2_3_Limit;<br/>	udtSource.udiMaxValue1	:=	real_to_udint(udtL20Config.rMaxCd1);<br/>	udtSource.udiMaxValue2	:=	real_to_udint(udtL20Config.rMaxCd2);<br/>	udtSource.udiMaxValue3	:=	real_to_udint(udtL20Config.rMaxCd3);<br/>	udtSource.udiMaxValue4	:=	real_to_udint(udtL20Config.rMaxCd4);<br/>	udtSource.strUnit		:=	strUnit;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Project">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Web interface - system settings *)<br/>If udtProject.xEnableProjectEdit then	(*Enable edit mode *)<br/>	udtProject.xEditableProject	:=	True;<br/>
									<br/>	(* Limit input values *)<br/>	udtProject.diAverageDelay	:=	limit_dint(dint#1,udtProject.diAverageDelay,dint#1000);<br/>	udtProject.iHysteric		:=	limit(1,udtProject.iHysteric,10);<br/>	udtProject.iSwitchDelay		:=	limit(1,udtProject.iSwitchDelay,3600);<br/>	udtProject.iDimmingSpeed	:=	limit(1,udtProject.iDimmingSpeed,10); (* In Visu wrong variable... *)<br/>
									<br/>	If udtProject.xSafeAllFailStates then	(* execute failsafe teaching *)<br/>		udtProject.xSafeAllFailStates	:=	False;<br/>		strDiag	:=	'Start failsafe teaching';<br/>
									<br/>		For iLoop := 1 to 240 do<br/>			arrLumgates[iLoop].xTeachFailsave	:=	True;<br/>		End_for;<br/>	End_if;<br/>
									<br/>	If udtProject.xSaveProject then		(* Exit edit mode, save changed values *)<br/>		udtProject.xEditableProject		:=	False;<br/>		udtProject.xSaveProject			:=	False;<br/>		udtProject.xCancelProject		:=	False;<br/>		udtProject.xEnableProjectEdit	:=	False;<br/>
									<br/>		arrLevelConfiguration[1].iDelay			:=	udtProject.iSwitchDelay;<br/>		arrLevelConfiguration[2].iDelay			:=	udtProject.iSwitchDelay;<br/>		arrLevelConfiguration[3].iDelay			:=	udtProject.iSwitchDelay;<br/>		arrLevelConfiguration[4].iDelay			:=	udtProject.iSwitchDelay;<br/>		arrLevelConfiguration[1].iHysteric		:=	udtProject.iHysteric;<br/>		arrLevelConfiguration[2].iHysteric		:=	udtProject.iHysteric;<br/>		arrLevelConfiguration[3].iHysteric		:=	udtProject.iHysteric;<br/>		arrLevelConfiguration[4].iHysteric		:=	udtProject.iHysteric;<br/>		arrLevelConfiguration[1].diAverageTime	:=	udtProject.diAverageDelay;<br/>		arrLevelConfiguration[2].diAverageTime	:=	udtProject.diAverageDelay;<br/>		arrLevelConfiguration[3].diAverageTime	:=	udtProject.diAverageDelay;<br/>		arrLevelConfiguration[4].diAverageTime	:=	udtProject.diAverageDelay;<br/>	End_if;<br/>
									<br/>	If	udtProject.xCancelProject then	(* Exit edit mode, restore old date *)<br/>		udtProject.xEditableProject		:=	False;<br/>		udtProject.xSaveProject			:=	False;<br/>		udtProject.xCancelProject		:=	False;<br/>		udtProject.xEnableProjectEdit	:=	False;<br/>	End_if;<br/>Else<br/>	udtProject.iSwitchDelay		:=	arrLevelConfiguration[1].iDelay;<br/>	udtProject.iHysteric		:=	arrLevelConfiguration[1].iHysteric;<br/>	udtProject.diAverageDelay	:=	arrLevelConfiguration[1].diAverageTime;<br/>End_if;<br/>
									<br/>F_TRIG_Failsafe(CLK:=arrLumgates[1].xTeachFailsave);<br/>If F_TRIG_Failsafe.Q then<br/>	strDiag	:=	'Failsafe teaching done';<br/>End_if;<br/>
									<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_Web_Communication_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_TCS_Communication_01" pouType="functionBlock" pouGroup="Interface" lastChange="2016-07-18T09:54:01">
				<interface>
					<localVars retain="false">
						<variable name="TON_Timeout" group="Function">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
						<variable name="TON_SceneDelay" group="Function">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
						<variable name="MB_TCP_Server_V2_00_1" group="Function">
							<type>
								<derived name="MB_TCP_Server_V2_00"/>
							</type>
						</variable>
					</localVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xError" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strDiag" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xDataValid" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</outputVars>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xConfirm" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="arrInputsL20" group="Input Parameter">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
						</variable>
						<variable name="udtLumgateMain" group="Input Parameter">
							<type>
								<derived name="udtWebLG_Main"/>
							</type>
						</variable>
						<variable name="arrScenarioHourCounter" group="Input Parameter">
							<type>
								<derived name="arr_1_50_udtLumgatePart1"/>
							</type>
						</variable>
						<variable name="iOperatingSeconds" group="Input Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iOperatingMinutes" group="Input Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="udiOperatingHours" group="Input Parameter">
							<type>
								<UDINT/>
							</type>
						</variable>
					</inputVars>
					<inOutVars retain="false">
						<variable name="arrLumgates" group="In- Output Parameter">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
						</variable>
						<variable name="udtScenarioMode" group="In- Output Parameter">
							<type>
								<derived name="udtScene"/>
							</type>
						</variable>
						<variable name="wSpecialScenario" group="In- Output Parameter">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="udtNetworkConfiguration" group="In- Output Parameter">
							<type>
								<derived name="udtNetwork"/>
							</type>
						</variable>
						<variable name="udtL20Config" group="In- Output Parameter">
							<type>
								<derived name="udtL20Input"/>
							</type>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="arrExternalDataIn" group="Default">
							<type>
								<derived name="PND_IO_512"/>
							</type>
						</variable>
						<variable name="arrExternalDataOut" group="Default">
							<type>
								<derived name="PND_IO_512"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="PND_S1S1_INPUTS" group="Default">
							<type>
								<derived name="PND_IO_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Eingangsprozessdaten</p>
								</html>
							</documentation>
						</variable>
						<variable name="PND_S1S1_OUTPUTS" group="Default">
							<type>
								<derived name="PND_IO_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Ausgangsprozessdaten</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_HAS_PRJ_BOOT" group="Default">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bootprojekt vorhanden</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_CRC_PRJ_BOOT" group="Default">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">CRC des Bootprojektes</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_CRC_PRJ_RAM" group="Default">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">CRC des Projektes im RAM</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_CPU_LOAD_WARNING" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Der Controller befindet sich im Grenzbereich seiner Prozessorauslastung</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLCDEBUG_BPSET" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Breakpoint gesetzt</p>
								</html>
							</documentation>
						</variable>
						<variable name="CLOCK_PULSE_1S" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Taktgeber 1s</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_PF" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Peripheriestörung</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_RUN" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Datenübertragung ist aktiv</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT0" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN1</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT8" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN9</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_OUTPUT_BIT0" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Ausgang OUT1</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT1" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN2</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT2" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN3</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT3" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN4</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT4" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN5</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT5" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN6</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT6" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN7</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT7" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN8</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT9" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN10</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT10" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN11</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT11" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN12</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_OUTPUT_BIT1" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Ausgang OUT2</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_OUTPUT_BIT2" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Ausgang OUT3</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_OUTPUT_BIT3" group="Default">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Ausgang OUT4</p>
								</html>
							</documentation>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="xLifeBit" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xOldLifeBit" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iTempLocation" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xErrorTooMuchScenarioActive" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop3" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="bSelectDataLumgate" redundant="true" group="Default">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="bSelectScenarioHourCounter" redundant="true" group="Default">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="rTempValue" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="wTempValue" redundant="true" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="iSelectScenarioHourCounter" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="dwTempValueHours" group="Default">
							<type>
								<DWORD/>
							</type>
						</variable>
						<variable name="iByteAddress" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iBitAddress" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iSelectedLumgate" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="bOldByte1" redundant="true" group="Default">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="bOldByte2" redundant="true" group="Default">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="bOldByte3" redundant="true" group="Default">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="bOldByte4" redundant="true" group="Default">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="bOldByte5" redundant="true" group="Default">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="udtLevelConfigurationL20_1" redundant="true" group="Default">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="bTemp" redundant="true" group="Default">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="iTemp" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="udtLevelConfigurationL20_2" redundant="true" group="Default">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtLevelConfigurationL20_3" redundant="true" group="Default">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtLevelConfigurationL20_4" redundant="true" group="Default">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="dwTemp" group="Default">
							<type>
								<DWORD/>
							</type>
						</variable>
						<variable name="iPort" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xQuit" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xAutoQuit" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xUDP" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActive_MB_Server" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xConnection_MB_Server" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xError_MB_Server" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="wDiagCode_MB_Server" redundant="true" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="wAddDiagCode_MB_Server" redundant="true" group="Default">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="uiRegOffset" redundant="true" group="Default">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiRegOffsetInputs" redundant="true" group="Default">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="uiRegOffsetCoils" redundant="true" group="Default">
							<type>
								<UINT/>
							</type>
						</variable>
						<variable name="MB_Data_External" group="Default">
							<type>
								<derived name="MB2_TCP_ARR_W_0_7167"/>
							</type>
						</variable>
						<variable name="iExternalData" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="uiSelectedLumgate" group="Default">
							<type>
								<UINT/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="InputData">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">TON_Timeout(PT:=t#30s);<br/>TON_SceneDelay(IN:=((arrExternalDataIn[1] &lt;&gt; bOldByte1) or (arrExternalDataIn[2] &lt;&gt; bOldByte2)<br/>or (arrExternalDataIn[3] &lt;&gt; bOldByte3) or (arrExternalDataIn[4] &lt;&gt; bOldByte4)<br/>or (arrExternalDataIn[5] &lt;&gt; bOldByte5)),PT:=t#0.1s);<br/>
									<br/>(* TLS_Communication *)<br/>If xActivate then<br/>	xActive	:=	True;<br/>	(* Life bit from external system *)<br/>	xLifeBit			:=	arrExternalDataIn[0].X0;<br/>	TON_Timeout.IN		:=	(xLifeBit = xOldLifeBit);<br/>
									<br/>	If xLifeBit &lt;&gt; xOldLifeBit then<br/>		xOldLifeBit	:=	xLifeBit;<br/>		strDiag	:=	'New data received from upper system';<br/>		xDataValid	:=	True;<br/>	Elsif TON_Timeout.Q then<br/>		xDataValid	:=	False;<br/>		xError	:=	True;<br/>		strDiag	:=	'Error: No incoming data from upper system';<br/>	End_if;<br/>
									<br/>	If xError then<br/>		If xConfirm then<br/>			If xDataValid then<br/>				strDiag	:=	'TCS communication error confirmed';<br/>				xError	:=	False;<br/>			Else<br/>				strDiag	:=	'TCS communication error is still active';<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	(* Activate dimming scenarios *)<br/>	iTempLocation				:=	0;<br/>	xErrorTooMuchScenarioActive	:= 	False;<br/>
									<br/>
									<br/>	If TON_SceneDelay.Q then<br/>
									<br/>		udtScenarioMode.arrExternalInputScene[1]	:=	0;<br/>		udtScenarioMode.arrExternalInputScene[2]	:=	0;<br/>		udtScenarioMode.arrExternalInputScene[3]	:=	0;<br/>		udtScenarioMode.arrExternalInputScene[4]	:=	0;<br/>
									<br/>		bOldByte1	:=	arrExternalDataIn[1];<br/>		bOldByte2	:=	arrExternalDataIn[2];<br/>		bOldByte3	:=	arrExternalDataIn[3];<br/>		bOldByte4	:=	arrExternalDataIn[4];<br/>		bOldByte5	:=	arrExternalDataIn[5];<br/>		For iLoop := 0 to 5 do<br/>			iLoop2	:= 	iLoop + 1;<br/>			If arrExternalDataIn[iLoop2].X0 then<br/>				iTempLocation	:=	iTempLocation + 1;<br/>				If iTempLocation &lt; 5 then<br/>					udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	iLoop * 8 + 1;<br/>				End_If;<br/>			End_If;<br/>			If arrExternalDataIn[iLoop2].X1 Then<br/>				iTempLocation	:= 	iTempLocation + 1;<br/>				If iTempLocation &lt; 5 Then<br/>					udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	iLoop * 8 + 2;<br/>				End_If;<br/>			End_If;<br/>			If arrExternalDataIn[iLoop2].X2 Then<br/>				iTempLocation	:= 	iTempLocation + 1;<br/>				If iTempLocation &lt; 5 Then<br/>					udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	iLoop * 8 + 3;<br/>				End_If;<br/>			End_If;<br/>			If arrExternalDataIn[iLoop2].X3 Then<br/>				iTempLocation	:= 	iTempLocation + 1;<br/>				If iTempLocation &lt; 5 Then<br/>					udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	iLoop * 8 + 4;<br/>				End_If;<br/>			End_If;<br/>			If arrExternalDataIn[iLoop2].X4 Then<br/>				iTempLocation	:= 	iTempLocation + 1;<br/>				If iTempLocation &lt; 5 Then<br/>					udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	iLoop * 8 + 5;<br/>				End_If;<br/>			End_If;<br/>			If arrExternalDataIn[iLoop2].X5 Then<br/>				iTempLocation	:= 	iTempLocation + 1;<br/>				If iTempLocation &lt; 5 Then<br/>					udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	iLoop * 8 + 6;<br/>				End_If;<br/>			End_If;<br/>			If arrExternalDataIn[iLoop2].X6 Then<br/>				iTempLocation	:= 	iTempLocation + 1;<br/>				If iTempLocation &lt; 5 Then<br/>					udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	iLoop * 8 + 7;<br/>				End_If;<br/>			End_If;<br/>			If arrExternalDataIn[iLoop2].X7 Then<br/>				iTempLocation	:= 	iTempLocation + 1;<br/>				If iTempLocation &lt; 5 Then<br/>					udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	iLoop * 8 + 8;<br/>				End_If;<br/>			End_If;<br/>		End_For;<br/>
									<br/>		If arrExternalDataIn[7].X0 Then<br/>			iTempLocation	:= 	iTempLocation + 1;<br/>			If iTempLocation &lt; 5 Then<br/>				udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	49;<br/>			End_If;<br/>		End_If;<br/>		If arrExternalDataIn[7].X1 Then<br/>			iTempLocation	:= 	iTempLocation + 1;<br/>			If iTempLocation &lt; 5 Then<br/>				udtScenarioMode.arrExternalInputScene[iTempLocation]	:= 	50;<br/>			End_If;<br/>		End_If;<br/>
									<br/>		If iTempLocation &gt; 4 then<br/>			xErrorTooMuchScenarioActive	:= 	True;<br/>			strDiag	:=	'Error: too much scenes active';<br/>		End_If;<br/>	End_if;<br/>
									<br/>	(* Activate special scenarios *)<br/>	wSpecialScenario.B0	:=	arrExternalDataIn[8];<br/>	wSpecialScenario.B1	:=	arrExternalDataIn[9];<br/>
									<br/>	(* Select scenario hour counter (1-50) *)<br/>	bSelectScenarioHourCounter	:=	arrExternalDataIn[10];<br/>
									<br/>	(* Select data from one Lumgate *)<br/>	bSelectDataLumgate	:=	arrExternalDataIn[11];<br/>
									<br/>	(* 2: System is Modbus connected, own inputs are used, different threshold columns can be used *)<br/>	(* 3: System is Profinet connected, own inputs are used, different threshold columns can be used *)<br/>	If udtNetworkConfiguration.iMode = 2 or udtNetworkConfiguration.iMode = 3 then<br/>
									<br/>		(* Threshold table 1 *)<br/>		udtLevelConfigurationL20_1.xActive	:= arrExternalDataIn[15].X0;<br/>
									<br/>		bTemp		:= Byte#0;<br/>		bTemp.X0	:= arrExternalDataIn[15].X1;<br/>		bTemp.X1	:= arrExternalDataIn[15].X2;<br/>		bTemp.X2	:= arrExternalDataIn[15].X3;<br/>
									<br/>		iTemp		:= Byte_To_Int(bTemp);<br/>
									<br/>		udtLevelConfigurationL20_1.xActiveConfig1		:= False;<br/>		udtLevelConfigurationL20_1.xActiveConfig2		:= False;<br/>		udtLevelConfigurationL20_1.xActiveConfig3		:= False;<br/>		udtLevelConfigurationL20_1.xActiveConfig4		:= False;<br/>
									<br/>		Case iTemp Of<br/>		1:	udtLevelConfigurationL20_1.xActiveConfig1	:= True;<br/>		2:	udtLevelConfigurationL20_1.xActiveConfig2	:= True;<br/>		3:	udtLevelConfigurationL20_1.xActiveConfig3	:= True;<br/>		4:	udtLevelConfigurationL20_1.xActiveConfig4	:= True;<br/>		Else<br/>			udtLevelConfigurationL20_1.xActiveConfig1	:= True;<br/>		End_Case;<br/>
									<br/>		(* Threshold table 2 *)<br/>		udtLevelConfigurationL20_2.xActive	:= arrExternalDataIn[16].X0;<br/>
									<br/>		bTemp		:= Byte#0;<br/>		bTemp.X0	:= arrExternalDataIn[16].X1;<br/>		bTemp.X1	:= arrExternalDataIn[16].X2;<br/>		bTemp.X2	:= arrExternalDataIn[16].X3;<br/>
									<br/>		iTemp		:= Byte_To_Int(bTemp);<br/>
									<br/>		udtLevelConfigurationL20_2.xActiveConfig1		:= False;<br/>		udtLevelConfigurationL20_2.xActiveConfig2		:= False;<br/>		udtLevelConfigurationL20_2.xActiveConfig3		:= False;<br/>		udtLevelConfigurationL20_2.xActiveConfig4		:= False;<br/>
									<br/>		Case iTemp Of<br/>		1:	udtLevelConfigurationL20_2.xActiveConfig1	:= True;<br/>		2:	udtLevelConfigurationL20_2.xActiveConfig2	:= True;<br/>		3:	udtLevelConfigurationL20_2.xActiveConfig3	:= True;<br/>		4:	udtLevelConfigurationL20_2.xActiveConfig4	:= True;<br/>		Else<br/>			udtLevelConfigurationL20_2.xActiveConfig1	:= True;<br/>		End_Case;<br/>
									<br/>		(* Threshold table 3 *)<br/>		udtLevelConfigurationL20_3.xActive	:= arrExternalDataIn[17].X0;<br/>
									<br/>		bTemp		:= Byte#0;<br/>		bTemp.X0	:= arrExternalDataIn[17].X1;<br/>		bTemp.X1	:= arrExternalDataIn[17].X2;<br/>		bTemp.X2	:= arrExternalDataIn[17].X3;<br/>
									<br/>		iTemp		:= Byte_To_Int(bTemp);<br/>
									<br/>		udtLevelConfigurationL20_3.xActiveConfig1		:= False;<br/>		udtLevelConfigurationL20_3.xActiveConfig2		:= False;<br/>		udtLevelConfigurationL20_3.xActiveConfig3		:= False;<br/>		udtLevelConfigurationL20_3.xActiveConfig4		:= False;<br/>
									<br/>		Case iTemp Of<br/>		1:	udtLevelConfigurationL20_3.xActiveConfig1	:= True;<br/>		2:	udtLevelConfigurationL20_3.xActiveConfig2	:= True;<br/>		3:	udtLevelConfigurationL20_3.xActiveConfig3	:= True;<br/>		4:	udtLevelConfigurationL20_3.xActiveConfig4	:= True;<br/>		Else<br/>			udtLevelConfigurationL20_3.xActiveConfig1	:= True;<br/>		End_Case;<br/>
									<br/>		(* Threshold table 4 *)<br/>		udtLevelConfigurationL20_4.xActive	:= arrExternalDataIn[18].X0;<br/>
									<br/>		bTemp		:= Byte#0;<br/>		bTemp.X0	:= arrExternalDataIn[18].X1;<br/>		bTemp.X1	:= arrExternalDataIn[18].X2;<br/>		bTemp.X2	:= arrExternalDataIn[18].X3;<br/>
									<br/>		iTemp		:= Byte_To_Int(bTemp);<br/>
									<br/>		udtLevelConfigurationL20_4.xActiveConfig1		:= False;<br/>		udtLevelConfigurationL20_4.xActiveConfig2		:= False;<br/>		udtLevelConfigurationL20_4.xActiveConfig3		:= False;<br/>		udtLevelConfigurationL20_4.xActiveConfig4		:= False;<br/>
									<br/>		Case iTemp Of<br/>		1:	udtLevelConfigurationL20_4.xActiveConfig1	:= True;<br/>		2:	udtLevelConfigurationL20_4.xActiveConfig2	:= True;<br/>		3:	udtLevelConfigurationL20_4.xActiveConfig3	:= True;<br/>		4:	udtLevelConfigurationL20_4.xActiveConfig4	:= True;<br/>		Else<br/>			udtLevelConfigurationL20_4.xActiveConfig1	:= True;<br/>		End_Case;<br/>	End_If;<br/>Else<br/>	xActive	:=	False;<br/>	xError	:=	False;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="OutputData">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* TLS_Communication *)<br/>If xActivate then<br/>	(* Boot project available, boot and ram are equal *)<br/>	arrExternalDataOut[0].X0	:=	PLC_HAS_PRJ_BOOT &gt; Byte#0 and (PLC_CRC_PRJ_BOOT = PLC_CRC_PRJ_RAM);<br/>
									<br/>	(* CPU load warning *)<br/>	arrExternalDataOut[0].X1	:=	COP_CPU_LOAD_WARNING;<br/>
									<br/>	(* Breakpoint set *)<br/>	arrExternalDataOut[0].X2	:=	PLCDEBUG_BPSET;<br/>
									<br/>	(* Clock pulse 1 second *)<br/>	arrExternalDataOut[0].X3	:=	CLOCK_PULSE_1S;<br/>
									<br/>	(* Peripheral fault *)<br/>	arrExternalDataOut[0].X4	:=	MASTER_DIAG_STATUS_REG_PF;<br/>
									<br/>	(* Data transmission active *)<br/>	arrExternalDataOut[0].X5	:=	MASTER_DIAG_STATUS_REG_RUN;<br/>
									<br/>	(* Life bit (copy from input register byte 0 bit 0) *)<br/>	arrExternalDataOut[0].X6	:=	xLifeBit;<br/>
									<br/>	(* Clear analog values *)<br/>
									<br/>	For iLoop 	:=	1 to 8 do<br/>		arrExternalDataOut[iLoop]	:=	Byte#0;<br/>	End_For;<br/>
									<br/>	(* Analog input channel 1 to 4 *)<br/>	For iLoop 	:=	1 to 4 do<br/>		iLoop3	:=	iLoop * 2 - 1;<br/>		iLoop2	:=	iLoop * 2;<br/>
									<br/>	(*	If arrInputsL20[iLoop].xActive then	*)<br/>			If iLoop = 1 and udtL20Config.rMaxCd1 &gt; 0.0 then<br/>				rTempValue					:=	Limit_Real(0.0,arrInputsL20[iLoop].rValue / udtL20Config.rMaxCd1 * 1000.0,1000.0);<br/>			Elsif iLoop = 2 and udtL20Config.rMaxCd2 &gt; 0.0 then<br/>				rTempValue					:=	Limit_Real(0.0,arrInputsL20[iLoop].rValue / udtL20Config.rMaxCd2 * 1000.0,1000.0);<br/>			Elsif iLoop = 3 and udtL20Config.rMaxCd3 &gt; 0.0 then<br/>				rTempValue					:=	Limit_Real(0.0,arrInputsL20[iLoop].rValue / udtL20Config.rMaxCd3 * 1000.0,1000.0);<br/>			Elsif iLoop = 4 and udtL20Config.rMaxCd4 &gt; 0.0 then<br/>				rTempValue					:=	Limit_Real(0.0,arrInputsL20[iLoop].rValue / udtL20Config.rMaxCd4 * 1000.0,1000.0);<br/>			End_if;<br/>
									<br/>			wTempValue						:=	Real_To_Word(rTempValue);<br/>			arrExternalDataOut[iLoop3]		:=	wTempValue.B0;<br/>			arrExternalDataOut[iLoop2].X0	:=	wTempValue.X8;<br/>			arrExternalDataOut[iLoop2].X1	:=	wTempValue.X9;<br/>			arrExternalDataOut[iLoop2].X2	:=	arrInputsL20[iLoop].wDiagCode.X0;<br/>			arrExternalDataOut[iLoop2].X3	:=	arrInputsL20[iLoop].wDiagCode.X1;<br/>			arrExternalDataOut[iLoop2].X7	:=	arrInputsL20[iLoop].xActive;<br/>			<br/>	(*	End_If;	*)<br/>	End_For;<br/>
									<br/>	(* Active dimming scenarios *)<br/>	arrExternalDataOut[10]	:=	Int_To_Byte(udtScenarioMode.arrActualScene[1]);<br/>	arrExternalDataOut[11]	:=	Int_To_Byte(udtScenarioMode.arrActualScene[2]);<br/>	arrExternalDataOut[12]	:=	Int_To_Byte(udtScenarioMode.arrActualScene[3]);<br/>	arrExternalDataOut[13]	:=	Int_To_Byte(udtScenarioMode.arrActualScene[4]);<br/>
									<br/>	(* Active special scenarios *)<br/>	arrExternalDataOut[15]	:=	wSpecialScenario.B0;<br/>	arrExternalDataOut[16]	:=	wSpecialScenario.B1; <br/>
									<br/>	(* Select scenario hour counter *)<br/>	arrExternalDataOut[20]		:=	bSelectScenarioHourCounter;<br/>	iSelectScenarioHourCounter	:=	Byte_To_Int(bSelectScenarioHourCounter);<br/>	iSelectScenarioHourCounter	:=	Limit_Int(1,iSelectScenarioHourCounter,50);<br/>
									<br/>	dwTempValueHours			:=	Udint_To_Dword(arrScenarioHourCounter[iSelectScenarioHourCounter].udiHours);<br/>
									<br/>	arrExternalDataOut[21]		:=	dwTempValueHours.B0;<br/>	arrExternalDataOut[22]		:=	dwTempValueHours.B1;<br/>	arrExternalDataOut[23]		:=	dwTempValueHours.B2;<br/>	arrExternalDataOut[24]		:=	dwTempValueHours.B3;<br/>
									<br/>	arrExternalDataOut[25]		:=	Int_to_Byte(arrScenarioHourCounter[iSelectScenarioHourCounter].iMinutes);<br/>	arrExternalDataOut[26]		:=	Int_to_Byte(arrScenarioHourCounter[iSelectScenarioHourCounter].iSeconds);<br/>
									<br/>	(* Amount of Lumgates *)<br/>	arrExternalDataOut[30]		:=	Int_To_Byte(udtLumgateMain.arrAmountLumgates[1]);<br/>	arrExternalDataOut[31]		:=	Int_To_Byte(udtLumgateMain.arrAmountLumgates[2]);<br/>	arrExternalDataOut[32]		:=	Int_To_Byte(udtLumgateMain.arrAmountLumgates[3]);<br/>	arrExternalDataOut[33]		:=	Int_To_Byte(udtLumgateMain.arrAmountLumgates[4]);<br/>
									<br/>	(* Lumgate available *)<br/>	For iLoop 	:=	35 to 64 do<br/>		arrExternalDataOut[iLoop]	:=	Byte#0;<br/>	End_For;<br/>
									<br/>	For iLoop 	:=	1 to 240 do<br/>		iByteAddress		:=	iLoop / 8 + 35; (* 35 is first byte *)<br/>		iBitAddress			:=	(iLoop Mod 8);<br/>
									<br/>		If iBitAddress = 0 then (* Division by 8 possible *)<br/>			iByteAddress	:=	iByteAddress - 1;<br/>		End_If;<br/>
									<br/>		Case iBitAddress of<br/>			0:<br/>				If arrLumgates[iLoop].xAvailable then<br/>					arrExternalDataOut[iByteAddress].X7	:=	True;<br/>				End_If;<br/>			1:<br/>				If arrLumgates[iLoop].xAvailable then<br/>					arrExternalDataOut[iByteAddress].X0	:=	True;<br/>				End_If;<br/>			2:<br/>				If arrLumgates[iLoop].xAvailable then<br/>					arrExternalDataOut[iByteAddress].X1	:=	True;<br/>				End_If;<br/>			3:<br/>				If arrLumgates[iLoop].xAvailable then<br/>					arrExternalDataOut[iByteAddress].X2	:=	True;<br/>				End_If;<br/>			4:<br/>				If arrLumgates[iLoop].xAvailable then<br/>					arrExternalDataOut[iByteAddress].X3	:=	True;<br/>				End_If;<br/>			5:<br/>				If arrLumgates[iLoop].xAvailable then<br/>					arrExternalDataOut[iByteAddress].X4	:=	True;<br/>				End_If;<br/>			6:<br/>				If arrLumgates[iLoop].xAvailable then<br/>					arrExternalDataOut[iByteAddress].X5	:=	True;<br/>				End_If;<br/>			7:<br/>				If arrLumgates[iLoop].xAvailable then<br/>					arrExternalDataOut[iByteAddress].X6	:=	True;<br/>				End_If;<br/>		End_Case;<br/>	End_For;<br/>
									<br/>	(* Lumgate error *)<br/>	For iLoop 	:=	65 to 94 do<br/>		arrExternalDataOut[iLoop]	:=	Byte#0;<br/>	End_For;<br/>
									<br/>	For iLoop 	:=	1 to 240 do<br/>		iByteAddress		:=	iLoop / 8 + 65; (* 65 is first byte *)<br/>		iBitAddress			:=	(iLoop Mod 8);<br/>	<br/>		If iBitAddress = 0 then (* Division by 8 possible *)<br/>			iByteAddress	:=	iByteAddress - 1;<br/>		End_If;<br/>
									<br/>		Case iBitAddress Of<br/>			0:<br/>				If arrLumgates[iLoop].xError then<br/>					arrExternalDataOut[iByteAddress].X7	:=	True;<br/>				End_If;<br/>			1:<br/>				If arrLumgates[iLoop].xError then<br/>					arrExternalDataOut[iByteAddress].X0	:=	True;<br/>				End_If;<br/>			2:<br/>				If arrLumgates[iLoop].xError then<br/>					arrExternalDataOut[iByteAddress].X1	:=	True;<br/>				End_If;<br/>			3:<br/>				If arrLumgates[iLoop].xError then<br/>					arrExternalDataOut[iByteAddress].X2	:=	True;<br/>				End_If;<br/>			4:<br/>				If arrLumgates[iLoop].xError then<br/>					arrExternalDataOut[iByteAddress].X3	:=	True;<br/>				End_If;<br/>			5:<br/>				If arrLumgates[iLoop].xError then<br/>					arrExternalDataOut[iByteAddress].X4	:=	True;<br/>				End_If;<br/>			6:<br/>				If arrLumgates[iLoop].xError then<br/>					arrExternalDataOut[iByteAddress].X5	:=	True;<br/>				End_If;<br/>			7:<br/>				If arrLumgates[iLoop].xError then<br/>					arrExternalDataOut[iByteAddress].X6	:=	True;<br/>				End_If;<br/>		End_Case;<br/>	End_For;<br/>
									<br/>	(* Detailed Lumgate data *)<br/>	uiSelectedLumgate			:=	Byte_To_UInt(bSelectDataLumgate);<br/>	iSelectedLumgate			:=	UInt_To_Int(uiSelectedLumgate);<br/>	iSelectedLumgate			:=	Limit_Int(1,iSelectedLumgate,240);<br/>	arrExternalDataOut[100]		:=	Int_to_Byte(iSelectedLumgate);<br/>
									<br/>	arrExternalDataOut[101].X0	:=	arrLumgates[iSelectedLumgate].xAvailable;<br/>	arrExternalDataOut[101].X1	:=	arrLumgates[iSelectedLumgate].xAutomaticManual;<br/>	arrExternalDataOut[101].X2	:=	arrLumgates[iSelectedLumgate].xRelay1;<br/>	arrExternalDataOut[101].X3	:=	arrLumgates[iSelectedLumgate].xRelay2;<br/>	arrExternalDataOut[101].X4	:=	arrLumgates[iSelectedLumgate].xInput1;<br/>	arrExternalDataOut[101].X5	:=	arrLumgates[iSelectedLumgate].xInput2;<br/>	arrExternalDataOut[101].X6	:=	arrLumgates[iSelectedLumgate].xFailMode;<br/>	arrExternalDataOut[101].X7	:=	arrLumgates[iSelectedLumgate].xSafeSet;<br/>
									<br/>	wTempValue				:=	Int_To_Word(arrLumgates[iSelectedLumgate].iActualOutputLevel);<br/>	arrExternalDataOut[102]	:=	wTempValue.B0;<br/>	arrExternalDataOut[103]	:=	wTempValue.B1;<br/>
									<br/>	wTempValue				:=	Int_To_Word(arrLumgates[iSelectedLumgate].iMeasurement);<br/>	arrExternalDataOut[104]	:=	wTempValue.B0;<br/>	arrExternalDataOut[105]	:=	wTempValue.B1;<br/>
									<br/>
									<br/>	dwTempValueHours		:=	Udint_To_Dword(arrLumgates[iSelectedLumgate].udtHourCounterGeneral.udiHours);<br/>
									<br/>	arrExternalDataOut[106]	:=	dwTempValueHours.B0;<br/>	arrExternalDataOut[107]	:=	dwTempValueHours.B1;<br/>	arrExternalDataOut[108]	:=	dwTempValueHours.B2;<br/>	arrExternalDataOut[109]	:=	dwTempValueHours.B3;<br/>
									<br/>	arrExternalDataOut[110]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounterGeneral.iMinutes);<br/>	arrExternalDataOut[111]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounterGeneral.iSeconds);<br/>
									<br/>
									<br/>	dwTempValueHours		:=	Udint_To_Dword(arrLumgates[iSelectedLumgate].udtHourCounterMaintenance.udiHours);<br/>
									<br/>	arrExternalDataOut[112]	:=	dwTempValueHours.B0;<br/>	arrExternalDataOut[113]	:=	dwTempValueHours.B1;<br/>	arrExternalDataOut[114]	:=	dwTempValueHours.B2;<br/>	arrExternalDataOut[115]	:=	dwTempValueHours.B3;<br/>
									<br/>	arrExternalDataOut[116]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounterMaintenance.iMinutes);<br/>	arrExternalDataOut[117]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounterMaintenance.iSeconds);<br/>
									<br/>
									<br/>	dwTempValueHours		:=	Udint_To_Dword(arrLumgates[iSelectedLumgate].udtHourCounter20_50.udiHours);<br/>
									<br/>	arrExternalDataOut[118]	:=	dwTempValueHours.B0;<br/>	arrExternalDataOut[119]	:=	dwTempValueHours.B1;<br/>	arrExternalDataOut[120]	:=	dwTempValueHours.B2;<br/>	arrExternalDataOut[121]	:=	dwTempValueHours.B3;<br/>
									<br/>	arrExternalDataOut[122]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounter20_50.iMinutes);<br/>	arrExternalDataOut[123]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounter20_50.iSeconds);<br/>
									<br/>
									<br/>	dwTempValueHours		:=	Udint_To_Dword(arrLumgates[iSelectedLumgate].udtHourCounter50_75.udiHours);<br/>
									<br/>	arrExternalDataOut[124]	:=	dwTempValueHours.B0;<br/>	arrExternalDataOut[125]	:=	dwTempValueHours.B1;<br/>	arrExternalDataOut[126]	:=	dwTempValueHours.B2;<br/>	arrExternalDataOut[127]	:=	dwTempValueHours.B3;<br/>
									<br/>	arrExternalDataOut[128]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounter50_75.iMinutes);<br/>	arrExternalDataOut[129]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounter50_75.iSeconds);<br/>
									<br/>
									<br/>	dwTempValueHours		:=	Udint_To_Dword(arrLumgates[iSelectedLumgate].udtHourCounter75_100.udiHours);<br/>
									<br/>	arrExternalDataOut[130]	:=	dwTempValueHours.B0;<br/>	arrExternalDataOut[131]	:=	dwTempValueHours.B1;<br/>	arrExternalDataOut[132]	:=	dwTempValueHours.B2;<br/>	arrExternalDataOut[133]	:=	dwTempValueHours.B3;<br/>
									<br/>	arrExternalDataOut[134]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounter75_100.iMinutes);<br/>	arrExternalDataOut[135]	:=	Int_to_Byte(arrLumgates[iSelectedLumgate].udtHourCounter75_100.iSeconds);<br/>
									<br/>
									<br/>	arrExternalDataOut[136].X0	:=	arrLumgates[iSelectedLumgate].udtCurrentCheck.xError;<br/>	arrExternalDataOut[136].X1	:=	arrLumgates[iSelectedLumgate].udtCurrentCheck.xWarning;<br/>
									<br/>	arrExternalDataOut[141]	:=	Int_to_Byte(iOperatingSeconds);<br/>	arrExternalDataOut[142]	:=	Int_to_Byte(iOperatingMinutes);<br/>	dwTemp					:=	udint_to_dword(udiOperatingHours);<br/>	arrExternalDataOut[137]	:=	dwTemp.B0;<br/>	arrExternalDataOut[138]	:=	dwTemp.B1;<br/>	arrExternalDataOut[139]	:=	dwTemp.B2;<br/>	arrExternalDataOut[140]	:=	dwTemp.B3;<br/>
									<br/>	arrExternalDataOut[143].X0	:=	ONBOARD_INPUT_BIT0;<br/>	arrExternalDataOut[143].X1	:=	ONBOARD_INPUT_BIT1;<br/>	arrExternalDataOut[143].X2	:=	ONBOARD_INPUT_BIT2;<br/>	arrExternalDataOut[143].X3	:=	ONBOARD_INPUT_BIT3;<br/>	arrExternalDataOut[143].X4	:=	ONBOARD_INPUT_BIT4;<br/>	arrExternalDataOut[143].X5	:=	ONBOARD_INPUT_BIT5;<br/>	arrExternalDataOut[143].X6	:=	ONBOARD_INPUT_BIT6;<br/>	arrExternalDataOut[143].X7	:=	ONBOARD_INPUT_BIT7;<br/>
									<br/>	arrExternalDataOut[144].X0	:=	ONBOARD_INPUT_BIT8;<br/>	arrExternalDataOut[144].X1	:=	ONBOARD_INPUT_BIT9;<br/>	arrExternalDataOut[144].X2	:=	ONBOARD_INPUT_BIT10;<br/>	arrExternalDataOut[144].X3	:=	ONBOARD_INPUT_BIT11;<br/>
									<br/>	arrExternalDataOut[145].X0	:=	ONBOARD_OUTPUT_BIT0;<br/>	arrExternalDataOut[145].X1	:=	ONBOARD_OUTPUT_BIT1;<br/>	arrExternalDataOut[145].X2	:=	ONBOARD_OUTPUT_BIT2;<br/>	arrExternalDataOut[145].X3	:=	ONBOARD_OUTPUT_BIT3;<br/>
									<br/>	arrExternalDataOut[155]	:=	byte#2;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Modbus">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">If xActivate then<br/>	If udtNetworkConfiguration.iMode = 5 or udtNetworkConfiguration.iMode = 3 then<br/>		iExternalData	:=	1;	(* Profinet *)<br/>	Elsif udtNetworkConfiguration.iMode = 4 or udtNetworkConfiguration.iMode = 2 then<br/>		iExternalData	:=	2;	(* Modbus *)<br/>	End_if;<br/>
									<br/>	Case iExternalData of<br/>		1:	(* Profinet *)<br/>			For iLoop := 0 to 255 do<br/>				arrExternalDataIn[iLoop]:= PND_S1S1_INPUTS[iLoop];<br/>				PND_S1S1_OUTPUTS[iLoop]:= arrExternalDataOut[iLoop];<br/>		End_For;<br/>
									<br/>		2:	(* Modbus *)<br/>			For iLoop := 300 to 311 do<br/>				iLoop2 := iLoop - 300;<br/>				arrExternalDataIn[iLoop2]:= MB_Data_External[iLoop].B0;<br/>			End_For;<br/>	<br/>			For iLoop := 100 to 236 do<br/>				iLoop2	:=	iLoop - 100;<br/>				MB_Data_External[iLoop].B0:= arrExternalDataOut[iLoop2];<br/>			End_For;<br/>	End_case;<br/>End_if;<br/>
									<br/>iPort:= 502;<br/>xAutoQuit:= True;<br/>
									<br/>MB_TCP_Server_V2_00_1(<br/>xActivate				:=	xActivate,<br/>xAcknowledge			:=	xQuit,<br/>xAutoAck				:=	xAutoQuit,<br/>xUDP_Mode				:=	xUDP,<br/>iTCP_Port				:=	iPort,<br/>strPartner_IP			:=	udtNetworkConfiguration.strIPModbus,<br/>tTimeout				:=	T#0s,<br/>uiOffsetInputRegister	:=	uiRegOffsetInputs,<br/>uiOffsetHoldingRegister	:=	uiRegOffset,<br/>uiOffsetInputs			:=	uiRegOffsetInputs,<br/>uiOffsetCoils			:=	uiRegOffsetCoils,<br/>arrModbusData			:=	MB_Data_External);<br/>
									<br/>xActive_MB_Server		:=	MB_TCP_Server_V2_00_1.xActive;<br/>xConnection_MB_Server	:=	MB_TCP_Server_V2_00_1.xConnected;<br/>xError_MB_Server		:=	MB_TCP_Server_V2_00_1.xError;<br/>wDiagCode_MB_Server		:=	MB_TCP_Server_V2_00_1.wDiagCode;<br/>wAddDiagCode_MB_Server	:=	MB_TCP_Server_V2_00_1.wAddDiagCode;<br/>MB_Data_External		:=	MB_TCP_Server_V2_00_1.arrModbusData;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_TCS_Communication_01T" xmlns="http://www.w3.org/1999/xhtml">= Lumgate_Controll<br/> - L20_Analog_Inputs<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_Lumgate_01" pouType="functionBlock" pouGroup="Lumgate" lastChange="2016-11-21T16:24:21">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xConfirm" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xPulseSecond" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="wSpecialScenario" group="Input Parameter">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="iSelectRBT" group="Input Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrSegment" group="Input Parameter">
							<type>
								<derived name="ARR_I_1_4"/>
							</type>
						</variable>
						<variable name="xCommissioning" group="Input Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iCommissioningBranch" group="Input Parameter">
							<type>
								<INT/>
							</type>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xAlarm" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xPreAlarm" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strDiag" group="Output Parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="iLumgate" group="Output Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iRBT" group="Output Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xErrorRBT1" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xErrorRBT2" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xErrorRBT3" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xErrorRBT4" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iRBT1" group="Output Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iRBT2" group="Output Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iRBT3" group="Output Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iRBT4" group="Output Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrAmountLumgates" group="Output Parameter">
							<type>
								<derived name="ARR_I_1_4"/>
							</type>
						</variable>
						<variable name="xUnexpectedLG_Count" group="Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iTotalLumgates" group="Output Parameter">
							<type>
								<INT/>
							</type>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="udtScenarioMode" group="In- Output Parameter">
							<type>
								<derived name="udtScene"/>
							</type>
						</variable>
						<variable name="arrLumgates" group="In- Output Parameter">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
						</variable>
						<variable name="iDimmingSpeed" group="In- Output Parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xNextDevice" group="In- Output Parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="R_TRIG_AmmountLG" group="Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="TON_Delay_Shift" group="Instanzes">
							<type>
								<derived name="TON"/>
							</type>
						</variable>
						<variable name="FB_HourCounterGeneral" group="Instanzes">
							<type>
								<derived name="FB_HourCounter_01"/>
							</type>
						</variable>
						<variable name="FB_HourCounterMaintenance" group="Instanzes">
							<type>
								<derived name="FB_HourCounter_01"/>
							</type>
						</variable>
						<variable name="FB_HourCounter20_50" group="Instanzes">
							<type>
								<derived name="FB_HourCounter_01"/>
							</type>
						</variable>
						<variable name="FB_HourCounter50_75" group="Instanzes">
							<type>
								<derived name="FB_HourCounter_01"/>
							</type>
						</variable>
						<variable name="FB_HourCounter75_100" group="Instanzes">
							<type>
								<derived name="FB_HourCounter_01"/>
							</type>
						</variable>
						<variable name="xManualActive" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iCurrentCheck" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iNumberLumgateCurrentCheck" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTempOutputLevel" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="rParameterA" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="iParameter1" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iParameter2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iParameter5" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iParameter4" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="rParameterB" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rLimitMax" redundant="true" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rLimitMin" redundant="true" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rTempExpected" redundant="true" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rMarginError" redundant="true" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="iLimitMax" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLimitMin" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTempLevelMinimum" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTempLevelMaximum" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iStep" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTemp" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop3" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iNumber" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iShiftOnOff" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrShiftedOnOff" group="Default">
							<type>
								<derived name="ARR_X_1_8"/>
							</type>
						</variable>
						<variable name="xCount1" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xCount2" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xCount3" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xCount4" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xSpecialScenarioActive" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iTempOutputValueLGSpecial" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xTempStatusScenario" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xDimmingScenarioActive" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iTempOutputValueLGDimming" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xShiftedOnOff" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
							<initialValue>
								<simpleValue value="true"/>
							</initialValue>
						</variable>
						<variable name="iTempScenarioLG" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iShiftPosition" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="rTemp1" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rTemp2" redundant="true" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rPercentageDecrease" redundant="true" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rTempDecrease" redundant="true" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="iCLO" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xTempRelay1" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xTempRelay2" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iModuleLevel" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="ShiftedOnOff">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Shifted On/Off *)<br/>(* to turn on the luminaiers in groups and not all together *)<br/>Case iShiftOnOff of<br/>	0:<br/>		iNumber			:=	iNumber + 1;<br/>		If iNumber &gt; 8 then<br/>			iNumber		:=	1;<br/>		End_If;<br/>		iShiftOnOff		:=	1;<br/>
									<br/>	1:<br/>		If TON_Delay_Shift.Q then<br/>			iShiftOnOff	:=	0;<br/>		End_If;<br/>End_Case;<br/>
									<br/>TON_Delay_Shift(IN		:=	iShiftOnOff = 1,<br/>				PT		:=	t#200ms);	(* Delay between switching on *)<br/>
									<br/>For iLoop := 1 to 8	do<br/>	arrShiftedOnOff[iLoop]	:=	False;<br/>End_For;<br/>arrShiftedOnOff[iNumber]	:=	True;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="TeachCosFailsafe">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Teach Cos Failsafe *)<br/>For iLoop := 1 to 240 do<br/>	iStep	:=	arrLumgates[iLoop].udtInternal.iStepTeach;<br/>
									<br/>	Case iStep of<br/>		0:	(* Teach consumption active for this Lumgate *)<br/>			If arrLumgates[iLoop].xAvailable and arrLumgates[iLoop].iMode = 3 then <br/>				arrLumgates[iLoop].iOutputLevelTeach		:= 	0;<br/>				iStep										:= 	2;<br/>				arrLumgates[iLoop].udtInternal.iTeachRun	:=	1;<br/>
									<br/>			(* Teach failsave active for this Lumgate *)<br/>			Elsif arrLumgates[iLoop].xAvailable and arrLumgates[iLoop].iMode = 4 then <br/>				iStep									:= 	10;<br/>			End_If;<br/>	<br/>		2:<br/>			If arrLumgates[iLoop].iActualOutputLevel = arrLumgates[iLoop].iTargetOutputLevel then<br/>				arrLumgates[iLoop].udtInternal.iCounterTeach		:= 	arrLumgates[iLoop].udtInternal.iCounterTeach + 1;<br/>				If arrLumgates[iLoop].udtInternal.iTeachRun = 1 then<br/>					arrLumgates[iLoop].xRelay1	:=	False;<br/>					arrLumgates[iLoop].xRelay2	:=	False;<br/>				Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 2 then<br/>					arrLumgates[iLoop].xRelay1	:=	False;<br/>					arrLumgates[iLoop].xRelay2	:=	True;<br/>				Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 3 then<br/>					arrLumgates[iLoop].xRelay1	:=	True;<br/>					arrLumgates[iLoop].xRelay2	:=	False;<br/>				Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 4 then<br/>					arrLumgates[iLoop].xRelay1	:=	True;<br/>					arrLumgates[iLoop].xRelay2	:=	True;<br/>				End_if;<br/>				(* Wait during 200 cycles befor saving measured value *)<br/>				If arrLumgates[iLoop].udtInternal.iCounterTeach &gt;= 200 then <br/>					arrLumgates[iLoop].udtInternal.iCounterTeach	:= 	0;<br/>					iStep											:= 	3;<br/>				End_If;<br/>			End_If;<br/>
									<br/>		3:<br/>			iTemp	:= 	arrLumgates[iLoop].iOutputLevelTeach;<br/>			Case iTemp of<br/>				0:<br/>					If arrLumgates[iLoop].udtInternal.iTeachRun = 1 then<br/>						strDiag	:=	'Starting current measurement run 1/4';<br/>					Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 2 then<br/>						strDiag	:=	'Starting current measurement run 2/4';<br/>					Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 3 then<br/>						strDiag	:=	'Starting current measurement run 3/4';<br/>					Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 4 then<br/>						strDiag	:=	'Starting current measurement run 4/4';<br/>					End_if;<br/>					iLoop2	:=	1;<br/>
									<br/>				1:<br/>					iLoop2	:=	2;<br/>
									<br/>				50:<br/>					iLoop2	:=	3;<br/>					strDiag	:=	'Current measurement run 12% done';<br/>
									<br/>				100:<br/>					iLoop2	:=	4;<br/>
									<br/>				150:<br/>					iLoop2	:=	5;<br/>
									<br/>				200:<br/>					iLoop2	:=	6;<br/>
									<br/>				250:<br/>					iLoop2	:=	7;<br/>					strDiag	:=	'Current measurement run 28% done';<br/>
									<br/>				300:<br/>					iLoop2	:=	8;<br/>
									<br/>				350:<br/>					iLoop2	:=	9;<br/>
									<br/>				400:<br/>					iLoop2	:=	10;<br/>
									<br/>				450:<br/>					iLoop2	:=	11;<br/>					strDiag	:=	'Current measurement run 44% done';<br/>
									<br/>				500:<br/>					iLoop2	:=	12;<br/>
									<br/>				550:<br/>					iLoop2	:=	13;<br/>
									<br/>				600:<br/>					iLoop2	:=	14;<br/>
									<br/>				650:<br/>					iLoop2	:=	15;<br/>					strDiag	:=	'Current measurement run 60% done';<br/>
									<br/>				700:<br/>					iLoop2	:=	16;<br/>
									<br/>				750:<br/>					iLoop2	:=	17;<br/>
									<br/>				800:<br/>					iLoop2	:=	18;<br/>
									<br/>				850:<br/>					iLoop2	:=	19;<br/>					strDiag	:=	'Current measurement run 76% done';<br/>
									<br/>				900:<br/>					iLoop2	:=	20;<br/>
									<br/>				950:<br/>					iLoop2	:=	21;<br/>
									<br/>				1000:<br/>					iLoop2	:=	22;<br/>
									<br/>				1070:<br/>					iLoop2	:=	23;<br/>					strDiag	:=	'Current measurement run 92% done';<br/>			End_Case;<br/>
									<br/>			If iLoop2 &gt; 1 then<br/>				iLoop3	:=	iLoop2 - 1;<br/>				If arrLumgates[iLoop].udtInternal.iTeachRun = 1 then<br/>					If arrLumgates[iLoop].iMeasurement &gt;= arrLumgates[iLoop].arrPowerConsumption[iLoop3] then<br/>						arrLumgates[iLoop].arrPowerConsumption[iLoop2]	:= 	arrLumgates[iLoop].iMeasurement;	(* Save value *)<br/>					Else<br/>						arrLumgates[iLoop].arrPowerConsumption[iLoop2]	:= 	arrLumgates[iLoop].arrPowerConsumption[iLoop3];<br/>					End_if;<br/>				Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 2 then<br/>					If arrLumgates[iLoop].iMeasurement &gt;= arrLumgates[iLoop].arrPowerConsumption_01[iLoop3] then<br/>						arrLumgates[iLoop].arrPowerConsumption_01[iLoop2]	:=	arrLumgates[iLoop].iMeasurement;<br/>					Else<br/>						arrLumgates[iLoop].arrPowerConsumption_01[iLoop2]	:= 	arrLumgates[iLoop].arrPowerConsumption_01[iLoop3];<br/>					End_if;<br/>				Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 3 then<br/>					If arrLumgates[iLoop].iMeasurement &gt;= arrLumgates[iLoop].arrPowerConsumption_10[iLoop3] then<br/>						arrLumgates[iLoop].arrPowerConsumption_10[iLoop2]	:=	arrLumgates[iLoop].iMeasurement;<br/>					Else<br/>						arrLumgates[iLoop].arrPowerConsumption_10[iLoop2]	:= 	arrLumgates[iLoop].arrPowerConsumption_10[iLoop3];<br/>					End_if;<br/>				Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 4 then<br/>					If arrLumgates[iLoop].iMeasurement &gt;= arrLumgates[iLoop].arrPowerConsumption_11[iLoop3] then<br/>						arrLumgates[iLoop].arrPowerConsumption_11[iLoop2]	:=	arrLumgates[iLoop].iMeasurement;<br/>					Else<br/>						arrLumgates[iLoop].arrPowerConsumption_11[iLoop2]	:= 	arrLumgates[iLoop].arrPowerConsumption_11[iLoop3];<br/>					End_if;<br/>				End_if;<br/>			Else<br/>				If arrLumgates[iLoop].udtInternal.iTeachRun = 1 then<br/>					arrLumgates[iLoop].arrPowerConsumption[iLoop2]		:= 	arrLumgates[iLoop].iMeasurement;	(* Save value *)<br/>				Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 2 then<br/>					arrLumgates[iLoop].arrPowerConsumption_01[iLoop2]	:=	arrLumgates[iLoop].iMeasurement;<br/>				Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 3 then<br/>					arrLumgates[iLoop].arrPowerConsumption_10[iLoop2]	:=	arrLumgates[iLoop].iMeasurement;<br/>				Elsif arrLumgates[iLoop].udtInternal.iTeachRun = 4 then<br/>					arrLumgates[iLoop].arrPowerConsumption_11[iLoop2]	:=	arrLumgates[iLoop].iMeasurement;<br/>				End_if;<br/>			End_If;<br/>
									<br/>			If iLoop2 = 1 then<br/>				arrLumgates[iLoop].iOutputLevelTeach	:=	1;<br/>				iStep	:=	2;<br/>			Elsif iLoop2 = 2 then<br/>				arrLumgates[iLoop].iOutputLevelTeach	:=	50;<br/>				iStep	:=	2;<br/>			Elsif iLoop2 &gt; 2 and iLoop2 &lt; 22 then<br/>				arrLumgates[iLoop].iOutputLevelTeach	:=	arrLumgates[iLoop].iOutputLevelTeach + 50;<br/>				iStep	:=	2;<br/>			Elsif iLoop2 = 22 then<br/>				arrLumgates[iLoop].iOutputLevelTeach	:=	1070;<br/>				iStep	:=	2;<br/>			Else<br/>				If arrLumgates[iLoop].udtInternal.iTeachRun &lt; 4 then<br/>					arrLumgates[iLoop].udtInternal.iTeachRun	:=	arrLumgates[iLoop].udtInternal.iTeachRun + 1;<br/>					arrLumgates[iLoop].iOutputLevelTeach		:=	0;<br/>					iStep	:=	2;<br/>				Else<br/>					iStep	:=	4;<br/>				End_if;<br/>			End_If;<br/>
									<br/>		4:	<br/>			strDiag													:=	'Current measurement done';<br/>			arrLumgates[iLoop].xTeachConsumption					:=	False;<br/>			arrLumgates[iLoop].udtInternal.xPowerConsumptionCorrect	:= 	True;<br/>
									<br/>			(* There is no minimum difference measured *)<br/>			If arrLumgates[iLoop].arrPowerConsumption[23] &lt;= arrLumgates[iLoop].arrPowerConsumption[12] then <br/>				arrLumgates[iLoop].udtInternal.xPowerConsumptionCorrect	:= 	False;<br/>			End_If;<br/>
									<br/>			(* There is no minimum difference measured *)<br/>			If arrLumgates[iLoop].arrPowerConsumption[12] &lt;= arrLumgates[iLoop].arrPowerConsumption[2] then <br/>				arrLumgates[iLoop].udtInternal.xPowerConsumptionCorrect	:= 	False;<br/>			End_If;<br/>			iStep						:= 	0;<br/>
									<br/>		10:<br/>			If arrLumgates[iLoop].iActualOutputLevel = arrLumgates[iLoop].iTargetOutputLevel then<br/>				iStep					:= 	11;<br/>			End_If;<br/>
									<br/>		11:<br/>			arrLumgates[iLoop].xSafe	:= 	True;<br/>			iStep						:= 	12;<br/>
									<br/>		12:<br/>			arrLumgates[iLoop].udtInternal.iCounterFailsave	:= 	arrLumgates[iLoop].udtInternal.iCounterFailsave + 1;<br/>			If arrLumgates[iLoop].udtInternal.iCounterFailsave &gt; 50 then<br/>				arrLumgates[iLoop].xSafe						:= 	False;<br/>				arrLumgates[iLoop].udtInternal.iCounterFailsave	:= 	0;<br/>				arrLumgates[iLoop].xTeachFailsave				:= 	False;<br/>				iStep	:= 	0;<br/>			Elsif arrLumgates[iLoop].xSafeFinish then<br/>				arrLumgates[iLoop].xSafe						:=	False;<br/>				arrLumgates[iLoop].udtInternal.iCounterFailsave	:= 	0;<br/>				arrLumgates[iLoop].xTeachFailsave				:= 	False;<br/>				iStep	:= 	0;<br/>			End_If;<br/>	End_Case;<br/>
									<br/>	arrLumgates[iLoop].udtInternal.iStepTeach			:= 	iStep;<br/>
									<br/>	If arrLumgates[iLoop].iMode &lt; 3 or arrLumgates[iLoop].iMode &gt; 4 then (* Teach not active *)<br/>		arrLumgates[iLoop].iOutputLevelTeach			:= 	0;<br/>		arrLumgates[iLoop].udtInternal.iCounterTeach	:= 	0;<br/>		arrLumgates[iLoop].udtInternal.iCounterFailsave	:= 	0;<br/>		arrLumgates[iLoop].udtInternal.iStepTeach		:= 	0;<br/>	Elsif arrLumgates[iLoop].iMode = 4 and arrLumgates[iLoop].udtInternal.iStepTeach &lt; 10 and arrLumgates[iLoop].udtInternal.iStepTeach &gt; 0 then<br/>		arrLumgates[iLoop].iOutputLevelTeach			:= 	0;<br/>		arrLumgates[iLoop].udtInternal.iCounterTeach	:= 	0;<br/>		arrLumgates[iLoop].udtInternal.iCounterFailsave	:= 	0;<br/>		arrLumgates[iLoop].udtInternal.iStepTeach		:= 	0;<br/>	End_If;<br/>End_For;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="CurrentCheck">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Current Check *)<br/>Case iCurrentCheck of<br/>	0:<br/>		iNumberLumgateCurrentCheck	:= 	iNumberLumgateCurrentCheck + 1;<br/>		If iNumberLumgateCurrentCheck &gt; 240 then<br/>			iNumberLumgateCurrentCheck	:= 	1;<br/>		End_If;<br/>
									<br/>		If iNumberLumgateCurrentCheck &gt; 0 and iNumberLumgateCurrentCheck &lt; 241 then<br/>			If arrLumgates[iNumberLumgateCurrentCheck].xAvailable and<br/>				(arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xActiveCurrentCheckError or<br/>				arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xActiveCurrentCheckWarning) then<br/>				iCurrentCheck			:= 	1;		(* Check current is possible *)<br/>			End_If;<br/>
									<br/>			If not arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xActiveCurrentCheckError<br/>				or not arrLumgates[iNumberLumgateCurrentCheck].udtInternal.xPowerConsumptionCorrect  then<br/>					arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectError	:= 	False;<br/>					arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xError			:= 	False;<br/>													(* Current error is disabled or invalid measurement*)<br/>			End_If;<br/>
									<br/>			If not arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xActiveCurrentCheckWarning<br/>				or not arrLumgates[iNumberLumgateCurrentCheck].udtInternal.xPowerConsumptionCorrect  then<br/>					arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectWarning	:= 	False;<br/>					arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xWarning		:= 	False;<br/>													(* Current warning is disabled or invalid measurement*)<br/>			End_If;<br/>		End_If;<br/>
									<br/>	1:	<br/>		If arrLumgates[iNumberLumgateCurrentCheck].udtInternal.xPowerConsumptionCorrect then<br/>			iTempOutputLevel	:= 	arrLumgates[iNumberLumgateCurrentCheck].iActualOutputLevel;<br/>			If iTempOutputLevel &gt; 0 then<br/>				<br/>				Case iTempOutputLevel of<br/>					1..50:<br/>						iTempLevelMinimum	:=	2;<br/>						iTempLevelMaximum	:=	3;<br/>						iParameter1			:=	1;<br/>						iParameter2			:=	50;<br/>
									<br/>					51..100:<br/>						iTempLevelMinimum	:=	3;<br/>						iTempLevelMaximum	:=	4;<br/>						iParameter1			:=	50;<br/>						iParameter2			:=	100;<br/>
									<br/>					101..150:<br/>						iTempLevelMinimum	:=	4;<br/>						iTempLevelMaximum	:=	5;<br/>						iParameter1			:=	100;<br/>						iParameter2			:=	150;<br/>
									<br/>					151..200:<br/>						iTempLevelMinimum	:=	5;<br/>						iTempLevelMaximum	:=	6;<br/>						iParameter1			:=	150;<br/>						iParameter2			:=	200;<br/>
									<br/>					201..250:<br/>						iTempLevelMinimum	:=	6;<br/>						iTempLevelMaximum	:=	7;<br/>						iParameter1			:=	200;<br/>						iParameter2			:=	250;<br/>
									<br/>					251..300:<br/>						iTempLevelMinimum	:=	7;<br/>						iTempLevelMaximum	:=	8;<br/>						iParameter1			:=	250;<br/>						iParameter2			:=	300;<br/>
									<br/>					301..350:<br/>						iTempLevelMinimum	:=	8;<br/>						iTempLevelMaximum	:=	9;<br/>						iParameter1			:=	300;<br/>						iParameter2			:=	350;<br/>
									<br/>					351..400:<br/>						iTempLevelMinimum	:=	9;<br/>						iTempLevelMaximum	:=	10;<br/>						iParameter1			:=	350;<br/>						iParameter2			:=	400;<br/>
									<br/>					401..450:<br/>						iTempLevelMinimum	:=	10;<br/>						iTempLevelMaximum	:=	11;<br/>						iParameter1			:=	400;<br/>						iParameter2			:=	450;<br/>
									<br/>					451..500:<br/>						iTempLevelMinimum	:=	11;<br/>						iTempLevelMaximum	:=	12;<br/>						iParameter1			:=	450;<br/>						iParameter2			:=	500;<br/>
									<br/>					501..550:<br/>						iTempLevelMinimum	:=	12;<br/>						iTempLevelMaximum	:=	13;<br/>						iParameter1			:=	500;<br/>						iParameter2			:=	550;<br/>
									<br/>					551..600:<br/>						iTempLevelMinimum	:=	13;<br/>						iTempLevelMaximum	:=	14;<br/>						iParameter1			:=	550;<br/>						iParameter2			:=	600;<br/>
									<br/>					601..650:<br/>						iTempLevelMinimum	:=	14;<br/>						iTempLevelMaximum	:=	15;<br/>						iParameter1			:=	600;<br/>						iParameter2			:=	650;<br/>
									<br/>					651..700:<br/>						iTempLevelMinimum	:=	15;<br/>						iTempLevelMaximum	:=	16;<br/>						iParameter1			:=	650;<br/>						iParameter2			:=	700;<br/>
									<br/>					701..750:<br/>						iTempLevelMinimum	:=	16;<br/>						iTempLevelMaximum	:=	17;<br/>						iParameter1			:=	700;<br/>						iParameter2			:=	750;<br/>
									<br/>					751..800:<br/>						iTempLevelMinimum	:=	17;<br/>						iTempLevelMaximum	:=	18;<br/>						iParameter1			:=	750;<br/>						iParameter2			:=	800;<br/>
									<br/>					801..850:<br/>						iTempLevelMinimum	:=	18;<br/>						iTempLevelMaximum	:=	19;<br/>						iParameter1			:=	800;<br/>						iParameter2			:=	850;<br/>
									<br/>					851..900:<br/>						iTempLevelMinimum	:=	19;<br/>						iTempLevelMaximum	:=	20;<br/>						iParameter1			:=	850;<br/>						iParameter2			:=	900;<br/>
									<br/>					901..950:<br/>						iTempLevelMinimum	:=	20;<br/>						iTempLevelMaximum	:=	21;<br/>						iParameter1			:=	900;<br/>						iParameter2			:=	950;<br/>
									<br/>					951..1000:<br/>						iTempLevelMinimum	:=	21;<br/>						iTempLevelMaximum	:=	22;<br/>						iParameter1			:=	950;<br/>						iParameter2			:=	1000;<br/>
									<br/>					1001..1070:	<br/>						iTempLevelMinimum	:=	22;<br/>						iTempLevelMaximum	:=	23;<br/>						iParameter1			:=	1000;<br/>						iParameter2			:=	1070;<br/>				End_Case;<br/>				<br/>				If arrLumgates[iNumberLumgateCurrentCheck].xRelay1 and arrLumgates[iNumberLumgateCurrentCheck].xRelay2 then<br/>					iParameter4	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption_11[iTempLevelMinimum];<br/>					iParameter5	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption_11[iTempLevelMaximum];<br/>				Elsif arrLumgates[iNumberLumgateCurrentCheck].xRelay1 and not arrLumgates[iNumberLumgateCurrentCheck].xRelay2 then<br/>					iParameter4	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption_10[iTempLevelMinimum];<br/>					iParameter5	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption_10[iTempLevelMaximum];<br/>				Elsif not arrLumgates[iNumberLumgateCurrentCheck].xRelay1 and arrLumgates[iNumberLumgateCurrentCheck].xRelay2 then<br/>					iParameter4	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption_01[iTempLevelMinimum];<br/>					iParameter5	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption_01[iTempLevelMaximum];<br/>				Elsif not arrLumgates[iNumberLumgateCurrentCheck].xRelay1 and not arrLumgates[iNumberLumgateCurrentCheck].xRelay2 then<br/>					iParameter4	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption[iTempLevelMinimum];<br/>					iParameter5	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption[iTempLevelMaximum];<br/>				End_if;<br/>
									<br/>				(* Calculate deviation *)<br/>				rParameterA	:=	Int_To_Real(iParameter5 - iParameter4) / Int_To_Real(iParameter2 - iParameter1);<br/>				rParameterB	:=	Int_To_Real(iParameter5) - rParameterA * Int_To_Real(iParameter2);<br/>
									<br/>				arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iExpectedCurrent	:=	Real_To_Int(rParameterA * Int_To_Real(iTempOutputLevel) + rParameterB);<br/>				iCurrentCheck	:=	2;<br/>			Else<br/>				arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectError		:=	False;<br/>				arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectWarning		:=	False;<br/>				If arrLumgates[iNumberLumgateCurrentCheck].xRelay1 and arrLumgates[iNumberLumgateCurrentCheck].xRelay2 then<br/>					arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iExpectedCurrent	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption_11[1];<br/>				Elsif arrLumgates[iNumberLumgateCurrentCheck].xRelay1 and not arrLumgates[iNumberLumgateCurrentCheck].xRelay2 then<br/>					arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iExpectedCurrent	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption_10[1];<br/>				Elsif not arrLumgates[iNumberLumgateCurrentCheck].xRelay1 and arrLumgates[iNumberLumgateCurrentCheck].xRelay2 then<br/>					arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iExpectedCurrent	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption_01[1];<br/>				Elsif not arrLumgates[iNumberLumgateCurrentCheck].xRelay1 and not arrLumgates[iNumberLumgateCurrentCheck].xRelay2 then<br/>					arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iExpectedCurrent	:=	arrLumgates[iNumberLumgateCurrentCheck].arrPowerConsumption[1];<br/>				End_if;<br/>				iCurrentCheck	:=	0;<br/>			End_If;<br/>		Else<br/>			iCurrentCheck		:=	0;<br/>		End_If;<br/>
									<br/>	2:<br/>		If arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xActiveCurrentCheckError then<br/>			rTempExpected		:=	Int_To_Real(arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iExpectedCurrent);<br/>			rMarginError		:=	rTempExpected * arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.rPercentageError / 100.0;<br/>
									<br/>			If rMarginError &lt; 16.0 then (* limit deviation to 16 mA *)<br/>				rMarginError	:=	16.0;<br/>			End_If;<br/>
									<br/>			rLimitMax	:=	rTempExpected + rMarginError;<br/>			rLimitMin	:=	rTempExpected - rMarginError;<br/>
									<br/>			iLimitMax	:=	Real_To_Int(rLimitMax);<br/>			iLimitMin	:=	Real_To_Int(rLimitMin);<br/>
									<br/>			arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMaxError		:=	iLimitMax;<br/>			arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMinError		:=	iLimitMin;<br/>
									<br/>			If arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &gt; iLimitMax or arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &lt; iLimitMin then<br/>				(* current error detected *)<br/>				arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectError	:=	True;<br/>			Else<br/>				arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectError	:=	False;<br/>			End_If;<br/>		End_If;<br/>
									<br/>		If arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xActiveCurrentCheckWarning then<br/>			rTempExpected	:=	Int_To_Real(arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iExpectedCurrent);<br/>			rMarginError	:=	rTempExpected * arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.rPercentageWarning / 100.0;<br/>
									<br/>			If rMarginError &lt; 16.0 then	(* limit deviation to 16 mA *)<br/>				rMarginError	:=	16.0;<br/>			End_If;<br/>
									<br/>			rLimitMax	:=	rTempExpected + rMarginError;<br/>			rLimitMin	:=	rTempExpected - rMarginError;<br/>
									<br/>			iLimitMax	:=	Real_To_Int(rLimitMax);<br/>			iLimitMin	:=	Real_To_Int(rLimitMin);<br/>
									<br/>			arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMaxWarning	:=	iLimitMax;<br/>			arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMinWarning	:=	iLimitMin;<br/>
									<br/>			If arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &gt; iLimitMax or arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &lt; iLimitMin then<br/>				(* current warning detected *)<br/>				arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectWarning	:=	True;<br/>			Else<br/>				arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectWarning	:=	False;<br/>			End_If;<br/>		End_If;<br/>		iCurrentCheck	:=	0;<br/>End_Case;<br/>
									<br/>(* Try to execute diagnostic messages sequential *)<br/>For iLoop := 1 to 240 do<br/>	iStep:= arrLumgates[iLoop].udtInternal.iStepCurrentCheck;<br/>
									<br/>	Case iStep of<br/>		0:<br/>			If arrLumgates[iLoop].iActualOutputLevel = arrLumgates[iLoop].iTargetOutputLevel then<br/>				arrLumgates[iLoop].udtInternal.iCounterCurrentCheck	:=	arrLumgates[iLoop].udtInternal.iCounterCurrentCheck + 1;<br/>
									<br/>				(* Wait during 200 cycles to suppress short deviations *)<br/>				If arrLumgates[iLoop].udtInternal.iCounterCurrentCheck &gt;= 200 then <br/>					arrLumgates[iLoop].udtInternal.iCounterCurrentCheck	:=	0;<br/>					iStep	:=	1;<br/>				End_If;<br/>			Else<br/>				arrLumgates[iLoop].udtInternal.iCounterCurrentCheck	:=	0;<br/>			End_If;<br/>
									<br/>			If (not arrLumgates[iLoop].udtCurrentCheck.xActiveCurrentCheckError<br/>				and not arrLumgates[iLoop].udtCurrentCheck.xActiveCurrentCheckWarning)<br/>				or not arrLumgates[iLoop].udtInternal.xPowerConsumptionCorrect then<br/>				(* reset 200 cycle counter *)<br/>				arrLumgates[iLoop].udtInternal.iCounterCurrentCheck	:=	0;<br/>			End_If;<br/>
									<br/>			arrLumgates[iLoop].udtInternal.iStepCurrentCheck	:= iStep;<br/>
									<br/>			If not arrLumgates[iLoop].udtCurrentCheck.xActiveCurrentCheckError then<br/>				arrLumgates[iLoop].udtCurrentCheck.xError		:=	False;<br/>			End_If;<br/>			If not arrLumgates[iLoop].udtCurrentCheck.xActiveCurrentCheckWarning then<br/>				arrLumgates[iLoop].udtCurrentCheck.xWarning		:=	False;<br/>			End_If;<br/>		1:<br/>			If arrLumgates[iLoop].iActualOutputLevel &lt;&gt; arrLumgates[iLoop].iTargetOutputLevel then<br/>				arrLumgates[iLoop].udtInternal.iCounterCurrentCheck	:=	0;<br/>				iStep	:=	0;<br/>			End_If;<br/>
									<br/>			If (not arrLumgates[iLoop].udtCurrentCheck.xActiveCurrentCheckError<br/>				and not arrLumgates[iLoop].udtCurrentCheck.xActiveCurrentCheckWarning)<br/>				or not arrLumgates[iLoop].udtInternal.xPowerConsumptionCorrect then<br/>				arrLumgates[iLoop].udtInternal.iCounterCurrentCheck	:=	0;<br/>				iStep	:=	0;<br/>			End_If;<br/>			arrLumgates[iLoop].udtInternal.iStepCurrentCheck	:= iStep;<br/>	End_Case;<br/>End_For;<br/>
									<br/>If arrLumgates[iNumberLumgateCurrentCheck].udtInternal.iStepCurrentCheck = 1 then<br/>	(* error or warning occurs *)<br/>	arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xError		:=	arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectError;<br/>	arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xWarning	:=	arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xDirectWarning;<br/>	iStep	:=	0;<br/>	(* creating diagnostig text *)<br/>	If arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xWarning and arrLumgates[iNumberLumgateCurrentCheck].udtInternal.xPowerConsumptionCorrect and not arrLumgates[iNumberLumgateCurrentCheck].xTeachConsumption	<br/>	and (arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &gt; arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMaxWarning or <br/>	arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &lt; arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMinWarning) then<br/>		xPreAlarm	:=	True;<br/>		strDiag		:=	'Warning: RBT ';<br/>		strDiag		:=	concat(strDiag, int_to_string(arrLumgates[iNumberLumgateCurrentCheck].iModuleLevel + 1,'%01d'));<br/>		strDiag		:=	concat(strDiag, ', Lumgate ');<br/>		strDiag		:=	concat(strDiag, int_to_string(arrLumgates[iNumberLumgateCurrentCheck].iModuleNumber,'%01d'));<br/>		If arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &gt; arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMaxWarning then<br/>			strDiag	:=	concat(strDiag, ', Current overrange');<br/>		Elsif arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &lt; arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMinWarning then<br/>			strDiag	:=	concat(strDiag, ', Current underrange');<br/>		End_if;<br/>	End_if;<br/>	If arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.xError and arrLumgates[iNumberLumgateCurrentCheck].udtInternal.xPowerConsumptionCorrect and not arrLumgates[iNumberLumgateCurrentCheck].xTeachConsumption <br/>	and (arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &gt; arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMaxError or <br/>	arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &lt; arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMinError) then<br/>		xAlarm	:=	True;<br/>		strDiag	:=	'Error: RBT ';<br/>		strDiag	:=	concat(strDiag, int_to_string(arrLumgates[iNumberLumgateCurrentCheck].iModuleLevel + 1,'%01d'));<br/>		strDiag	:=	concat(strDiag, ', Lumgate ');<br/>		strDiag	:=	concat(strDiag, int_to_string(arrLumgates[iNumberLumgateCurrentCheck].iModuleNumber,'%01d'));<br/>		If arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &gt; arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMaxError then<br/>			strDiag	:=	concat(strDiag, ', Current overrange');<br/>		Elsif arrLumgates[iNumberLumgateCurrentCheck].iMeasurement &lt; arrLumgates[iNumberLumgateCurrentCheck].udtCurrentCheck.iLimitMinError then<br/>			strDiag	:=	concat(strDiag, ', Current underrange');<br/>		End_if;<br/>	End_if;<br/>	arrLumgates[iNumberLumgateCurrentCheck].udtInternal.iStepCurrentCheck	:= 0;<br/>End_if;<br/>
									<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="HourCounter">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Hour Counter *)<br/>For iLoop := 1 to 240 do<br/>	xCount1	:=	arrLumgates[iLoop].xRelay1;<br/>	xCount2	:=	arrLumgates[iLoop].xRelay1 and arrLumgates[iLoop].iActualOutputLevel &lt; 500;<br/>	xCount3	:=	arrLumgates[iLoop].xRelay1 and arrLumgates[iLoop].iActualOutputLevel &gt;= 500 and arrLumgates[iLoop].iActualOutputLevel &lt; 750;<br/>	xCount4	:=	arrLumgates[iLoop].xRelay1 and arrLumgates[iLoop].iActualOutputLevel &gt;= 750;<br/>
									<br/>	FB_HourCounterGeneral(xCount				:=	true,<br/>	xPulseSecond								:=	xPulseSecond,<br/>	udtCounterInfo								:=	arrLumgates[iLoop].udtHourCounterGeneral);<br/>
									<br/>	arrLumgates[iLoop].udtHourCounterGeneral	:=	FB_HourCounterGeneral.udtCounterInfo;<br/>
									<br/>	FB_HourCounterMaintenance(xCount			:=	true,<br/>	xPulseSecond								:=	xPulseSecond,<br/>	udtCounterInfo								:=	arrLumgates[iLoop].udtHourCounterMaintenance);<br/>
									<br/>	arrLumgates[iLoop].udtHourCounterMaintenance:=	FB_HourCounterMaintenance.udtCounterInfo;<br/>
									<br/>	FB_HourCounter20_50(xCount					:=	xCount2,<br/>	xPulseSecond								:=	xPulseSecond,<br/>	udtCounterInfo								:=	arrLumgates[iLoop].udtHourCounter20_50);<br/>
									<br/>	arrLumgates[iLoop].udtHourCounter20_50		:=	FB_HourCounter20_50.udtCounterInfo;<br/>
									<br/>	FB_HourCounter50_75(xCount					:=	xCount3,<br/>	xPulseSecond								:=	xPulseSecond,<br/>	udtCounterInfo								:=	arrLumgates[iLoop].udtHourCounter50_75);<br/>
									<br/>	arrLumgates[iLoop].udtHourCounter50_75		:=	FB_HourCounter50_75.udtCounterInfo;<br/>
									<br/>	FB_HourCounter75_100(xCount					:=	xCount4,<br/>	xPulseSecond								:=	xPulseSecond,<br/>	udtCounterInfo								:=	arrLumgates[iLoop].udtHourCounter75_100);<br/>
									<br/>	arrLumgates[iLoop].udtHourCounter75_100		:=	FB_HourCounter75_100.udtCounterInfo;<br/>End_For;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Mode">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Mode *)<br/>For iLoop := 1 to 240 do<br/>	If arrLumgates[iLoop].xAvailable then<br/>		(* Check if there is a special scenario active for this Lumgate *)<br/>		xSpecialScenarioActive		:=	False;<br/>		iTempOutputValueLGSpecial	:=	0;<br/>
									<br/>		For iLoop2 := 1 to 15 do<br/>			Case iLoop2 of<br/>				1:<br/>					xTempStatusScenario	:=	wSpecialScenario.X0;<br/>				2:<br/>					xTempStatusScenario	:=	wSpecialScenario.X1;<br/>				3:<br/>					xTempStatusScenario	:=	wSpecialScenario.X2;<br/>				4:<br/>					xTempStatusScenario	:=	wSpecialScenario.X3;<br/>				5:<br/>					xTempStatusScenario	:=	wSpecialScenario.X4;<br/>				6:<br/>					xTempStatusScenario	:=	wSpecialScenario.X5;<br/>				7:<br/>					xTempStatusScenario	:=	wSpecialScenario.X6;<br/>				8:<br/>					xTempStatusScenario	:=	wSpecialScenario.X7;<br/>				9:<br/>					xTempStatusScenario	:=	wSpecialScenario.X8;<br/>				10:<br/>					xTempStatusScenario	:=	wSpecialScenario.X9;<br/>				11:<br/>					xTempStatusScenario	:=	wSpecialScenario.X10;<br/>				12:<br/>					xTempStatusScenario	:=	wSpecialScenario.X11;<br/>				13:<br/>					xTempStatusScenario	:=	wSpecialScenario.X12;<br/>				14:<br/>					xTempStatusScenario	:=	wSpecialScenario.X13;<br/>				15:<br/>					xTempStatusScenario	:=	wSpecialScenario.X14;<br/>			End_Case;<br/>
									<br/>			If xTempStatusScenario and arrLumgates[iLoop].arrSpecialScene[iLoop2].xUsed then<br/>				xSpecialScenarioActive	:=	True;<br/>				If arrLumgates[iLoop].arrSpecialScene[iLoop2].iValue &gt; iTempOutputValueLGSpecial then<br/>					iTempOutputValueLGSpecial	:=	arrLumgates[iLoop].arrSpecialScene[iLoop2].iValue;<br/>
									<br/>					(*	V2.01 changes: Editable scene relay state EPO-IS-268-1667 *)<br/>					(*	V3.01 change: replace the relay variables *)<br/>					xTempRelay1					:=	arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay1;<br/>					xTempRelay2					:=	arrLumgates[iLoop].arrSpecialScene[iLoop2].xRelay2;<br/>				End_If;<br/>			End_If;<br/>		End_For;<br/>
									<br/>		(* Check if there is a dimming scenario active for this Lumgate *)<br/>		xDimmingScenarioActive		:=	False;<br/>		iTempOutputValueLGDimming	:=	-1;<br/>
									<br/>		For iLoop2 := 1 to 4 do		<br/>			iTempScenarioLG	:=	udtScenarioMode.arrActualScene[iLoop2];<br/>			If iTempScenarioLG &gt; 0 and iTempScenarioLG &lt; 51 then<br/>				If arrLumgates[iLoop].arrDimmingScene[iTempScenarioLG].xUsed then<br/>					xDimmingScenarioActive	:=	True;<br/>
									<br/>					If arrLumgates[iLoop].arrDimmingScene[iTempScenarioLG].iValue &gt; iTempOutputValueLGDimming then<br/>						xDimmingScenarioActive			:=	True;<br/>						iTempOutputValueLGDimming		:=	arrLumgates[iLoop].arrDimmingScene[iTempScenarioLG].iValue;<br/>
									<br/>						If not xSpecialScenarioActive then<br/>							(*	V2.01 changes: Editable scene relay state EPO-IS-268-1667 *)<br/>							xTempRelay1						:=	arrLumgates[iLoop].arrDimmingScene[iTempScenarioLG].xRelay1;<br/>							xTempRelay2						:=	arrLumgates[iLoop].arrDimmingScene[iTempScenarioLG].xRelay2;<br/>						End_if;<br/>						arrLumgates[iLoop].iActualScene	:=	iTempScenarioLG;<br/>					End_If;<br/>				End_If;<br/>			End_If;<br/>		End_For;<br/>
									<br/>		(* 	Priority:<br/>			1: Manual<br/>			2: Automatic: Special scenario<br/>			3: Automatic: Teach consumption<br/>			4: Automatic: Teach failsave<br/>			5: Automatic: Dimming scenario<br/>		*)<br/>
									<br/>		If arrLumgates[iLoop].xAutomaticManual then (* Lumgate in manual mode *)<br/>			arrLumgates[iLoop].iMode	:=	1;<br/>			iModuleLevel				:=	arrLumgates[iLoop].iModuleLevel + 1;<br/>			If xCommissioning and ((iCommissioningBranch = 0) or (iCommissioningBranch = iModuleLevel)) then<br/>				If arrLumgates[iLoop].xRelay1_NC then<br/>					xTempRelay1					:=	True;<br/>				Else<br/>					xTempRelay1					:=	False;<br/>				End_if;<br/>				If arrLumgates[iLoop].xRelay2_NC then<br/>					xTempRelay2					:=	True;<br/>				Else<br/>					xTempRelay2					:=	False;<br/>				End_if;<br/>			Else<br/>				xTempRelay1					:=	arrLumgates[iLoop].xManualRelay1;<br/>				xTempRelay2					:=	arrLumgates[iLoop].xManualRelay2;<br/>			End_if;<br/>		Elsif xSpecialScenarioActive then<br/>			arrLumgates[iLoop].iMode	:=	2;<br/>		Elsif arrLumgates[iLoop].xTeachConsumption then<br/>			xTempRelay1					:=	arrLumgates[iLoop].xRelay1;<br/>			xTempRelay2					:=	arrLumgates[iLoop].xRelay2;<br/>			arrLumgates[iLoop].iMode	:=	3;<br/>		Elsif arrLumgates[iLoop].xTeachFailsave then<br/>			arrLumgates[iLoop].iMode	:=	4;<br/>			xTempRelay1					:=	arrLumgates[iLoop].xFailsaveRelay1;<br/>			xTempRelay2					:=	arrLumgates[iLoop].xFailsaveRelay2;<br/>		Elsif xDimmingScenarioActive then<br/>			arrLumgates[iLoop].iOutputLevelScenario:= iTempOutputValueLGDimming;<br/>			arrLumgates[iLoop].iMode	:=	5;<br/>		Else<br/>			arrLumgates[iLoop].iMode	:=	6; (* Failsave *)<br/>		End_If;<br/>
									<br/>		(* Choose the right output for each mode *)<br/>		Case arrLumgates[iLoop].iMode of<br/>			1:<br/>				arrLumgates[iLoop].iTargetOutputLevel	:=	arrLumgates[iLoop].iOutputLevelManual;<br/>		<br/>			2:<br/>				arrLumgates[iLoop].iTargetOutputLevel	:=	iTempOutputValueLGSpecial;<br/>
									<br/>			3:<br/>				arrLumgates[iLoop].iTargetOutputLevel	:=	arrLumgates[iLoop].iOutputLevelTeach;<br/>
									<br/>			4:<br/>				arrLumgates[iLoop].iTargetOutputLevel	:=	arrLumgates[iLoop].iOutputLevelFailsave;<br/>
									<br/>			5:<br/>				arrLumgates[iLoop].iOutputLevelScenarioWithClo	:= 	arrLumgates[iLoop].iOutputLevelScenario -<br/>															arrLumgates[iLoop].udtCloLed.iAmountDecrease -<br/>															arrLumgates[iLoop].udtCloMaintenance.iAmountDecrease;<br/>
									<br/>			If arrLumgates[iLoop].udtCloLed.xActive or arrLumgates[iLoop].udtCloMaintenance.xActive then<br/>				arrLumgates[iLoop].iTargetOutputLevel	:=	arrLumgates[iLoop].iOutputLevelScenarioWithClo;<br/>			Else<br/>				arrLumgates[iLoop].iTargetOutputLevel	:=	arrLumgates[iLoop].iOutputLevelScenario;<br/>			End_If;<br/>
									<br/>			6:<br/>				arrLumgates[iLoop].iTargetOutputLevel	:=	arrLumgates[iLoop].iOutputLevelFailsave;<br/>				xTempRelay1								:=	arrLumgates[iLoop].xFailsaveRelay1;<br/>				xTempRelay2								:=	arrLumgates[iLoop].xFailsaveRelay2;<br/>		End_Case;<br/>
									<br/>		(* Output to device *)<br/>		iDimmingSpeed	:=	limit(1,iDimmingSpeed,10);<br/>		If xShiftedOnOff then (* On/Off in groups *)<br/>			iShiftPosition	:=	iLoop Mod 8;<br/>			If iShiftPosition = 0 then<br/>				iShiftPosition	:=	8;<br/>			End_If;<br/>
									<br/>			If arrLumgates[iLoop].iActualOutputLevel = 0 and arrLumgates[iLoop].iTargetOutputLevel &lt;&gt; 0 and arrShiftedOnOff[iShiftPosition]<br/>				or arrLumgates[iLoop].iActualOutputLevel &lt;&gt; 0 then<br/>				<br/>				If arrLumgates[iLoop].xGraduallyOutputChanges then<br/>					If arrLumgates[iLoop].iTargetOutputLevel &gt; arrLumgates[iLoop].iActualOutputLevel then<br/>						iTemp	:=	arrLumgates[iLoop].iTargetOutputLevel - arrLumgates[iLoop].iActualOutputLevel;<br/>
									<br/>						If arrLumgates[iLoop].xRelay1_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>							arrLumgates[iLoop].xRelay1	:=	not xTempRelay1;<br/>						Else<br/>							arrLumgates[iLoop].xRelay1	:=	xTempRelay1;<br/>						End_if;<br/>						If arrLumgates[iLoop].xRelay2_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>							arrLumgates[iLoop].xRelay2	:=	not xTempRelay2;<br/>						Else<br/>							arrLumgates[iLoop].xRelay2	:=	xTempRelay2;<br/>						End_if;<br/>
									<br/>						If iTemp &gt; iDimmingSpeed then<br/>							arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iActualOutputLevel + iDimmingSpeed;<br/>						Else<br/>							arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iTargetOutputLevel;<br/>						End_if;<br/>					Elsif arrLumgates[iLoop].iTargetOutputLevel &lt; arrLumgates[iLoop].iActualOutputLevel then<br/>						iTemp	:=	arrLumgates[iLoop].iActualOutputLevel - arrLumgates[iLoop].iTargetOutputLevel;<br/>						If iTemp &gt; iDimmingSpeed then<br/>							arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iActualOutputLevel - iDimmingSpeed;<br/>						Else<br/>						<br/>							If arrLumgates[iLoop].xRelay1_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>								arrLumgates[iLoop].xRelay1	:=	not xTempRelay1;<br/>							Else<br/>								arrLumgates[iLoop].xRelay1	:=	xTempRelay1;<br/>							End_if;<br/>							If arrLumgates[iLoop].xRelay2_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>								arrLumgates[iLoop].xRelay2	:=	not xTempRelay2;<br/>							Else<br/>								arrLumgates[iLoop].xRelay2	:=	xTempRelay2;<br/>							End_if;<br/>
									<br/>							arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iTargetOutputLevel;<br/>						End_if;<br/>					Else<br/>						If arrLumgates[iLoop].xRelay1_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>							arrLumgates[iLoop].xRelay1	:=	not xTempRelay1;<br/>						Else<br/>							arrLumgates[iLoop].xRelay1	:=	xTempRelay1;<br/>						End_if;<br/>						If arrLumgates[iLoop].xRelay2_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>							arrLumgates[iLoop].xRelay2	:=	not xTempRelay2;<br/>						Else<br/>							arrLumgates[iLoop].xRelay2	:=	xTempRelay2;<br/>						End_if;<br/>					End_If;<br/>
									<br/>				Else (* Apply direct the correct value *)<br/>					arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iTargetOutputLevel;<br/>					If arrLumgates[iLoop].xRelay1_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>						arrLumgates[iLoop].xRelay1	:=	not xTempRelay1;<br/>					Else<br/>						arrLumgates[iLoop].xRelay1	:=	xTempRelay1;<br/>					End_if;<br/>					If arrLumgates[iLoop].xRelay2_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>						arrLumgates[iLoop].xRelay2	:=	not xTempRelay2;<br/>					Else<br/>						arrLumgates[iLoop].xRelay2	:=	xTempRelay2;<br/>					End_if;<br/>				End_If;<br/>			Else<br/>				If arrLumgates[iLoop].xRelay1_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>					arrLumgates[iLoop].xRelay1	:=	not xTempRelay1;<br/>				Else<br/>					arrLumgates[iLoop].xRelay1	:=	xTempRelay1;<br/>				End_if;<br/>				If arrLumgates[iLoop].xRelay2_NC and not (arrLumgates[iLoop].iMode = 3) then<br/>					arrLumgates[iLoop].xRelay2	:=	not xTempRelay2;<br/>				Else<br/>					arrLumgates[iLoop].xRelay2	:=	xTempRelay2;<br/>				End_if;<br/>			End_If;<br/>				<br/>		Else (* On/Off for all devices at the same time *)<br/>			If arrLumgates[iLoop].xGraduallyOutputChanges then<br/>				If arrLumgates[iLoop].iTargetOutputLevel &gt; arrLumgates[iLoop].iActualOutputLevel then<br/>					iTemp	:=	arrLumgates[iLoop].iTargetOutputLevel - arrLumgates[iLoop].iActualOutputLevel;<br/>					If iTemp &gt; iDimmingSpeed then<br/>						arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iActualOutputLevel + iDimmingSpeed;<br/>					Else<br/>						arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iTargetOutputLevel;<br/>					End_if;<br/>				Elsif arrLumgates[iLoop].iTargetOutputLevel &lt; arrLumgates[iLoop].iActualOutputLevel then<br/>					iTemp	:=	arrLumgates[iLoop].iActualOutputLevel - arrLumgates[iLoop].iTargetOutputLevel;<br/>					If iTemp &gt; iDimmingSpeed then<br/>						arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iActualOutputLevel - iDimmingSpeed;<br/>					Else<br/>						arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iTargetOutputLevel;<br/>					End_if;<br/>				End_If;<br/>
									<br/>			Else (* Apply direct the correct value *)<br/>				arrLumgates[iLoop].iActualOutputLevel	:=	arrLumgates[iLoop].iTargetOutputLevel;<br/>			End_If;<br/>		End_If;<br/>	End_If;<br/>End_For;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="CLO">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* CLO *)<br/>iCLO := iCLO + 1;<br/>If iCLO &gt; 240 then<br/>	iCLO	:=	1;<br/>End_If;<br/>
									<br/>If arrLumgates[iCLO].udtCloLed.xActive and arrLumgates[iCLO].udtHourCounterGeneral.udiHours &gt; Udint#0<br/>	and arrLumgates[iCLO].udtCloLed.udiHours &gt; Udint#0 then<br/>
									<br/>	rTemp1	:=	Udint_To_Real(arrLumgates[iCLO].udtHourCounterGeneral.udiHours);<br/>	rTemp2	:=	Udint_To_Real(arrLumgates[iCLO].udtCloLed.udiHours);<br/>			<br/>	rPercentageDecrease	:=	arrLumgates[iCLO].udtCloLed.rPercentage / (rTemp2 / rTemp1);<br/>
									<br/>	rPercentageDecrease	:=	arrLumgates[iCLO].udtCloLed.rPercentage - rPercentageDecrease;<br/>
									<br/>	If rPercentageDecrease &gt; arrLumgates[iCLO].udtCloLed.rPercentage then<br/>		rPercentageDecrease	:=	arrLumgates[iCLO].udtCloLed.rPercentage;<br/>	End_If;<br/>
									<br/>	If rPercentageDecrease &lt; 0.0 Then<br/>		rPercentageDecrease	:=	0.0;<br/>	End_If;<br/>
									<br/>	rTempDecrease	:=	Int_To_Real(arrLumgates[iCLO].iOutputLevelScenario) * rPercentageDecrease / 100.0;<br/>
									<br/>	arrLumgates[iCLO].udtCloLed.iAmountDecrease	:=	Real_To_Int(rTempDecrease);<br/>
									<br/>Elsif arrLumgates[iCLO].udtCloLed.xActive then	(* Max. decrese, in case of operating hours &lt; 1 h *)<br/>
									<br/>	rTempDecrease	:=	Int_To_Real(arrLumgates[iCLO].iOutputLevelScenario) * arrLumgates[iCLO].udtCloLed.rPercentage / 100.0;<br/>	arrLumgates[iCLO].udtCloLed.iAmountDecrease	:=	Real_To_Int(rTempDecrease);<br/>End_If;<br/>
									<br/>If arrLumgates[iCLO].udtCloMaintenance.xActive and arrLumgates[iCLO].udtHourCounterMaintenance.udiHours &gt; Udint#0 and arrLumgates[iCLO].udtCloMaintenance.udiHours &gt; Udint#0 then<br/>	rTemp1	:=	Udint_To_Real(arrLumgates[iCLO].udtHourCounterMaintenance.udiHours);<br/>	rTemp2	:=	Udint_To_Real(arrLumgates[iCLO].udtCloMaintenance.udiHours);<br/>			<br/>	rPercentageDecrease	:=	arrLumgates[iCLO].udtCloMaintenance.rPercentage / (rTemp2 / rTemp1);<br/>	rPercentageDecrease	:=	arrLumgates[iCLO].udtCloMaintenance.rPercentage - rPercentageDecrease;<br/>
									<br/>	If rPercentageDecrease &gt; arrLumgates[iCLO].udtCloMaintenance.rPercentage then<br/>		rPercentageDecrease	:=	arrLumgates[iCLO].udtCloMaintenance.rPercentage;<br/>	End_If;<br/>
									<br/>	If rPercentageDecrease &lt; 0.0 then<br/>		rPercentageDecrease	:=	0.0;<br/>	End_If;<br/>
									<br/>	rTempDecrease	:=	Int_To_Real(arrLumgates[iCLO].iOutputLevelScenario) * rPercentageDecrease / 100.0;<br/>	arrLumgates[iCLO].udtCloMaintenance.iAmountDecrease	:=	Real_To_Int(rTempDecrease);<br/>
									<br/>Elsif arrLumgates[iCLO].udtCloMaintenance.xActive then	(* Max. decrese, in case of operating hours &lt; 1 h *)<br/>
									<br/>	rTempDecrease	:=	Int_To_Real(arrLumgates[iCLO].iOutputLevelScenario) * arrLumgates[iCLO].udtCloMaintenance.rPercentage / 100.0;<br/>	arrLumgates[iCLO].udtCloMaintenance.iAmountDecrease	:=	Real_To_Int(rTempDecrease);<br/>End_If;<br/>arrLumgates[iCLO].iSourceOutputLevel	:=	arrLumgates[iCLO].iTargetOutputLevel + arrLumgates[iCLO].udtCloMaintenance.iAmountDecrease + arrLumgates[iCLO].udtCloLed.iAmountDecrease;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="ErrorHandling">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Trigger to send Lumgate configuration diagnostic text *)<br/>R_TRIG_AmmountLG(CLK:=((arrAmountLumgates[1] &gt; 0) or (arrAmountLumgates[2] &gt; 0) or (arrAmountLumgates[3] &gt; 0) or (arrAmountLumgates[4] &gt; 0) or xUnexpectedLG_Count));<br/>
									<br/>If xActivate then<br/>	(* reset Errors *)<br/>	xErrorRBT1	:=	False;<br/>	xErrorRBT2	:=	False;<br/>	xErrorRBT3	:=	False;<br/>	xErrorRBT4	:=	False;<br/>	For iLoop := 1 to 240 do	(* Check Current deviations *)<br/>		If (arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError) and arrLumgates[iLoop].iModuleLevel = 0 and arrLumgates[iLoop].xAvailable and iRBT1 = 0 then<br/>			xErrorRBT1	:=	True;<br/>			iRBT1		:=	arrLumgates[iLoop].iModuleNumber;<br/>		Elsif iRBT1 &lt;&gt; 0 then<br/>			xErrorRBT1	:=	True;<br/>		End_if;<br/>		If (arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError) and arrLumgates[iLoop].iModuleLevel = 1 and arrLumgates[iLoop].xAvailable and iRBT2 = 0 then<br/>			xErrorRBT2	:=	True;<br/>			iRBT2		:=	arrLumgates[iLoop].iModuleNumber;<br/>		Elsif iRBT2 &lt;&gt; 0 then<br/>			xErrorRBT2	:=	True;<br/>		End_if;<br/>		If (arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError) and arrLumgates[iLoop].iModuleLevel = 2 and arrLumgates[iLoop].xAvailable and iRBT3 = 0 then<br/>			xErrorRBT3	:=	True;<br/>			iRBT3		:=	arrLumgates[iLoop].iModuleNumber;<br/>		Elsif iRBT3 &lt;&gt; 0 then<br/>			xErrorRBT3	:=	True;<br/>		End_if;<br/>		If (arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError) and arrLumgates[iLoop].iModuleLevel = 3 and arrLumgates[iLoop].xAvailable and iRBT4 = 0 then<br/>			xErrorRBT4	:=	True;<br/>			iRBT4		:=	arrLumgates[iLoop].iModuleNumber;<br/>		Elsif iRBT4 &lt;&gt; 0 then<br/>			xErrorRBT4	:=	True;<br/>		End_if;<br/>	End_for;<br/>
									<br/>	If iRBT1 &lt;&gt; 0 then	(* Search for Device number *)<br/>		If not arrLumgates[iRBT1].xError and not arrLumgates[iRBT1].udtCurrentCheck.xWarning and not arrLumgates[iRBT1].udtCurrentCheck.xError then<br/>			iRBT1	:=	0;<br/>		Elsif iRBT1 &lt;&gt; 0 and xNextDevice and iSelectRBT = 0 then<br/>			xNextDevice	:=	False;<br/>			iRBT1	:=	iRBT1 + 1;<br/>			For iLoop := iRBT1 to 240 do<br/>				If (arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError) and arrLumgates[iLoop].iModuleLevel = 0 then<br/>					xErrorRBT1	:=	True;<br/>					iRBT1		:=	arrLumgates[iLoop].iModuleNumber;<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop = 241 then<br/>				iRBT1	:=	0;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	If iRBT2 &lt;&gt; 0 then	(* Search for Device number *)<br/>		If not arrLumgates[iRBT2].xError and not arrLumgates[iRBT2].udtCurrentCheck.xWarning and not arrLumgates[iRBT2].udtCurrentCheck.xError then<br/>			iRBT2	:=	0;<br/>		Elsif iRBT2 &lt;&gt; 0 and xNextDevice and iSelectRBT = 1 then<br/>			xNextDevice	:=	False;<br/>			iRBT2	:=	iRBT2 + 1;<br/>			For iLoop := iRBT2 to 240 do<br/>				If (arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError) and arrLumgates[iLoop].iModuleLevel = 1 then<br/>					xErrorRBT2	:=	True;<br/>					iRBT2		:=	arrLumgates[iLoop].iModuleNumber;<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop = 241 then<br/>				iRBT2	:=	0;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	If iRBT3 &lt;&gt; 0 then	(* Search for Device number *)<br/>		If not arrLumgates[iRBT3].xError and not arrLumgates[iRBT3].udtCurrentCheck.xWarning and not arrLumgates[iRBT3].udtCurrentCheck.xError then<br/>			iRBT3	:=	0;<br/>		Elsif iRBT3 &lt;&gt; 0 and xNextDevice and iSelectRBT = 2 then<br/>			xNextDevice	:=	False;<br/>			iRBT3	:=	iRBT3 + 1;<br/>			For iLoop := iRBT3 to 240 do<br/>				If (arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError) and arrLumgates[iLoop].iModuleLevel = 2 then<br/>					xErrorRBT3	:=	True;<br/>					iRBT3		:=	arrLumgates[iLoop].iModuleNumber;<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop = 241 then<br/>				iRBT3	:=	0;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	If iRBT4 &lt;&gt; 0 then	(* Search for Device number *)<br/>		If not arrLumgates[iRBT4].xError and not arrLumgates[iRBT4].udtCurrentCheck.xWarning and not arrLumgates[iRBT4].udtCurrentCheck.xError then<br/>			iRBT4	:=	0;<br/>		Elsif iRBT4 &lt;&gt; 0 and xNextDevice and iSelectRBT = 3 then<br/>			xNextDevice	:=	False;<br/>			iRBT1	:=	iRBT4 + 1;<br/>			For iLoop := iRBT4 to 240 do<br/>				If (arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError) and arrLumgates[iLoop].iModuleLevel = 3 then<br/>					xErrorRBT4	:=	True;<br/>					iRBT4		:=	arrLumgates[iLoop].iModuleNumber;<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop = 241 then<br/>				iRBT4	:=	0;<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>
									<br/>	(* Calculate amount Lumgates per RBT *)<br/>	arrAmountLumgates[1]	:=	0;<br/>	arrAmountLumgates[2]	:=	0;<br/>	arrAmountLumgates[3]	:=	0;<br/>	arrAmountLumgates[4]	:=	0;<br/>	For iLoop := 1 to 240 do<br/>		If arrLumgates[iLoop].iModuleLevel = 0 and arrLumgates[iLoop].xAvailable then<br/>			arrAmountLumgates[1]	:=	arrAmountLumgates[1] + 1;<br/>		End_If;<br/>		If arrLumgates[iLoop].iModuleLevel = 1 and arrLumgates[iLoop].xAvailable then<br/>			arrAmountLumgates[2]	:=	arrAmountLumgates[2] + 1;<br/>		End_If;<br/>		If arrLumgates[iLoop].iModuleLevel = 2 and arrLumgates[iLoop].xAvailable then<br/>			arrAmountLumgates[3]	:=	arrAmountLumgates[3] + 1;<br/>		End_If;<br/>		If arrLumgates[iLoop].iModuleLevel = 3 and arrLumgates[iLoop].xAvailable then<br/>			arrAmountLumgates[4]	:=	arrAmountLumgates[4] + 1;<br/>		End_If;<br/>	End_For;<br/>
									<br/>	iTotalLumgates	:=	arrAmountLumgates[1] + arrAmountLumgates[2] + arrAmountLumgates[3] + arrAmountLumgates[4];<br/>
									<br/>	(* Compare connected Lumgates with configured Lumgates *)<br/>	If arrSegment[1] &lt;&gt; arrAmountLumgates[1] then<br/>		xErrorRBT1			:=	True;<br/>		xUnexpectedLG_Count	:=	True;<br/>		If R_TRIG_AmmountLG.Q then<br/>			strDiag			:=	'Error: Unexpected count of Lumgates in Segment 1';<br/>		End_if;<br/>	End_if;<br/>	If arrSegment[2] &lt;&gt; arrAmountLumgates[2] then<br/>		xErrorRBT2			:=	True;<br/>		xUnexpectedLG_Count	:=	True;<br/>		If R_TRIG_AmmountLG.Q then<br/>			strDiag			:=	'Error: Unexpected count of Lumgates in Segment 2';<br/>		End_if;<br/>	End_if;<br/>	If arrSegment[3] &lt;&gt; arrAmountLumgates[3] then<br/>		xErrorRBT3			:=	True;<br/>		xUnexpectedLG_Count	:=	True;<br/>		If R_TRIG_AmmountLG.Q then<br/>			strDiag			:=	'Error: Unexpected count of Lumgates in Segment 3';<br/>		End_if;<br/>	End_if;<br/>	If arrSegment[4] &lt;&gt; arrAmountLumgates[4] then<br/>		xErrorRBT4			:=	True;<br/>		xUnexpectedLG_Count	:=	True;<br/>		If R_TRIG_AmmountLG.Q then<br/>			strDiag			:=	'Error: Unexpected count of Lumgates in Segment 4';<br/>		End_if;<br/>	End_if;<br/>
									<br/>	(* Confirming in case of alarms *)<br/>	If xUnexpectedLG_Count then<br/>		If xConfirm then<br/>			If arrSegment[1] = arrAmountLumgates[1] and arrSegment[2] = arrAmountLumgates[2]<br/>			and arrSegment[3] = arrAmountLumgates[3] and arrSegment[4] = arrAmountLumgates[4] then<br/>				xUnexpectedLG_Count	:=	False;<br/>				strDiag	:=	'Lumgate Alarm confirmed';<br/>				Else<br/>				strDiag	:=	'The count of Lumgates is different to the configuration';<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>
									<br/>	For iLoop := 1 to 240 do<br/>		If arrLumgates[iLoop].xAutomaticManual then<br/>			xManualActive	:=	True;<br/>			xPreAlarm		:=	True;<br/>			strDiag	:=	'Warning: Lumgate ';<br/>			strDiag	:=	concat(strDiag,int_to_string(arrLumgates[iLoop].iModuleNumber,'%02d'));<br/>			strDiag	:=	concat(strDiag,' in segment ');<br/>			strDiag	:=	concat(strDiag,int_to_string((arrLumgates[iLoop].iModuleLevel + 1) ,'%02d'));<br/>			strDiag	:=	concat(strDiag,' in manual mode');<br/>			Exit;<br/>		End_if;<br/>	End_for;<br/>	If iLoop = 241 then<br/>		xManualActive	:=	False;<br/>	End_if;<br/>
									<br/>	If xAlarm then<br/>		For iLoop := 1 to 240 do<br/>			If arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError then<br/>				Exit;<br/>			End_if;<br/>		End_for;<br/>		If iLoop = 241 then<br/>			strDiag		:=	'Lumgate current returns to expected current range';<br/>		End_if;<br/>		If xConfirm then<br/>			For iLoop := 1 to 240 do<br/>				If arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].udtCurrentCheck.xError then<br/>					Exit;<br/>				End_if;<br/>			End_for;<br/>			If iLoop = 241 then<br/>				xAlarm	:=	False;<br/>				strDiag	:=	'Lumgate Alarm confirmed';<br/>			End_if;<br/>		End_if;<br/>	End_if;<br/>	If xPreAlarm then<br/>		For iLoop := 1 to 240 do<br/>			If arrLumgates[iLoop].udtCurrentCheck.xWarning or arrLumgates[iLoop].xAutomaticManual then<br/>				Exit;<br/>			End_if;<br/>		End_for;<br/>		If iLoop = 241 then<br/>			xPreAlarm	:=	False;<br/>			strDiag		:=	'Lumgate returns to expected state';<br/>		End_if;<br/>	End_if;<br/>	If not xPreAlarm and not xAlarm then<br/>		iRBT		:=	0;<br/>		iLumgate	:=	0;<br/>	Elsif iSelectRBT = 0 then<br/>		iLumgate	:=	iRBT1;<br/>	Elsif iSelectRBT = 1 then<br/>		iLumgate	:=	iRBT2;<br/>	Elsif iSelectRBT = 2 then<br/>		iLumgate	:=	iRBT3;<br/>	Elsif iSelectRBT = 3 then<br/>		iLumgate	:=	iRBT4;<br/>	End_if;<br/>Else<br/>	arrAmountLumgates[1]	:=	0;<br/>	arrAmountLumgates[2]	:=	0;<br/>	arrAmountLumgates[3]	:=	0;<br/>	arrAmountLumgates[4]	:=	0;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_Lumgate_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_LuminanceLevel_01" pouType="functionBlock" pouGroup="Lumgate" lastChange="2016-07-14T11:07:27">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iValueSelection" group="Input parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xPulseSecond" group="Input parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iDelay" group="Input parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrValue" group="Input parameter">
							<type>
								<derived name="arr_1_11_udtInput"/>
							</type>
						</variable>
						<variable name="arrLevels" group="Input parameter">
							<type>
								<derived name="ARR_I_1_24"/>
							</type>
						</variable>
						<variable name="arrScenarioActive" group="Input parameter">
							<type>
								<derived name="ARR_X_1_25"/>
							</type>
						</variable>
						<variable name="iHysteric" group="Input parameter">
							<type>
								<INT/>
							</type>
							<initialValue>
								<simpleValue value="3"/>
							</initialValue>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="iLevel" group="Output parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xValid" group="Output parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="xSelectScene" group="In- Output parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="iCalculation" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTempCountValue" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xCountLevelUp" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xCountLevelDown" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xDelayReached" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iCurrentValue" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLoop2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iHighLevel" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iLowLevel" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="rNextLevel" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rCurrentValue" redundant="true" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_LuminanceLevel_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">If not xActivate then<br/>	iCalculation	:=	0;<br/>	iTempCountValue	:=	0;<br/>	iLevel			:=	0;<br/>	xCountLevelUp	:=	False;<br/>	xCountLevelDown	:=	False;<br/>	xDelayReached	:=	False;<br/>End_If;<br/>
									<br/>iValueSelection		:= 	Limit_Int(1,iValueSelection,11);	(* Set to 1 *)<br/>iCurrentValue		:= 	real_to_int(arrValue[iValueSelection].rValue);<br/>xValid				:= 	arrValue[iValueSelection].xValid;<br/>
									<br/>Case iCalculation of<br/>	0:<br/>		If xActivate then<br/>			iCalculation	:=	5;<br/>		End_If;<br/>
									<br/>	5:<br/>		iLevel	:=	1;<br/>		For iLoop := 1 to 24 do<br/>			iLoop2		:=	iLoop + 1;<br/>			(* Jump to the next Scenario, if the actual analog value is higher then the next threshold *)<br/>			If iCurrentValue &gt; arrLevels[iLoop] and arrLevels[iLoop] &gt; 0 and arrScenarioActive[iLoop2] then<br/>				iLevel	:= 	iLoop2;<br/>			Else<br/>				Exit;<br/>			End_If;<br/>		End_For;<br/>		iCalculation	:= 	10;<br/>
									<br/>	10:<br/>		iHighLevel		:= 	iLevel + 1;	(* upper threshold *)<br/>		iLowLevel		:= 	iLevel - 1;	(* lower threshold *)<br/>		xSelectScene	:= 	True;<br/>		iCalculation	:= 	20;<br/>
									<br/>	20:<br/>		xCountLevelUp	:= 	False;<br/>		If iHighLevel &lt;= 25 then<br/>			(* reduce the current value with the hysteresic *)<br/>			rCurrentValue	:=	int_to_real(iCurrentValue) * (1.0 - (int_to_real(iHysteric) / 100.0));<br/>			rNextLevel		:=	int_to_real(arrLevels[iLevel]);<br/>			If rCurrentValue &gt;= rNextLevel and arrScenarioActive[iHighLevel] then	(* check next threshold *)<br/>				xCountLevelUp	:= 	True;<br/>			End_If;<br/>		End_If;<br/>
									<br/>		xCountLevelDown	:= 	False;<br/>		If iLowLevel &gt;= 1 then<br/>			(* add the hysteresic to the current value *)<br/>			rCurrentValue	:=	int_to_real(iCurrentValue) * ((int_to_real(iHysteric) / 100.0) + 1.0);<br/>			rNextLevel		:=	int_to_real(arrLevels[iLowLevel]);<br/>			If (rCurrentValue &lt;= rNextLevel) or not arrScenarioActive[iLevel] then	(* check next threshold *)<br/>				xCountLevelDown	:= 	True;<br/>			End_If;<br/>		End_If;<br/>
									<br/>		If xDelayReached then	(* Wait for "Delay between switching scenes" *)<br/>			xDelayReached	:= 	False;<br/>			iTempCountValue	:= 	0;<br/>		<br/>			If xCountLevelUp then<br/>				iLevel			:= 	iLevel + 1;<br/>			End_If;<br/>
									<br/>			If xCountLevelDown then<br/>				iLevel			:= 	iLevel - 1;<br/>			End_If;<br/>			iCalculation		:= 	10;<br/>		End_If;<br/>End_Case;<br/>
									<br/>
									<br/>If xCountLevelUp or xCountLevelDown then	(* Start delay counter *)<br/>	If xPulseSecond then<br/>		iTempCountValue		:= 	iTempCountValue + 1;<br/>
									<br/>		If iTempCountValue &gt;= iDelay then<br/>			xDelayReached	:= 	True;<br/>		End_If;<br/>	End_If;<br/>Else<br/>	iTempCountValue	:= 	0;<br/>End_If;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_LuminanceLevel_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_HourCounter_01" pouType="functionBlock" pouGroup="Lumgate" lastChange="2016-01-05T10:18:52">
				<interface>
					<inputVars retain="false">
						<variable name="xCount" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xPulseSecond" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</inputVars>
					<inOutVars retain="false">
						<variable name="udtCounterInfo" group="Default">
							<type>
								<derived name="udtLumgatePart1"/>
							</type>
						</variable>
					</inOutVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_HourCounter_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Hour Counter *)<br/>If xCount and xPulseSecond then<br/>	udtCounterInfo.iSeconds	:=	udtCounterInfo.iSeconds + 1;<br/>	If udtCounterInfo.iSeconds &gt; 59 then<br/>		udtCounterInfo.iSeconds	:= 	0;<br/>		udtCounterInfo.iMinutes	:= 	udtCounterInfo.iMinutes + 1;<br/>
									<br/>		If udtCounterInfo.iMinutes &gt; 59 then<br/>			udtCounterInfo.iMinutes	:= 	0;<br/>			udtCounterInfo.udiHours	:= 	udtCounterInfo.udiHours + udint#1;<br/>		End_If;<br/>	End_If;<br/>End_If;<br/>
									<br/>If udtCounterInfo.xReset then<br/>	udtCounterInfo.iSeconds	:= 	0;<br/>	udtCounterInfo.iMinutes	:= 	0;<br/>	udtCounterInfo.udiHours	:= 	udint#0;<br/>	udtCounterInfo.xReset	:= 	False;<br/>End_If;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_HourCounter_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="Configuration" pouType="program" pouGroup="Programs" lastChange="2016-11-15T15:47:16">
				<interface>
					<externalVars retain="false">
						<variable name="arrLumgateCurrentConsumption" group="Default">
							<type>
								<derived name="Arr_1_240_1_23_Int"/>
							</type>
						</variable>
						<variable name="udtNetworkConfiguration" group="Default">
							<type>
								<derived name="udtNetwork"/>
							</type>
						</variable>
						<variable name="arrLumgates" group="Default">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="xWriteFile" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="udtFileHandler" group="Default">
							<type>
								<derived name="udtFileHandling"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="strDiagConfigFiles" group="Default">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xDoneIB" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xActivateIB" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="udtWeb_ProjectDescription" pdd="true" redundant="true" group="Default">
							<type>
								<derived name="udtProjectSpecification"/>
							</type>
						</variable>
						<variable name="xWeb_Commissioning" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xConfigurationPreAlarm" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="arrScenarioConfiguration" group="Default">
							<type>
								<derived name="ARR_I_1_4_1_25_1_5"/>
							</type>
						</variable>
						<variable name="arrAnalogValues" group="Default">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
						</variable>
						<variable name="arrLevelConfiguration" group="Default">
							<type>
								<derived name="ARR_UDT_L20Config"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="FB_FileHandling_01_2" group="Default">
							<type>
								<derived name="FB_FileHandling_01"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xWeb_ConfigFileNet" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLumgate" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileL20" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLevel1" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLevel2" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLevel3" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLevel4" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="F_TRIG_1" group="Default">
							<type>
								<derived name="F_TRIG"/>
							</type>
						</variable>
						<variable name="udtWeb_ConfigFiles" pdd="true" redundant="true" group="Default">
							<type>
								<derived name="udt_WebDataConfigFiles"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="arrSegment" group="Default">
							<type>
								<derived name="ARR_I_1_4"/>
							</type>
						</variable>
						<variable name="udtL20Config" group="Default">
							<type>
								<derived name="udtL20Input"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="udtActNetworkConfiguration" redundant="true" group="Default">
							<type>
								<derived name="udtNetwork"/>
							</type>
						</variable>
						<variable name="udtActL20Config" redundant="true" group="Default">
							<type>
								<derived name="udtL20Input"/>
							</type>
						</variable>
						<variable name="arrActL20Inputs" group="Default">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
						</variable>
						<variable name="xWeb_ChangedNetConfig" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ChangedL20Config" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="udtActThreshold1" redundant="true" group="Default">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="xWeb_ChangedThreshold1" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="udtActThreshold4" redundant="true" group="Default">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtActThreshold2" redundant="true" group="Default">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="udtActThreshold3" redundant="true" group="Default">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="xWeb_ChangedThreshold2" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ChangedThreshold3" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ChangedThreshold4" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ChangedLumgate" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="udtActLumgateConfig" redundant="true" group="Default">
							<type>
								<derived name="arr_1_240_udtLG_Config"/>
							</type>
						</variable>
						<variable name="xWeb_ChangedL20File" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ChangedLumgadeFile" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xWeb_ChangedNetFile" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="xWeb_ChangedThreshold1File" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ChangedThreshold2File" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ChangedThreshold3File" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ChangedThreshold4File" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iSelectCommissioning" pdd="true" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xWeb_ReadConfigFiles" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xWeb_ConfigAlarm" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="xWeb_DeleteMissingLG" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xComissioning" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iTotalLumgates" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iDelay" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_SelectLG" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="strWeb_LoadMaker" pdd="true" redundant="true" group="Default">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="rWeb_LoadMaker" pdd="true" redundant="true" group="Default">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="xWeb_ReadConfigFilesDone" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="arrG_IP_Address" group="Default">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrG_SubnetMask" group="Default">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrG_StdGateway" group="Default">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="xCommissioning" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iCommissioning" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</externalVars>
				</interface>
				<body>
					<FBD>
						<worksheet name="Configuration" SizeX="400" SizeY="400">
							<inVariable localId="0" width="29" height="2">
								<position x="160" y="206"/>
								<connectionPointOut>
									<relPosition x="29" y="1"/>
								</connectionPointOut>
								<expression>arrLumgateCurrentConsumption</expression>
							</inVariable>
							<outVariable localId="1" width="29" height="2">
								<position x="248" y="206"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arrLumgateCurrentConsumption"/>
								</connectionPointIn>
								<expression>arrLumgateCurrentConsumption</expression>
							</outVariable>
							<inVariable localId="2" width="23" height="2">
								<position x="166" y="210"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>udtNetworkConfiguration</expression>
							</inVariable>
							<outVariable localId="3" width="23" height="2">
								<position x="248" y="210"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtNetworkConfiguration"/>
								</connectionPointIn>
								<expression>udtNetworkConfiguration</expression>
							</outVariable>
							<inVariable localId="4" width="13" height="2">
								<position x="176" y="198"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>arrLumgates</expression>
							</inVariable>
							<outVariable localId="5" width="13" height="2">
								<position x="248" y="198"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arrLumgates"/>
								</connectionPointIn>
								<expression>arrLumgates</expression>
							</outVariable>
							<inVariable localId="6" width="11" height="2">
								<position x="178" y="266"/>
								<connectionPointOut>
									<relPosition x="11" y="1"/>
								</connectionPointOut>
								<expression>xWriteFile</expression>
							</inVariable>
							<outVariable localId="7" width="11" height="2">
								<position x="248" y="266"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xWriteFile"/>
								</connectionPointIn>
								<expression>xWriteFile</expression>
							</outVariable>
							<inVariable localId="8" width="14" height="2">
								<position x="175" y="278"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>udtFileHandler</expression>
							</inVariable>
							<outVariable localId="9" width="14" height="2">
								<position x="248" y="278"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtFileHandler"/>
								</connectionPointIn>
								<expression>udtFileHandler</expression>
							</outVariable>
							<outVariable localId="10" width="25" height="2">
								<position x="248" y="138"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtProjectDescription"/>
								</connectionPointIn>
								<expression>udtWeb_ProjectDescription</expression>
							</outVariable>
							<outVariable localId="11" width="17" height="2">
								<position x="248" y="86"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="strDiag"/>
								</connectionPointIn>
								<expression>strDiagConfigFiles</expression>
							</outVariable>
							<outVariable localId="12" width="12" height="2">
								<position x="248" y="102"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xRequestStartupIB"/>
								</connectionPointIn>
								<expression>xActivateIB</expression>
							</outVariable>
							<inVariable localId="13" width="10" height="2">
								<position x="179" y="78"/>
								<connectionPointOut>
									<relPosition x="10" y="1"/>
								</connectionPointOut>
								<expression>xDoneIB</expression>
							</inVariable>
							<inVariable localId="14" width="21" height="2">
								<position x="168" y="86"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>xWeb_Commissioning</expression>
							</inVariable>
							<outVariable localId="15" width="22" height="2">
								<position x="248" y="82"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xPreAlarm"/>
								</connectionPointIn>
								<expression>xConfigurationPreAlarm</expression>
							</outVariable>
							<inVariable localId="16" width="16" height="2">
								<position x="173" y="282"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>arrAnalogValues</expression>
							</inVariable>
							<outVariable localId="17" width="16" height="2">
								<position x="248" y="282"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arr_Inputs_L20"/>
								</connectionPointIn>
								<expression>arrAnalogValues</expression>
							</outVariable>
							<inVariable localId="18" width="25" height="2">
								<position x="164" y="218"/>
								<connectionPointOut>
									<relPosition x="25" y="1"/>
								</connectionPointOut>
								<expression>arrScenarioConfiguration[1]</expression>
							</inVariable>
							<outVariable localId="19" width="25" height="2">
								<position x="248" y="218"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arrScenarioConfiguration_L20_1"/>
								</connectionPointIn>
								<expression>arrScenarioConfiguration[1]</expression>
							</outVariable>
							<inVariable localId="20" width="25" height="2">
								<position x="164" y="222"/>
								<connectionPointOut>
									<relPosition x="25" y="1"/>
								</connectionPointOut>
								<expression>arrScenarioConfiguration[2]</expression>
							</inVariable>
							<outVariable localId="21" width="25" height="2">
								<position x="248" y="222"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arrScenarioConfiguration_L20_2"/>
								</connectionPointIn>
								<expression>arrScenarioConfiguration[2]</expression>
							</outVariable>
							<outVariable localId="22" width="25" height="2">
								<position x="248" y="226"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arrScenarioConfiguration_L20_3"/>
								</connectionPointIn>
								<expression>arrScenarioConfiguration[3]</expression>
							</outVariable>
							<inVariable localId="23" width="25" height="2">
								<position x="164" y="226"/>
								<connectionPointOut>
									<relPosition x="25" y="1"/>
								</connectionPointOut>
								<expression>arrScenarioConfiguration[3]</expression>
							</inVariable>
							<inVariable localId="24" width="25" height="2">
								<position x="164" y="230"/>
								<connectionPointOut>
									<relPosition x="25" y="1"/>
								</connectionPointOut>
								<expression>arrScenarioConfiguration[4]</expression>
							</inVariable>
							<outVariable localId="25" width="25" height="2">
								<position x="248" y="230"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arrScenarioConfiguration_L20_4"/>
								</connectionPointIn>
								<expression>arrScenarioConfiguration[4]</expression>
							</outVariable>
							<outVariable localId="26" width="22" height="2">
								<position x="248" y="234"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtLevelConfiguration_L20_1"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration[1]</expression>
							</outVariable>
							<inVariable localId="27" width="22" height="2">
								<position x="167" y="234"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[1]</expression>
							</inVariable>
							<inVariable localId="28" width="22" height="2">
								<position x="167" y="238"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[2]</expression>
							</inVariable>
							<outVariable localId="29" width="22" height="2">
								<position x="248" y="238"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtLevelConfiguration_L20_2"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration[2]</expression>
							</outVariable>
							<inVariable localId="30" width="22" height="2">
								<position x="167" y="242"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[3]</expression>
							</inVariable>
							<outVariable localId="31" width="22" height="2">
								<position x="248" y="242"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtLevelConfiguration_L20_3"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration[3]</expression>
							</outVariable>
							<inVariable localId="32" width="22" height="2">
								<position x="167" y="246"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[4]</expression>
							</inVariable>
							<outVariable localId="33" width="22" height="2">
								<position x="248" y="246"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtLevelConfiguration_L20_4"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration[4]</expression>
							</outVariable>
							<outVariable localId="34" width="19" height="2">
								<position x="248" y="106"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xNetworkConfigFileExist"/>
								</connectionPointIn>
								<expression>xWeb_ConfigFileNet</expression>
							</outVariable>
							<outVariable localId="35" width="23" height="2">
								<position x="248" y="110"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xLumgateConfigFileExist"/>
								</connectionPointIn>
								<expression>xWeb_ConfigFileLumgate</expression>
							</outVariable>
							<outVariable localId="36" width="19" height="2">
								<position x="248" y="114"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xL20ConfigFileExist"/>
								</connectionPointIn>
								<expression>xWeb_ConfigFileL20</expression>
							</outVariable>
							<outVariable localId="37" width="21" height="2">
								<position x="248" y="118"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xThreshold1ConfigFileExist"/>
								</connectionPointIn>
								<expression>xWeb_ConfigFileLevel1</expression>
							</outVariable>
							<outVariable localId="38" width="21" height="2">
								<position x="248" y="122"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xThreshold2ConfigFileExist"/>
								</connectionPointIn>
								<expression>xWeb_ConfigFileLevel2</expression>
							</outVariable>
							<outVariable localId="39" width="21" height="2">
								<position x="248" y="126"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xThreshold3ConfigFileExist"/>
								</connectionPointIn>
								<expression>xWeb_ConfigFileLevel3</expression>
							</outVariable>
							<outVariable localId="40" width="21" height="2">
								<position x="248" y="130"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xThreshold4ConfigFileExist"/>
								</connectionPointIn>
								<expression>xWeb_ConfigFileLevel4</expression>
							</outVariable>
							<block width="8" height="8" typeName="F_TRIG" instanceName="F_TRIG_1" localId="44">
								<position x="139" y="79"/>
								<inputVariables>
									<variable formalParameter="CLK" dataType="BOOL" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="105" formalParameter="OR">
												<position x="137" y="83" pathnode="false"/>
												<position x="130" y="83" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="Q" dataType="BOOL" hideable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="45" width="19" height="2">
								<position x="170" y="274"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_ConfigFiles</expression>
							</inVariable>
							<outVariable localId="46" width="19" height="2">
								<position x="248" y="274"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtConfigFiles"/>
								</connectionPointIn>
								<expression>udtWeb_ConfigFiles</expression>
							</outVariable>
							<outVariable localId="47" width="13" height="2">
								<position x="248" y="134"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arrSegment"/>
								</connectionPointIn>
								<expression>arrSegment</expression>
							</outVariable>
							<inVariable localId="48" width="14" height="2">
								<position x="175" y="290"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>udtL20Config</expression>
							</inVariable>
							<outVariable localId="49" width="14" height="2">
								<position x="248" y="290"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtL20Config"/>
								</connectionPointIn>
								<expression>udtL20Config</expression>
							</outVariable>
							<outVariable localId="50" width="25" height="2">
								<position x="248" y="214"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtActNetworkConfiguration"/>
								</connectionPointIn>
								<expression>udtActNetworkConfiguration</expression>
							</outVariable>
							<inVariable localId="51" width="25" height="2">
								<position x="164" y="214"/>
								<connectionPointOut>
									<relPosition x="25" y="1"/>
								</connectionPointOut>
								<expression>udtActNetworkConfiguration</expression>
							</inVariable>
							<inVariable localId="52" width="16" height="2">
								<position x="173" y="294"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>udtActL20Config</expression>
							</inVariable>
							<outVariable localId="53" width="16" height="2">
								<position x="248" y="294"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtActL20Config"/>
								</connectionPointIn>
								<expression>udtActL20Config</expression>
							</outVariable>
							<inVariable localId="54" width="16" height="2">
								<position x="173" y="286"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>arrActL20Inputs</expression>
							</inVariable>
							<outVariable localId="55" width="16" height="2">
								<position x="248" y="286"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arrActL20Inputs"/>
								</connectionPointIn>
								<expression>arrActL20Inputs</expression>
							</outVariable>
							<outVariable localId="56" width="24" height="2">
								<position x="248" y="174"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedNetConfig"/>
								</connectionPointIn>
								<expression>xWeb_ChangedNetConfig</expression>
							</outVariable>
							<outVariable localId="57" width="24" height="2">
								<position x="248" y="178"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedL20Config"/>
								</connectionPointIn>
								<expression>xWeb_ChangedL20Config</expression>
							</outVariable>
							<inVariable localId="58" width="17" height="2">
								<position x="172" y="250"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>udtActThreshold1</expression>
							</inVariable>
							<outVariable localId="59" width="17" height="2">
								<position x="248" y="250"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtActThresholdConfig1"/>
								</connectionPointIn>
								<expression>udtActThreshold1</expression>
							</outVariable>
							<outVariable localId="60" width="25" height="2">
								<position x="248" y="182"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedThreshold1"/>
								</connectionPointIn>
								<expression>xWeb_ChangedThreshold1</expression>
							</outVariable>
							<inVariable localId="61" width="17" height="2">
								<position x="172" y="262"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>udtActThreshold4</expression>
							</inVariable>
							<outVariable localId="62" width="17" height="2">
								<position x="248" y="262"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtActThresholdConfig4"/>
								</connectionPointIn>
								<expression>udtActThreshold4</expression>
							</outVariable>
							<inVariable localId="63" width="17" height="2">
								<position x="172" y="254"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>udtActThreshold2</expression>
							</inVariable>
							<outVariable localId="64" width="17" height="2">
								<position x="248" y="254"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtActThresholdConfig2"/>
								</connectionPointIn>
								<expression>udtActThreshold2</expression>
							</outVariable>
							<inVariable localId="65" width="17" height="2">
								<position x="172" y="258"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>udtActThreshold3</expression>
							</inVariable>
							<outVariable localId="66" width="17" height="2">
								<position x="248" y="258"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="udtActThresholdConfig3"/>
								</connectionPointIn>
								<expression>udtActThreshold3</expression>
							</outVariable>
							<outVariable localId="67" width="25" height="2">
								<position x="248" y="186"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedThreshold2"/>
								</connectionPointIn>
								<expression>xWeb_ChangedThreshold2</expression>
							</outVariable>
							<outVariable localId="68" width="25" height="2">
								<position x="248" y="190"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedThreshold3"/>
								</connectionPointIn>
								<expression>xWeb_ChangedThreshold3</expression>
							</outVariable>
							<outVariable localId="69" width="25" height="2">
								<position x="248" y="194"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedThreshold4"/>
								</connectionPointIn>
								<expression>xWeb_ChangedThreshold4</expression>
							</outVariable>
							<outVariable localId="70" width="23" height="2">
								<position x="248" y="170"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedLumgate"/>
								</connectionPointIn>
								<expression>xWeb_ChangedLumgate</expression>
							</outVariable>
							<inVariable localId="71" width="20" height="2">
								<position x="169" y="202"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>udtActLumgateConfig</expression>
							</inVariable>
							<outVariable localId="72" width="20" height="2">
								<position x="248" y="202"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="arrLumgateConfig"/>
								</connectionPointIn>
								<expression>udtActLumgateConfig</expression>
							</outVariable>
							<outVariable localId="73" width="26" height="2">
								<position x="248" y="146"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedLumgateFileExist"/>
								</connectionPointIn>
								<expression>xWeb_ChangedLumgadeFile</expression>
							</outVariable>
							<outVariable localId="74" width="21" height="2">
								<position x="248" y="150"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedL20FileExist"/>
								</connectionPointIn>
								<expression>xWeb_ChangedL20File</expression>
							</outVariable>
							<outVariable localId="75" width="21" height="2">
								<position x="248" y="142"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedNetFileExist"/>
								</connectionPointIn>
								<expression>xWeb_ChangedNetFile</expression>
							</outVariable>
							<outVariable localId="76" width="27" height="2">
								<position x="248" y="154"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedThreshold1FileExist"/>
								</connectionPointIn>
								<expression>xWeb_ChangedThreshold1File</expression>
							</outVariable>
							<outVariable localId="77" width="27" height="2">
								<position x="248" y="158"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedThreshold2FileExist"/>
								</connectionPointIn>
								<expression>xWeb_ChangedThreshold2File</expression>
							</outVariable>
							<outVariable localId="78" width="27" height="2">
								<position x="248" y="162"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedThreshold3FileExist"/>
								</connectionPointIn>
								<expression>xWeb_ChangedThreshold3File</expression>
							</outVariable>
							<outVariable localId="79" width="27" height="2">
								<position x="248" y="166"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xChangedThreshold4FileExist"/>
								</connectionPointIn>
								<expression>xWeb_ChangedThreshold4File</expression>
							</outVariable>
							<inVariable localId="80" width="20" height="2">
								<position x="169" y="90"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>iSelectCommissioning</expression>
							</inVariable>
							<inVariable localId="81" width="21" height="2">
								<position x="168" y="94"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ReadConfigFiles</expression>
							</inVariable>
							<outVariable localId="82" width="18" height="2">
								<position x="248" y="78"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xAlarm"/>
								</connectionPointIn>
								<expression>xWeb_ConfigAlarm</expression>
							</outVariable>
							<inVariable localId="83" width="22" height="2">
								<position x="167" y="270"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>xWeb_DeleteMissingLG</expression>
							</inVariable>
							<outVariable localId="84" width="22" height="2">
								<position x="248" y="270"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xTakeActualConfig"/>
								</connectionPointIn>
								<expression>xWeb_DeleteMissingLG</expression>
							</outVariable>
							<inVariable localId="85" width="21" height="2">
								<position x="126" y="95"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>xWeb_Commissioning</expression>
							</inVariable>
							<outVariable localId="86" width="14" height="2">
								<position x="147" y="95"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="85"/>
								</connectionPointIn>
								<expression>xComissioning</expression>
							</outVariable>
							<block width="8" height="16" typeName="LIMIT" localId="91">
								<position x="35" y="19"/>
								<inputVariables>
									<variable formalParameter="MN" dataType="ELEMENTARY" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="92"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN" dataType="ELEMENTARY" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="94"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="MX" dataType="ELEMENTARY" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="93"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="LIMIT" hidden="true" dataType="ELEMENTARY" hideable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="92" width="4" height="2">
								<position x="29" y="22"/>
								<connectionPointOut>
									<relPosition x="4" y="1"/>
								</connectionPointOut>
								<expression>1</expression>
							</inVariable>
							<inVariable localId="93" width="6" height="2">
								<position x="27" y="30"/>
								<connectionPointOut>
									<relPosition x="6" y="1"/>
								</connectionPointOut>
								<expression>240</expression>
							</inVariable>
							<inVariable localId="94" width="15" height="2">
								<position x="18" y="26"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>iTotalLumgates</expression>
							</inVariable>
							<outVariable localId="95" width="15" height="2">
								<position x="45" y="22"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="91" formalParameter="LIMIT"/>
								</connectionPointIn>
								<expression>iTotalLumgates</expression>
							</outVariable>
							<comment localId="96" width="46" height="16">
								<position x="194" y="52"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Read / write configuration files<br/>EPO-IS-268-817 - 820<br/>EPO-IS-268-917 + 481<br/>EPO-IS-268-830 + 916(Commissionig)</p>
									</html>
								</content>
							</comment>
							<comment localId="97" width="18" height="4">
								<position x="134" y="72"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Save Current</p>
									</html>
								</content>
							</comment>
							<outVariable localId="98" width="8" height="2">
								<position x="248" y="98"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="iDelay"/>
								</connectionPointIn>
								<expression>iDelay</expression>
							</outVariable>
							<comment localId="99" width="36" height="4">
								<position x="24" y="14"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Detect last connected Lumgate</p>
									</html>
								</content>
							</comment>
							<inVariable localId="100" width="44" height="2">
								<position x="74" y="82"/>
								<connectionPointOut>
									<relPosition x="44" y="1"/>
								</connectionPointOut>
								<expression>arrLumgates[iTotalLumgates].xTeachConsumption</expression>
							</inVariable>
							<inVariable localId="101" width="44" height="2">
								<position x="74" y="86"/>
								<connectionPointOut>
									<relPosition x="44" y="1"/>
								</connectionPointOut>
								<expression>arrLumgates[iWeb_SelectLG].xTeachConsumption</expression>
							</inVariable>
							<block width="8" height="12" typeName="OR" localId="105">
								<position x="120" y="79"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="100"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="101"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OR" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="106" width="15" height="2">
								<position x="18" y="44"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>iWeb_SelectLG</expression>
							</inVariable>
							<inVariable localId="107" width="4" height="2">
								<position x="29" y="40"/>
								<connectionPointOut>
									<relPosition x="4" y="1"/>
								</connectionPointOut>
								<expression>1</expression>
							</inVariable>
							<inVariable localId="108" width="6" height="2">
								<position x="27" y="48"/>
								<connectionPointOut>
									<relPosition x="6" y="1"/>
								</connectionPointOut>
								<expression>240</expression>
							</inVariable>
							<outVariable localId="109" width="15" height="2">
								<position x="45" y="40"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="114" formalParameter="LIMIT"/>
								</connectionPointIn>
								<expression>iWeb_SelectLG</expression>
							</outVariable>
							<block width="8" height="16" typeName="LIMIT" localId="114">
								<position x="35" y="37"/>
								<inputVariables>
									<variable formalParameter="MN" dataType="ELEMENTARY" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="107"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN" dataType="ELEMENTARY" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="106"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="MX" dataType="ELEMENTARY" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="108"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="LIMIT" hidden="true" dataType="ELEMENTARY" hideable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="116" width="19" height="2">
								<position x="248" y="298"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="strLoadText"/>
								</connectionPointIn>
								<expression>strWeb_LoadMaker</expression>
							</outVariable>
							<outVariable localId="117" width="17" height="2">
								<position x="248" y="302"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="rLoadMaker"/>
								</connectionPointIn>
								<expression>rWeb_LoadMaker</expression>
							</outVariable>
							<outVariable localId="118" width="26" height="2">
								<position x="248" y="90"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="188" formalParameter="xStartupProcessDone"/>
								</connectionPointIn>
								<expression>xWeb_ReadConfigFilesDone</expression>
							</outVariable>
							<inVariable localId="119" width="17" height="2">
								<position x="172" y="98"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>arrG_IP_Address</expression>
							</inVariable>
							<inVariable localId="120" width="17" height="2">
								<position x="172" y="102"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>arrG_SubnetMask</expression>
							</inVariable>
							<inVariable localId="121" width="17" height="2">
								<position x="172" y="106"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>arrG_StdGateway</expression>
							</inVariable>
							<block width="55" height="232" typeName="FB_FileHandling_01" instanceName="FB_FileHandling_01_2" localId="188">
								<position x="191" y="75"/>
								<inputVariables>
									<variable formalParameter="xActivateOutputData" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="13"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xWriteCurrent" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="44" formalParameter="Q">
												<position x="189" y="83" pathnode="false"/>
												<position x="149" y="83" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xCommissioning" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="14"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectBranch" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="80"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xReadConfigFiles" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="81"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrActIP_Address" dataType="TB_ARR_B_1_4" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="119"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrActSubnetMask" dataType="TB_ARR_B_1_4" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="120"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrActStdGateway" dataType="TB_ARR_B_1_4" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="121"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="arrLumgates" dataType="arr_1_240_udtLumgate">
										<connectionPointIn>
											<relPosition x="-2" y="124"/>
											<connection refLocalId="4"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="124"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrLumgateConfig" dataType="arr_1_240_udtLG_Config">
										<connectionPointIn>
											<relPosition x="-2" y="128"/>
											<connection refLocalId="71"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="128"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrLumgateCurrentConsumption" dataType="Arr_1_240_1_23_Int">
										<connectionPointIn>
											<relPosition x="-2" y="132"/>
											<connection refLocalId="0"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="132"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtNetworkConfiguration" dataType="udtNetwork">
										<connectionPointIn>
											<relPosition x="-2" y="136"/>
											<connection refLocalId="2"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="136"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtActNetworkConfiguration" dataType="udtNetwork">
										<connectionPointIn>
											<relPosition x="-2" y="140"/>
											<connection refLocalId="51"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="140"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrScenarioConfiguration_L20_1" dataType="ARR_1_25_1_5_Int">
										<connectionPointIn>
											<relPosition x="-2" y="144"/>
											<connection refLocalId="18"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="144"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrScenarioConfiguration_L20_2" dataType="arr_1_25_1_5_Int">
										<connectionPointIn>
											<relPosition x="-2" y="148"/>
											<connection refLocalId="20"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="148"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrScenarioConfiguration_L20_3" dataType="arr_1_25_1_5_Int">
										<connectionPointIn>
											<relPosition x="-2" y="152"/>
											<connection refLocalId="23"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="152"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrScenarioConfiguration_L20_4" dataType="arr_1_25_1_5_Int">
										<connectionPointIn>
											<relPosition x="-2" y="156"/>
											<connection refLocalId="24"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="156"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLevelConfiguration_L20_1" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="160"/>
											<connection refLocalId="27"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="160"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLevelConfiguration_L20_2" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="164"/>
											<connection refLocalId="28"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="164"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLevelConfiguration_L20_3" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="168"/>
											<connection refLocalId="30"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="168"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLevelConfiguration_L20_4" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="172"/>
											<connection refLocalId="32"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="172"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtActThresholdConfig1" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="176"/>
											<connection refLocalId="58"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="176"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtActThresholdConfig2" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="180"/>
											<connection refLocalId="63"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="180"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtActThresholdConfig3" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="184"/>
											<connection refLocalId="65"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="184"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtActThresholdConfig4" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="188"/>
											<connection refLocalId="61"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="188"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xWriteFile" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="192"/>
											<connection refLocalId="6"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="192"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xTakeActualConfig" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="196"/>
											<connection refLocalId="83"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="196"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtConfigFiles" dataType="udt_WebDataConfigFiles">
										<connectionPointIn>
											<relPosition x="-2" y="200"/>
											<connection refLocalId="45"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="200"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtFileHandler" dataType="udtFileHandling">
										<connectionPointIn>
											<relPosition x="-2" y="204"/>
											<connection refLocalId="8"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="204"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arr_Inputs_L20" dataType="arr_1_4_udtAnalogInput">
										<connectionPointIn>
											<relPosition x="-2" y="208"/>
											<connection refLocalId="16"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="208"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrActL20Inputs" dataType="arr_1_4_udtAnalogInput">
										<connectionPointIn>
											<relPosition x="-2" y="212"/>
											<connection refLocalId="54"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="212"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtL20Config" dataType="udtL20Input">
										<connectionPointIn>
											<relPosition x="-2" y="216"/>
											<connection refLocalId="48"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="216"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtActL20Config" dataType="udtL20Input">
										<connectionPointIn>
											<relPosition x="-2" y="220"/>
											<connection refLocalId="52"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="59" y="220"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xPreAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xStartupProcessDone" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xIBConfigSaved" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iDelay" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xRequestStartupIB" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="28"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xNetworkConfigFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="32"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xLumgateConfigFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="36"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xL20ConfigFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xThreshold1ConfigFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="44"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xThreshold2ConfigFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="48"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xThreshold3ConfigFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="52"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xThreshold4ConfigFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="56"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrSegment" dataType="ARR_I_1_4" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="60"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtProjectDescription" dataType="udtProjectSpecification" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="64"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedNetFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="68"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedLumgateFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="72"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedL20FileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="76"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedThreshold1FileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="80"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedThreshold2FileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="84"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedThreshold3FileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="88"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedThreshold4FileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="92"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedLumgate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="96"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedNetConfig" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="100"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedL20Config" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="104"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedThreshold1" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="108"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedThreshold2" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="112"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedThreshold3" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="116"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xChangedThreshold4" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="120"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strLoadText" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="224"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="rLoadMaker" dataType="REAL" hideable="true">
										<connectionPointOut>
											<relPosition x="57" y="228"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="190" width="16" height="2">
								<position x="159" y="41"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="192"/>
								</connectionPointIn>
								<expression>xCommissioning</expression>
							</outVariable>
							<outVariable localId="191" width="15" height="2">
								<position x="159" y="45"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="193">
										<position x="159" y="46" pathnode="false"/>
										<position x="158" y="46" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>iCommissioning</expression>
							</outVariable>
							<inVariable localId="192" width="21" height="2">
								<position x="138" y="41"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>xWeb_Commissioning</expression>
							</inVariable>
							<inVariable localId="193" width="20" height="2">
								<position x="138" y="45"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>iSelectCommissioning</expression>
							</inVariable>
						</worksheet>
					</FBD>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="ConfigurationT" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="Main" pouType="program" pouGroup="Programs" lastChange="2016-11-21T16:26:17">
				<interface>
					<localVars retain="false">
						<variable name="RS_1" group="Instanzes">
							<type>
								<derived name="RS"/>
							</type>
						</variable>
						<variable name="FB_InterbusStartup_01_1" group="Instanzes">
							<type>
								<derived name="FB_InterbusStartup_01"/>
							</type>
						</variable>
						<variable name="FB_InitScenes_01_1" group="Instanzes">
							<type>
								<derived name="FB_InitScenes_01"/>
							</type>
						</variable>
						<variable name="TB_Set_IP_Adress_01_1" group="Instanzes">
							<type>
								<derived name="TB_Set_IP_Adress_01"/>
							</type>
						</variable>
						<variable name="TB_Login_01_1" group="Instanzes">
							<type>
								<derived name="TB_Login_01"/>
							</type>
						</variable>
						<variable name="TB_Date_01_1" group="Instanzes">
							<type>
								<derived name="TB_Date_01"/>
							</type>
						</variable>
						<variable name="FB_SelectScene_01_1" group="Instanzes">
							<type>
								<derived name="FB_SelectScene_01"/>
							</type>
						</variable>
						<variable name="FB_L20_AnalogInput_01_1" group="Instanzes">
							<type>
								<derived name="FB_L20_AnalogInput_01"/>
							</type>
						</variable>
						<variable name="FB_TCS_Communication_01_1" group="Instanzes">
							<type>
								<derived name="FB_TCS_Communication_01"/>
							</type>
						</variable>
						<variable name="FB_SceneHourCounter_01_1" group="Instanzes">
							<type>
								<derived name="FB_SceneHourCounter_01"/>
							</type>
						</variable>
						<variable name="TB_Toggle_01_1" group="Instanzes">
							<type>
								<derived name="TB_Toggle_01"/>
							</type>
						</variable>
						<variable name="R_TRIG_1" group="Instanzes">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
						<variable name="TB_ListDiag_01_1" group="Instanzes">
							<type>
								<derived name="TB_ListDiag_01"/>
							</type>
						</variable>
						<variable name="TB_SelectDiag_01_1" group="Instanzes">
							<type>
								<derived name="TB_SelectDiag_01"/>
							</type>
						</variable>
						<variable name="FB_Lumgate_01_1" group="Instanzes">
							<type>
								<derived name="FB_Lumgate_01"/>
							</type>
						</variable>
						<variable name="FB_Web_Communication_01_1" group="Instanzes">
							<type>
								<derived name="FB_Web_Communication_01"/>
							</type>
						</variable>
						<variable name="SetClock_V1_00_1" group="Instanzes">
							<type>
								<derived name="SetClock_V1_00"/>
							</type>
						</variable>
						<variable name="strDate" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xWeb_Login" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_LogOut" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strWeb_Name" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_PSW" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xWeb_LoginSuccessful" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_UnknownUser" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="usiWeb_UserLevel" pdd="true" redundant="true" group="Web parameter">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="xWeb_SetIP_Address" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="arrWeb_IP_Address" pdd="true" group="Web parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrWeb_SubnetMask" pdd="true" group="Web parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrWeb_StdGateway" pdd="true" group="Web parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="strWeb_Report1" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Report2" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Report3" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Report4" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Report5" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Report6" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Report7" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Report8" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Report9" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Report10" pdd="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strDiagIB_Startup" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strDiagIP_Address" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="udtWebMainLG" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udtWebLG_Main"/>
							</type>
						</variable>
						<variable name="udtLumgateData" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udtLumgateVisu"/>
							</type>
						</variable>
						<variable name="udtLumgateScenario" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udtWebLGScenario"/>
							</type>
						</variable>
						<variable name="udtLumgateSpecialScenario" redundant="true" group="Web parameter">
							<type>
								<derived name="udtWebLGSpecialScenario"/>
							</type>
						</variable>
						<variable name="xWeb_SetTime" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iWeb_Day" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_Month" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_Year" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_Hours" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_Minutes" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_Seconds" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="iWeb_SelectLG" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="arrAnalogAvarageValues" group="Web parameter">
							<type>
								<derived name="arr_1_11_udtInput"/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI01" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI02" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI03" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI04" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI05" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI06" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI07" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI08" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI09" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI10" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI11" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_OnboardDI12" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="iWeb_SelectRBT" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_SelectLumgate" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="udtWeb_Lumgate" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udtWebLumgate"/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="iWeb_LumgateSite" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
							<initialValue>
								<simpleValue value="1"/>
							</initialValue>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="iWeb_TotalLumgatesRBT" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrWeb_Lumgate" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="Arr_I_0_9"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="arrLevelConfiguration" group="Web parameter">
							<type>
								<derived name="ARR_UDT_L20Config"/>
							</type>
						</variable>
						<variable name="arrScenarioConfiguration" group="Web parameter">
							<type>
								<derived name="ARR_I_1_4_1_25_1_5"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="true">
						<variable name="iWeb_SelectSensor" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
							<initialValue>
								<simpleValue value="1"/>
							</initialValue>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="arrWeb_SelectedScenario" pdd="true" group="Web parameter">
							<type>
								<derived name="ARR_I_1_5"/>
							</type>
						</variable>
						<variable name="arrWeb_SelectedConfiguration" pdd="true" group="Web parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="arrWeb_ActiveScenario" pdd="true" group="Web parameter">
							<type>
								<derived name="ARR_X_1_25"/>
							</type>
						</variable>
						<variable name="arrWeb_ThresholdLevels" pdd="true" group="Web parameter">
							<type>
								<derived name="ARR_R_1_24"/>
							</type>
						</variable>
						<variable name="iWeb_SelectedScenario" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="udtWeb_CurrentConsumption" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udtWebLGCurrentConsumption"/>
							</type>
						</variable>
						<variable name="arrWeb_5Lumgates" pdd="true" group="Web parameter">
							<type>
								<derived name="ARR_X_0_9"/>
							</type>
						</variable>
						<variable name="xWeb_CF_CardMissing" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_PS_In" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_PS_Main" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_PS_Out" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="FB_PLC_Diag_01_1" group="Web parameter">
							<type>
								<derived name="FB_PLC_Diag_01"/>
							</type>
						</variable>
						<variable name="strWeb_ConfigName" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="dwWeb_BootProjectCRC" pdd="true" redundant="true" group="Web parameter">
							<type>
								<DWORD/>
							</type>
						</variable>
						<variable name="dwWeb_RamProjectCRC" pdd="true" redundant="true" group="Web parameter">
							<type>
								<DWORD/>
							</type>
						</variable>
						<variable name="strWeb_PLC_ProjectName" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xWeb_RamProjectAvailable" pdd="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_BootProjectAvailable" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strDiag_Lumgate" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="arrWeb_5LumgatesValues" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="Arr_I_0_9"/>
							</type>
						</variable>
						<variable name="xPreAlarm" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xAnalogPreAlarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xAnalogAlarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strDiagAnalog" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xAlarm" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xToggle" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_PreAlarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_Alarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="CLOCK_PULSE_2S" group="Web parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Taktgeber 2s</p>
								</html>
							</documentation>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="rWeb_AnalogValue" pdd="true" redundant="true" group="Web parameter">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="strWeb_Header1" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Header2" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_Header3" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="wWeb_AnalogDiag" pdd="true" redundant="true" group="Web parameter">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="rWeb_SelectedValue1" pdd="true" redundant="true" group="Web parameter">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rWeb_SelectedValue2" pdd="true" redundant="true" group="Web parameter">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rWeb_SelectedValue3" pdd="true" redundant="true" group="Web parameter">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rWeb_SelectedValue4" pdd="true" redundant="true" group="Web parameter">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="xWeb_ConfirmAlarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xLumgateAlarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xLumgatePreAlarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iWeb_ErrorLumgateNo" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_ErrorRBT_No" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="strWeb_CloState" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strWeb_MaintenanceState" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="arrWeb_CurrentExpected" pdd="true" group="Web parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
						</variable>
						<variable name="iWeb_CurrentActual" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_ActualPosition" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="arrWeb_CurrentWarningMin" pdd="true" group="Web parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
						</variable>
						<variable name="arrWeb_CurrentWarningMax" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
						</variable>
						<variable name="arrWeb_CurrentErrorMin" pdd="true" group="Web parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
						</variable>
						<variable name="arrWeb_CurrentErrorMax" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="ARR_I_1_22"/>
							</type>
						</variable>
						<variable name="xWeb_SetManualLumgate" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_EnableLumgateEdit" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_SafeLumgate" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_EditableLumgate" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strWeb_LumgateState" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xWeb_CancelLumgate" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strWeb_LumgateDescription" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="strDiagWeb" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="udtWeb_CLO" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udt_WebDataLumgateCLO"/>
							</type>
						</variable>
						<variable name="udtWeb_Current" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udt_WebDataLumgateCurrent"/>
							</type>
						</variable>
						<variable name="udtWeb_Scenes" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udt_WebDataLumgateScenes"/>
							</type>
						</variable>
						<variable name="xModePreAlarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xModeAlarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iWeb_Delay" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="xWeb_PN_DataValid" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="arrSegment" group="Web parameter">
							<type>
								<derived name="ARR_I_1_4"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="arrWeb_AmountLumgates" pdd="true" group="Web parameter">
							<type>
								<derived name="ARR_I_1_4"/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="udtWeb_Device" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udt_WebDataDevice"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="udtL20Config" group="Web parameter">
							<type>
								<derived name="udtL20Input"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="xWeb_NextLumgate" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="udtWeb_Project" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="udt_WebDataProjectSettings"/>
							</type>
						</variable>
						<variable name="iWeb_SelectedRBT" pdd="true" redundant="true" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="rWeb_LevelFailsafe" pdd="true" redundant="true" group="Web parameter">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="rWeb_ManualOutput" pdd="true" redundant="true" group="Web parameter">
							<type>
								<REAL/>
							</type>
						</variable>
						<variable name="xActivateTCS_Interface" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_TCS_Alarm" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="arrWeb_AnalogDiag" pdd="true" redundant="true" group="Web parameter">
							<type>
								<derived name="ARR_W_1_4"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xWeb_ConfigAlarm" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="xWeb_UnexpectedLG" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ModeOK" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xAnalogExist" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strMode" pdd="true" redundant="true" group="Web parameter">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xWeb_Partly" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ActivateMB" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xSetPN_Device" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="xWeb_LumgateType" pdd="true" redundant="true" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="arrG_IP_Address" group="Web parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrG_SubnetMask" group="Web parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrG_StdGateway" group="Web parameter">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="xCommissioning" group="Web parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iCommissioning" group="Web parameter">
							<type>
								<INT/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="xIP_ConfigSaved" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xRead" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="ONBOARD_INPUT_BIT0" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN1</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT1" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN2</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT2" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN3</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT3" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN4</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT4" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN5</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT5" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN6</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT6" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN7</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT7" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN8</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT8" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN9</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT9" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN10</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT10" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN11</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT11" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN12</p>
								</html>
							</documentation>
						</variable>
						<variable name="xActivateIB" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="arrInputPD" group="">
							<type>
								<derived name="ARR_IBS_PD_DATA_B_1_512"/>
							</type>
						</variable>
						<variable name="arrOutputPD" group="">
							<type>
								<derived name="ARR_IBS_PD_DATA_B_1_512"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="arrIB_Configuration" group="">
							<type>
								<derived name="ARR_IBS_CONF_ENTRIES_1_256"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="arrLumgates" group="">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
						</variable>
						<variable name="arrAnalogValues" group="">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="true">
						<variable name="arrSceneHoureCounter" group="">
							<type>
								<derived name="arr_1_50_udtLumgatePart1"/>
							</type>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="udtSceneMode" pdd="true" group="">
							<type>
								<derived name="udtScene"/>
							</type>
						</variable>
						<variable name="iWeb_SelectScene" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_ChosedScene" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="MASTER_DIAG_STATUS_REG_RUN" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Datenübertragung ist aktiv</p>
								</html>
							</documentation>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="FB_HelpClock_01_1" group="">
							<type>
								<derived name="FB_HelpClock_01"/>
							</type>
						</variable>
						<variable name="arrWeb_Scale" pdd="true" redundant="true" group="">
							<type>
								<derived name="Arr_I_0_4"/>
							</type>
						</variable>
						<variable name="xInterbusPreAlarm" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_RBT1" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_RBT2" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_RBT3" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_RBT4" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iWeb_RBT1" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_RBT2" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_RBT3" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_RBT4" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="xWeb_ActivateTCS_PN" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="xWeb_TCS_PN_Active" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="strDiagTCS_PN" redundant="true" group="">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="wSpezialScene" redundant="true" group="">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="R_TRIG_2" group="">
							<type>
								<derived name="R_TRIG"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="strDiagConfigFiles" group="">
							<type>
								<string length="80"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="udtWeb_Threshold" pdd="true" redundant="true" group="">
							<type>
								<derived name="udt_WebDataThreshold"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xDoneIB" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="FB_SelectMode_01_1" group="">
							<type>
								<derived name="FB_SelectMode_01"/>
							</type>
						</variable>
						<variable name="strDiagMode" redundant="true" group="">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xWeb_ManualMode" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xConfigurationPreAlarm" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="udtWeb_SceneHour" pdd="true" redundant="true" group="">
							<type>
								<derived name="udt_WebDataScenesHour"/>
							</type>
						</variable>
						<variable name="xWeb_ActivateMenue1" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ActivateMenue2" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_Menue2Active" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_Menue1Active" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="strWeb_EditorName" pdd="true" redundant="true" group="">
							<type>
								<string length="80"/>
							</type>
							<initialValue>
								<simpleValue value="'User'"/>
							</initialValue>
						</variable>
						<variable name="strWeb_EditorPsw" pdd="true" redundant="true" group="">
							<type>
								<string length="80"/>
							</type>
							<initialValue>
								<simpleValue value="'imti'"/>
							</initialValue>
						</variable>
						<variable name="strWeb_AdminName" pdd="true" redundant="true" group="">
							<type>
								<string length="80"/>
							</type>
							<initialValue>
								<simpleValue value="'PowerUser'"/>
							</initialValue>
						</variable>
						<variable name="strWeb_AdminPsw" pdd="true" redundant="true" group="">
							<type>
								<string length="80"/>
							</type>
							<initialValue>
								<simpleValue value="'imti'"/>
							</initialValue>
						</variable>
						<variable name="strWeb_SAdminName" pdd="true" redundant="true" group="">
							<type>
								<string length="80"/>
							</type>
							<initialValue>
								<simpleValue value="'Admin'"/>
							</initialValue>
						</variable>
						<variable name="strWeb_SAdminPsw" pdd="true" redundant="true" group="">
							<type>
								<string length="80"/>
							</type>
							<initialValue>
								<simpleValue value="'123456imti'"/>
							</initialValue>
						</variable>
					</localVars>
					<localVars retain="false">
						<variable name="FB_DeviceMonitoring_01_1" group="">
							<type>
								<derived name="FB_DeviceMonitoring_01"/>
							</type>
						</variable>
						<variable name="strDeviceMonitoring" redundant="true" group="">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="xDeviceAlarm" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="udtNetworkConfiguration" group="">
							<type>
								<derived name="udtNetwork"/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="FB_HelpSetIP_01_1" group="">
							<type>
								<derived name="FB_HelpSetIP_01"/>
							</type>
						</variable>
						<variable name="xWeb_TakeIP" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_Restart" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="RS_2" group="">
							<type>
								<derived name="RS"/>
							</type>
						</variable>
						<variable name="xWeb_ReScanIBS" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<localVars retain="true">
						<variable name="iWeb_DimmingSpeed" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
							<initialValue>
								<simpleValue value="1"/>
							</initialValue>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xWeb_ConfigFileNet" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="iOperatingSeconds" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iOperatingMinutes" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="udiOperatingHours" redundant="true" group="">
							<type>
								<UDINT/>
							</type>
						</variable>
						<variable name="udtWeb_Source" pdd="true" redundant="true" group="">
							<type>
								<derived name="udt_WebDataSource"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xWeb_ChangedNetFile" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="xWeb_ActivateMenue3" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_Menue3Active" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="xComissioning" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iTotalLumgates" group="">
							<type>
								<INT/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="TB_PN_Device_01_1" group="">
							<type>
								<derived name="TB_PN_Device_01"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="COP_DIAG_STATUS_REG_FC_RUN" group="">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Laufzeitsystem RUN</p>
								</html>
							</documentation>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="usiWeb_Report1" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="usiWeb_Report2" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="usiWeb_Report3" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="usiWeb_Report4" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="usiWeb_Report5" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="usiWeb_Report6" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="usiWeb_Report7" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="usiWeb_Report8" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="usiWeb_Report9" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="usiWeb_Report10" pdd="true" redundant="true" group="">
							<type>
								<USINT/>
							</type>
						</variable>
						<variable name="iWeb_DiagPointer" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
							<initialValue>
								<simpleValue value="1"/>
							</initialValue>
						</variable>
						<variable name="xWeb_FailMode" pdd="true" redundant="true" group="">
							<type>
								<BOOL/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="iDelay" group="">
							<type>
								<INT/>
							</type>
						</variable>
					</externalVars>
					<localVars retain="false">
						<variable name="iWeb_TotalIBS" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_ActIBS" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_IBS_State" pdd="true" redundant="true" group="">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<FBD>
						<worksheet name="General" SizeX="400" SizeY="400">
							<outVariable localId="0" width="9" height="2">
								<position x="48" y="33"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="134" formalParameter="strDate"/>
								</connectionPointIn>
								<expression>strDate</expression>
							</outVariable>
							<block width="32" height="48" typeName="TB_Login_01" instanceName="TB_Login_01_1" localId="17">
								<position x="25" y="116"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="18"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xLogin" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="19"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xLogOut" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="181" formalParameter="OR">
												<position x="23" y="128" pathnode="false"/>
												<position x="9" y="128" pathnode="false"/>
												<position x="9" y="111" pathnode="false"/>
												<position x="65" y="111" pathnode="false"/>
												<position x="65" y="95" pathnode="false"/>
												<position x="63" y="95" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strEditorName" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="100"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strEditorPsw" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="101"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strAdminName" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="102"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strAdminPsw" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="103"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strSuperAdminName" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="104"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strSuperAdminPsw" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="36"/>
											<connection refLocalId="105"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="strName" dataType="STRING">
										<connectionPointIn>
											<relPosition x="-2" y="40"/>
											<connection refLocalId="20"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="36" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strPsw" dataType="STRING">
										<connectionPointIn>
											<relPosition x="-2" y="44"/>
											<connection refLocalId="22"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="36" y="44"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="34" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xSuccessful" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="34" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xUnknownUser" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="34" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiUserLevel" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="34" y="16"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="18" width="6" height="2">
								<position x="17" y="119"/>
								<connectionPointOut>
									<relPosition x="6" y="1"/>
								</connectionPointOut>
								<expression>true</expression>
							</inVariable>
							<inVariable localId="19" width="13" height="2">
								<position x="10" y="123"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>xWeb_Login</expression>
							</inVariable>
							<inVariable localId="20" width="15" height="2">
								<position x="8" y="155"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>strWeb_Name</expression>
							</inVariable>
							<outVariable localId="21" width="15" height="2">
								<position x="59" y="155"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="17" formalParameter="strName"/>
								</connectionPointIn>
								<expression>strWeb_Name</expression>
							</outVariable>
							<inVariable localId="22" width="14" height="2">
								<position x="9" y="159"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>strWeb_PSW</expression>
							</inVariable>
							<outVariable localId="23" width="14" height="2">
								<position x="59" y="159"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="17" formalParameter="strPsw"/>
								</connectionPointIn>
								<expression>strWeb_PSW</expression>
							</outVariable>
							<outVariable localId="24" width="21" height="2">
								<position x="59" y="123"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="17" formalParameter="xSuccessful"/>
								</connectionPointIn>
								<expression>xWeb_LoginSuccessful</expression>
							</outVariable>
							<outVariable localId="25" width="20" height="2">
								<position x="59" y="127"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="17" formalParameter="xUnknownUser"/>
								</connectionPointIn>
								<expression>xWeb_UnknownUser</expression>
							</outVariable>
							<outVariable localId="26" width="18" height="2">
								<position x="59" y="131"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="17" formalParameter="usiUserLevel"/>
								</connectionPointIn>
								<expression>usiWeb_UserLevel</expression>
							</outVariable>
							<inVariable localId="27" width="19" height="2">
								<position x="148" y="76"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_IP_Address</expression>
							</inVariable>
							<outVariable localId="28" width="19" height="2">
								<position x="206" y="76"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="43" formalParameter="arrNewIPAdress"/>
								</connectionPointIn>
								<expression>arrWeb_IP_Address</expression>
							</outVariable>
							<inVariable localId="29" width="20" height="2">
								<position x="147" y="80"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_SubnetMask</expression>
							</inVariable>
							<outVariable localId="30" width="20" height="2">
								<position x="206" y="80"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="43" formalParameter="arrNewSubnetMask"/>
								</connectionPointIn>
								<expression>arrWeb_SubnetMask</expression>
							</outVariable>
							<inVariable localId="31" width="20" height="2">
								<position x="147" y="84"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_StdGateway</expression>
							</inVariable>
							<outVariable localId="32" width="20" height="2">
								<position x="206" y="84"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="43" formalParameter="arrNewGateway"/>
								</connectionPointIn>
								<expression>arrWeb_StdGateway</expression>
							</outVariable>
							<inVariable localId="33" width="17" height="2">
								<position x="150" y="88"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>xIP_ConfigSaved</expression>
							</inVariable>
							<outVariable localId="34" width="17" height="2">
								<position x="206" y="88"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="43" formalParameter="xIPConfigSaved"/>
								</connectionPointIn>
								<expression>xIP_ConfigSaved</expression>
							</outVariable>
							<block width="35" height="32" typeName="TB_Set_IP_Adress_01" instanceName="TB_Set_IP_Adress_01_1" localId="43">
								<position x="169" y="65"/>
								<inputVariables>
									<variable formalParameter="xSetIP_Address" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="122"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xRead" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="99"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="arrNewIPAdress" dataType="TB_ARR_B_1_4">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="27"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="39" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrNewSubnetMask" dataType="TB_ARR_B_1_4">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="29"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="39" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrNewGateway" dataType="TB_ARR_B_1_4">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="31"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="39" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xIPConfigSaved" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="33"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="39" y="24"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="37" y="28"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="44" width="18" height="2">
								<position x="206" y="92"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="43" formalParameter="strDiag"/>
								</connectionPointIn>
								<expression>strDiagIP_Address</expression>
							</outVariable>
							<block width="23" height="32" typeName="SetClock_V1_00" instanceName="SetClock_V1_00_1" localId="57">
								<position x="93" y="65"/>
								<inputVariables>
									<variable formalParameter="xSetTime" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="58"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iDay" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="87"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iMonth" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="88"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iYear" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="89"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iHours" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="90"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iMinutes" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="91"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSeconds" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="92"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="xDone" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="25" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xError" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="25" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="wDiagCode" dataType="WORD" hideable="true">
										<connectionPointOut>
											<relPosition x="25" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="wAddDiagCode" dataType="WORD" hideable="true">
										<connectionPointOut>
											<relPosition x="25" y="16"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="58" width="16" height="2">
								<position x="75" y="68"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>xWeb_SetTime</expression>
							</inVariable>
							<inVariable localId="59" width="11" height="2">
								<position x="82" y="43"/>
								<connectionPointOut>
									<relPosition x="11" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Day</expression>
							</inVariable>
							<inVariable localId="60" width="13" height="2">
								<position x="80" y="39"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Month</expression>
							</inVariable>
							<inVariable localId="61" width="12" height="2">
								<position x="81" y="35"/>
								<connectionPointOut>
									<relPosition x="12" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Year</expression>
							</inVariable>
							<inVariable localId="62" width="13" height="2">
								<position x="80" y="47"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Hours</expression>
							</inVariable>
							<inVariable localId="63" width="14" height="2">
								<position x="79" y="51"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Minutes</expression>
							</inVariable>
							<inVariable localId="64" width="15" height="2">
								<position x="78" y="55"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Seconds</expression>
							</inVariable>
							<outVariable localId="65" width="14" height="2">
								<position x="122" y="123"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="xPowerSupplyIn"/>
								</connectionPointIn>
								<expression>xWeb_PS_In</expression>
							</outVariable>
							<outVariable localId="66" width="16" height="2">
								<position x="122" y="127"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="xPowerSupplyMain"/>
								</connectionPointIn>
								<expression>xWeb_PS_Main</expression>
							</outVariable>
							<outVariable localId="67" width="15" height="2">
								<position x="122" y="131"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="xPowerSupplyOut"/>
								</connectionPointIn>
								<expression>xWeb_PS_Out</expression>
							</outVariable>
							<inVariable localId="68" width="6" height="2">
								<position x="83" y="119"/>
								<connectionPointOut>
									<relPosition x="6" y="1"/>
								</connectionPointOut>
								<expression>true</expression>
							</inVariable>
							<outVariable localId="69" width="21" height="2">
								<position x="122" y="135"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="xCF_CardInside"/>
								</connectionPointIn>
								<expression>xWeb_CF_CardMissing</expression>
							</outVariable>
							<outVariable localId="70" width="20" height="2">
								<position x="122" y="139"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="strConfigName"/>
								</connectionPointIn>
								<expression>strWeb_ConfigName</expression>
							</outVariable>
							<outVariable localId="71" width="23" height="2">
								<position x="122" y="143"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="dwBootProjectCRC"/>
								</connectionPointIn>
								<expression>dwWeb_BootProjectCRC</expression>
							</outVariable>
							<outVariable localId="72" width="23" height="2">
								<position x="122" y="147"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="dwRamProjectCRC"/>
								</connectionPointIn>
								<expression>dwWeb_RamProjectCRC</expression>
							</outVariable>
							<outVariable localId="73" width="24" height="2">
								<position x="122" y="151"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="strProjectName"/>
								</connectionPointIn>
								<expression>strWeb_PLC_ProjectName</expression>
							</outVariable>
							<outVariable localId="74" width="25" height="2">
								<position x="122" y="155"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="xRamProjectAvailable"/>
								</connectionPointIn>
								<expression>xWeb_RamProjectAvailable</expression>
							</outVariable>
							<outVariable localId="75" width="25" height="2">
								<position x="122" y="159"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="151" formalParameter="xBootProjectAvailable"/>
								</connectionPointIn>
								<expression>xWeb_BootProjectAvailable</expression>
							</outVariable>
							<block width="18" height="32" typeName="FB_HelpClock_01" instanceName="FB_HelpClock_01_1" localId="85">
								<position x="95" y="28"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="86"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="iYear" dataType="INT">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="61"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="22" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iMonth" dataType="INT">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="60"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="22" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iDay" dataType="INT">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="59"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="22" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iHour" dataType="INT">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="62"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="22" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iMinutes" dataType="INT">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="63"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="22" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iSeconds" dataType="INT">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="64"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="22" y="28"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="20" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="86" width="6" height="2">
								<position x="87" y="31"/>
								<connectionPointOut>
									<relPosition x="6" y="1"/>
								</connectionPointOut>
								<expression>true</expression>
							</inVariable>
							<inVariable localId="87" width="11" height="2">
								<position x="80" y="72"/>
								<connectionPointOut>
									<relPosition x="11" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Day</expression>
							</inVariable>
							<inVariable localId="88" width="13" height="2">
								<position x="78" y="76"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Month</expression>
							</inVariable>
							<inVariable localId="89" width="12" height="2">
								<position x="79" y="80"/>
								<connectionPointOut>
									<relPosition x="12" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Year</expression>
							</inVariable>
							<inVariable localId="90" width="13" height="2">
								<position x="78" y="84"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Hours</expression>
							</inVariable>
							<inVariable localId="91" width="14" height="2">
								<position x="77" y="88"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Minutes</expression>
							</inVariable>
							<inVariable localId="92" width="15" height="2">
								<position x="76" y="92"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>iWeb_Seconds</expression>
							</inVariable>
							<outVariable localId="93" width="11" height="2">
								<position x="115" y="43"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="85" formalParameter="iDay"/>
								</connectionPointIn>
								<expression>iWeb_Day</expression>
							</outVariable>
							<outVariable localId="94" width="13" height="2">
								<position x="115" y="39"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="85" formalParameter="iMonth"/>
								</connectionPointIn>
								<expression>iWeb_Month</expression>
							</outVariable>
							<outVariable localId="95" width="12" height="2">
								<position x="115" y="35"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="85" formalParameter="iYear"/>
								</connectionPointIn>
								<expression>iWeb_Year</expression>
							</outVariable>
							<outVariable localId="96" width="13" height="2">
								<position x="115" y="47"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="85" formalParameter="iHour"/>
								</connectionPointIn>
								<expression>iWeb_Hours</expression>
							</outVariable>
							<outVariable localId="97" width="14" height="2">
								<position x="115" y="51"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="85" formalParameter="iMinutes"/>
								</connectionPointIn>
								<expression>iWeb_Minutes</expression>
							</outVariable>
							<outVariable localId="98" width="15" height="2">
								<position x="115" y="55"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="85" formalParameter="iSeconds"/>
								</connectionPointIn>
								<expression>iWeb_Seconds</expression>
							</outVariable>
							<inVariable localId="99" width="8" height="2">
								<position x="159" y="72"/>
								<connectionPointOut>
									<relPosition x="8" y="1"/>
								</connectionPointOut>
								<expression>xRead</expression>
							</inVariable>
							<inVariable localId="100" width="19" height="2">
								<position x="4" y="131"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>strWeb_EditorName</expression>
							</inVariable>
							<inVariable localId="101" width="18" height="2">
								<position x="5" y="135"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>strWeb_EditorPsw</expression>
							</inVariable>
							<inVariable localId="102" width="20" height="2">
								<position x="3" y="139"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>strWeb_AdminName</expression>
							</inVariable>
							<inVariable localId="103" width="18" height="2">
								<position x="5" y="143"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>strWeb_AdminPsw</expression>
							</inVariable>
							<inVariable localId="104" width="21" height="2">
								<position x="2" y="147"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>strWeb_SAdminName</expression>
							</inVariable>
							<inVariable localId="105" width="19" height="2">
								<position x="4" y="151"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>strWeb_SAdminPsw</expression>
							</inVariable>
							<inVariable localId="106" width="23" height="2">
								<position x="142" y="55"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>udtNetworkConfiguration</expression>
							</inVariable>
							<inVariable localId="107" width="6" height="2">
								<position x="159" y="31"/>
								<connectionPointOut>
									<relPosition x="6" y="1"/>
								</connectionPointOut>
								<expression>true</expression>
							</inVariable>
							<inVariable localId="108" width="15" height="2">
								<position x="150" y="39"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>xWeb_TakeIP</expression>
							</inVariable>
							<outVariable localId="109" width="15" height="2">
								<position x="208" y="39"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="161" formalParameter="xTakeIP"/>
								</connectionPointIn>
								<expression>xWeb_TakeIP</expression>
							</outVariable>
							<outVariable localId="110" width="19" height="2">
								<position x="208" y="43"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="161" formalParameter="arrIP_Address"/>
								</connectionPointIn>
								<expression>arrWeb_IP_Address</expression>
							</outVariable>
							<outVariable localId="111" width="20" height="2">
								<position x="208" y="47"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="161" formalParameter="arrSubnetMask"/>
								</connectionPointIn>
								<expression>arrWeb_SubnetMask</expression>
							</outVariable>
							<outVariable localId="112" width="20" height="2">
								<position x="208" y="51"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="161" formalParameter="arrStdGateway"/>
								</connectionPointIn>
								<expression>arrWeb_StdGateway</expression>
							</outVariable>
							<inVariable localId="113" width="19" height="2">
								<position x="146" y="43"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_IP_Address</expression>
							</inVariable>
							<inVariable localId="114" width="20" height="2">
								<position x="145" y="47"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_SubnetMask</expression>
							</inVariable>
							<inVariable localId="115" width="20" height="2">
								<position x="145" y="51"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_StdGateway</expression>
							</inVariable>
							<block width="8" height="12" typeName="OR" localId="119">
								<position x="248" y="32"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="161" formalParameter="xSetIP">
												<position x="246" y="36" pathnode="false"/>
												<position x="208" y="36" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="120"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OR" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="120" width="21" height="2">
								<position x="225" y="39"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>xWeb_SetIP_Address</expression>
							</inVariable>
							<outVariable localId="121" width="23" height="2">
								<position x="208" y="55"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="161" formalParameter="udtNetworkParameter"/>
								</connectionPointIn>
								<expression>udtNetworkConfiguration</expression>
							</outVariable>
							<inVariable localId="122" width="15" height="2">
								<position x="152" y="68"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>xWeb_Restart</expression>
							</inVariable>
							<block width="13" height="12" typeName="RS" instanceName="RS_2" localId="127">
								<position x="260" y="32"/>
								<inputVariables>
									<variable formalParameter="SET" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="119" formalParameter="OR"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="RESET1" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="Q1" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="15" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="128" width="15" height="2">
								<position x="275" y="35"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="127" formalParameter="Q1"/>
								</connectionPointIn>
								<expression>xWeb_Restart</expression>
							</outVariable>
							<block width="12" height="20" typeName="TB_Date_01" instanceName="TB_Date_01_1" localId="134">
								<position x="34" y="30"/>
								<inputVariables/>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="strDate" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="14" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iSeconds" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="14" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iMinutes" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="14" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udiHours" dataType="UDINT" hideable="true">
										<connectionPointOut>
											<relPosition x="14" y="16"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="135" width="18" height="2">
								<position x="48" y="37"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="134" formalParameter="iSeconds"/>
								</connectionPointIn>
								<expression>iOperatingSeconds</expression>
							</outVariable>
							<outVariable localId="136" width="17" height="2">
								<position x="48" y="41"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="134" formalParameter="iMinutes"/>
								</connectionPointIn>
								<expression>iOperatingMinutes</expression>
							</outVariable>
							<outVariable localId="137" width="18" height="2">
								<position x="48" y="45"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="134" formalParameter="udiHours"/>
								</connectionPointIn>
								<expression>udiOperatingHours</expression>
							</outVariable>
							<block width="29" height="48" typeName="FB_PLC_Diag_01" instanceName="FB_PLC_Diag_01_1" localId="151">
								<position x="91" y="116"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="68"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xPowerSupplyIn" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xPowerSupplyMain" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xPowerSupplyOut" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xCF_CardInside" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strConfigName" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="dwBootProjectCRC" dataType="DWORD" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="28"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="dwRamProjectCRC" dataType="DWORD" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="32"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strProjectName" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="36"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xRamProjectAvailable" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xBootProjectAvailable" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="31" y="44"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<block width="39" height="32" typeName="FB_HelpSetIP_01" instanceName="FB_HelpSetIP_01_1" localId="161">
								<position x="167" y="28"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="107"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="xTakeIP" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="108"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="43" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrIP_Address" dataType="TB_ARR_B_1_4">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="113"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="43" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrSubnetMask" dataType="TB_ARR_B_1_4">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="114"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="43" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrStdGateway" dataType="TB_ARR_B_1_4">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="115"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="43" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtNetworkParameter" dataType="udtNetwork">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="106"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="43" y="28"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="41" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xSetIP" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="41" y="8"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<comment localId="162" width="43" height="4">
								<position x="22" y="21"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Time / Date and Operating hours</p>
									</html>
								</content>
							</comment>
							<comment localId="163" width="24" height="4">
								<position x="92" y="21"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Set system time</p>
									</html>
								</content>
							</comment>
							<comment localId="164" width="31" height="8">
								<position x="170" y="15"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Set controller IP settings<br/>EPO-IS-268-520</p>
									</html>
								</content>
							</comment>
							<comment localId="165" width="32" height="8">
								<position x="26" y="104"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">User management<br/>EPO-IS-268-513 + 514</p>
									</html>
								</content>
							</comment>
							<block width="22" height="16" typeName="TB_PN_Device_01" instanceName="TB_PN_Device_01_1" localId="173">
								<position x="178" y="120"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="174"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xSetPN_Device" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="189"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="24" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xDone" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="24" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="24" y="12"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="174" width="6" height="2">
								<position x="170" y="123"/>
								<connectionPointOut>
									<relPosition x="6" y="1"/>
								</connectionPointOut>
								<expression>true</expression>
							</inVariable>
							<comment localId="175" width="25" height="4">
								<position x="93" y="109"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Monitor contoller</p>
									</html>
								</content>
							</comment>
							<comment localId="176" width="42" height="4">
								<position x="166" y="109"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Activate PN IO Device function</p>
									</html>
								</content>
							</comment>
							<inVariable localId="177" width="32" height="2">
								<position x="19" y="98"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>COP_DIAG_STATUS_REG_FC_RUN</expression>
							</inVariable>
							<block width="8" height="12" typeName="OR" localId="181">
								<position x="53" y="91"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="182"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" negated="true" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="177"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OR" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="182" width="15" height="2">
								<position x="36" y="94"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>xWeb_LogOut</expression>
							</inVariable>
							<outVariable localId="188" width="15" height="2">
								<position x="202" y="123"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="173" formalParameter="xActive"/>
								</connectionPointIn>
								<expression>xSetPN_Device</expression>
							</outVariable>
							<inVariable localId="189" width="15" height="2">
								<position x="161" y="127"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>xSetPN_Device</expression>
							</inVariable>
							<inVariable localId="190" width="19" height="2">
								<position x="233" y="76"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_IP_Address</expression>
							</inVariable>
							<inVariable localId="191" width="20" height="2">
								<position x="232" y="80"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_SubnetMask</expression>
							</inVariable>
							<inVariable localId="192" width="20" height="2">
								<position x="232" y="84"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_StdGateway</expression>
							</inVariable>
							<outVariable localId="193" width="17" height="2">
								<position x="252" y="76"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="190"/>
								</connectionPointIn>
								<expression>arrG_IP_Address</expression>
							</outVariable>
							<outVariable localId="194" width="17" height="2">
								<position x="252" y="80"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="191"/>
								</connectionPointIn>
								<expression>arrG_SubnetMask</expression>
							</outVariable>
							<outVariable localId="195" width="17" height="2">
								<position x="252" y="84"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="192"/>
								</connectionPointIn>
								<expression>arrG_StdGateway</expression>
							</outVariable>
						</worksheet>
						<worksheet name="InterbusStartup" SizeX="400" SizeY="400">
							<inVariable localId="0" width="12" height="2">
								<position x="60" y="20"/>
								<connectionPointOut>
									<relPosition x="12" y="1"/>
								</connectionPointOut>
								<expression>xActivateIB</expression>
							</inVariable>
							<inVariable localId="1" width="12" height="2">
								<position x="60" y="32"/>
								<connectionPointOut>
									<relPosition x="12" y="1"/>
								</connectionPointOut>
								<expression>arrInputPD</expression>
							</inVariable>
							<outVariable localId="2" width="13" height="2">
								<position x="112" y="40"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="133" formalParameter="arrOutputPD"/>
								</connectionPointIn>
								<expression>arrOutputPD</expression>
							</outVariable>
							<inVariable localId="3" width="19" height="2">
								<position x="53" y="56"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>arrIB_Configuration</expression>
							</inVariable>
							<outVariable localId="4" width="19" height="2">
								<position x="112" y="56"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="133" formalParameter="arrIB_Configuration"/>
								</connectionPointIn>
								<expression>arrIB_Configuration</expression>
							</outVariable>
							<inVariable localId="5" width="13" height="2">
								<position x="59" y="60"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>arrLumgates</expression>
							</inVariable>
							<outVariable localId="6" width="13" height="2">
								<position x="112" y="60"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="133" formalParameter="arrLumgates"/>
								</connectionPointIn>
								<expression>arrLumgates</expression>
							</outVariable>
							<inVariable localId="7" width="13" height="2">
								<position x="165" y="30"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>arrLumgates</expression>
							</inVariable>
							<outVariable localId="8" width="19" height="2">
								<position x="228" y="142"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="arrIB_Configuration"/>
								</connectionPointIn>
								<expression>arrIB_Configuration</expression>
							</outVariable>
							<inVariable localId="9" width="19" height="2">
								<position x="165" y="142"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>arrIB_Configuration</expression>
							</inVariable>
							<block width="13" height="12" typeName="RS" instanceName="RS_1" localId="14">
								<position x="138" y="17"/>
								<inputVariables>
									<variable formalParameter="SET" dataType="BOOL" invertable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="133" formalParameter="xDone">
												<position x="136" y="21" pathnode="false"/>
												<position x="128" y="21" pathnode="false"/>
												<position x="128" y="23" pathnode="false"/>
												<position x="123" y="23" pathnode="false"/>
												<position x="123" y="25" pathnode="false"/>
												<position x="112" y="25" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="RESET1" negated="true" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="133" formalParameter="xActive">
												<position x="136" y="25" pathnode="false"/>
												<position x="124" y="25" pathnode="false"/>
												<position x="124" y="21" pathnode="false"/>
												<position x="112" y="21" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="Q1" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="15" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="15" width="16" height="2">
								<position x="228" y="138"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="arrAnalogInput"/>
								</connectionPointIn>
								<expression>arrAnalogValues</expression>
							</outVariable>
							<outVariable localId="16" width="13" height="2">
								<position x="235" y="30"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="106" formalParameter="arrLumgates"/>
								</connectionPointIn>
								<expression>arrLumgates</expression>
							</outVariable>
							<outVariable localId="17" width="15" height="2">
								<position x="235" y="42"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="106" formalParameter="udtScenarioMode"/>
								</connectionPointIn>
								<expression>udtSceneMode</expression>
							</outVariable>
							<inVariable localId="18" width="15" height="2">
								<position x="163" y="42"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>udtSceneMode</expression>
							</inVariable>
							<outVariable localId="19" width="17" height="2">
								<position x="112" y="36"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="133" formalParameter="strDiag"/>
								</connectionPointIn>
								<expression>strDiagIB_Startup</expression>
							</outVariable>
							<outVariable localId="20" width="23" height="2">
								<position x="228" y="134"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="arrAnalogAverageValues"/>
								</connectionPointIn>
								<expression>arrAnalogAvarageValues</expression>
							</outVariable>
							<inVariable localId="21" width="22" height="2">
								<position x="156" y="34"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[1]</expression>
							</inVariable>
							<outVariable localId="22" width="22" height="2">
								<position x="235" y="34"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="106" formalParameter="udtLevelConfigurationL20_1"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration[1]</expression>
							</outVariable>
							<outVariable localId="23" width="25" height="2">
								<position x="235" y="38"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="106" formalParameter="arrScenarioConfigurationL20_1"/>
								</connectionPointIn>
								<expression>arrScenarioConfiguration[1]</expression>
							</outVariable>
							<inVariable localId="24" width="25" height="2">
								<position x="153" y="38"/>
								<connectionPointOut>
									<relPosition x="25" y="1"/>
								</connectionPointOut>
								<expression>arrScenarioConfiguration[1]</expression>
							</inVariable>
							<outVariable localId="25" width="17" height="2">
								<position x="228" y="102"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="xPreAlarm"/>
								</connectionPointIn>
								<expression>xAnalogPreAlarm</expression>
							</outVariable>
							<outVariable localId="26" width="14" height="2">
								<position x="228" y="98"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="xAlarm"/>
								</connectionPointIn>
								<expression>xAnalogAlarm</expression>
							</outVariable>
							<outVariable localId="27" width="14" height="2">
								<position x="228" y="110"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="strDiag"/>
								</connectionPointIn>
								<expression>strDiagAnalog</expression>
							</outVariable>
							<outVariable localId="28" width="21" height="2">
								<position x="228" y="118"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="rSelectedValue1"/>
								</connectionPointIn>
								<expression>rWeb_SelectedValue1</expression>
							</outVariable>
							<outVariable localId="29" width="21" height="2">
								<position x="228" y="122"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="rSelectedValue2"/>
								</connectionPointIn>
								<expression>rWeb_SelectedValue2</expression>
							</outVariable>
							<outVariable localId="30" width="21" height="2">
								<position x="228" y="126"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="rSelectedValue3"/>
								</connectionPointIn>
								<expression>rWeb_SelectedValue3</expression>
							</outVariable>
							<outVariable localId="31" width="21" height="2">
								<position x="228" y="130"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="rSelectedValue4"/>
								</connectionPointIn>
								<expression>rWeb_SelectedValue4</expression>
							</outVariable>
							<inVariable localId="32" width="20" height="2">
								<position x="164" y="98"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ConfirmAlarm</expression>
							</inVariable>
							<inVariable localId="33" width="32" height="2">
								<position x="40" y="24"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>MASTER_DIAG_STATUS_REG_RUN</expression>
							</inVariable>
							<outVariable localId="34" width="18" height="2">
								<position x="112" y="32"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="133" formalParameter="xPreAlarm"/>
								</connectionPointIn>
								<expression>xInterbusPreAlarm</expression>
							</outVariable>
							<outVariable localId="35" width="8" height="2">
								<position x="98" y="93"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="39" formalParameter="Q"/>
								</connectionPointIn>
								<expression>xRead</expression>
							</outVariable>
							<block width="8" height="8" typeName="R_TRIG" instanceName="R_TRIG_2" localId="39">
								<position x="88" y="90"/>
								<inputVariables>
									<variable formalParameter="CLK" dataType="BOOL" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="40"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="Q" dataType="BOOL" hideable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="40" width="32" height="2">
								<position x="54" y="93"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>MASTER_DIAG_STATUS_REG_RUN</expression>
							</inVariable>
							<outVariable localId="41" width="10" height="2">
								<position x="153" y="20"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="14" formalParameter="Q1"/>
								</connectionPointIn>
								<expression>xDoneIB</expression>
							</outVariable>
							<inVariable localId="42" width="10" height="2">
								<position x="174" y="90"/>
								<connectionPointOut>
									<relPosition x="10" y="1"/>
								</connectionPointOut>
								<expression>xDoneIB</expression>
							</inVariable>
							<inVariable localId="43" width="10" height="2">
								<position x="174" y="94"/>
								<connectionPointOut>
									<relPosition x="10" y="1"/>
								</connectionPointOut>
								<expression>xDoneIB</expression>
							</inVariable>
							<inVariable localId="44" width="18" height="2">
								<position x="54" y="64"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ReScanIBS</expression>
							</inVariable>
							<outVariable localId="45" width="18" height="2">
								<position x="112" y="64"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="133" formalParameter="xManualTrig"/>
								</connectionPointIn>
								<expression>xWeb_ReScanIBS</expression>
							</outVariable>
							<block width="8" height="12" typeName="AND" localId="49">
								<position x="22" y="25"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="50"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" negated="true" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="51"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OUT" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="50" width="10" height="2">
								<position x="10" y="28"/>
								<connectionPointOut>
									<relPosition x="10" y="1"/>
								</connectionPointOut>
								<expression>xDoneIB</expression>
							</inVariable>
							<inVariable localId="51" width="18" height="2">
								<position x="2" y="32"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>xInterbusPreAlarm</expression>
							</inVariable>
							<inVariable localId="52" width="14" height="2">
								<position x="170" y="146"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>udtL20Config</expression>
							</inVariable>
							<outVariable localId="53" width="14" height="2">
								<position x="228" y="146"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="udtL20Config"/>
								</connectionPointIn>
								<expression>udtL20Config</expression>
							</outVariable>
							<inVariable localId="54" width="16" height="2">
								<position x="168" y="138"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>arrAnalogValues</expression>
							</inVariable>
							<inVariable localId="55" width="32" height="2">
								<position x="152" y="102"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[1].iInputValue</expression>
							</inVariable>
							<inVariable localId="56" width="32" height="2">
								<position x="152" y="106"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[2].iInputValue</expression>
							</inVariable>
							<inVariable localId="57" width="32" height="2">
								<position x="152" y="110"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[3].iInputValue</expression>
							</inVariable>
							<inVariable localId="58" width="32" height="2">
								<position x="152" y="114"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[4].iInputValue</expression>
							</inVariable>
							<inVariable localId="59" width="35" height="2">
								<position x="149" y="150"/>
								<connectionPointOut>
									<relPosition x="35" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[1].diAverageTime</expression>
							</inVariable>
							<outVariable localId="60" width="35" height="2">
								<position x="228" y="150"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="diAverageTime"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration[1].diAverageTime</expression>
							</outVariable>
							<outVariable localId="61" width="13" height="2">
								<position x="228" y="114"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="86" formalParameter="xAnalogExist"/>
								</connectionPointIn>
								<expression>xAnalogExist</expression>
							</outVariable>
							<block width="40" height="68" typeName="FB_L20_AnalogInput_01" instanceName="FB_L20_AnalogInput_01_1" localId="86">
								<position x="186" y="87"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="42"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xActivateOutputData" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="43"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xConfirmAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="32"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectValue1" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="55"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectValue2" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="56"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectValue3" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="57"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectValue4" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="58"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="arrAnalogInput" dataType="arr_1_4_udtAnalogInput">
										<connectionPointIn>
											<relPosition x="-2" y="52"/>
											<connection refLocalId="54"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="44" y="52"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrIB_Configuration" dataType="ARR_IBS_CONF_ENTRIES_1_256">
										<connectionPointIn>
											<relPosition x="-2" y="56"/>
											<connection refLocalId="9"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="44" y="56"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtL20Config" dataType="udtL20Input">
										<connectionPointIn>
											<relPosition x="-2" y="60"/>
											<connection refLocalId="52"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="44" y="60"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="diAverageTime" dataType="DINT">
										<connectionPointIn>
											<relPosition x="-2" y="64"/>
											<connection refLocalId="59"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="44" y="64"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xDone" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xPreAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="wDiagCode" dataType="WORD" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xAnalogExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="28"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="rSelectedValue1" dataType="REAL" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="32"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="rSelectedValue2" dataType="REAL" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="36"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="rSelectedValue3" dataType="REAL" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="rSelectedValue4" dataType="REAL" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="44"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrAnalogAverageValues" dataType="arr_1_11_udtInput" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="48"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<comment localId="87" width="34" height="8">
								<position x="81" y="5"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Interbus connection<br/>EPO-IS-268 - 821 + 487</p>
									</html>
								</content>
							</comment>
							<comment localId="88" width="58" height="8">
								<position x="181" y="7"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Activate threshold table 1, config 1<br/>Activate grandully dimming and invers Relay 1</p>
									</html>
								</content>
							</comment>
							<comment localId="89" width="35" height="4">
								<position x="76" y="82"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Trigger to read IP settings</p>
									</html>
								</content>
							</comment>
							<comment localId="90" width="32" height="8">
								<position x="191" y="76"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Analog value handling<br/>EPO-IS-268-814 + 815</p>
									</html>
								</content>
							</comment>
							<inVariable localId="91" width="8" height="2">
								<position x="64" y="36"/>
								<connectionPointOut>
									<relPosition x="8" y="1"/>
								</connectionPointOut>
								<expression>iDelay</expression>
							</inVariable>
							<outVariable localId="92" width="15" height="2">
								<position x="112" y="44"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="133" formalParameter="iTotalDevices"/>
								</connectionPointIn>
								<expression>iWeb_TotalIBS</expression>
							</outVariable>
							<outVariable localId="93" width="14" height="2">
								<position x="112" y="48"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="133" formalParameter="iActDevice"/>
								</connectionPointIn>
								<expression>iWeb_ActIBS</expression>
							</outVariable>
							<outVariable localId="94" width="16" height="2">
								<position x="112" y="52"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="133" formalParameter="iIBS_State"/>
								</connectionPointIn>
								<expression>iWeb_IBS_State</expression>
							</outVariable>
							<block width="53" height="40" typeName="FB_InitScenes_01" instanceName="FB_InitScenes_01_1" localId="106">
								<position x="180" y="19"/>
								<inputVariables>
									<variable formalParameter="xAxtivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="113"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="arrLumgates" dataType="arr_1_240_udtLumgate">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="7"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="57" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLevelConfigurationL20_1" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="21"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="57" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrScenarioConfigurationL20_1" dataType="ARR_1_25_1_5_Int">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="24"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="57" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtScenarioMode" dataType="udtScene">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="18"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="57" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLevelConfigurationL20_2" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="107"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="57" y="28"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLevelConfigurationL20_3" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="108"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="57" y="32"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLevelConfigurationL20_4" dataType="udtL20Config">
										<connectionPointIn>
											<relPosition x="-2" y="36"/>
											<connection refLocalId="109"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="57" y="36"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="55" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xDone" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="55" y="8"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="107" width="22" height="2">
								<position x="156" y="46"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[2]</expression>
							</inVariable>
							<inVariable localId="108" width="22" height="2">
								<position x="156" y="50"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[3]</expression>
							</inVariable>
							<inVariable localId="109" width="22" height="2">
								<position x="156" y="54"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[4]</expression>
							</inVariable>
							<outVariable localId="110" width="22" height="2">
								<position x="235" y="46"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="106" formalParameter="udtLevelConfigurationL20_2"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration[2]</expression>
							</outVariable>
							<outVariable localId="111" width="22" height="2">
								<position x="235" y="50"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="106" formalParameter="udtLevelConfigurationL20_3"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration[3]</expression>
							</outVariable>
							<outVariable localId="112" width="22" height="2">
								<position x="235" y="54"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="106" formalParameter="udtLevelConfigurationL20_4"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration[4]</expression>
							</outVariable>
							<inVariable localId="113" width="12" height="2">
								<position x="166" y="22"/>
								<connectionPointOut>
									<relPosition x="12" y="1"/>
								</connectionPointOut>
								<expression>xActivateIB</expression>
							</inVariable>
							<block width="36" height="56" typeName="FB_InterbusStartup_01" instanceName="FB_InterbusStartup_01_1" localId="133">
								<position x="74" y="17"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="0"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInterbusRun" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="33"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xActivateOutputData" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="49" formalParameter="OUT">
												<position x="72" y="29" pathnode="false"/>
												<position x="32" y="29" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrInputPD" dataType="ARR_IBS_PD_DATA_B_1_512" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="1"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iDelay" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="91"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xLumgateType" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="52"/>
											<connection refLocalId="143"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="arrIB_Configuration" dataType="ARR_IBS_CONF_ENTRIES_1_256">
										<connectionPointIn>
											<relPosition x="-2" y="40"/>
											<connection refLocalId="3"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="40" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrLumgates" dataType="arr_1_240_udtLumgate">
										<connectionPointIn>
											<relPosition x="-2" y="44"/>
											<connection refLocalId="5"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="40" y="44"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xManualTrig" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="48"/>
											<connection refLocalId="44"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="40" y="48"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xDone" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xError" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xPreAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrOutputPD" dataType="ARR_IBS_PD_DATA_B_1_512" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iTotalDevices" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="28"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iActDevice" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="32"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iIBS_State" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="36"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="143" width="20" height="2">
								<position x="52" y="68"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_LumgateType</expression>
							</inVariable>
						</worksheet>
						<worksheet name="TCS" SizeX="400" SizeY="400">
							<outVariable localId="0" width="13" height="2">
								<position x="86" y="61"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="41" formalParameter="arrLumgates"/>
								</connectionPointIn>
								<expression>arrLumgates</expression>
							</outVariable>
							<outVariable localId="1" width="20" height="2">
								<position x="86" y="41"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="41" formalParameter="xDataValid"/>
								</connectionPointIn>
								<expression>xWeb_PN_DataValid</expression>
							</outVariable>
							<outVariable localId="2" width="21" height="2">
								<position x="86" y="29"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="41" formalParameter="xActive"/>
								</connectionPointIn>
								<expression>xWeb_TCS_PN_Active</expression>
							</outVariable>
							<outVariable localId="3" width="15" height="2">
								<position x="86" y="37"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="41" formalParameter="strDiag"/>
								</connectionPointIn>
								<expression>strDiagTCS_PN</expression>
							</outVariable>
							<inVariable localId="4" width="15" height="2">
								<position x="24" y="69"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>wSpezialScene</expression>
							</inVariable>
							<outVariable localId="5" width="15" height="2">
								<position x="86" y="69"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="41" formalParameter="wSpecialScenario"/>
								</connectionPointIn>
								<expression>wSpezialScene</expression>
							</outVariable>
							<inVariable localId="6" width="15" height="2">
								<position x="24" y="65"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>udtSceneMode</expression>
							</inVariable>
							<outVariable localId="7" width="15" height="2">
								<position x="86" y="65"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="41" formalParameter="udtScenarioMode"/>
								</connectionPointIn>
								<expression>udtSceneMode</expression>
							</outVariable>
							<inVariable localId="8" width="16" height="2">
								<position x="23" y="37"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>arrAnalogValues</expression>
							</inVariable>
							<inVariable localId="9" width="15" height="2">
								<position x="24" y="41"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>udtWebMainLG</expression>
							</inVariable>
							<inVariable localId="10" width="21" height="2">
								<position x="18" y="45"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>arrSceneHoureCounter</expression>
							</inVariable>
							<outVariable localId="11" width="23" height="2">
								<position x="86" y="73"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="41" formalParameter="udtNetworkConfiguration"/>
								</connectionPointIn>
								<expression>udtNetworkConfiguration</expression>
							</outVariable>
							<inVariable localId="12" width="23" height="2">
								<position x="16" y="73"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>udtNetworkConfiguration</expression>
							</inVariable>
							<inVariable localId="13" width="18" height="2">
								<position x="21" y="49"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>iOperatingSeconds</expression>
							</inVariable>
							<inVariable localId="14" width="17" height="2">
								<position x="22" y="53"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>iOperatingMinutes</expression>
							</inVariable>
							<inVariable localId="15" width="18" height="2">
								<position x="21" y="57"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>udiOperatingHours</expression>
							</inVariable>
							<outVariable localId="16" width="14" height="2">
								<position x="86" y="77"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="41" formalParameter="udtL20Config"/>
								</connectionPointIn>
								<expression>udtL20Config</expression>
							</outVariable>
							<inVariable localId="17" width="14" height="2">
								<position x="25" y="77"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>udtL20Config</expression>
							</inVariable>
							<inVariable localId="18" width="22" height="2">
								<position x="17" y="29"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>xActivateTCS_Interface</expression>
							</inVariable>
							<outVariable localId="19" width="18" height="2">
								<position x="86" y="33"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="41" formalParameter="xError"/>
								</connectionPointIn>
								<expression>xWeb_TCS_Alarm</expression>
							</outVariable>
							<inVariable localId="20" width="13" height="2">
								<position x="26" y="61"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>arrLumgates</expression>
							</inVariable>
							<comment localId="21" width="45" height="12">
								<position x="42" y="9"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Communication with upper systems<br/>EPO-IS-268-831 - 834<br/>EPO-IS-268-503</p>
									</html>
								</content>
							</comment>
							<inVariable localId="22" width="20" height="2">
								<position x="19" y="33"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ConfirmAlarm</expression>
							</inVariable>
							<block width="43" height="56" typeName="FB_TCS_Communication_01" instanceName="FB_TCS_Communication_01_1" localId="41">
								<position x="41" y="26"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="18"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xConfirm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="22"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrInputsL20" dataType="arr_1_4_udtAnalogInput" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="8"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="udtLumgateMain" dataType="udtWebLG_Main" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="9"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrScenarioHourCounter" dataType="arr_1_50_udtLumgatePart1" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="10"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iOperatingSeconds" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="13"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iOperatingMinutes" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="14"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="udiOperatingHours" dataType="UDINT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="15"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="arrLumgates" dataType="arr_1_240_udtLumgate">
										<connectionPointIn>
											<relPosition x="-2" y="36"/>
											<connection refLocalId="20"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="36"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtScenarioMode" dataType="udtScene">
										<connectionPointIn>
											<relPosition x="-2" y="40"/>
											<connection refLocalId="6"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="wSpecialScenario" dataType="WORD">
										<connectionPointIn>
											<relPosition x="-2" y="44"/>
											<connection refLocalId="4"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="44"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtNetworkConfiguration" dataType="udtNetwork">
										<connectionPointIn>
											<relPosition x="-2" y="48"/>
											<connection refLocalId="12"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="48"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtL20Config" dataType="udtL20Input">
										<connectionPointIn>
											<relPosition x="-2" y="52"/>
											<connection refLocalId="17"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="52"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="45" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xError" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="45" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="45" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xDataValid" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="45" y="16"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
						</worksheet>
						<worksheet name="Lumgates" SizeX="400" SizeY="400">
							<outVariable localId="1" width="21" height="2">
								<position x="138" y="109"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="136" formalParameter="arrScenarioHourCounter"/>
								</connectionPointIn>
								<expression>arrSceneHoureCounter</expression>
							</outVariable>
							<inVariable localId="2" width="21" height="2">
								<position x="70" y="109"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>arrSceneHoureCounter</expression>
							</inVariable>
							<outVariable localId="4" width="13" height="2">
								<position x="139" y="207"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="arrLumgates"/>
								</connectionPointIn>
								<expression>arrLumgates</expression>
							</outVariable>
							<inVariable localId="5" width="13" height="2">
								<position x="82" y="207"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>arrLumgates</expression>
							</inVariable>
							<inVariable localId="6" width="15" height="2">
								<position x="80" y="203"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>udtSceneMode</expression>
							</inVariable>
							<outVariable localId="7" width="15" height="2">
								<position x="139" y="203"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="udtScenarioMode"/>
								</connectionPointIn>
								<expression>udtSceneMode</expression>
							</outVariable>
							<inVariable localId="8" width="23" height="2">
								<position x="68" y="68"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>arrScenarioConfiguration</expression>
							</inVariable>
							<outVariable localId="9" width="20" height="2">
								<position x="138" y="64"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="131" formalParameter="arrLevelConfiguration"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration</expression>
							</outVariable>
							<inVariable localId="10" width="20" height="2">
								<position x="71" y="64"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration</expression>
							</inVariable>
							<outVariable localId="11" width="23" height="2">
								<position x="138" y="68"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="131" formalParameter="arrScenarioConfiguration"/>
								</connectionPointIn>
								<expression>arrScenarioConfiguration</expression>
							</outVariable>
							<block width="13" height="8" typeName="TB_Toggle_01" instanceName="TB_Toggle_01_1" localId="15">
								<position x="7" y="33"/>
								<inputVariables/>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="xToggle" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="15" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<block width="8" height="8" typeName="R_TRIG" instanceName="R_TRIG_1" localId="16">
								<position x="46" y="33"/>
								<inputVariables>
									<variable formalParameter="CLK" dataType="BOOL" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="24"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="Q" dataType="BOOL" hideable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="17" width="28" height="2">
								<position x="63" y="105"/>
								<connectionPointOut>
									<relPosition x="28" y="1"/>
								</connectionPointOut>
								<expression>udtSceneMode.arrActualScene</expression>
							</inVariable>
							<outVariable localId="18" width="21" height="2">
								<position x="138" y="60"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="131" formalParameter="arrSceneHourCounter"/>
								</connectionPointIn>
								<expression>arrSceneHoureCounter</expression>
							</outVariable>
							<inVariable localId="19" width="21" height="2">
								<position x="70" y="60"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>arrSceneHoureCounter</expression>
							</inVariable>
							<outVariable localId="20" width="15" height="2">
								<position x="138" y="56"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="131" formalParameter="udtSceneMode"/>
								</connectionPointIn>
								<expression>udtSceneMode</expression>
							</outVariable>
							<inVariable localId="21" width="15" height="2">
								<position x="76" y="56"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>udtSceneMode</expression>
							</inVariable>
							<outVariable localId="22" width="17" height="2">
								<position x="139" y="147"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="strDiag"/>
								</connectionPointIn>
								<expression>strDiag_Lumgate</expression>
							</outVariable>
							<outVariable localId="23" width="10" height="2">
								<position x="22" y="36"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="15" formalParameter="xToggle"/>
								</connectionPointIn>
								<expression>xToggle</expression>
							</outVariable>
							<inVariable localId="24" width="10" height="2">
								<position x="34" y="36"/>
								<connectionPointOut>
									<relPosition x="10" y="1"/>
								</connectionPointOut>
								<expression>xToggle</expression>
							</inVariable>
							<outVariable localId="25" width="16" height="2">
								<position x="139" y="139"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="xAlarm"/>
								</connectionPointIn>
								<expression>xLumgateAlarm</expression>
							</outVariable>
							<outVariable localId="26" width="18" height="2">
								<position x="139" y="143"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="xPreAlarm"/>
								</connectionPointIn>
								<expression>xLumgatePreAlarm</expression>
							</outVariable>
							<inVariable localId="27" width="20" height="2">
								<position x="75" y="143"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ConfirmAlarm</expression>
							</inVariable>
							<outVariable localId="28" width="21" height="2">
								<position x="205" y="151"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="37" formalParameter="ADD"/>
								</connectionPointIn>
								<expression>iWeb_ErrorLumgateNo</expression>
							</outVariable>
							<inVariable localId="29" width="18" height="2">
								<position x="156" y="155"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>iWeb_LumgateSite</expression>
							</inVariable>
							<block width="8" height="12" typeName="SUB" localId="33">
								<position x="176" y="148"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_NUM" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="211" formalParameter="iLumgate">
												<position x="174" y="152" pathnode="false"/>
												<position x="139" y="152" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_NUM" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="29"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="SUB" hidden="true" dataType="ANY_NUM" hideable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<block width="8" height="12" typeName="ADD" localId="37">
								<position x="195" y="148"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_NUM" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="33" formalParameter="SUB">
												<position x="193" y="152" pathnode="false"/>
												<position x="186" y="152" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_NUM" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="38"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="ADD" hidden="true" dataType="ANY_NUM">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="38" width="4" height="2">
								<position x="189" y="155"/>
								<connectionPointOut>
									<relPosition x="4" y="1"/>
								</connectionPointOut>
								<expression>1</expression>
							</inVariable>
							<outVariable localId="39" width="13" height="2">
								<position x="139" y="159"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="xErrorRBT1"/>
								</connectionPointIn>
								<expression>xWeb_RBT1</expression>
							</outVariable>
							<outVariable localId="40" width="13" height="2">
								<position x="139" y="163"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="xErrorRBT2"/>
								</connectionPointIn>
								<expression>xWeb_RBT2</expression>
							</outVariable>
							<outVariable localId="41" width="13" height="2">
								<position x="139" y="167"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="xErrorRBT3"/>
								</connectionPointIn>
								<expression>xWeb_RBT3</expression>
							</outVariable>
							<outVariable localId="42" width="13" height="2">
								<position x="139" y="171"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="xErrorRBT4"/>
								</connectionPointIn>
								<expression>xWeb_RBT4</expression>
							</outVariable>
							<outVariable localId="43" width="13" height="2">
								<position x="139" y="175"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="iRBT1"/>
								</connectionPointIn>
								<expression>iWeb_RBT1</expression>
							</outVariable>
							<outVariable localId="44" width="13" height="2">
								<position x="139" y="179"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="iRBT2"/>
								</connectionPointIn>
								<expression>iWeb_RBT2</expression>
							</outVariable>
							<outVariable localId="45" width="13" height="2">
								<position x="139" y="183"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="iRBT3"/>
								</connectionPointIn>
								<expression>iWeb_RBT3</expression>
							</outVariable>
							<outVariable localId="46" width="13" height="2">
								<position x="139" y="187"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="iRBT4"/>
								</connectionPointIn>
								<expression>iWeb_RBT4</expression>
							</outVariable>
							<block width="8" height="12" typeName="ADD" localId="50">
								<position x="195" y="163"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_NUM" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="211" formalParameter="iRBT">
												<position x="193" y="167" pathnode="false"/>
												<position x="155" y="167" pathnode="false"/>
												<position x="155" y="156" pathnode="false"/>
												<position x="139" y="156" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_NUM" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="51"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="ADD" hidden="true" dataType="ANY_NUM">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="51" width="4" height="2">
								<position x="189" y="170"/>
								<connectionPointOut>
									<relPosition x="4" y="1"/>
								</connectionPointOut>
								<expression>1</expression>
							</inVariable>
							<outVariable localId="52" width="19" height="2">
								<position x="205" y="166"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="50" formalParameter="ADD"/>
								</connectionPointIn>
								<expression>iWeb_ErrorRBT_No</expression>
							</outVariable>
							<inVariable localId="53" width="23" height="2">
								<position x="68" y="32"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>arrAnalogAvarageValues</expression>
							</inVariable>
							<inVariable localId="54" width="15" height="2">
								<position x="227" y="59"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>udtSceneMode</expression>
							</inVariable>
							<outVariable localId="55" width="16" height="2">
								<position x="282" y="27"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="xPreAlarm"/>
								</connectionPointIn>
								<expression>xModePreAlarm</expression>
							</outVariable>
							<outVariable localId="56" width="13" height="2">
								<position x="282" y="35"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="xAlarm"/>
								</connectionPointIn>
								<expression>xModeAlarm</expression>
							</outVariable>
							<outVariable localId="57" width="13" height="2">
								<position x="282" y="31"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strDiag"/>
								</connectionPointIn>
								<expression>strDiagMode</expression>
							</outVariable>
							<inVariable localId="58" width="10" height="2">
								<position x="232" y="23"/>
								<connectionPointOut>
									<relPosition x="10" y="1"/>
								</connectionPointOut>
								<expression>xDoneIB</expression>
							</inVariable>
							<inVariable localId="59" width="19" height="2">
								<position x="223" y="31"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ManualMode</expression>
							</inVariable>
							<inVariable localId="60" width="18" height="2">
								<position x="224" y="43"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>iWeb_SelectSensor</expression>
							</inVariable>
							<inVariable localId="61" width="20" height="2">
								<position x="222" y="27"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ConfirmAlarm</expression>
							</inVariable>
							<inVariable localId="62" width="22" height="2">
								<position x="220" y="67"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ActivateTCS_PN</expression>
							</inVariable>
							<inVariable localId="63" width="20" height="2">
								<position x="75" y="211"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>iWeb_DimmingSpeed</expression>
							</inVariable>
							<outVariable localId="64" width="20" height="2">
								<position x="139" y="211"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="iDimmingSpeed"/>
								</connectionPointIn>
								<expression>iWeb_DimmingSpeed</expression>
							</outVariable>
							<inVariable localId="65" width="13" height="2">
								<position x="82" y="159"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>arrSegment</expression>
							</inVariable>
							<outVariable localId="66" width="24" height="2">
								<position x="139" y="191"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="arrAmountLumgates"/>
								</connectionPointIn>
								<expression>arrWeb_AmountLumgates</expression>
							</outVariable>
							<inVariable localId="67" width="15" height="2">
								<position x="80" y="151"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>wSpezialScene</expression>
							</inVariable>
							<inVariable localId="68" width="28" height="2">
								<position x="214" y="63"/>
								<connectionPointOut>
									<relPosition x="28" y="1"/>
								</connectionPointOut>
								<expression>udtNetworkConfiguration.iMode</expression>
							</inVariable>
							<inVariable localId="69" width="20" height="2">
								<position x="71" y="28"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_PN_DataValid</expression>
							</inVariable>
							<inVariable localId="70" width="32" height="2">
								<position x="59" y="40"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[1].iInputValue</expression>
							</inVariable>
							<inVariable localId="71" width="32" height="2">
								<position x="59" y="44"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[2].iInputValue</expression>
							</inVariable>
							<inVariable localId="72" width="32" height="2">
								<position x="59" y="48"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[3].iInputValue</expression>
							</inVariable>
							<inVariable localId="73" width="32" height="2">
								<position x="59" y="52"/>
								<connectionPointOut>
									<relPosition x="32" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration[4].iInputValue</expression>
							</inVariable>
							<inVariable localId="74" width="20" height="2">
								<position x="75" y="215"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_NextLumgate</expression>
							</inVariable>
							<outVariable localId="75" width="20" height="2">
								<position x="139" y="215"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="xNextDevice"/>
								</connectionPointIn>
								<expression>xWeb_NextLumgate</expression>
							</outVariable>
							<inVariable localId="76" width="16" height="2">
								<position x="79" y="155"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>iWeb_SelectRBT</expression>
							</inVariable>
							<outVariable localId="77" width="28" height="2">
								<position x="282" y="63"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="iInit"/>
								</connectionPointIn>
								<expression>udtNetworkConfiguration.iMode</expression>
							</outVariable>
							<outVariable localId="78" width="15" height="2">
								<position x="282" y="59"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="udtSceneMode"/>
								</connectionPointIn>
								<expression>udtSceneMode</expression>
							</outVariable>
							<outVariable localId="79" width="22" height="2">
								<position x="282" y="39"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="xActivateTCS_Interface"/>
								</connectionPointIn>
								<expression>xActivateTCS_Interface</expression>
							</outVariable>
							<outVariable localId="80" width="22" height="2">
								<position x="282" y="67"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="xActivateTCS"/>
								</connectionPointIn>
								<expression>xWeb_ActivateTCS_PN</expression>
							</outVariable>
							<outVariable localId="81" width="21" height="2">
								<position x="139" y="195"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="xUnexpectedLG_Count"/>
								</connectionPointIn>
								<expression>xWeb_UnexpectedLG</expression>
							</outVariable>
							<inVariable localId="82" width="21" height="2">
								<position x="176" y="66"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ChangedNetFile</expression>
							</inVariable>
							<inVariable localId="83" width="19" height="2">
								<position x="178" y="62"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ConfigFileNet</expression>
							</inVariable>
							<block width="8" height="12" typeName="OR" localId="87">
								<position x="199" y="59"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="83"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="82"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OR" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="88" width="20" height="2">
								<position x="222" y="51"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_PN_DataValid</expression>
							</inVariable>
							<outVariable localId="89" width="16" height="2">
								<position x="282" y="47"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="xModeOK"/>
								</connectionPointIn>
								<expression>xWeb_ModeOK</expression>
							</outVariable>
							<inVariable localId="90" width="14" height="2">
								<position x="183" y="23"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>xWeb_PS_In</expression>
							</inVariable>
							<inVariable localId="91" width="16" height="2">
								<position x="181" y="27"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>xWeb_PS_Main</expression>
							</inVariable>
							<inVariable localId="92" width="15" height="2">
								<position x="182" y="31"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>xWeb_PS_Out</expression>
							</inVariable>
							<inVariable localId="93" width="25" height="2">
								<position x="172" y="35"/>
								<connectionPointOut>
									<relPosition x="25" y="1"/>
								</connectionPointOut>
								<expression>xWeb_RamProjectAvailable</expression>
							</inVariable>
							<inVariable localId="94" width="25" height="2">
								<position x="172" y="39"/>
								<connectionPointOut>
									<relPosition x="25" y="1"/>
								</connectionPointOut>
								<expression>xWeb_BootProjectAvailable</expression>
							</inVariable>
							<inVariable localId="95" width="10" height="2">
								<position x="187" y="43"/>
								<connectionPointOut>
									<relPosition x="10" y="1"/>
								</connectionPointOut>
								<expression>xDoneIB</expression>
							</inVariable>
							<inVariable localId="96" width="13" height="2">
								<position x="184" y="51"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>xAnalogExist</expression>
							</inVariable>
							<block width="8" height="36" typeName="AND" localId="105">
								<position x="199" y="20"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="90"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="91"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN3" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="92"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN4" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="93"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN5" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="94"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN6" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="95"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN7" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="96"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN8" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="175" formalParameter="GT">
												<position x="197" y="48" pathnode="false"/>
												<position x="184" y="48" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OUT" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="107" width="10" height="2">
								<position x="282" y="43"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strMode"/>
								</connectionPointIn>
								<expression>strMode</expression>
							</outVariable>
							<inVariable localId="108" width="18" height="2">
								<position x="224" y="75"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ActivateMB</expression>
							</inVariable>
							<inVariable localId="109" width="13" height="2">
								<position x="229" y="35"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>xWeb_Partly</expression>
							</inVariable>
							<outVariable localId="110" width="18" height="2">
								<position x="282" y="75"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="xActivateMB"/>
								</connectionPointIn>
								<expression>xWeb_ActivateMB</expression>
							</outVariable>
							<inVariable localId="111" width="14" height="2">
								<position x="228" y="39"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>xComissioning</expression>
							</inVariable>
							<outVariable localId="112" width="15" height="2">
								<position x="139" y="199"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="211" formalParameter="iTotalLumgates"/>
								</connectionPointIn>
								<expression>iTotalLumgates</expression>
							</outVariable>
							<inVariable localId="113" width="12" height="2">
								<position x="79" y="24"/>
								<connectionPointOut>
									<relPosition x="12" y="1"/>
								</connectionPointOut>
								<expression>xActivateIB</expression>
							</inVariable>
							<inVariable localId="114" width="10" height="2">
								<position x="85" y="139"/>
								<connectionPointOut>
									<relPosition x="10" y="1"/>
								</connectionPointOut>
								<expression>xDoneIB</expression>
							</inVariable>
							<outVariable localId="115" width="13" height="2">
								<position x="282" y="71"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="arrLumgates"/>
								</connectionPointIn>
								<expression>arrLumgates</expression>
							</outVariable>
							<inVariable localId="116" width="13" height="2">
								<position x="229" y="71"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>arrLumgates</expression>
							</inVariable>
							<block width="43" height="52" typeName="FB_SelectScene_01" instanceName="FB_SelectScene_01_1" localId="131">
								<position x="93" y="21"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="113"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xDataMasterValid" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="69"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrAnalogValues" dataType="arr_1_11_udtInput" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="53"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xPulseSecond" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="16" formalParameter="Q">
												<position x="91" y="37" pathnode="false"/>
												<position x="58" y="37" pathnode="false"/>
												<position x="56" y="37" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectAnalogValue1" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="70"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectAnalogValue2" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="71"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectAnalogValue3" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="72"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectAnalogValue4" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="73"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="udtSceneMode" dataType="udtScene">
										<connectionPointIn>
											<relPosition x="-2" y="36"/>
											<connection refLocalId="21"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="36"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrSceneHourCounter" dataType="arr_1_50_udtLumgatePart1">
										<connectionPointIn>
											<relPosition x="-2" y="40"/>
											<connection refLocalId="19"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrLevelConfiguration" dataType="ARR_UDT_L20Config">
										<connectionPointIn>
											<relPosition x="-2" y="44"/>
											<connection refLocalId="10"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="44"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrScenarioConfiguration" dataType="ARR_I_1_4_1_25_1_5">
										<connectionPointIn>
											<relPosition x="-2" y="48"/>
											<connection refLocalId="8"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="48"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="45" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<block width="43" height="16" typeName="FB_SceneHourCounter_01" instanceName="FB_SceneHourCounter_01_1" localId="136">
								<position x="93" y="98"/>
								<inputVariables>
									<variable formalParameter="xPulseSecond" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="16" formalParameter="Q">
												<position x="91" y="102" pathnode="false"/>
												<position x="58" y="102" pathnode="false"/>
												<position x="58" y="37" pathnode="false"/>
												<position x="56" y="37" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrScenario" dataType="ARR_I_1_4" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="17"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="arrScenarioHourCounter" dataType="arr_1_50_udtLumgatePart1">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="2"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="47" y="12"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables/>
							</block>
							<block width="36" height="60" typeName="FB_SelectMode_01" instanceName="FB_SelectMode_01_1" localId="160">
								<position x="244" y="20"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="58"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xConfirm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="61"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xVisu" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="59"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xPartly" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="109"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xComissioning" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="111"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSource" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="60"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xLG_Available" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="105" formalParameter="OUT">
												<position x="242" y="48" pathnode="false"/>
												<position x="221" y="48" pathnode="false"/>
												<position x="221" y="24" pathnode="false"/>
												<position x="209" y="24" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xTCS_Available" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="88"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xConfigFileExist" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="36"/>
											<connection refLocalId="87" formalParameter="OR">
												<position x="242" y="56" pathnode="false"/>
												<position x="213" y="56" pathnode="false"/>
												<position x="213" y="63" pathnode="false"/>
												<position x="209" y="63" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="udtSceneMode" dataType="udtScene">
										<connectionPointIn>
											<relPosition x="-2" y="40"/>
											<connection refLocalId="54"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="40" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iInit" dataType="INT">
										<connectionPointIn>
											<relPosition x="-2" y="44"/>
											<connection refLocalId="68"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="40" y="44"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xActivateTCS" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="48"/>
											<connection refLocalId="62"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="40" y="48"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrLumgates" dataType="arr_1_240_udtLumgate">
										<connectionPointIn>
											<relPosition x="-2" y="52"/>
											<connection refLocalId="116"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="40" y="52"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xActivateMB" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="56"/>
											<connection refLocalId="108"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="40" y="56"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xPreAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xActivateTCS_Interface" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strMode" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xModeOK" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="38" y="28"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<comment localId="161" width="48" height="4">
								<position x="7" y="25"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Trigger for time depending functions</p>
									</html>
								</content>
							</comment>
							<comment localId="162" width="34" height="8">
								<position x="100" y="11"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Scene an scenario handling<br/>EPO-IS-268-843</p>
									</html>
								</content>
							</comment>
							<comment localId="163" width="42" height="8">
								<position x="95" y="87"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Scene hour counter for alternating<br/>active scenes in one scenario</p>
									</html>
								</content>
							</comment>
							<comment localId="164" width="29" height="12">
								<position x="98" y="121"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Lumgate control<br/>EPO-IS-268-822 - 829<br/>EPO-IS-268-493</p>
									</html>
								</content>
							</comment>
							<comment localId="171" width="26" height="12">
								<position x="249" y="5"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">ATS mode handling<br/>EPO-IS-268-813<br/>EPO-IS-268-918</p>
									</html>
								</content>
							</comment>
							<block width="8" height="12" typeName="GT" localId="175">
								<position x="174" y="44"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ELEMENTARY" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="177"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ELEMENTARY" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="176"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="GT" hidden="true" dataType="BOOL" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="176" width="4" height="2">
								<position x="168" y="51"/>
								<connectionPointOut>
									<relPosition x="4" y="1"/>
								</connectionPointOut>
								<expression>0</expression>
							</inVariable>
							<inVariable localId="177" width="15" height="2">
								<position x="157" y="47"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>iTotalLumgates</expression>
							</inVariable>
							<comment localId="179" width="21" height="4">
								<position x="152" y="42"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">V2.01 update</p>
									</html>
								</content>
							</comment>
							<inVariable localId="180" width="16" height="2">
								<position x="79" y="163"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>xCommissioning</expression>
							</inVariable>
							<inVariable localId="181" width="15" height="2">
								<position x="80" y="167"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>iCommissioning</expression>
							</inVariable>
							<block width="40" height="84" typeName="FB_Lumgate_01" instanceName="FB_Lumgate_01_1" localId="211">
								<position x="97" y="136"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="114"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xConfirm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="27"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xPulseSecond" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="16" formalParameter="Q">
												<position x="95" y="148" pathnode="false"/>
												<position x="58" y="148" pathnode="false"/>
												<position x="58" y="102" pathnode="false"/>
												<position x="58" y="37" pathnode="false"/>
												<position x="56" y="37" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="wSpecialScenario" dataType="WORD" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="67"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectRBT" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="76"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrSegment" dataType="ARR_I_1_4" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="65"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xCommissioning" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="180"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iCommissioningBranch" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="181"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="udtScenarioMode" dataType="udtScene">
										<connectionPointIn>
											<relPosition x="-2" y="68"/>
											<connection refLocalId="6"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="44" y="68"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrLumgates" dataType="arr_1_240_udtLumgate">
										<connectionPointIn>
											<relPosition x="-2" y="72"/>
											<connection refLocalId="5"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="44" y="72"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iDimmingSpeed" dataType="INT">
										<connectionPointIn>
											<relPosition x="-2" y="76"/>
											<connection refLocalId="63"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="44" y="76"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xNextDevice" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="80"/>
											<connection refLocalId="74"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="44" y="80"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xPreAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iLumgate" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iRBT" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xErrorRBT1" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xErrorRBT2" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="28"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xErrorRBT3" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="32"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xErrorRBT4" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="36"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iRBT1" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iRBT2" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="44"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iRBT3" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="48"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iRBT4" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="52"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrAmountLumgates" dataType="ARR_I_1_4" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="56"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xUnexpectedLG_Count" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="60"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iTotalLumgates" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="42" y="64"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
						</worksheet>
						<worksheet name="Diagnostic" SizeX="400" SizeY="400">
							<inVariable localId="0" width="6" height="2">
								<position x="131" y="31"/>
								<connectionPointOut>
									<relPosition x="6" y="1"/>
								</connectionPointOut>
								<expression>true</expression>
							</inVariable>
							<inVariable localId="1" width="17" height="2">
								<position x="120" y="35"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>strDiagIB_Startup</expression>
							</inVariable>
							<inVariable localId="2" width="18" height="2">
								<position x="119" y="39"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>strDiagIP_Address</expression>
							</inVariable>
							<inVariable localId="3" width="9" height="2">
								<position x="220" y="39"/>
								<connectionPointOut>
									<relPosition x="9" y="1"/>
								</connectionPointOut>
								<expression>strDate</expression>
							</inVariable>
							<inVariable localId="4" width="17" height="2">
								<position x="120" y="43"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>strDiag_Lumgate</expression>
							</inVariable>
							<block width="8" height="24" typeName="OR" localId="8">
								<position x="146" y="113"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="10"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="29"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN3" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="31"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN4" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="35"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN5" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="39"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OR" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="9" width="11" height="2">
								<position x="156" y="116"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="8" formalParameter="OR"/>
								</connectionPointIn>
								<expression>xPreAlarm</expression>
							</outVariable>
							<inVariable localId="10" width="17" height="2">
								<position x="127" y="116"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>xAnalogPreAlarm</expression>
							</inVariable>
							<inVariable localId="11" width="14" height="2">
								<position x="130" y="156"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>xAnalogAlarm</expression>
							</inVariable>
							<inVariable localId="12" width="14" height="2">
								<position x="123" y="47"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>strDiagAnalog</expression>
							</inVariable>
							<outVariable localId="13" width="9" height="2">
								<position x="156" y="156"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="84" formalParameter="OR"/>
								</connectionPointIn>
								<expression>xAlarm</expression>
							</outVariable>
							<block width="8" height="12" typeName="AND" localId="17">
								<position x="194" y="153"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="19"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="27"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OUT" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="18" width="13" height="2">
								<position x="204" y="156"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="17" formalParameter="OUT"/>
								</connectionPointIn>
								<expression>xWeb_Alarm</expression>
							</outVariable>
							<inVariable localId="19" width="9" height="2">
								<position x="183" y="156"/>
								<connectionPointOut>
									<relPosition x="9" y="1"/>
								</connectionPointOut>
								<expression>xAlarm</expression>
							</inVariable>
							<outVariable localId="20" width="16" height="2">
								<position x="203" y="137"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="24" formalParameter="OUT"/>
								</connectionPointIn>
								<expression>xWeb_PreAlarm</expression>
							</outVariable>
							<block width="8" height="12" typeName="AND" localId="24">
								<position x="193" y="134"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="25"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="26"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OUT" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="25" width="11" height="2">
								<position x="180" y="137"/>
								<connectionPointOut>
									<relPosition x="11" y="1"/>
								</connectionPointOut>
								<expression>xPreAlarm</expression>
							</inVariable>
							<inVariable localId="26" width="18" height="2">
								<position x="173" y="141"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>CLOCK_PULSE_2S</expression>
							</inVariable>
							<inVariable localId="27" width="18" height="2">
								<position x="174" y="160"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>CLOCK_PULSE_2S</expression>
							</inVariable>
							<inVariable localId="28" width="16" height="2">
								<position x="128" y="160"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>xLumgateAlarm</expression>
							</inVariable>
							<inVariable localId="29" width="18" height="2">
								<position x="126" y="120"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>xLumgatePreAlarm</expression>
							</inVariable>
							<inVariable localId="30" width="12" height="2">
								<position x="125" y="51"/>
								<connectionPointOut>
									<relPosition x="12" y="1"/>
								</connectionPointOut>
								<expression>strDiagWeb</expression>
							</inVariable>
							<inVariable localId="31" width="18" height="2">
								<position x="126" y="124"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>xInterbusPreAlarm</expression>
							</inVariable>
							<inVariable localId="33" width="15" height="2">
								<position x="122" y="55"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>strDiagTCS_PN</expression>
							</inVariable>
							<inVariable localId="34" width="17" height="2">
								<position x="120" y="59"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>strDiagConfigFiles</expression>
							</inVariable>
							<inVariable localId="35" width="16" height="2">
								<position x="128" y="128"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>xModePreAlarm</expression>
							</inVariable>
							<inVariable localId="36" width="13" height="2">
								<position x="131" y="164"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>xModeAlarm</expression>
							</inVariable>
							<inVariable localId="37" width="13" height="2">
								<position x="124" y="63"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>strDiagMode</expression>
							</inVariable>
							<inVariable localId="39" width="22" height="2">
								<position x="122" y="132"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>xConfigurationPreAlarm</expression>
							</inVariable>
							<inVariable localId="41" width="6" height="2">
								<position x="36" y="31"/>
								<connectionPointOut>
									<relPosition x="6" y="1"/>
								</connectionPointOut>
								<expression>true</expression>
							</inVariable>
							<outVariable localId="42" width="19" height="2">
								<position x="83" y="39"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="110" formalParameter="strDiag"/>
								</connectionPointIn>
								<expression>strDeviceMonitoring</expression>
							</outVariable>
							<inVariable localId="43" width="23" height="2">
								<position x="19" y="39"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT0</expression>
							</inVariable>
							<inVariable localId="44" width="23" height="2">
								<position x="19" y="43"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT1</expression>
							</inVariable>
							<outVariable localId="45" width="14" height="2">
								<position x="83" y="35"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="110" formalParameter="xAlarm"/>
								</connectionPointIn>
								<expression>xDeviceAlarm</expression>
							</outVariable>
							<inVariable localId="46" width="20" height="2">
								<position x="22" y="35"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ConfirmAlarm</expression>
							</inVariable>
							<block width="21" height="48" typeName="TB_SelectDiag_01" instanceName="TB_SelectDiag_01_1" localId="61">
								<position x="139" y="28"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="0"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport1" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="1"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport2" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="2"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport3" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="4"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport4" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="12"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport5" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="30"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport6" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="33"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport7" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="34"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport8" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="36"/>
											<connection refLocalId="37"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport9" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="40"/>
											<connection refLocalId="74"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport10" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="44"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="23" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="23" y="8"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="62" width="16" height="2">
								<position x="26" y="87"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_Device</expression>
							</inVariable>
							<outVariable localId="63" width="16" height="2">
								<position x="83" y="87"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="110" formalParameter="udtDeviceMonitoring"/>
								</connectionPointIn>
								<expression>udtWeb_Device</expression>
							</outVariable>
							<inVariable localId="64" width="23" height="2">
								<position x="19" y="47"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT2</expression>
							</inVariable>
							<inVariable localId="65" width="23" height="2">
								<position x="19" y="51"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT3</expression>
							</inVariable>
							<inVariable localId="66" width="23" height="2">
								<position x="19" y="55"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT4</expression>
							</inVariable>
							<inVariable localId="67" width="23" height="2">
								<position x="19" y="59"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT5</expression>
							</inVariable>
							<inVariable localId="68" width="23" height="2">
								<position x="19" y="63"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT6</expression>
							</inVariable>
							<inVariable localId="69" width="23" height="2">
								<position x="19" y="67"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT7</expression>
							</inVariable>
							<inVariable localId="70" width="23" height="2">
								<position x="19" y="71"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT8</expression>
							</inVariable>
							<inVariable localId="71" width="23" height="2">
								<position x="19" y="75"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT9</expression>
							</inVariable>
							<inVariable localId="72" width="24" height="2">
								<position x="18" y="79"/>
								<connectionPointOut>
									<relPosition x="24" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT10</expression>
							</inVariable>
							<inVariable localId="73" width="24" height="2">
								<position x="18" y="83"/>
								<connectionPointOut>
									<relPosition x="24" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT11</expression>
							</inVariable>
							<inVariable localId="74" width="19" height="2">
								<position x="118" y="67"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>strDeviceMonitoring</expression>
							</inVariable>
							<inVariable localId="75" width="14" height="2">
								<position x="130" y="168"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>xDeviceAlarm</expression>
							</inVariable>
							<inVariable localId="76" width="15" height="2">
								<position x="27" y="91"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>wSpezialScene</expression>
							</inVariable>
							<outVariable localId="77" width="15" height="2">
								<position x="83" y="91"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="110" formalParameter="wSpecialScene"/>
								</connectionPointIn>
								<expression>wSpezialScene</expression>
							</outVariable>
							<inVariable localId="78" width="18" height="2">
								<position x="126" y="172"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>xWeb_TCS_Alarm</expression>
							</inVariable>
							<inVariable localId="79" width="18" height="2">
								<position x="126" y="176"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ConfigAlarm</expression>
							</inVariable>
							<inVariable localId="80" width="21" height="2">
								<position x="123" y="180"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>xWeb_UnexpectedLG</expression>
							</inVariable>
							<block width="8" height="32" typeName="OR" localId="84">
								<position x="146" y="153"/>
								<inputVariables>
									<variable formalParameter="IN1" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="11"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN2" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="28"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN3" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="36"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN4" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="75"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN5" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="78"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN6" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="79"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="IN7" hidden="true" dataType="ANY_BIT" invertable="true" duplicatable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="80"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="OR" hidden="true" dataType="ANY_BIT" invertable="true">
										<connectionPointOut>
											<relPosition x="10" y="4"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<block width="37" height="68" typeName="FB_DeviceMonitoring_01" instanceName="FB_DeviceMonitoring_01_1" localId="110">
								<position x="44" y="28"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="41"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xConfirm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="46"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput01" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="43"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput02" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="44"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput03" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="64"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput04" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="65"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput05" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="66"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput06" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="32"/>
											<connection refLocalId="67"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput07" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="36"/>
											<connection refLocalId="68"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput08" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="40"/>
											<connection refLocalId="69"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput09" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="44"/>
											<connection refLocalId="70"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput10" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="48"/>
											<connection refLocalId="71"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput11" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="52"/>
											<connection refLocalId="72"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="xInput12" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="56"/>
											<connection refLocalId="73"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="udtDeviceMonitoring" dataType="udt_WebDataDevice">
										<connectionPointIn>
											<relPosition x="-2" y="60"/>
											<connection refLocalId="62"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="41" y="60"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="wSpecialScene" dataType="WORD">
										<connectionPointIn>
											<relPosition x="-2" y="64"/>
											<connection refLocalId="76"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="41" y="64"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="39" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xAlarm" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="39" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="39" y="12"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<comment localId="111" width="39" height="12">
								<position x="42" y="13"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Monitor onboard I/Os<br/>and set alarms / special scenes<br/>EPO-IS-268-842</p>
									</html>
								</content>
							</comment>
							<comment localId="112" width="38" height="4">
								<position x="132" y="19"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Collect diagnostic messages</p>
									</html>
								</content>
							</comment>
							<comment localId="113" width="32" height="8">
								<position x="230" y="17"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">List diagnostic messages<br/>EPO-IS-268-920</p>
									</html>
								</content>
							</comment>
							<comment localId="114" width="26" height="8">
								<position x="137" y="144"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Collect Alarms<br/>EPO-IS-268-922</p>
									</html>
								</content>
							</comment>
							<comment localId="115" width="26" height="8">
								<position x="138" y="103"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Collect Pre-Alarms<br/>EPO-IS-268-921</p>
									</html>
								</content>
							</comment>
							<outVariable localId="116" width="16" height="2">
								<position x="258" y="55"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport1"/>
								</connectionPointIn>
								<expression>strWeb_Report1</expression>
							</outVariable>
							<outVariable localId="117" width="16" height="2">
								<position x="258" y="63"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport2"/>
								</connectionPointIn>
								<expression>strWeb_Report2</expression>
							</outVariable>
							<outVariable localId="118" width="16" height="2">
								<position x="258" y="71"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport3"/>
								</connectionPointIn>
								<expression>strWeb_Report3</expression>
							</outVariable>
							<outVariable localId="119" width="16" height="2">
								<position x="258" y="79"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport4"/>
								</connectionPointIn>
								<expression>strWeb_Report4</expression>
							</outVariable>
							<outVariable localId="120" width="16" height="2">
								<position x="258" y="87"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport5"/>
								</connectionPointIn>
								<expression>strWeb_Report5</expression>
							</outVariable>
							<outVariable localId="121" width="16" height="2">
								<position x="258" y="99"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport6"/>
								</connectionPointIn>
								<expression>strWeb_Report6</expression>
							</outVariable>
							<outVariable localId="122" width="16" height="2">
								<position x="258" y="103"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport7"/>
								</connectionPointIn>
								<expression>strWeb_Report7</expression>
							</outVariable>
							<outVariable localId="123" width="16" height="2">
								<position x="258" y="111"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport8"/>
								</connectionPointIn>
								<expression>strWeb_Report8</expression>
							</outVariable>
							<outVariable localId="124" width="16" height="2">
								<position x="258" y="119"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport9"/>
								</connectionPointIn>
								<expression>strWeb_Report9</expression>
							</outVariable>
							<outVariable localId="125" width="17" height="2">
								<position x="258" y="127"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strReport10"/>
								</connectionPointIn>
								<expression>strWeb_Report10</expression>
							</outVariable>
							<outVariable localId="126" width="17" height="2">
								<position x="258" y="39"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strHeader1"/>
								</connectionPointIn>
								<expression>strWeb_Header1</expression>
							</outVariable>
							<outVariable localId="127" width="17" height="2">
								<position x="258" y="47"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strHeader2"/>
								</connectionPointIn>
								<expression>strWeb_Header2</expression>
							</outVariable>
							<outVariable localId="128" width="17" height="2">
								<position x="258" y="51"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="strHeader3"/>
								</connectionPointIn>
								<expression>strWeb_Header3</expression>
							</outVariable>
							<block width="25" height="108" typeName="TB_ListDiag_01" instanceName="TB_ListDiag_01_1" localId="160">
								<position x="231" y="28"/>
								<inputVariables>
									<variable formalParameter="xActivate" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="61" formalParameter="xActive">
												<position x="229" y="32" pathnode="false"/>
												<position x="162" y="32" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strReport" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="61" formalParameter="strReport">
												<position x="229" y="36" pathnode="false"/>
												<position x="162" y="36" pathnode="false"/>
											</connection>
										</connectionPointIn>
									</variable>
									<variable formalParameter="strDate" dataType="STRING" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="3"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iPointer" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="173"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables/>
								<outputVariables>
									<variable formalParameter="xActive" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xTrigger" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strHeader1" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiMessageType" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strHeader2" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strHeader3" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport1" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="28"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport1" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="32"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport2" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="36"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport2" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport3" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="44"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport3" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="48"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport4" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="52"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport4" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="56"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport5" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="60"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport5" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="64"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport6" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="68"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport6" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="72"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport7" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="76"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport7" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="80"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport8" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="84"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport8" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="88"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport9" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="92"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport9" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="96"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strReport10" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="100"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="usiReport10" dataType="USINT" hideable="true">
										<connectionPointOut>
											<relPosition x="27" y="104"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<outVariable localId="163" width="16" height="2">
								<position x="258" y="59"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport1"/>
								</connectionPointIn>
								<expression>usiWeb_Report1</expression>
							</outVariable>
							<outVariable localId="164" width="16" height="2">
								<position x="258" y="67"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport2"/>
								</connectionPointIn>
								<expression>usiWeb_Report2</expression>
							</outVariable>
							<outVariable localId="165" width="16" height="2">
								<position x="258" y="75"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport3"/>
								</connectionPointIn>
								<expression>usiWeb_Report3</expression>
							</outVariable>
							<outVariable localId="166" width="16" height="2">
								<position x="258" y="83"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport4"/>
								</connectionPointIn>
								<expression>usiWeb_Report4</expression>
							</outVariable>
							<outVariable localId="167" width="16" height="2">
								<position x="258" y="91"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport5"/>
								</connectionPointIn>
								<expression>usiWeb_Report5</expression>
							</outVariable>
							<outVariable localId="168" width="16" height="2">
								<position x="258" y="95"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport6"/>
								</connectionPointIn>
								<expression>usiWeb_Report6</expression>
							</outVariable>
							<outVariable localId="169" width="16" height="2">
								<position x="258" y="107"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport7"/>
								</connectionPointIn>
								<expression>usiWeb_Report7</expression>
							</outVariable>
							<outVariable localId="170" width="16" height="2">
								<position x="258" y="115"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport8"/>
								</connectionPointIn>
								<expression>usiWeb_Report8</expression>
							</outVariable>
							<outVariable localId="171" width="16" height="2">
								<position x="258" y="123"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport9"/>
								</connectionPointIn>
								<expression>usiWeb_Report9</expression>
							</outVariable>
							<outVariable localId="172" width="17" height="2">
								<position x="258" y="131"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="160" formalParameter="usiReport10"/>
								</connectionPointIn>
								<expression>usiWeb_Report10</expression>
							</outVariable>
							<inVariable localId="173" width="17" height="2">
								<position x="212" y="43"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>iWeb_DiagPointer</expression>
							</inVariable>
						</worksheet>
						<worksheet name="Web" SizeX="400" SizeY="400">
							<inVariable localId="0" width="23" height="2">
								<position x="49" y="24"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT0</expression>
							</inVariable>
							<inVariable localId="1" width="23" height="2">
								<position x="49" y="28"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT1</expression>
							</inVariable>
							<inVariable localId="2" width="23" height="2">
								<position x="49" y="32"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT2</expression>
							</inVariable>
							<inVariable localId="3" width="23" height="2">
								<position x="49" y="36"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT3</expression>
							</inVariable>
							<inVariable localId="4" width="23" height="2">
								<position x="49" y="40"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT4</expression>
							</inVariable>
							<inVariable localId="5" width="23" height="2">
								<position x="49" y="44"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT5</expression>
							</inVariable>
							<inVariable localId="6" width="23" height="2">
								<position x="49" y="48"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT6</expression>
							</inVariable>
							<inVariable localId="7" width="23" height="2">
								<position x="49" y="52"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT7</expression>
							</inVariable>
							<inVariable localId="8" width="23" height="2">
								<position x="49" y="56"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT8</expression>
							</inVariable>
							<inVariable localId="9" width="23" height="2">
								<position x="49" y="60"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT9</expression>
							</inVariable>
							<inVariable localId="10" width="24" height="2">
								<position x="49" y="64"/>
								<connectionPointOut>
									<relPosition x="24" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT10</expression>
							</inVariable>
							<inVariable localId="11" width="24" height="2">
								<position x="49" y="68"/>
								<connectionPointOut>
									<relPosition x="24" y="1"/>
								</connectionPointOut>
								<expression>ONBOARD_INPUT_BIT11</expression>
							</inVariable>
							<outVariable localId="12" width="20" height="2">
								<position x="73" y="24"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="0">
										<position x="73" y="25" pathnode="false"/>
										<position x="72" y="25" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI01</expression>
							</outVariable>
							<outVariable localId="13" width="20" height="2">
								<position x="73" y="28"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="1">
										<position x="73" y="29" pathnode="false"/>
										<position x="72" y="29" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI02</expression>
							</outVariable>
							<outVariable localId="14" width="20" height="2">
								<position x="73" y="32"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="2">
										<position x="73" y="33" pathnode="false"/>
										<position x="72" y="33" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI03</expression>
							</outVariable>
							<outVariable localId="15" width="20" height="2">
								<position x="73" y="36"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="3">
										<position x="73" y="37" pathnode="false"/>
										<position x="72" y="37" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI04</expression>
							</outVariable>
							<outVariable localId="16" width="20" height="2">
								<position x="73" y="40"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="4">
										<position x="73" y="41" pathnode="false"/>
										<position x="72" y="41" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI05</expression>
							</outVariable>
							<outVariable localId="17" width="20" height="2">
								<position x="73" y="64"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="10"/>
								</connectionPointIn>
								<expression>xWeb_OnboardDI11</expression>
							</outVariable>
							<outVariable localId="18" width="20" height="2">
								<position x="73" y="68"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="11"/>
								</connectionPointIn>
								<expression>xWeb_OnboardDI12</expression>
							</outVariable>
							<outVariable localId="19" width="20" height="2">
								<position x="73" y="44"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="5">
										<position x="73" y="45" pathnode="false"/>
										<position x="72" y="45" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI06</expression>
							</outVariable>
							<outVariable localId="20" width="20" height="2">
								<position x="73" y="48"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="6">
										<position x="73" y="49" pathnode="false"/>
										<position x="72" y="49" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI07</expression>
							</outVariable>
							<outVariable localId="21" width="20" height="2">
								<position x="73" y="52"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="7">
										<position x="73" y="53" pathnode="false"/>
										<position x="72" y="53" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI08</expression>
							</outVariable>
							<outVariable localId="22" width="20" height="2">
								<position x="73" y="56"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="8">
										<position x="73" y="57" pathnode="false"/>
										<position x="72" y="57" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI09</expression>
							</outVariable>
							<outVariable localId="23" width="20" height="2">
								<position x="73" y="60"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="9">
										<position x="73" y="61" pathnode="false"/>
										<position x="72" y="61" pathnode="false"/>
									</connection>
								</connectionPointIn>
								<expression>xWeb_OnboardDI10</expression>
							</outVariable>
							<outVariable localId="34" width="13" height="2">
								<position x="185" y="217"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrLumgates"/>
								</connectionPointIn>
								<expression>arrLumgates</expression>
							</outVariable>
							<inVariable localId="35" width="13" height="2">
								<position x="111" y="217"/>
								<connectionPointOut>
									<relPosition x="13" y="1"/>
								</connectionPointOut>
								<expression>arrLumgates</expression>
							</inVariable>
							<inVariable localId="36" width="15" height="2">
								<position x="109" y="277"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>udtWebMainLG</expression>
							</inVariable>
							<outVariable localId="37" width="15" height="2">
								<position x="185" y="277"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtLumgateMain"/>
								</connectionPointIn>
								<expression>udtWebMainLG</expression>
							</outVariable>
							<inVariable localId="38" width="17" height="2">
								<position x="107" y="221"/>
								<connectionPointOut>
									<relPosition x="17" y="1"/>
								</connectionPointOut>
								<expression>udtLumgateData</expression>
							</inVariable>
							<outVariable localId="39" width="17" height="2">
								<position x="185" y="221"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtLumgateData"/>
								</connectionPointIn>
								<expression>udtLumgateData</expression>
							</outVariable>
							<inVariable localId="40" width="20" height="2">
								<position x="104" y="225"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>udtLumgateScenario</expression>
							</inVariable>
							<outVariable localId="41" width="20" height="2">
								<position x="185" y="225"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtLumgateScenario"/>
								</connectionPointIn>
								<expression>udtLumgateScenario</expression>
							</outVariable>
							<inVariable localId="42" width="25" height="2">
								<position x="99" y="229"/>
								<connectionPointOut>
									<relPosition x="25" y="1"/>
								</connectionPointOut>
								<expression>udtLumgateSpecialScenario</expression>
							</inVariable>
							<outVariable localId="43" width="25" height="2">
								<position x="185" y="229"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtLumgateSpecialScenario"/>
								</connectionPointIn>
								<expression>udtLumgateSpecialScenario</expression>
							</outVariable>
							<inVariable localId="44" width="27" height="2">
								<position x="97" y="237"/>
								<connectionPointOut>
									<relPosition x="27" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_CurrentConsumption</expression>
							</inVariable>
							<outVariable localId="45" width="27" height="2">
								<position x="185" y="237"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtLumgateCurrentConsumption"/>
								</connectionPointIn>
								<expression>udtWeb_CurrentConsumption</expression>
							</outVariable>
							<inVariable localId="46" width="16" height="2">
								<position x="108" y="33"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>iWeb_SelectRBT</expression>
							</inVariable>
							<outVariable localId="47" width="18" height="2">
								<position x="185" y="29"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtLumgate"/>
								</connectionPointIn>
								<expression>udtWeb_Lumgate</expression>
							</outVariable>
							<inVariable localId="48" width="18" height="2">
								<position x="106" y="37"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>iWeb_LumgateSite</expression>
							</inVariable>
							<inVariable localId="49" width="20" height="2">
								<position x="104" y="41"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>iWeb_SelectLumgate</expression>
							</inVariable>
							<outVariable localId="50" width="24" height="2">
								<position x="185" y="33"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="iTotalLumgatesRBT"/>
								</connectionPointIn>
								<expression>iWeb_TotalLumgatesRBT</expression>
							</outVariable>
							<inVariable localId="51" width="18" height="2">
								<position x="106" y="45"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>iWeb_LumgateSite</expression>
							</inVariable>
							<outVariable localId="52" width="17" height="2">
								<position x="185" y="37"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrLumgateWeb"/>
								</connectionPointIn>
								<expression>arrWeb_Lumgate</expression>
							</outVariable>
							<inVariable localId="53" width="20" height="2">
								<position x="104" y="245"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>arrLevelConfiguration</expression>
							</inVariable>
							<inVariable localId="54" width="23" height="2">
								<position x="101" y="241"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>arrScenarioConfiguration</expression>
							</inVariable>
							<outVariable localId="55" width="23" height="2">
								<position x="185" y="241"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrScenarioConfiguration"/>
								</connectionPointIn>
								<expression>arrScenarioConfiguration</expression>
							</outVariable>
							<outVariable localId="56" width="20" height="2">
								<position x="185" y="245"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrLevelConfiguration"/>
								</connectionPointIn>
								<expression>arrLevelConfiguration</expression>
							</outVariable>
							<inVariable localId="57" width="18" height="2">
								<position x="106" y="49"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>iWeb_SelectSensor</expression>
							</inVariable>
							<outVariable localId="58" width="24" height="2">
								<position x="185" y="213"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrSelectedScenario"/>
								</connectionPointIn>
								<expression>arrWeb_SelectedScenario</expression>
							</outVariable>
							<outVariable localId="59" width="23" height="2">
								<position x="185" y="209"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrSelectedSensor"/>
								</connectionPointIn>
								<expression>arrWeb_ThresholdLevels</expression>
							</outVariable>
							<outVariable localId="60" width="27" height="2">
								<position x="185" y="41"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrSelectedConfiguration"/>
								</connectionPointIn>
								<expression>arrWeb_SelectedConfiguration</expression>
							</outVariable>
							<outVariable localId="61" width="22" height="2">
								<position x="185" y="45"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrActiveScenario"/>
								</connectionPointIn>
								<expression>arrWeb_ActiveScenario</expression>
							</outVariable>
							<outVariable localId="62" width="22" height="2">
								<position x="185" y="49"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="iSelectedScenario"/>
								</connectionPointIn>
								<expression>iWeb_SelectedScenario</expression>
							</outVariable>
							<outVariable localId="63" width="15" height="2">
								<position x="185" y="233"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtScenarioMode"/>
								</connectionPointIn>
								<expression>udtSceneMode</expression>
							</outVariable>
							<inVariable localId="64" width="15" height="2">
								<position x="109" y="233"/>
								<connectionPointOut>
									<relPosition x="15" y="1"/>
								</connectionPointOut>
								<expression>udtSceneMode</expression>
							</inVariable>
							<outVariable localId="65" width="18" height="2">
								<position x="185" y="53"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="iSelectedScene"/>
								</connectionPointIn>
								<expression>iWeb_SelectScene</expression>
							</outVariable>
							<outVariable localId="66" width="19" height="2">
								<position x="185" y="57"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="iChosedScene"/>
								</connectionPointIn>
								<expression>iWeb_ChosedScene</expression>
							</outVariable>
							<outVariable localId="67" width="19" height="2">
								<position x="185" y="61"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arr5Lumgate"/>
								</connectionPointIn>
								<expression>arrWeb_5Lumgates</expression>
							</outVariable>
							<outVariable localId="68" width="24" height="2">
								<position x="185" y="65"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arr5LumgateValues"/>
								</connectionPointIn>
								<expression>arrWeb_5LumgatesValues</expression>
							</outVariable>
							<inVariable localId="69" width="16" height="2">
								<position x="108" y="53"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>arrAnalogValues</expression>
							</inVariable>
							<outVariable localId="70" width="18" height="2">
								<position x="185" y="69"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="rAnalogValue"/>
								</connectionPointIn>
								<expression>rWeb_AnalogValue</expression>
							</outVariable>
							<outVariable localId="71" width="19" height="2">
								<position x="185" y="141"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrAnalogDiag"/>
								</connectionPointIn>
								<expression>arrWeb_AnalogDiag</expression>
							</outVariable>
							<outVariable localId="72" width="17" height="2">
								<position x="185" y="77"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="strCloState"/>
								</connectionPointIn>
								<expression>strWeb_CloState</expression>
							</outVariable>
							<outVariable localId="73" width="24" height="2">
								<position x="185" y="81"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="strMaintenanceState"/>
								</connectionPointIn>
								<expression>strWeb_MaintenanceState</expression>
							</outVariable>
							<outVariable localId="74" width="24" height="2">
								<position x="185" y="85"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrCurrentDiagram"/>
								</connectionPointIn>
								<expression>arrWeb_CurrentExpected</expression>
							</outVariable>
							<outVariable localId="75" width="19" height="2">
								<position x="185" y="89"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="iCurrentActual"/>
								</connectionPointIn>
								<expression>iWeb_CurrentActual</expression>
							</outVariable>
							<outVariable localId="76" width="19" height="2">
								<position x="185" y="93"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="iActualPosition"/>
								</connectionPointIn>
								<expression>iWeb_ActualPosition</expression>
							</outVariable>
							<outVariable localId="77" width="25" height="2">
								<position x="185" y="97"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrCurrentDiagramWarningMin"/>
								</connectionPointIn>
								<expression>arrWeb_CurrentWarningMin</expression>
							</outVariable>
							<outVariable localId="78" width="26" height="2">
								<position x="185" y="101"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrCurrentDiagramWarningMax"/>
								</connectionPointIn>
								<expression>arrWeb_CurrentWarningMax</expression>
							</outVariable>
							<outVariable localId="79" width="23" height="2">
								<position x="185" y="105"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrCurrentDiagramAlarmMin"/>
								</connectionPointIn>
								<expression>arrWeb_CurrentErrorMin</expression>
							</outVariable>
							<outVariable localId="80" width="23" height="2">
								<position x="185" y="109"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrCurrentDiagramAlarmMax"/>
								</connectionPointIn>
								<expression>arrWeb_CurrentErrorMax</expression>
							</outVariable>
							<inVariable localId="81" width="24" height="2">
								<position x="100" y="249"/>
								<connectionPointOut>
									<relPosition x="24" y="1"/>
								</connectionPointOut>
								<expression>xWeb_SetManualLumgate</expression>
							</inVariable>
							<outVariable localId="82" width="24" height="2">
								<position x="185" y="249"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xSetManualLumgate"/>
								</connectionPointIn>
								<expression>xWeb_SetManualLumgate</expression>
							</outVariable>
							<inVariable localId="83" width="24" height="2">
								<position x="100" y="253"/>
								<connectionPointOut>
									<relPosition x="24" y="1"/>
								</connectionPointOut>
								<expression>xWeb_EnableLumgateEdit</expression>
							</inVariable>
							<outVariable localId="84" width="24" height="2">
								<position x="185" y="253"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xEnableLumgateEdit"/>
								</connectionPointIn>
								<expression>xWeb_EnableLumgateEdit</expression>
							</outVariable>
							<inVariable localId="85" width="20" height="2">
								<position x="104" y="257"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>xWeb_SafeLumgate</expression>
							</inVariable>
							<outVariable localId="86" width="20" height="2">
								<position x="185" y="257"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xSafeLumgate"/>
								</connectionPointIn>
								<expression>xWeb_SafeLumgate</expression>
							</outVariable>
							<outVariable localId="87" width="22" height="2">
								<position x="185" y="113"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xLumgateEditable"/>
								</connectionPointIn>
								<expression>xWeb_EditableLumgate</expression>
							</outVariable>
							<outVariable localId="88" width="21" height="2">
								<position x="185" y="117"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="strLumgateState"/>
								</connectionPointIn>
								<expression>strWeb_LumgateState</expression>
							</outVariable>
							<inVariable localId="89" width="21" height="2">
								<position x="103" y="261"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>xWeb_CancelLumgate</expression>
							</inVariable>
							<outVariable localId="90" width="21" height="2">
								<position x="185" y="261"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xCancelLumgate"/>
								</connectionPointIn>
								<expression>xWeb_CancelLumgate</expression>
							</outVariable>
							<inVariable localId="91" width="26" height="2">
								<position x="98" y="265"/>
								<connectionPointOut>
									<relPosition x="26" y="1"/>
								</connectionPointOut>
								<expression>strWeb_LumgateDescription</expression>
							</inVariable>
							<outVariable localId="92" width="26" height="2">
								<position x="185" y="265"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="strLumgateDescription"/>
								</connectionPointIn>
								<expression>strWeb_LumgateDescription</expression>
							</outVariable>
							<inVariable localId="93" width="19" height="2">
								<position x="105" y="269"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>rWeb_LevelFailsafe</expression>
							</inVariable>
							<outVariable localId="94" width="19" height="2">
								<position x="185" y="269"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="rLevelFailsafe"/>
								</connectionPointIn>
								<expression>rWeb_LevelFailsafe</expression>
							</outVariable>
							<inVariable localId="95" width="20" height="2">
								<position x="104" y="273"/>
								<connectionPointOut>
									<relPosition x="20" y="1"/>
								</connectionPointOut>
								<expression>rWeb_ManualOutput</expression>
							</inVariable>
							<outVariable localId="96" width="20" height="2">
								<position x="185" y="273"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="rManuelOutput"/>
								</connectionPointIn>
								<expression>rWeb_ManualOutput</expression>
							</outVariable>
							<outVariable localId="97" width="12" height="2">
								<position x="185" y="121"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="strDiag"/>
								</connectionPointIn>
								<expression>strDiagWeb</expression>
							</outVariable>
							<inVariable localId="98" width="14" height="2">
								<position x="110" y="185"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_CLO</expression>
							</inVariable>
							<outVariable localId="99" width="14" height="2">
								<position x="185" y="185"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtCLO"/>
								</connectionPointIn>
								<expression>udtWeb_CLO</expression>
							</outVariable>
							<inVariable localId="100" width="16" height="2">
								<position x="108" y="189"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_Current</expression>
							</inVariable>
							<outVariable localId="101" width="16" height="2">
								<position x="185" y="189"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtCurrent"/>
								</connectionPointIn>
								<expression>udtWeb_Current</expression>
							</outVariable>
							<inVariable localId="102" width="16" height="2">
								<position x="108" y="193"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_Scenes</expression>
							</inVariable>
							<outVariable localId="103" width="16" height="2">
								<position x="185" y="193"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtScenes"/>
								</connectionPointIn>
								<expression>udtWeb_Scenes</expression>
							</outVariable>
							<outVariable localId="104" width="14" height="2">
								<position x="185" y="125"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrScale"/>
								</connectionPointIn>
								<expression>arrWeb_Scale</expression>
							</outVariable>
							<inVariable localId="105" width="18" height="2">
								<position x="106" y="201"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_Threshold</expression>
							</inVariable>
							<outVariable localId="106" width="18" height="2">
								<position x="185" y="201"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtThreshold"/>
								</connectionPointIn>
								<expression>udtWeb_Threshold</expression>
							</outVariable>
							<inVariable localId="107" width="23" height="2">
								<position x="101" y="209"/>
								<connectionPointOut>
									<relPosition x="23" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_ThresholdLevels</expression>
							</inVariable>
							<inVariable localId="108" width="24" height="2">
								<position x="100" y="213"/>
								<connectionPointOut>
									<relPosition x="24" y="1"/>
								</connectionPointOut>
								<expression>arrWeb_SelectedScenario</expression>
							</inVariable>
							<outVariable localId="109" width="19" height="2">
								<position x="185" y="181"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtScenesHours"/>
								</connectionPointIn>
								<expression>udtWeb_SceneHour</expression>
							</outVariable>
							<inVariable localId="110" width="19" height="2">
								<position x="105" y="181"/>
								<connectionPointOut>
									<relPosition x="19" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_SceneHour</expression>
							</inVariable>
							<outVariable localId="111" width="21" height="2">
								<position x="185" y="205"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="arrSceneHourCounter"/>
								</connectionPointIn>
								<expression>arrSceneHoureCounter</expression>
							</outVariable>
							<inVariable localId="112" width="21" height="2">
								<position x="103" y="205"/>
								<connectionPointOut>
									<relPosition x="21" y="1"/>
								</connectionPointOut>
								<expression>arrSceneHoureCounter</expression>
							</inVariable>
							<inVariable localId="113" width="22" height="2">
								<position x="102" y="169"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ActivateMenue1</expression>
							</inVariable>
							<inVariable localId="114" width="22" height="2">
								<position x="102" y="173"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ActivateMenue2</expression>
							</inVariable>
							<outVariable localId="115" width="20" height="2">
								<position x="185" y="133"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xShowMenue2"/>
								</connectionPointIn>
								<expression>xWeb_Menue2Active</expression>
							</outVariable>
							<outVariable localId="116" width="20" height="2">
								<position x="185" y="129"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xShowMenue1"/>
								</connectionPointIn>
								<expression>xWeb_Menue1Active</expression>
							</outVariable>
							<outVariable localId="117" width="22" height="2">
								<position x="185" y="169"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xMenue1"/>
								</connectionPointIn>
								<expression>xWeb_ActivateMenue1</expression>
							</outVariable>
							<outVariable localId="118" width="22" height="2">
								<position x="185" y="173"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xMenue2"/>
								</connectionPointIn>
								<expression>xWeb_ActivateMenue2</expression>
							</outVariable>
							<outVariable localId="119" width="13" height="2">
								<position x="185" y="137"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="iDelay"/>
								</connectionPointIn>
								<expression>iWeb_Delay</expression>
							</outVariable>
							<inVariable localId="120" width="16" height="2">
								<position x="108" y="197"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_Source</expression>
							</inVariable>
							<outVariable localId="121" width="16" height="2">
								<position x="185" y="197"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtSource"/>
								</connectionPointIn>
								<expression>udtWeb_Source</expression>
							</outVariable>
							<inVariable localId="122" width="16" height="2">
								<position x="108" y="161"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_Project</expression>
							</inVariable>
							<outVariable localId="123" width="16" height="2">
								<position x="185" y="161"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtProject"/>
								</connectionPointIn>
								<expression>udtWeb_Project</expression>
							</outVariable>
							<outVariable localId="124" width="18" height="2">
								<position x="185" y="149"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="iSelectedRBT"/>
								</connectionPointIn>
								<expression>iWeb_SelectedRBT</expression>
							</outVariable>
							<inVariable localId="125" width="14" height="2">
								<position x="110" y="165"/>
								<connectionPointOut>
									<relPosition x="14" y="1"/>
								</connectionPointOut>
								<expression>udtL20Config</expression>
							</inVariable>
							<outVariable localId="126" width="14" height="2">
								<position x="185" y="165"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="udtL20Config"/>
								</connectionPointIn>
								<expression>udtL20Config</expression>
							</outVariable>
							<outVariable localId="127" width="18" height="2">
								<position x="185" y="73"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="wAnalogDiag"/>
								</connectionPointIn>
								<expression>wWeb_AnalogDiag</expression>
							</outVariable>
							<inVariable localId="128" width="22" height="2">
								<position x="102" y="177"/>
								<connectionPointOut>
									<relPosition x="22" y="1"/>
								</connectionPointOut>
								<expression>xWeb_ActivateMenue3</expression>
							</inVariable>
							<outVariable localId="129" width="22" height="2">
								<position x="185" y="177"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xMenue3"/>
								</connectionPointIn>
								<expression>xWeb_ActivateMenue3</expression>
							</outVariable>
							<outVariable localId="130" width="20" height="2">
								<position x="185" y="145"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xShowMenue3"/>
								</connectionPointIn>
								<expression>xWeb_Menue3Active</expression>
							</outVariable>
							<comment localId="131" width="34" height="4">
								<position x="54" y="17"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Show onboard I/O state</p>
									</html>
								</content>
							</comment>
							<comment localId="132" width="44" height="16">
								<position x="134" y="6"/>
								<content>
									<html xmlns="http://www.w3.org/1999/xhtml">
										<p xml:space="preserve" style="color:#008000;background:#FFFFFF;font-weight:normal;font-style:normal;normal;font-family:Times New Roman;width:0px; height:337px" xmlns="http://www.w3.org/1999/xhtml">Communication with web interface<br/>EPO-IS-268-835 - 841 + 520<br/>EPO-IS-268-666 + 555 + 562<br/>+ 919 + 904</p>
									</html>
								</content>
							</comment>
							<inVariable localId="133" width="16" height="2">
								<position x="108" y="157"/>
								<connectionPointOut>
									<relPosition x="16" y="1"/>
								</connectionPointOut>
								<expression>xWeb_FailMode</expression>
							</inVariable>
							<outVariable localId="134" width="16" height="2">
								<position x="185" y="157"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="xFailMode"/>
								</connectionPointIn>
								<expression>xWeb_FailMode</expression>
							</outVariable>
							<outVariable localId="135" width="15" height="2">
								<position x="185" y="153"/>
								<connectionPointIn>
									<relPosition x="0" y="1"/>
									<connection refLocalId="206" formalParameter="iTempSelectedLumgate"/>
								</connectionPointIn>
								<expression>iWeb_SelectLG</expression>
							</outVariable>
							<block width="57" height="256" typeName="FB_Web_Communication_01" instanceName="FB_Web_Communication_01_1" localId="206">
								<position x="126" y="26"/>
								<inputVariables>
									<variable formalParameter="iSelectRBT" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="8"/>
											<connection refLocalId="46"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectLumgateSeite" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="12"/>
											<connection refLocalId="48"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectLumgateDevice" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="16"/>
											<connection refLocalId="49"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iLumgateSeite" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="20"/>
											<connection refLocalId="51"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="iSelectSensor" dataType="INT" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="24"/>
											<connection refLocalId="57"/>
										</connectionPointIn>
									</variable>
									<variable formalParameter="arrAnalogValues" dataType="arr_1_4_udtAnalogInput" hideable="true">
										<connectionPointIn>
											<relPosition x="-2" y="28"/>
											<connection refLocalId="69"/>
										</connectionPointIn>
									</variable>
								</inputVariables>
								<inOutVariables>
									<variable formalParameter="udtLumgate" dataType="udtWebLumgate">
										<connectionPointIn>
											<relPosition x="-2" y="4"/>
											<connection refLocalId="207"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="4"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xFailMode" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="132"/>
											<connection refLocalId="133"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="132"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtProject" dataType="udt_WebDataProjectSettings">
										<connectionPointIn>
											<relPosition x="-2" y="136"/>
											<connection refLocalId="122"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="136"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtL20Config" dataType="udtL20Input">
										<connectionPointIn>
											<relPosition x="-2" y="140"/>
											<connection refLocalId="125"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="140"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xMenue1" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="144"/>
											<connection refLocalId="113"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="144"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xMenue2" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="148"/>
											<connection refLocalId="114"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="148"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xMenue3" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="152"/>
											<connection refLocalId="128"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="152"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtScenesHours" dataType="udt_WebDataScenesHour">
										<connectionPointIn>
											<relPosition x="-2" y="156"/>
											<connection refLocalId="110"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="156"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtCLO" dataType="udt_WebDataLumgateCLO">
										<connectionPointIn>
											<relPosition x="-2" y="160"/>
											<connection refLocalId="98"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="160"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtCurrent" dataType="udt_WebDataLumgateCurrent">
										<connectionPointIn>
											<relPosition x="-2" y="164"/>
											<connection refLocalId="100"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="164"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtScenes" dataType="udt_WebDataLumgateScenes">
										<connectionPointIn>
											<relPosition x="-2" y="168"/>
											<connection refLocalId="102"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="168"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtSource" dataType="udt_WebDataSource">
										<connectionPointIn>
											<relPosition x="-2" y="172"/>
											<connection refLocalId="120"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="172"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtThreshold" dataType="udt_WebDataThreshold">
										<connectionPointIn>
											<relPosition x="-2" y="176"/>
											<connection refLocalId="105"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="176"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrSceneHourCounter" dataType="arr_1_50_udtLumgatePart1">
										<connectionPointIn>
											<relPosition x="-2" y="180"/>
											<connection refLocalId="112"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="180"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrSelectedSensor" dataType="ARR_R_1_24">
										<connectionPointIn>
											<relPosition x="-2" y="184"/>
											<connection refLocalId="107"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="184"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrSelectedScenario" dataType="ARR_I_1_5">
										<connectionPointIn>
											<relPosition x="-2" y="188"/>
											<connection refLocalId="108"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="188"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrLumgates" dataType="arr_1_240_udtLumgate">
										<connectionPointIn>
											<relPosition x="-2" y="192"/>
											<connection refLocalId="35"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="192"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLumgateData" dataType="udtLumgateVisu">
										<connectionPointIn>
											<relPosition x="-2" y="196"/>
											<connection refLocalId="38"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="196"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLumgateScenario" dataType="udtWebLGScenario">
										<connectionPointIn>
											<relPosition x="-2" y="200"/>
											<connection refLocalId="40"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="200"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLumgateSpecialScenario" dataType="udtWebLGSpecialScenario">
										<connectionPointIn>
											<relPosition x="-2" y="204"/>
											<connection refLocalId="42"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="204"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtScenarioMode" dataType="udtScene">
										<connectionPointIn>
											<relPosition x="-2" y="208"/>
											<connection refLocalId="64"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="208"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLumgateCurrentConsumption" dataType="udtWebLGCurrentConsumption">
										<connectionPointIn>
											<relPosition x="-2" y="212"/>
											<connection refLocalId="44"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="212"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrScenarioConfiguration" dataType="ARR_I_1_4_1_25_1_5">
										<connectionPointIn>
											<relPosition x="-2" y="216"/>
											<connection refLocalId="54"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="216"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrLevelConfiguration" dataType="ARR_UDT_L20Config">
										<connectionPointIn>
											<relPosition x="-2" y="220"/>
											<connection refLocalId="53"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="220"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xSetManualLumgate" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="224"/>
											<connection refLocalId="81"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="224"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xEnableLumgateEdit" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="228"/>
											<connection refLocalId="83"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="228"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xSafeLumgate" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="232"/>
											<connection refLocalId="85"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="232"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xCancelLumgate" dataType="BOOL">
										<connectionPointIn>
											<relPosition x="-2" y="236"/>
											<connection refLocalId="89"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="236"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strLumgateDescription" dataType="STRING">
										<connectionPointIn>
											<relPosition x="-2" y="240"/>
											<connection refLocalId="91"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="240"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="rLevelFailsafe" dataType="REAL">
										<connectionPointIn>
											<relPosition x="-2" y="244"/>
											<connection refLocalId="93"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="244"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="rManuelOutput" dataType="REAL">
										<connectionPointIn>
											<relPosition x="-2" y="248"/>
											<connection refLocalId="95"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="248"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="udtLumgateMain" dataType="udtWebLG_Main">
										<connectionPointIn>
											<relPosition x="-2" y="252"/>
											<connection refLocalId="36"/>
										</connectionPointIn>
										<connectionPointOut>
											<relPosition x="61" y="252"/>
										</connectionPointOut>
									</variable>
								</inOutVariables>
								<outputVariables>
									<variable formalParameter="iTotalLumgatesRBT" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="8"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrLumgateWeb" dataType="Arr_I_0_9" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="12"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrSelectedConfiguration" dataType="ARR_1_25_1_5_Int" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="16"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrActiveScenario" dataType="ARR_X_1_25" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="20"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iSelectedScenario" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="24"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iSelectedScene" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="28"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iChosedScene" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="32"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arr5Lumgate" dataType="ARR_X_0_9" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="36"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arr5LumgateValues" dataType="Arr_I_0_9" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="40"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="rAnalogValue" dataType="REAL" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="44"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="wAnalogDiag" dataType="WORD" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="48"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strCloState" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="52"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strMaintenanceState" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="56"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrCurrentDiagram" dataType="ARR_I_1_22" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="60"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iCurrentActual" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="64"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iActualPosition" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="68"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrCurrentDiagramWarningMin" dataType="ARR_I_1_22" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="72"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrCurrentDiagramWarningMax" dataType="ARR_I_1_22" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="76"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrCurrentDiagramAlarmMin" dataType="ARR_I_1_22" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="80"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrCurrentDiagramAlarmMax" dataType="ARR_I_1_22" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="84"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xLumgateEditable" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="88"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strLumgateState" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="92"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="strDiag" dataType="STRING" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="96"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrScale" dataType="Arr_I_0_4" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="100"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xShowMenue1" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="104"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xShowMenue2" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="108"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iDelay" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="112"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="arrAnalogDiag" dataType="ARR_W_1_4" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="116"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="xShowMenue3" dataType="BOOL" invertable="true" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="120"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iSelectedRBT" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="124"/>
										</connectionPointOut>
									</variable>
									<variable formalParameter="iTempSelectedLumgate" dataType="INT" hideable="true">
										<connectionPointOut>
											<relPosition x="59" y="128"/>
										</connectionPointOut>
									</variable>
								</outputVariables>
							</block>
							<inVariable localId="207" width="18" height="2">
								<position x="106" y="29"/>
								<connectionPointOut>
									<relPosition x="18" y="1"/>
								</connectionPointOut>
								<expression>udtWeb_Lumgate</expression>
							</inVariable>
						</worksheet>
					</FBD>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="MainT" xmlns="http://www.w3.org/1999/xhtml">Copyright © 2013 Phoenix Contact GmbH &amp;amp; Co. KG D-32825-Blomberg<br/>All rights reserved<br/>
							<br/>**************************************************************************<br/>
							<br/>Name	:	ALI_00_01<br/>
							<br/>State	:	[x] evaluation  [ ] released<br/>
							<br/>Develop Environment	:	<br/>	PC WORX 	:	6.30.1202<br/>	Controller	:	ILC 350 PN<br/>	Devices		: 	IBS IL 24 RB-T-PAC<br/>
							<br/>**************************************************************************<br/>
							<br/>Change Notes:<br/>
							<br/>Date		Version		Author		Description<br/>--------------------------------------------------------------------------<br/>21.12.15	2.00		PxCE/JVo	initial version<br/>05.09.16	2.01		PxCE/JVo	implemented new requirement "EPO-IS-268-1663, Lumgate 2nd relay usage"<br/>10.11.16	3.00		PxCE/JVo	rename version (customer requirement)<br/>21.11.16	3.01		PxCE/JVo	Bug fix: Change relay variable in case of active special scenes<br/>
							<br/>**************************************************************************<br/>
							<br/>This Program is designed to communicate with Lumgate devices via the IBS IL 24 RB-T-PAC Module.<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="Hardware" pouType="program" pouGroup="Programs" lastChange="2016-03-08T15:59:03">
				<interface>
					<localVars retain="false">
						<variable name="Serial_Request" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="Serial_Add_Error" group="Local Variables">
							<type>
								<derived name="ARR_W_0_1"/>
							</type>
						</variable>
						<variable name="Serial_Send" group="Local Variables">
							<type>
								<derived name="ARR_W_0_10"/>
							</type>
						</variable>
						<variable name="Serial_Receive" group="Local Variables">
							<type>
								<derived name="ARR_W_0_90"/>
							</type>
						</variable>
						<variable name="Serial_NDR" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="Serial_Error" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="counter_serial" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="WDummy" group="Local Variables">
							<type>
								<WORD/>
							</type>
						</variable>
						<variable name="ByDummy" group="Local Variables">
							<type>
								<BYTE/>
							</type>
						</variable>
						<variable name="SDummy" group="Local Variables">
							<type>
								<derived name="String_3"/>
							</type>
						</variable>
						<variable name="Index_Read_Version" group="Local Variables">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="Version_Add_Error" group="Local Variables">
							<type>
								<derived name="ARR_W_0_1"/>
							</type>
						</variable>
						<variable name="Version_Send" group="Local Variables">
							<type>
								<derived name="ARR_W_0_10"/>
							</type>
						</variable>
						<variable name="Version_Receive" group="Local Variables">
							<type>
								<derived name="ARR_W_0_90"/>
							</type>
						</variable>
						<variable name="Version_NDR" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="Version_Error" group="Local Variables">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="IB_CONTROL_Serial" group="Function Instances">
							<type>
								<derived name="IB_CONTROL"/>
							</type>
						</variable>
						<variable name="CPU_CONTROL_Version" group="Function Instances">
							<type>
								<derived name="CPU_CONTROL"/>
							</type>
						</variable>
						<variable name="Version_Request" group="Function Instances">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="Temp_String_Address" group="Function Instances">
							<type>
								<string length="80"/>
							</type>
						</variable>
					</localVars>
					<externalVars retain="false">
						<variable name="strGateway" group="Function Instances">
							<type>
								<derived name="STRING_20"/>
							</type>
						</variable>
						<variable name="strNetworkConfiguration" group="Function Instances">
							<type>
								<derived name="udtNetwork"/>
							</type>
						</variable>
						<variable name="strHW_SerNr" group="Global Variables">
							<type>
								<derived name="STRING_20"/>
							</type>
						</variable>
						<variable name="strHW_Version" group="Global Variables">
							<type>
								<derived name="STRING_20"/>
							</type>
						</variable>
						<variable name="strFW_Version" group="Global Variables">
							<type>
								<derived name="STRING_20"/>
							</type>
						</variable>
						<variable name="strIP_Address" group="Global Variables">
							<type>
								<derived name="STRING_20"/>
							</type>
						</variable>
						<variable name="strSubnetMask" group="Global Variables">
							<type>
								<derived name="STRING_20"/>
							</type>
						</variable>
						<variable name="udtWebvisit" group="Global Variables">
							<type>
								<derived name="udtWeb"/>
							</type>
						</variable>
					</externalVars>
				</interface>
				<body>
					<ST>
						<worksheet name="Diagnostic">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Reading serial number, IP, subnet, HW, FW *)<br/>
									<br/>Case Index_Read_Version Of<br/>
									<br/>0:	Serial_Send[0]:=Word#16#032A;<br/>    Serial_Send[1]:=Word#0000;<br/>   	Serial_Send[2]:=Word#16#0;<br/>    Serial_Send[3]:=Word#16#0;<br/>    Serial_Send[4]:=Word#16#0;<br/>    Serial_Send[5]:=Word#16#0;<br/>    Serial_Send[6]:=Word#16#0;<br/>    Serial_Send[7]:=Word#16#0;<br/>    Serial_Receive[0]:=Word#16#0;<br/>    Serial_Receive[1]:=Word#16#0;<br/>
									<br/>	Serial_Request:= True;<br/>	Index_Read_Version:= 1;<br/>
									<br/>1:	If Serial_NDR Then<br/>		Serial_Request:= False;<br/>		If Serial_Receive[0] = Word#16#832A &amp; Serial_Receive[1] &gt; Word#16#10 Then<br/>		<br/>			(*strHW_SerNr:= '';*)<br/>	        For counter_serial:= 78 to 83 Do<br/>	        	WDummy:=(Serial_Receive[counter_serial]); <br/>	           	WDummy:= Ror_Word(WDummy,8); <br/>	            ByDummy:= Word_To_Byte(WDummy);<br/>	            If Bydummy &lt;&gt; Byte#32 then<br/>	            	SDummy:= Byte_To_String(ByDummy,'%c');<br/>	                strHW_SerNr:= Concat(strHW_SerNr,SDummy);<br/>	            End_if;<br/>	        	WDummy:=(Serial_Receive[counter_serial]); <br/>	            ByDummy:= Word_To_Byte(WDummy);<br/>	            If Bydummy &lt;&gt; Byte#32 then<br/>	            	SDummy:= Byte_To_String(ByDummy,'%c');<br/>	                strHW_SerNr:= Concat(strHW_SerNr,SDummy);<br/>	            End_if;<br/>	         End_for;<br/>		End_if;<br/>	Index_Read_Version:= 2;<br/>	End_if;<br/>
									<br/>2:	Version_Send[0] := WORD#16#0295;<br/>	Version_Request:= True;<br/>	Index_Read_Version:= 3;<br/>
									<br/>3:	If Version_NDR Then<br/>		Version_Request:= False;<br/>		If Version_Receive[0] = Word#16#8295 Then<br/>		<br/>			(*strHW_Version:= '';*)<br/>	        ByDummy:= Version_Receive[62].B0;<br/>	        If Bydummy &lt;&gt; Byte#32 then<br/>	            SDummy:= Byte_To_String(ByDummy,'%c');<br/>	            strHW_Version:= Concat(strHW_Version,SDummy);<br/>	        End_if;<br/>
									<br/>	        ByDummy:= Version_Receive[63].B1;<br/>	        If Bydummy &lt;&gt; Byte#32 then<br/>	            SDummy:= Byte_To_String(ByDummy,'%c');<br/>	            strHW_Version:= Concat(strHW_Version,SDummy);<br/>	        End_if;<br/>
									<br/>			(*strFW_Version:= '';*)<br/>	        ByDummy:= Version_Receive[21].B1;<br/>	        If Bydummy &lt;&gt; Byte#32 then<br/>	            SDummy:= Byte_To_String(ByDummy,'%c');<br/>	            strFW_Version:= Concat(strFW_Version,SDummy);<br/>	        End_if;<br/>	        ByDummy:= Version_Receive[21].B0;<br/>	        If Bydummy &lt;&gt; Byte#32 then<br/>	            SDummy:= Byte_To_String(ByDummy,'%c');<br/>	            strFW_Version:= Concat(strFW_Version,SDummy);<br/>	        End_if;<br/>	        ByDummy:= Version_Receive[22].B1;<br/>	        If Bydummy &lt;&gt; Byte#32 then<br/>	            SDummy:= Byte_To_String(ByDummy,'%c');<br/>	            strFW_Version:= Concat(strFW_Version,SDummy);<br/>	        End_if;<br/>	        ByDummy:= Version_Receive[22].B0;<br/>	        If Bydummy &lt;&gt; Byte#32 then<br/>	            SDummy:= Byte_To_String(ByDummy,'%c');<br/>	            strFW_Version:= Concat(strFW_Version,SDummy);<br/>	        End_if;<br/>		End_if;<br/>
									<br/>	Index_Read_Version:= 4;<br/>	End_if;<br/>
									<br/>4:	Version_Send[0] := WORD#16#029C;<br/>	Version_Request:= True;<br/>	Index_Read_Version:= 5;<br/>
									<br/>5:	If Version_NDR Then<br/>visit.sSubnet:= strSubnetMask;<br/>			udtWebvisit.sGateway:= strGateway;<br/>
									<br/>		End_if;<br/>		Index_Read_Version:= 10;<br/>
									<br/>
									<br/>End_Case;<br/>
									<br/>IB_CONTROL_Serial(REQ:= Serial_Request,<br/>ADD_ERROR:= Serial_Add_Error,<br/>SD_1:= Serial_Send,<br/>RD_1:= Serial_Receive);<br/>
									<br/>Serial_NDR:= IB_CONTROL_Serial.NDR;<br/>Serial_Error:= IB_CONTROL_Serial.ERROR;<br/>Serial_Add_Error:= IB_CONTROL_Serial.ADD_ERROR;<br/>Serial_Send:= IB_CONTROL_Serial.SD_1;<br/>Serial_Receive:= IB_CONTROL_Serial.RD_1;<br/>
									<br/>
									<br/>CPU_CONTROL_Version(REQ:= Version_Request,<br/>ADD_ERROR:= Version_Add_Error,<br/>SD_1:= Version_Send,<br/>RD_1:= Version_Receive);<br/>
									<br/>Version_NDR:= CPU_CONTROL_Version.NDR;<br/>Version_Error:= CPU_CONTROL_Version.ERROR;<br/>Version_Add_Error:= CPU_CONTROL_Version.ADD_ERROR;<br/>Version_Send:= CPU_CONTROL_Version.SD_1;<br/>Version_Receive:= CPU_CONTROL_Version.RD_1;<br/>
								</p>
							</html>
						</worksheet>
						<worksheet name="Set_Network">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* Change network settings, restart has to be done manually *)<br/>
									<br/>FB_Set_IP(Save_Settings:= strNetworkConfiguration.xSave,<br/>Str_IP:= strNetworkConfiguration.sIP,<br/>Str_Subnet:= strNetworkConfiguration.sSubnet,<br/>Str_Gateway:= strNetworkConfiguration.sGateway);<br/>
									<br/>strNetworkConfiguration.xDone:= FB_Set_IP.Done;<br/>strNetworkConfiguration.sMessage:=FB_Set_IP.Message;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="HardwareT" xmlns="http://www.w3.org/1999/xhtml">(****************************************************************************)<br/>(*																			*)<br/>(*	Change Notes:															*)<br/>(*																			*)<br/>(*	Date		Version		Author			Description						*)<br/>(****************************************************************************)<br/>(* 16.01.2011	1.0    		Sven Lemmens	Initial version					*)<br/>(* 18.01.2011	1.1    		Sven Lemmens	Changement in code sheet		*)<br/>(* 'Outgoing_Email'step 10 from case Index_Read_Email has been changed.     *)<br/>(* Problem: the first mail after a mail with attachment was not sended		*)<br/>
						</div>
					</html>
				</documentation>
			</pou>
			<pou name="FB_L20_ChooseScene_01" pouType="functionBlock" pouGroup="TCS_functions" lastChange="2016-07-14T11:09:00">
				<interface>
					<inputVars retain="false">
						<variable name="iActualScenario" group="Input parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scenario for searching scene</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrSceneConfig" group="Input parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scenario / Scene configuration</p>
								</html>
							</documentation>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="iChosenScene" group="Output parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Selected Scene</p>
								</html>
							</documentation>
						</variable>
						<variable name="iChosenOption" group="Output parameter">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">accord to option...</p>
								</html>
							</documentation>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="xActivate" group="In- Output parameter">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Execute FB</p>
								</html>
							</documentation>
						</variable>
						<variable name="arrSceneHourCounter" group="In- Output parameter">
							<type>
								<derived name="arr_1_50_udtLumgatePart1"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Scene hour counter table</p>
								</html>
							</documentation>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="xFirstResult" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iLoop" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="udiOption" group="Default">
							<type>
								<UDINT/>
							</type>
						</variable>
						<variable name="udiTempOption" group="Default">
							<type>
								<UDINT/>
							</type>
						</variable>
						<variable name="iTempScene" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_L20_ChooseScene_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* L20_ChooseScenario *)<br/>
									<br/>If xActivate then	(* only one cycle = Execute *)<br/>	xFirstResult	:=	False;<br/>	iChosenScene	:=	0;<br/>
									<br/>	For iLoop := 1 to 5 do	(* Compare Scene option hour counter *)<br/>		iTempScene	:=	arrSceneConfig[iActualScenario][iLoop];<br/>		If iTempScene &gt; 0 and iTempScene &lt; 51 then<br/>			udiOption	:=	arrSceneHourCounter[iTempScene].udiHours * Udint#1000<br/>						+ Int_To_Udint(arrSceneHourCounter[iTempScene].iMinutes * 10)<br/>						+ Int_To_Udint(arrSceneHourCounter[iTempScene].iSeconds / 10);<br/>
									<br/>			If xFirstResult then<br/>				If udiOption &lt; udiTempOption then	(* Compare Scene hour counters *)<br/>					udiTempOption	:=	udiOption;<br/>					iChosenScene	:=	iLoop;<br/>				End_If;<br/>			Else<br/>				udiTempOption	:=	udiOption;<br/>				xFirstResult	:=	True;<br/>				iChosenScene	:=	iLoop;			(* Select Scene *)<br/>			End_If;<br/>		End_If;<br/>	End_For;<br/>
									<br/>	If iChosenScene = 0 then<br/>		iChosenScene	:=	0;<br/>	Else<br/>		iChosenOption	:=	iChosenScene;<br/>		iChosenScene	:=	arrSceneConfig[iActualScenario][iChosenScene];<br/>	End_If;<br/>	xActivate	:=	False;<br/>End_If;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_L20_ChooseScenario_0T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_SelectScene_01" pouType="functionBlock" pouGroup="TCS_functions" lastChange="2016-07-14T11:10:14">
				<interface>
					<inputVars retain="false">
						<variable name="xActivate" group="Input parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xDataMasterValid" group="Input parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="arrAnalogValues" group="Input parameter">
							<type>
								<derived name="arr_1_11_udtInput"/>
							</type>
						</variable>
						<variable name="xPulseSecond" group="Input parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iSelectAnalogValue1" group="Input parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iSelectAnalogValue2" group="Input parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iSelectAnalogValue3" group="Input parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iSelectAnalogValue4" group="Input parameter">
							<type>
								<INT/>
							</type>
						</variable>
					</inputVars>
					<outputVars retain="false">
						<variable name="xActive" group="Output parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
					</outputVars>
					<inOutVars retain="false">
						<variable name="udtSceneMode" group="In- output parameter">
							<type>
								<derived name="udtScene"/>
							</type>
						</variable>
						<variable name="arrSceneHourCounter" group="In- output parameter">
							<type>
								<derived name="arr_1_50_udtLumgatePart1"/>
							</type>
						</variable>
						<variable name="arrLevelConfiguration" group="In- output parameter">
							<type>
								<derived name="ARR_UDT_L20Config"/>
							</type>
						</variable>
						<variable name="arrScenarioConfiguration" group="In- output parameter">
							<type>
								<derived name="ARR_I_1_4_1_25_1_5"/>
							</type>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="FB_ThresholdTable_01_1" group="Instanzes">
							<type>
								<derived name="FB_ThresholdTable_01"/>
							</type>
						</variable>
						<variable name="FB_ThresholdTable_01_2" group="Instanzes">
							<type>
								<derived name="FB_ThresholdTable_01"/>
							</type>
						</variable>
						<variable name="FB_ThresholdTable_01_3" group="Instanzes">
							<type>
								<derived name="FB_ThresholdTable_01"/>
							</type>
						</variable>
						<variable name="FB_ThresholdTable_01_4" group="Instanzes">
							<type>
								<derived name="FB_ThresholdTable_01"/>
							</type>
						</variable>
						<variable name="iLoop" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iTempMode" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_SelectScene_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">	(* SelectScene *)<br/>If xActivate then<br/>	xActive	:=	True;<br/>	<br/>	(* Supply Threshold tables with threshold values *)<br/>	FB_ThresholdTable_01_1(udtLevelConfiguration:= arrLevelConfiguration[1],<br/>	arrSceneConfiguration				:=	arrScenarioConfiguration[1],<br/>	arrSceneHourCounter					:=	arrSceneHourCounter);<br/>
									<br/>	arrSceneHourCounter					:=	FB_ThresholdTable_01_1.arrSceneHourCounter;<br/>
									<br/>	FB_ThresholdTable_01_2(udtLevelConfiguration:= arrLevelConfiguration[2],<br/>	arrSceneConfiguration				:= 	arrScenarioConfiguration[2],<br/>	arrSceneHourCounter					:=	arrSceneHourCounter);<br/>
									<br/>	arrSceneHourCounter					:=	FB_ThresholdTable_01_2.arrSceneHourCounter;<br/>
									<br/>	FB_ThresholdTable_01_3(udtLevelConfiguration:= arrLevelConfiguration[3],<br/>	arrSceneConfiguration				:= 	arrScenarioConfiguration[3],<br/>	arrSceneHourCounter					:=	arrSceneHourCounter);<br/>
									<br/>	arrSceneHourCounter					:=	FB_ThresholdTable_01_3.arrSceneHourCounter;<br/>
									<br/>	FB_ThresholdTable_01_4(udtLevelConfiguration:= arrLevelConfiguration[4],<br/>	arrSceneConfiguration				:= 	arrScenarioConfiguration[4],<br/>	arrSceneHourCounter					:=	arrSceneHourCounter);<br/>
									<br/>	arrSceneHourCounter					:=	FB_ThresholdTable_01_4.arrSceneHourCounter;<br/>
									<br/>	(* Output calculated Scenes, Scenarios and Scene option positon number *)<br/>	udtSceneMode.arrOwnInputScene[1]	:=	FB_ThresholdTable_01_1.iScene;<br/>	udtSceneMode.arrScenario[1]			:=	FB_ThresholdTable_01_1.iScenario;<br/>	udtSceneMode.arrScenarioOption[1]	:=	FB_ThresholdTable_01_1.iChosenScene;<br/>	udtSceneMode.arrOwnInputScene[2]	:=	FB_ThresholdTable_01_2.iScene;<br/>	udtSceneMode.arrScenario[2]			:=	FB_ThresholdTable_01_2.iScenario;<br/>	udtSceneMode.arrScenarioOption[2]	:=	FB_ThresholdTable_01_2.iChosenScene;<br/>	udtSceneMode.arrOwnInputScene[3]	:=	FB_ThresholdTable_01_3.iScene;<br/>	udtSceneMode.arrScenario[3]			:=	FB_ThresholdTable_01_3.iScenario;<br/>	udtSceneMode.arrScenarioOption[3]	:=	FB_ThresholdTable_01_3.iChosenScene;<br/>	udtSceneMode.arrOwnInputScene[4]	:=	FB_ThresholdTable_01_4.iScene;<br/>	udtSceneMode.arrScenario[4]			:=	FB_ThresholdTable_01_4.iScenario;<br/>	udtSceneMode.arrScenarioOption[4]	:=	FB_ThresholdTable_01_4.iChosenScene;<br/>
									<br/>	For iLoop := 1 to 4 do<br/>		iTempMode	:= 	Limit_Int(1,udtSceneMode.arrMode[iLoop],4); (* 1 = Manual, 2 = Own input, 3 = external input, 4 = external input with own input as backup *)<br/>		Case iTempMode of<br/>			1:<br/>				udtSceneMode.arrActualScene[iLoop]:= udtSceneMode.arrManualScene[iLoop];<br/>			2:<br/>				udtSceneMode.arrActualScene[iLoop]:= udtSceneMode.arrOwnInputScene[iLoop];<br/>			3:<br/>				udtSceneMode.arrActualScene[iLoop]:= udtSceneMode.arrExternalInputScene[iLoop];<br/>			4:<br/>				(* not used at the moment *)<br/>				If xDataMasterValid then<br/>					udtSceneMode.arrActualScene[iLoop]:= udtSceneMode.arrExternalInputScene[iLoop];<br/>				Else<br/>					udtSceneMode.arrActualScene[iLoop]:= udtSceneMode.arrOwnInputScene[iLoop];<br/>				End_If;<br/>		End_Case;<br/>	End_For;<br/>	(* Supply Threshold tables with an analog input value *)<br/>	If iSelectAnalogValue1 &gt; 0 then<br/>		FB_ThresholdTable_01_1.arrInputValues[1].rValue  	:=	arrAnalogValues[iSelectAnalogValue1].rValue;<br/>		FB_ThresholdTable_01_1.arrInputValues[1].xValid  	:=	arrAnalogValues[iSelectAnalogValue1].xValid;<br/>	Else<br/>		FB_ThresholdTable_01_1.arrInputValues[1].rValue  	:=	0.0;<br/>		FB_ThresholdTable_01_1.arrInputValues[1].xValid  	:=	False;<br/>	End_if;<br/>	FB_ThresholdTable_01_1.xPulseSecond						:=	xPulseSecond;<br/>
									<br/>	If iSelectAnalogValue2 &gt; 0 then<br/>		FB_ThresholdTable_01_2.arrInputValues[1].rValue  	:=	arrAnalogValues[iSelectAnalogValue2].rValue;<br/>		FB_ThresholdTable_01_2.arrInputValues[1].xValid  	:=	arrAnalogValues[iSelectAnalogValue2].xValid;<br/>	Else<br/>		FB_ThresholdTable_01_2.arrInputValues[1].rValue  	:=	0.0;<br/>		FB_ThresholdTable_01_2.arrInputValues[1].xValid  	:=	False;<br/>	End_if;<br/>	FB_ThresholdTable_01_2.xPulseSecond						:=	xPulseSecond;<br/>
									<br/>	If iSelectAnalogValue3 &gt; 0 then<br/>		FB_ThresholdTable_01_3.arrInputValues[1].rValue  	:=	arrAnalogValues[iSelectAnalogValue3].rValue;<br/>		FB_ThresholdTable_01_3.arrInputValues[1].xValid  	:=	arrAnalogValues[iSelectAnalogValue3].xValid;<br/>	Else<br/>		FB_ThresholdTable_01_3.arrInputValues[1].rValue  	:=	0.0;<br/>		FB_ThresholdTable_01_3.arrInputValues[1].xValid  	:=	False;<br/>	End_if;<br/>	FB_ThresholdTable_01_3.xPulseSecond						:=	xPulseSecond;<br/>
									<br/>	If iSelectAnalogValue4 &gt; 0 then<br/>		FB_ThresholdTable_01_4.arrInputValues[1].rValue  	:=	arrAnalogValues[iSelectAnalogValue4].rValue;<br/>		FB_ThresholdTable_01_4.arrInputValues[1].xValid  	:=	arrAnalogValues[iSelectAnalogValue4].xValid;<br/>	Else<br/>		FB_ThresholdTable_01_4.arrInputValues[1].rValue  	:=	0.0;<br/>		FB_ThresholdTable_01_4.arrInputValues[1].xValid  	:=	False;<br/>	End_if;<br/>	FB_ThresholdTable_01_4.xPulseSecond						:=	xPulseSecond;<br/>
									<br/>Else<br/>	xActive	:=	False;<br/>End_if;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_SelectScene_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_ThresholdTable_01" pouType="functionBlock" pouGroup="TCS_functions" lastChange="2016-07-14T11:09:09">
				<interface>
					<outputVars retain="false">
						<variable name="iScene" group="Output parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iScenario" group="Output parameter">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iChosenScene" group="Output parameter">
							<type>
								<INT/>
							</type>
						</variable>
					</outputVars>
					<inputVars retain="false">
						<variable name="arrSceneConfiguration" group="Input parameter">
							<type>
								<derived name="ARR_1_25_1_5_Int"/>
							</type>
						</variable>
						<variable name="xPulseSecond" group="Input parameter">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="udtLevelConfiguration" group="Input parameter">
							<type>
								<derived name="udtL20Config"/>
							</type>
						</variable>
						<variable name="arrInputValues" group="Input parameter">
							<type>
								<derived name="arr_1_11_udtInput"/>
							</type>
						</variable>
					</inputVars>
					<inOutVars retain="false">
						<variable name="arrSceneHourCounter" group="In- Output parameter">
							<type>
								<derived name="arr_1_50_udtLumgatePart1"/>
							</type>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="FB_L20_ChooseScene_01_1" group="Instanzes">
							<type>
								<derived name="FB_L20_ChooseScene_01"/>
							</type>
						</variable>
						<variable name="FB_L20_ChooseScene_01_2" group="Instanzes">
							<type>
								<derived name="FB_L20_ChooseScene_01"/>
							</type>
						</variable>
						<variable name="FB_L20_ChooseScene_01_3" group="Instanzes">
							<type>
								<derived name="FB_L20_ChooseScene_01"/>
							</type>
						</variable>
						<variable name="FB_L20_ChooseScene_01_4" group="Instanzes">
							<type>
								<derived name="FB_L20_ChooseScene_01"/>
							</type>
						</variable>
						<variable name="FB_LuminanceLevel_01_1" group="Instanzes">
							<type>
								<derived name="FB_LuminanceLevel_01"/>
							</type>
						</variable>
						<variable name="FB_LuminanceLevel_01_2" group="Instanzes">
							<type>
								<derived name="FB_LuminanceLevel_01"/>
							</type>
						</variable>
						<variable name="FB_LuminanceLevel_01_3" group="Instanzes">
							<type>
								<derived name="FB_LuminanceLevel_01"/>
							</type>
						</variable>
						<variable name="FB_LuminanceLevel_01_4" group="Instanzes">
							<type>
								<derived name="FB_LuminanceLevel_01"/>
							</type>
						</variable>
						<variable name="xValidSceneConfig1" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xSelectSceneConfig1" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xValidSceneConfig2" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xSelectSceneConfig2" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xValidSceneConfig3" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xSelectSceneConfig3" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xValidSceneConfig4" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xSelectSceneConfig4" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="iActualLevelConfig1" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iActualLevelConfig2" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iActualLevelConfig3" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iActualLevelConfig4" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_ThresholdTable_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(* ThresholdTable *)<br/>
									<br/>(* Level calculation based on threshold config table 1, config 1 *)<br/>FB_LuminanceLevel_01_1(xActivate	:= 	udtLevelConfiguration.xActive,<br/>xPulseSecond					:= 	xPulseSecond,<br/>iDelay							:= 	udtLevelConfiguration.iDelay,<br/>iHysteric						:=	udtLevelConfiguration.iHysteric,<br/>iValueSelection					:= 	1,<br/>arrValue						:=	arrInputValues,<br/>arrLevels						:= 	udtLevelConfiguration.arrScenarioConfig1,<br/>arrScenarioActive				:= 	udtLevelConfiguration.arrScenarioActive,<br/>xSelectScene					:= 	xSelectSceneConfig1);<br/>
									<br/>iActualLevelConfig1				:=	FB_LuminanceLevel_01_1.iLevel;<br/>xValidSceneConfig1				:=	FB_LuminanceLevel_01_1.xValid;<br/>xSelectSceneConfig1				:=	FB_LuminanceLevel_01_1.xSelectScene;<br/>
									<br/>(* Level calculation based on threshold config table 1, config 2 *)<br/>FB_LuminanceLevel_01_2(xActivate	:= 	udtLevelConfiguration.xActive,<br/>xPulseSecond					:= 	xPulseSecond,<br/>iDelay							:= 	udtLevelConfiguration.iDelay,<br/>iHysteric						:=	udtLevelConfiguration.iHysteric,<br/>iValueSelection					:= 	1,<br/>arrValue						:= 	arrInputValues,<br/>arrLevels						:= 	udtLevelConfiguration.arrScenarioConfig2,<br/>arrScenarioActive				:= 	udtLevelConfiguration.arrScenarioActive,<br/>xSelectScene					:= 	xSelectSceneConfig2);<br/>
									<br/>iActualLevelConfig2				:=	FB_LuminanceLevel_01_2.iLevel;<br/>xValidSceneConfig2				:=	FB_LuminanceLevel_01_2.xValid;<br/>xSelectSceneConfig2				:=	FB_LuminanceLevel_01_2.xSelectScene;<br/>
									<br/>(* Level calculation based on threshold config table 1, config 3 *)<br/>FB_LuminanceLevel_01_3(xActivate	:= 	udtLevelConfiguration.xActive,<br/>xPulseSecond					:=	xPulseSecond,<br/>iDelay							:= 	udtLevelConfiguration.iDelay,<br/>iHysteric						:=	udtLevelConfiguration.iHysteric,<br/>iValueSelection					:= 	1,<br/>arrValue						:= 	arrInputValues,<br/>arrLevels						:= 	udtLevelConfiguration.arrScenarioConfig3,<br/>arrScenarioActive				:= 	udtLevelConfiguration.arrScenarioActive,<br/>xSelectScene					:= 	xSelectSceneConfig3);<br/>
									<br/>iActualLevelConfig3				:=	FB_LuminanceLevel_01_3.iLevel;<br/>xValidSceneConfig3				:=	FB_LuminanceLevel_01_3.xValid;<br/>xSelectSceneConfig3				:=	FB_LuminanceLevel_01_3.xSelectScene;<br/>
									<br/>(* Level calculation based on threshold config table 1, config 4 *)<br/>FB_LuminanceLevel_01_4(xActivate	:=	udtLevelConfiguration.xActive,<br/>iValueSelection					:=	1,<br/>xPulseSecond					:=	xPulseSecond,<br/>iDelay							:=	udtLevelConfiguration.iDelay,<br/>iHysteric						:=	udtLevelConfiguration.iHysteric,<br/>arrValue						:=	arrInputValues,<br/>arrLevels						:=	udtLevelConfiguration.arrScenarioConfig4,<br/>arrScenarioActive				:=	udtLevelConfiguration.arrScenarioActive,<br/>xSelectScene					:=	xSelectSceneConfig4);<br/>
									<br/>iActualLevelConfig4				:=	FB_LuminanceLevel_01_4.iLevel;<br/>xValidSceneConfig4				:=	FB_LuminanceLevel_01_4.xValid;<br/>xSelectSceneConfig4				:=	FB_LuminanceLevel_01_4.xSelectScene;<br/>
									<br/>
									<br/>(* Scenario selection based on level and hour counters *)<br/>FB_L20_ChooseScene_01_1(iActualScenario	:= 	iActualLevelConfig1,<br/>arrSceneConfig							:= 	arrSceneConfiguration,<br/>xActivate								:= 	xSelectSceneConfig1,<br/>arrSceneHourCounter						:=	arrSceneHourCounter);<br/>
									<br/>arrSceneHourCounter						:=	FB_L20_ChooseScene_01_1.arrSceneHourCounter;<br/>xSelectSceneConfig1						:=	FB_L20_ChooseScene_01_1.xActivate;<br/>
									<br/>(* Scenario selection based on level and hour counters *)<br/>FB_L20_ChooseScene_01_2(iActualScenario	:= 	iActualLevelConfig2,<br/>arrSceneConfig							:= 	arrSceneConfiguration,<br/>xActivate								:= 	xSelectSceneConfig2,<br/>arrSceneHourCounter						:=	arrSceneHourCounter);<br/>
									<br/>arrSceneHourCounter						:=	FB_L20_ChooseScene_01_2.arrSceneHourCounter;<br/>xSelectSceneConfig2						:=	FB_L20_ChooseScene_01_2.xActivate;<br/>
									<br/>(* Scenario selection based on level and hour counters *)<br/>FB_L20_ChooseScene_01_3(iActualScenario	:= 	iActualLevelConfig3,<br/>arrSceneConfig							:= 	arrSceneConfiguration,<br/>xActivate								:= 	xSelectSceneConfig3,<br/>arrSceneHourCounter						:=	arrSceneHourCounter);<br/>
									<br/>arrSceneHourCounter						:=	FB_L20_ChooseScene_01_3.arrSceneHourCounter;<br/>xSelectSceneConfig3						:=	FB_L20_ChooseScene_01_3.xActivate;<br/>
									<br/>(* Scenario selection based on level and hour counters *)<br/>FB_L20_ChooseScene_01_4(iActualScenario	:=	iActualLevelConfig4,<br/>arrSceneConfig							:=	arrSceneConfiguration,<br/>xActivate								:=	xSelectSceneConfig4,<br/>arrSceneHourCounter						:=	arrSceneHourCounter);<br/>
									<br/>xSelectSceneConfig4						:=	FB_L20_ChooseScene_01_4.xActivate;<br/>arrSceneHourCounter						:=	FB_L20_ChooseScene_01_4.arrSceneHourCounter;<br/>
									<br/>
									<br/>
									<br/>If not udtLevelConfiguration.xActive then (* Scene calculation is not necessary *)<br/>	iScene		:=	0;<br/>	iScenario	:=	0;<br/>Else<br/>	If udtLevelConfiguration.xActiveConfig1 Then<br/>		If xValidSceneConfig1 Then<br/>			iScene			:=	FB_L20_ChooseScene_01_1.iChosenScene;<br/>			iScenario		:=	iActualLevelConfig1;<br/>			iChosenScene	:=	FB_L20_ChooseScene_01_1.iChosenOption;<br/>		Else<br/>			iScene			:=	-1;	(* Invalid, use failsafe value *)<br/>			iScenario		:=	0;<br/>			iChosenScene	:=	0;<br/>		End_If;<br/>	Elsif udtLevelConfiguration.xActiveConfig2 Then<br/>		If xValidSceneConfig2 Then<br/>			iScene			:=	FB_L20_ChooseScene_01_2.iChosenScene;<br/>			iScenario		:=	iActualLevelConfig2;<br/>			iChosenScene	:=	FB_L20_ChooseScene_01_2.iChosenOption;<br/>		Else<br/>			iScene			:=	-1;<br/>			iScenario		:=	0;<br/>			iChosenScene	:=	0;<br/>		End_If;<br/>	Elsif  udtLevelConfiguration.xActiveConfig3 Then<br/>		If xValidSceneConfig3 Then<br/>			iScene			:=	FB_L20_ChooseScene_01_3.iChosenScene;<br/>			iScenario		:=	iActualLevelConfig3;<br/>			iChosenScene	:=	FB_L20_ChooseScene_01_3.iChosenOption;<br/>		Else<br/>			iScene			:=	-1;<br/>			iScenario		:=	0;<br/>			iChosenScene	:=	0;<br/>		End_If;<br/>	Elsif  udtLevelConfiguration.xActiveConfig4 Then<br/>		If xValidSceneConfig4 Then<br/>			iScene			:=	FB_L20_ChooseScene_01_4.iChosenScene;<br/>			iScenario		:=	iActualLevelConfig4;<br/>			iChosenScene	:=	FB_L20_ChooseScene_01_4.iChosenOption;<br/>		Else<br/>			iScene			:=	-1;<br/>			iScenario		:=	0;<br/>			iChosenScene	:=	0;<br/>		End_If;<br/>	Else<br/>			iScene			:=	-1;<br/>			iScenario		:=	0;<br/>			iChosenScene	:=	0;<br/>	End_If;<br/>End_If;<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_ThresholdTable_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
			<pou name="FB_SceneHourCounter_01" pouType="functionBlock" pouGroup="TCS_functions" lastChange="2016-07-14T11:22:49">
				<interface>
					<inputVars retain="false">
						<variable name="xPulseSecond" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="arrScenario" group="Default">
							<type>
								<derived name="ARR_I_1_4"/>
							</type>
						</variable>
					</inputVars>
					<inOutVars retain="false">
						<variable name="arrScenarioHourCounter" group="Default">
							<type>
								<derived name="arr_1_50_udtLumgatePart1"/>
							</type>
						</variable>
					</inOutVars>
					<localVars retain="false">
						<variable name="iTempScene" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="FB_HourCounter_01_1" group="Default">
							<type>
								<derived name="FB_HourCounter_01"/>
							</type>
						</variable>
						<variable name="FB_HourCounter_01_2" group="Default">
							<type>
								<derived name="FB_HourCounter_01"/>
							</type>
						</variable>
						<variable name="FB_HourCounter_01_3" group="Default">
							<type>
								<derived name="FB_HourCounter_01"/>
							</type>
						</variable>
						<variable name="FB_HourCounter_01_4" group="Default">
							<type>
								<derived name="FB_HourCounter_01"/>
							</type>
						</variable>
					</localVars>
				</interface>
				<body>
					<ST>
						<worksheet name="FB_SceneHourCounter_01">
							<html xmlns="http://www.w3.org/1999/xhtml">
								<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">(*SceneHourCounter *)<br/>(* Maximum 4 scenes are active at the same time *)<br/>If arrScenario[1] &gt; 0 and arrScenario[1] &lt; 51 then<br/>	iTempScene		:= 	arrScenario[1];<br/>
									<br/>	FB_HourCounter_01_1(xCount	:= 	True,<br/>	xPulseSecond	:=	xPulseSecond,<br/>	udtCounterInfo	:= 	arrScenarioHourCounter[iTempScene]);<br/>	arrScenarioHourCounter[iTempScene]	:= 	FB_HourCounter_01_1.udtCounterInfo;<br/>End_If;<br/>
									<br/>If arrScenario[2] &gt; 0 and arrScenario[2] &lt; 51<br/>	and arrScenario[2] &lt;&gt; arrScenario[1] then<br/>	iTempScene	:= 	arrScenario[2];<br/>
									<br/>	FB_HourCounter_01_2(xCount	:= 	True,<br/>	xPulseSecond	:=	xPulseSecond,<br/>	udtCounterInfo	:= 	arrScenarioHourCounter[iTempScene]);<br/>	arrScenarioHourCounter[iTempScene]	:= 	FB_HourCounter_01_2.udtCounterInfo;<br/>End_If;<br/>
									<br/>If arrScenario[3] &gt; 0 and arrScenario[3] &lt; 51<br/>	and arrScenario[3] &lt;&gt; arrScenario[1]<br/>	and arrScenario[3] &lt;&gt; arrScenario[2] then<br/>	iTempScene	:= 	arrScenario[3];<br/>
									<br/>	FB_HourCounter_01_3(xCount	:= 	True,<br/>	xPulseSecond	:=	xPulseSecond,<br/>	udtCounterInfo	:= 	arrScenarioHourCounter[iTempScene]);<br/>	arrScenarioHourCounter[iTempScene]	:= 	FB_HourCounter_01_3.udtCounterInfo;<br/>End_If;<br/>
									<br/>If arrScenario[4] &gt; 0 and arrScenario[4] &lt; 51<br/>	and arrScenario[4] &lt;&gt; arrScenario[1]<br/>	and arrScenario[4] &lt;&gt; arrScenario[2]<br/>	and arrScenario[4] &lt;&gt; arrScenario[3] then<br/>	iTempScene	:= 	arrScenario[4];<br/>
									<br/>	FB_HourCounter_01_4(xCount	:= 	True,<br/>	xPulseSecond	:=	xPulseSecond,<br/>	udtCounterInfo	:= 	arrScenarioHourCounter[iTempScene]);<br/>	arrScenarioHourCounter[iTempScene]	:= 	FB_HourCounter_01_4.udtCounterInfo;<br/>End_If;<br/>
									<br/>
								</p>
							</html>
						</worksheet>
					</ST>
				</body>
				<documentation>
					<html xmlns="http://www.w3.org/1999/xhtml">
						<div xml:space="preserve" id="MWTDESCRIPTION" wsName="FB_SceneHourCounter_01T" xmlns="http://www.w3.org/1999/xhtml"/>
					</html>
				</documentation>
			</pou>
		</pous>
	</types>
	<instances>
		<configurations>
			<configuration name="STD_CNF" plcType="ARM_L_40">
				<resource name="STD_RES" procType="ILC350PN_395">
					<task priority="0" interval="00:00:00.25" name="STD_TSK" watchdogTime="00:00:00.100" stack="MEDIUM" saveFPU="false" noSuspend="false">
						<pouInstance name="Configuration:Configuration" type="program"/>
						<pouInstance name="Main:Main" type="program"/>
					</task>
					<globalVars retain="false">
						<variable name="arrAnalogValues" pdd="true" group="Default">
							<type>
								<derived name="arr_1_4_udtAnalogInput"/>
							</type>
						</variable>
						<variable name="arrBackupLimit" pdd="true" redundant="true" group="Default">
							<type>
								<derived name="ARR_I_1_4"/>
							</type>
						</variable>
						<variable name="arrG_IP_Address" group="Default">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrG_StdGateway" group="Default">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrG_SubnetMask" group="Default">
							<type>
								<derived name="TB_ARR_B_1_4"/>
							</type>
						</variable>
						<variable name="arrInputPD" address="%IB2" group="Default">
							<type>
								<derived name="ARR_IBS_PD_DATA_B_1_512"/>
							</type>
						</variable>
						<variable name="arrLevelConfiguration" group="Default">
							<type>
								<derived name="ARR_UDT_L20Config"/>
							</type>
						</variable>
					</globalVars>
					<globalVars retain="true">
						<variable name="arrLumgateCurrentConsumption" group="Default">
							<type>
								<derived name="Arr_1_240_1_23_Int"/>
							</type>
						</variable>
					</globalVars>
					<globalVars retain="false">
						<variable name="arrLumgates" group="Default">
							<type>
								<derived name="arr_1_240_udtLumgate"/>
							</type>
						</variable>
						<variable name="arrOutputPD" address="%QB2" group="Default">
							<type>
								<derived name="ARR_IBS_PD_DATA_B_1_512"/>
							</type>
						</variable>
						<variable name="arrScenarioConfiguration" group="Default">
							<type>
								<derived name="ARR_I_1_4_1_25_1_5"/>
							</type>
						</variable>
						<variable name="arrSegment" pdd="true" group="Default">
							<type>
								<derived name="ARR_I_1_4"/>
							</type>
						</variable>
						<variable name="iCommissioning" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</globalVars>
					<globalVars retain="true">
						<variable name="iDelay" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
					</globalVars>
					<globalVars retain="false">
						<variable name="iTotalLumgates" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="iWeb_SelectLG" pdd="true" redundant="true" group="Default">
							<type>
								<INT/>
							</type>
						</variable>
						<variable name="strDiagConfigFiles" redundant="true" group="Default">
							<type>
								<string length="80"/>
							</type>
						</variable>
						<variable name="udtL20Config" pdd="true" redundant="true" group="Default">
							<type>
								<derived name="udtL20Input"/>
							</type>
						</variable>
						<variable name="udtNetworkConfiguration" pdd="true" redundant="true" group="Default">
							<type>
								<derived name="udtNetwork"/>
							</type>
						</variable>
						<variable name="xActivateIB" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xComissioning" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xCommissioning" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xConfigurationPreAlarm" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xDoneIB" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ChangedNetFile" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigAlarm" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileL20" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLevel1" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLevel2" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLevel3" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLevel4" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileLumgate" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="xWeb_ConfigFileNet" pdd="true" redundant="true" group="Default">
							<type>
								<BOOL/>
							</type>
						</variable>
						<variable name="CLOCK_PULSE_10S" address="%MX1.447.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Taktgeber 10s</p>
								</html>
							</documentation>
						</variable>
						<variable name="CLOCK_PULSE_1S" address="%MX1.444.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Taktgeber 1s</p>
								</html>
							</documentation>
						</variable>
						<variable name="CLOCK_PULSE_2S" address="%MX1.445.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Taktgeber 2s</p>
								</html>
							</documentation>
						</variable>
						<variable name="CLOCK_PULSE_5S" address="%MX1.446.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Taktgeber 5s</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_CPU_LOAD_WARNING" address="%MX1.60055.7" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Der Controller befindet sich im Grenzbereich seiner Prozessorauslastung</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_PARAM_2_REG" address="%MW1.60024" group="System Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">erweitertes Diagnoseparameterregister des Control Processor</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_PARAM_REG" address="%MW1.60022" group="System Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnoseparameterregister des Control Processor</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_FAT_ERR" address="%MX1.60020.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">fataler Fehler (Control Processor)</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_FC_DBG" address="%MX1.60021.6" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Laufzeitsystem DEBUG</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_FC_HALT" address="%MX1.60021.3" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Laufzeitsystem HALT</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_FC_LDG" address="%MX1.60021.5" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Laufzeitsystem LOADING</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_FC_RDO" address="%MX1.60021.7" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Laufzeitsystem READONLY</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_FC_RUN" address="%MX1.60021.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Laufzeitsystem RUN</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_FC_STOP" address="%MX1.60021.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Laufzeitsystem STOP</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_PON" address="%MX1.60021.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Power On (Control Processor)</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_RT_ERR" address="%MX1.60020.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Laufzeitfehler (Control Processor)</p>
								</html>
							</documentation>
						</variable>
						<variable name="COP_DIAG_STATUS_REG_WARN" address="%MX1.60020.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Warnung (Control Processor)</p>
								</html>
							</documentation>
						</variable>
						<variable name="ETH_PORT1_100MBIT" address="%MX1.60056.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Die Baudrate des Ethernet Ports beträgt 100MBit/s</p>
								</html>
							</documentation>
						</variable>
						<variable name="ETH_PORT1_FULL_DUPLEX" address="%MX1.60056.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Am Ethernet Port liegt eine Full-Duplex-Verbindung vor</p>
								</html>
							</documentation>
						</variable>
						<variable name="ETH_PORT1_LINK" address="%MX1.60056.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Der Ethernet Port hat eine Verbindung</p>
								</html>
							</documentation>
						</variable>
						<variable name="ETH_PORT2_100MBIT" address="%MX1.60056.5" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Die Baudrate des internen Ethernet Ports beträgt 100MBit/s</p>
								</html>
							</documentation>
						</variable>
						<variable name="ETH_PORT2_FULL_DUPLEX" address="%MX1.60056.6" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Am internen Ethernet Port liegt eine Full-Duplex-Verbindung vor</p>
								</html>
							</documentation>
						</variable>
						<variable name="ETH_PORT2_LINK" address="%MX1.60056.4" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Der interne Ethernet Port hat eine Verbindung</p>
								</html>
							</documentation>
						</variable>
						<variable name="ETH_SRV_FTP_ACTIVE" address="%MX1.60057.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Der Ethernet Dienst FTP ist aktiviert</p>
								</html>
							</documentation>
						</variable>
						<variable name="ETH_SRV_HTTP_ACTIVE" address="%MX1.60057.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Der Ethernet Dienst HTTP ist aktiviert</p>
								</html>
							</documentation>
						</variable>
						<variable name="ETH_SRV_SNTP_ACTIVE" address="%MX1.60057.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Der Ethernet Dienst SNTP ist aktiviert</p>
								</html>
							</documentation>
						</variable>
						<variable name="FLASHCARD_PRESENT" address="%MX1.60050.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Phoenix Contact CF Karte gesteckt</p>
								</html>
							</documentation>
						</variable>
						<variable name="IB_DEVICE_PARAM_ACTIVATED" address="%MX1.60120.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Interbus Geräteparametrierung aktiviert</p>
								</html>
							</documentation>
						</variable>
						<variable name="IB_DEVICE_PARAM_ERROR" address="%MX1.60120.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Interbus Geräteparametrierung Fehler</p>
								</html>
							</documentation>
						</variable>
						<variable name="IB_DEVICE_PARAM_READY" address="%MX1.60120.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Interbus Geräteparametrierung fertig</p>
								</html>
							</documentation>
						</variable>
						<variable name="IBS_FORCE_SYSFAIL" address="%MX3.60102.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Sysfail ansteuern</p>
								</html>
							</documentation>
						</variable>
						<variable name="KEY_SWITCH_RESET" address="%MX1.60053.0" pdd="true" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Start/Stop Schalter in Position MRESET</p>
								</html>
							</documentation>
						</variable>
						<variable name="KEY_SWITCH_RUN_PROG" address="%MX1.60053.3" pdd="true" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Start/Stop Schalter in Position RUN/PROG</p>
								</html>
							</documentation>
						</variable>
						<variable name="KEY_SWITCH_STOP" address="%MX1.60053.1" pdd="true" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Start/Stop Schalter in Position STOP</p>
								</html>
							</documentation>
						</variable>
						<variable name="LICENSE" address="%MD1.60112" group="System Variables">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lizenzinformation</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_PARAM_2_REG_HI" address="%MB1.60005" group="System Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">erweitertes Master Diagnoseparameterregister 2 High Byte</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_PARAM_2_REG_LOW" address="%MB1.60004" group="System Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">erweitertes Master Diagnoseparameterregister 2 Low Byte</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_PARAM_REG_HI" address="%MB1.60003" group="System Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Master Diagnoseparameterregister High Byte</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_PARAM_REG_LOW" address="%MB1.60002" group="System Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Master Diagnoseparameterregister Low Byte</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_ACT" address="%MX1.60001.6" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">ausgewählte Konfiguration ist betriebsbereit</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_BSA" address="%MX1.60000.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bussegment abgeschaltet</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_BUS" address="%MX1.60001.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Busstörung</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_CTRL" address="%MX1.60001.3" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Fehler auf Anschaltbaugruppe/Hardware</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_DCR" address="%MX1.60000.4" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">fehlerhafte Datenzyklen</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_DTC" address="%MX1.60001.4" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnoseroutine ist aktiv</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_HI" address="%MB1.60001" group="System Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Master Diagnosestatusregister High Byte</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_LOW" address="%MB1.60000" group="System Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Master Diagnosestatusregister Low Byte</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_PF" address="%MX1.60001.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Peripheriestörung</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_QUAL" address="%MX1.60000.6" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">festgelegte Fehlerdichte überschritten</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_RDY" address="%MX1.60001.7" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Anschaltbaugruppe ist betriebsbereit</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_RES" address="%MX1.60000.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Standardfunktion negativ bearbeitet</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_RUN" address="%MX1.60001.5" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Datenübertragung ist aktiv</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_SSINFO" address="%MX1.60000.7" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Meldung liegt an</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_SYNCRES" address="%MX1.60000.3" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Synchronisationsfehler</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_SYSFAIL" address="%MX1.60000.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Systemausfall</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_USER" address="%MX1.60001.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Anwenderfehler/Parametrierung</p>
								</html>
							</documentation>
						</variable>
						<variable name="MASTER_DIAG_STATUS_REG_WARN" address="%MX1.60000.5" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">festgelegte Warnzeit überschritten</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT" address="%MW1.60040" group="System Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokale Eingänge</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT0" address="%MX1.60040.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN1</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT1" address="%MX1.60040.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN2</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT10" address="%MX1.60041.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN11</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT11" address="%MX1.60041.3" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN12</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT2" address="%MX1.60040.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN3</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT3" address="%MX1.60040.3" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN4</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT4" address="%MX1.60040.4" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN5</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT5" address="%MX1.60040.5" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN6</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT6" address="%MX1.60040.6" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN7</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT7" address="%MX1.60040.7" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN8</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT8" address="%MX1.60041.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN9</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_INPUT_BIT9" address="%MX1.60041.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Eingang IN10</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_OUTPUT_BIT0" address="%MX3.60000.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Ausgang OUT1</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_OUTPUT_BIT1" address="%MX3.60000.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Ausgang OUT2</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_OUTPUT_BIT2" address="%MX3.60000.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Ausgang OUT3</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_OUTPUT_BIT3" address="%MX3.60000.3" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Lokaler Ausgang OUT4</p>
								</html>
							</documentation>
						</variable>
						<variable name="ONBOARD_OUTPUT_OVERLOAD_0_3" address="%MX1.60051.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Überlastung der lokalen IO's</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_CFG_NAME" address="%MB1.380" group="System Variables">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Name der Konfiguration</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_CRC_PRJ_BOOT" address="%MD1.336" group="System Variables">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">CRC des Bootprojektes</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_CRC_PRJ_RAM" address="%MD1.344" group="System Variables">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">CRC des Projektes im RAM</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_CRC_PRJ_SRC" address="%MD1.340" group="System Variables">
							<type>
								<DWORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">CRC der Projektquellen</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_HAS_PRJ_BOOT" address="%MB1.332" group="System Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Bootprojekt vorhanden</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_HAS_PRJ_RAM" address="%MB1.334" group="System Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Projekt im RAM vorhanden</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_HAS_PRJ_SRC" address="%MB1.333" group="System Variables">
							<type>
								<BYTE/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Projektquellen vorhanden</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_PRJ_NAME" address="%MB1.348" group="System Variables">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Name des Projektes</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_RES_NAME" address="%MB1.412" group="System Variables">
							<type>
								<string length="80"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Name der Ressource</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_SYS_TICK_CNT" address="%MD1.52" group="System Variables">
							<type>
								<DINT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Anzahl der Systemticks</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_1" address="%MB1.1004" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 1 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_10" address="%MB1.1580" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 10 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_11" address="%MB1.1644" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 11 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_12" address="%MB1.1708" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 12 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_13" address="%MB1.1772" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 13 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_14" address="%MB1.1836" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 14 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_15" address="%MB1.1900" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 15 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_16" address="%MB1.1964" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 16 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_2" address="%MB1.1068" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 2 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_3" address="%MB1.1132" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 3 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_4" address="%MB1.1196" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 4 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_5" address="%MB1.1260" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 5 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_6" address="%MB1.1324" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 6 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_7" address="%MB1.1388" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 7 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_8" address="%MB1.1452" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 8 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_9" address="%MB1.1516" group="System Variables">
							<type>
								<derived name="Extended_Task_Info"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Task 9 Information</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_AVAILABLE" address="%MW1.1000" group="System Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Anzahl der verfügbaren SPS Tasks</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TASK_DEFINED" address="%MW1.1002" group="System Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Anzahl der verwendeten Tasks</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLC_TICKS_PER_SEC" address="%MW1.44" group="System Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Systemticks pro Sekunde</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLCDEBUG_BPSET" address="%MX1.1.4" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Breakpoint gesetzt</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLCDEBUG_FORCE" address="%MX1.2.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Variable(n) geforced</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLCDEBUG_POWERFLOW" address="%MX1.2.3" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Powerflow eingeschaltet</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLCMODE_HALT" address="%MX1.0.3" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">SPS Status HALT</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLCMODE_ON" address="%MX1.0.0" pdd="true" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">SPS Status EIN</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLCMODE_RUN" address="%MX1.0.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">SPS Status BETRIEB</p>
								</html>
							</documentation>
						</variable>
						<variable name="PLCMODE_STOP" address="%MX1.0.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">SPS Status STOP</p>
								</html>
							</documentation>
						</variable>
						<variable name="PND_S1S1_DATA_LENGTH" address="%IW63976" group="System Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Prozessdatenlänge</p>
								</html>
							</documentation>
						</variable>
						<variable name="PND_S1S1_INPUT_STATUS_GOOD" address="%IX63975.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">IOC Status der überlagerten Steuerung</p>
								</html>
							</documentation>
						</variable>
						<variable name="PND_S1S1_INPUTS" address="%IB63988" group="System Variables">
							<type>
								<derived name="PND_IO_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Eingangsprozessdaten</p>
								</html>
							</documentation>
						</variable>
						<variable name="PND_S1S1_OUTPUT_STATUS_GOOD" address="%IX63974.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">IOP Status der überlagerten Steuerung</p>
								</html>
							</documentation>
						</variable>
						<variable name="PND_S1S1_OUTPUTS" address="%QB63988" group="System Variables">
							<type>
								<derived name="PND_IO_512"/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Ausgangsprozessdaten</p>
								</html>
							</documentation>
						</variable>
						<variable name="PND_S1S1_PLC_RUN" address="%IX63972.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Status der überlagerten Steuerung</p>
								</html>
							</documentation>
						</variable>
						<variable name="PND_S1S1_VALID_DATA_CYCLE" address="%IX63973.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">IO-Controller hat Verbindung aufgebaut</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_CONFIG_STATUS" address="%MW1.60100" group="System Variables">
							<type>
								<WORD/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Aktueller Konfigurationsstatus des Kontextmanagers</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_CONFIG_STATUS_ACTIVE" address="%MX1.60100.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Kommunikation wird gestartet</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_CONFIG_STATUS_CFG_FAULT" address="%MX1.60100.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Konfigurationsfehler</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_CONFIG_STATUS_READY" address="%MX1.60100.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Kontextmanager ist aktiv</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_DIAG_AVAILABLE" address="%MX1.60108.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnose vorhanden</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_FORCE_FAILSAFE" address="%MX3.60100.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Alle PROFINET-Geräte werden zum Setzen ihrer projektierten Ersatzwerte aufgefordert</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_MAINTENANCE_DEMANDED" address="%MX1.60108.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Wartung gefordert</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_MAINTENANCE_REQUIRED" address="%MX1.60108.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Wartung erforderlich</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_SYSTEM_BF" address="%MX1.60104.0 " group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Fehlende Verbindung zu einem projektierten PROFINET-Gerät</p>
								</html>
							</documentation>
						</variable>
						<variable name="PNIO_SYSTEM_SF" address="%MX1.60106.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Diagnosealarm auf einem projektierten PROFINET-Gerät</p>
								</html>
							</documentation>
						</variable>
						<variable name="POWER_SUPPLY_INPUTS_OK" address="%MX1.60052.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">24 V Versorgung der lokalen Eingänge i.O.</p>
								</html>
							</documentation>
						</variable>
						<variable name="POWER_SUPPLY_MAIN_OK" address="%MX1.60052.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">24 V der Hauptversorgungsspannung i.O.</p>
								</html>
							</documentation>
						</variable>
						<variable name="POWER_SUPPLY_OUTPUTS_0_3_OK" address="%MX1.60052.2" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">24 V Versorgung der lokalen Ausgänge i.O. (Bit0..3)</p>
								</html>
							</documentation>
						</variable>
						<variable name="RTC_BATTERY_LOW" address="%MX1.60054.1" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Niedrige Kapazität der Batterie der Echtzeituhr</p>
								</html>
							</documentation>
						</variable>
						<variable name="RTC_DATA_INVALID" address="%MX1.60054.0" group="System Variables">
							<type>
								<BOOL/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Daten der Echtzeituhr ungültig</p>
								</html>
							</documentation>
						</variable>
						<variable name="RTC_DAY" address="%MW1.60068" group="System Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Systemzeit (Tag)</p>
								</html>
							</documentation>
						</variable>
						<variable name="RTC_HOURS" address="%MW1.60060" group="System Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Systemzeit (Stunden)</p>
								</html>
							</documentation>
						</variable>
						<variable name="RTC_MINUTES" address="%MW1.60062" group="System Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Systemzeit (Minuten)</p>
								</html>
							</documentation>
						</variable>
						<variable name="RTC_MONTH" address="%MW1.60070" group="System Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Systemzeit (Monat)</p>
								</html>
							</documentation>
						</variable>
						<variable name="RTC_SECONDS" address="%MW1.60064" group="System Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Systemzeit (Sekunden)</p>
								</html>
							</documentation>
						</variable>
						<variable name="RTC_YEAR" address="%MW1.60072" group="System Variables">
							<type>
								<INT/>
							</type>
							<documentation>
								<html xmlns="http://www.w3.org/1999/xhtml">
									<p xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">Systemzeit (Jahr)</p>
								</html>
							</documentation>
						</variable>
					</globalVars>
				</resource>
			</configuration>
		</configurations>
	</instances>
</project>